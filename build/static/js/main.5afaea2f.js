/*! For license information please see main.5afaea2f.js.LICENSE.txt */
(()=>{var e={540:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.isForwardRef=function(e){return _(e)===d}},904:(e,t,n)=>{"use strict";e.exports=n(540)},172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(396);n(554);var i=n(43);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var p=function(){function e(t){s(this,e),l(this,"handlers",void 0),this.handlers=t.slice(0)}return c(e,[{key:"addHandlers",value:function(t){for(var n=this.handlers.slice(0),r=t.length,i=0;i<r;i+=1)n.push(t[i]);return new e(n)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlers.length-1;if(t){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](e));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(e)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(t){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var o=this.handlers[i];-1===t.indexOf(o)&&n.push(o)}return new e(n)}}]),e}();function m(e){var t=new Map;return e.forEach((function(e,n){t.set(n,e)})),t}function g(e){return Array.isArray(e)?e:[e]}function v(e){return"document"===e?document:"window"===e?window:function(e){return null!==e&&"object"===o(e)&&e.hasOwnProperty("current")}(e)?e.current||document:e||document}var y=function(){function e(t,n){s(this,e),l(this,"handlerSets",void 0),l(this,"poolName",void 0),this.handlerSets=n,this.poolName=t}return c(e,[{key:"addHandlers",value:function(t,n){var r=m(this.handlerSets);if(r.has(t)){var i=r.get(t);r.set(t,i.addHandlers(n))}else r.set(t,new p(n));return new e(this.poolName,r)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlerSets.get(e),r="default"===this.poolName;n&&n.dispatchEvent(t,r)}},{key:"hasHandlers",value:function(e){if(!e)return this.handlerSets.size>0;var t=this.handlerSets.get(e);return!!t&&t.hasHandlers()}},{key:"removeHandlers",value:function(t,n){var r=m(this.handlerSets);if(!r.has(t))return new e(this.poolName,r);var i=r.get(t).removeHandlers(n);return i.hasHandlers()?r.set(t,i):r.delete(t),new e(this.poolName,r)}}]),e}();l(y,"createByType",(function(e,t,n){var r=new Map;return r.set(t,new p(n)),new y(e,r)}));var w=function(){function e(t){var n=this;s(this,e),l(this,"handlers",new Map),l(this,"pools",new Map),l(this,"target",void 0),l(this,"createEmitter",(function(e){return function(t){n.pools.forEach((function(n){n.dispatchEvent(e,t)}))}})),this.target=t}return c(e,[{key:"addHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e);this.pools.set(e,r.addHandlers(t,n))}else this.pools.set(e,y.createByType(e,t,n));this.handlers.has(t)||this.addTargetHandler(t)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e).removeHandlers(t,n);r.hasHandlers()?this.pools.set(e,r):this.pools.delete(e);var i=!1;this.pools.forEach((function(e){return i=i||e.hasHandlers(t)})),i||this.removeTargetHandler(t)}}},{key:"addTargetHandler",value:function(e){var t=this.createEmitter(e);this.handlers.set(e,t),this.target.addEventListener(e,t,!0)}},{key:"removeTargetHandler",value:function(e){this.handlers.has(e)&&(this.target.removeEventListener(e,this.handlers.get(e),!0),this.handlers.delete(e))}}]),e}(),b=new(function(){function e(){var t=this;s(this,e),l(this,"targets",new Map),l(this,"getTarget",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=v(e);if(t.targets.has(r))return t.targets.get(r);if(!n)return null;var i=new w(r);return t.targets.set(r,i),i})),l(this,"removeTarget",(function(e){t.targets.delete(v(e))}))}return c(e,[{key:"sub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,o=void 0===i?document:i,s=n.pool,a=void 0===s?"default":s;this.getTarget(o).addHandlers(a,e,g(t))}}},{key:"unsub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,o=void 0===i?document:i,s=n.pool,a=void 0===s?"default":s,c=this.getTarget(o,!1);c&&(c.removeHandlers(a,e,g(t)),c.hasHandlers()||this.removeTarget(o))}}}]),e}()),_=function(e){function t(){return s(this,t),f(this,h(t).apply(this,arguments))}return u(t,i.PureComponent),c(t,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(e){this.unsubscribe(e),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;b.sub(t,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;b.unsub(t,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),t}();l(_,"defaultProps",{pool:"default",target:"document"}),_.propTypes={},t.instance=b,t.default=_},173:(e,t,n)=>{"use strict";var r;r=n(172),e.exports=r.default,e.exports.instance=r.instance},651:function(e){e.exports=function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach((function(t){e(n,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}))}return n}function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e){var t,n="algoliasearch-client-js-".concat(e.key),r=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},o=function(){return JSON.parse(r().getItem(n)||"{}")},s=function(e){r().setItem(n,JSON.stringify(e))},a=function(){var t=e.timeToLive?1e3*e.timeToLive:null,n=o(),r=Object.fromEntries(Object.entries(n).filter((function(e){return void 0!==i(e,2)[1].timestamp})));if(s(r),t){var a=Object.fromEntries(Object.entries(r).filter((function(e){var n=i(e,2)[1],r=(new Date).getTime();return!(n.timestamp+t<r)})));s(a)}};return{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){a();var t=JSON.stringify(e);return o()[t]})).then((function(e){return Promise.all([e?e.value:t(),void 0!==e])})).then((function(e){var t=i(e,2),r=t[0],o=t[1];return Promise.all([r,o||n.miss(r)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var i=o();return i[JSON.stringify(e)]={timestamp:(new Date).getTime(),value:t},r().setItem(n,JSON.stringify(i)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=o();delete t[JSON.stringify(e)],r().setItem(n,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){r().removeItem(n)}))}}}function a(e){var t=o(e.caches),n=t.shift();return void 0===n?{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return t().then((function(e){return Promise.all([e,n.miss(e)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return n.get(e,r,i).catch((function(){return a({caches:t}).get(e,r,i)}))},set:function(e,r){return n.set(e,r).catch((function(){return a({caches:t}).set(e,r)}))},delete:function(e){return n.delete(e).catch((function(){return a({caches:t}).delete(e)}))},clear:function(){return n.clear().catch((function(){return a({caches:t}).clear()}))}}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},o=JSON.stringify(n);if(o in t)return Promise.resolve(e.serializable?JSON.parse(t[o]):t[o]);var s=r(),a=i&&i.miss||function(){return Promise.resolve()};return s.then((function(e){return a(e)})).then((function(){return s}))},set:function(n,r){return t[JSON.stringify(n)]=e.serializable?JSON.stringify(r):r,Promise.resolve(r)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function l(e,t,n){var r={"x-algolia-api-key":n,"x-algolia-application-id":t};return{headers:function(){return e===m.WithinHeaders?r:{}},queryParameters:function(){return e===m.WithinQueryParameters?r:{}}}}function u(e){var t=0;return e((function n(){return t++,new Promise((function(r){setTimeout((function(){r(e(n))}),Math.min(100*t,1e3))}))}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Promise.resolve()};return Object.assign(e,{wait:function(n){return h(e.then((function(e){return Promise.all([t(e,n),e])})).then((function(e){return e[1]})))}})}function d(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function f(e,t){return t?(Object.keys(t).forEach((function(n){e[n]=t[n](e)})),e):e}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0;return e.replace(/%s/g,(function(){return encodeURIComponent(n[i++])}))}var m={WithinQueryParameters:0,WithinHeaders:1};function g(e,t){var n=e||{},r=n.data||{};return Object.keys(n).forEach((function(e){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(r[e]=n[e])})),{data:Object.entries(r).length>0?r:void 0,timeout:n.timeout||t,headers:n.headers||{},queryParameters:n.queryParameters||{},cacheable:n.cacheable}}var v={Read:1,Write:2,Any:3},y=1,w=2,b=3;function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return n(n({},e),{},{status:t,lastUpdate:Date.now()})}function E(e){return"string"==typeof e?{protocol:"https",url:e,accept:v.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||v.Any}}var I="DELETE",S="GET",T="POST",k="PUT";function C(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(_(t))}))}))).then((function(e){var n=e.filter((function(e){return function(e){return e.status===y||Date.now()-e.lastUpdate>12e4}(e)})),r=e.filter((function(e){return function(e){return e.status===b&&Date.now()-e.lastUpdate<=12e4}(e)})),i=[].concat(o(n),o(r));return{getTimeout:function(e,t){return(0===r.length&&0===e?1:r.length+3+e)*t},statelessHosts:i.length>0?i.map((function(e){return E(e)})):t}}))}function x(e,t,r,i){var s=[],a=function(e,t){if(e.method!==S&&(void 0!==e.data||void 0!==t.data)){var r=Array.isArray(e.data)?e.data:n(n({},e.data),t.data);return JSON.stringify(r)}}(r,i),c=function(e,t){var r=n(n({},e.headers),t.headers),i={};return Object.keys(r).forEach((function(e){var t=r[e];i[e.toLowerCase()]=t})),i}(e,i),l=r.method,u=r.method!==S?{}:n(n({},r.data),i.data),h=n(n(n({"x-algolia-agent":e.userAgent.value},e.queryParameters),u),i.queryParameters),d=0,f=function t(n,o){var u=n.pop();if(void 0===u)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:D(s)};var f={data:a,headers:c,method:l,url:P(u,r.path,h),connectTimeout:o(d,e.timeouts.connect),responseTimeout:o(d,i.timeout)},p=function(e){var t={request:f,response:e,host:u,triesLeft:n.length};return s.push(t),t},m={onSuccess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:"DeserializationError",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(r){var i=p(r);return r.isTimedOut&&d++,Promise.all([e.logger.info("Retryable failure",O(i)),e.hostsCache.set(u,_(u,r.isTimedOut?b:w))]).then((function(){return t(n,o)}))},onFail:function(e){throw p(e),function(e,t){var n=e.content,r=e.status,i=n;try{i=JSON.parse(n).message}catch(e){}return function(e,t,n){return{name:"ApiError",message:e,status:t,transporterStackTrace:n}}(i,r,t)}(e,D(s))}};return e.requester.send(f).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,n=e.status;return!t&&0==~~n}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSuccess(e):t.onFail(e)}(e,m)}))};return C(e.hostsCache,t).then((function(e){return f(o(e.statelessHosts).reverse(),e.getTimeout)}))}function N(e){var t=e.hostsCache,n=e.logger,r=e.requester,o=e.requestsCache,s=e.responsesCache,a=e.timeouts,c=e.userAgent,l=e.hosts,u=e.queryParameters,h={hostsCache:t,logger:n,requester:r,requestsCache:o,responsesCache:s,timeouts:a,userAgent:c,headers:e.headers,queryParameters:u,hosts:l.map((function(e){return E(e)})),read:function(e,t){var n=g(t,h.timeouts.read),r=function(){return x(h,h.hosts.filter((function(e){return 0!=(e.accept&v.Read)})),e,n)};if(!0!==(void 0!==n.cacheable?n.cacheable:e.cacheable))return r();var o={request:e,mappedRequestOptions:n,transporter:{queryParameters:h.queryParameters,headers:h.headers}};return h.responsesCache.get(o,(function(){return h.requestsCache.get(o,(function(){return h.requestsCache.set(o,r()).then((function(e){return Promise.all([h.requestsCache.delete(o),e])}),(function(e){return Promise.all([h.requestsCache.delete(o),Promise.reject(e)])})).then((function(e){var t=i(e,2);return t[0],t[1]}))}))}),{miss:function(e){return h.responsesCache.set(o,e)}})},write:function(e,t){return x(h,h.hosts.filter((function(e){return 0!=(e.accept&v.Write)})),e,g(t,h.timeouts.write))}};return h}function A(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(e){var n="; ".concat(e.segment).concat(void 0!==e.version?" (".concat(e.version,")"):"");return-1===t.value.indexOf(n)&&(t.value="".concat(t.value).concat(n)),t}};return t}function P(e,t,n){var r=R(n),i="".concat(e.protocol,"://").concat(e.url,"/").concat("/"===t.charAt(0)?t.substr(1):t);return r.length&&(i+="?".concat(r)),i}function R(e){return Object.keys(e).map((function(t){return p("%s=%s",t,(n=e[t],"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?JSON.stringify(e[t]):e[t]));var n})).join("&")}function D(e){return e.map((function(e){return O(e)}))}function O(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return n(n({},e),{},{request:n(n({},e.request),{},{headers:n(n({},e.request.headers),t)})})}var L=function(e){return function(t,n){return e.transporter.write({method:T,path:"2/abtests",data:t},n)}},M=function(e){return function(t,n){return e.transporter.write({method:I,path:p("2/abtests/%s",t)},n)}},F=function(e){return function(t,n){return e.transporter.read({method:S,path:p("2/abtests/%s",t)},n)}},U=function(e){return function(t){return e.transporter.read({method:S,path:"2/abtests"},t)}},j=function(e){return function(t,n){return e.transporter.write({method:T,path:p("2/abtests/%s/stop",t)},n)}},V=function(e){return function(t){return e.transporter.read({method:S,path:"1/strategies/personalization"},t)}},z=function(e){return function(t,n){return e.transporter.write({method:T,path:"1/strategies/personalization",data:t},n)}};function B(e){return function t(n){return e.request(n).then((function(r){if(void 0!==e.batch&&e.batch(r.hits),!e.shouldStop(r))return r.cursor?t({cursor:r.cursor}):t({page:(n.page||0)+1})}))}({})}var q=function(e){return function(t,i){var o=i||{},s=o.queryParameters,a=r(o,["queryParameters"]),c=n({acl:t},void 0!==s?{queryParameters:s}:{});return h(e.transporter.write({method:T,path:"1/keys",data:c},a),(function(t,n){return u((function(r){return ee(e)(t.key,n).catch((function(e){if(404!==e.status)throw e;return r()}))}))}))}},K=function(e){return function(t,n,r){var i=g(r);return i.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:T,path:"1/clusters/mapping",data:{cluster:n}},i)}},G=function(e){return function(t,n,r){return e.transporter.write({method:T,path:"1/clusters/mapping/batch",data:{users:t,cluster:n}},r)}},H=function(e){return function(t,n){return h(e.transporter.write({method:T,path:p("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},n),(function(t,n){return Te(e)(t.taskID,n)}))}},W=function(e){return function(t,n,r){return h(e.transporter.write({method:T,path:p("1/indexes/%s/operation",t),data:{operation:"copy",destination:n}},r),(function(n,r){return ae(e)(t,{methods:{waitTask:ht}}).waitTask(n.taskID,r)}))}},Q=function(e){return function(t,r,i){return W(e)(t,r,n(n({},i),{},{scope:[ft.Rules]}))}},J=function(e){return function(t,r,i){return W(e)(t,r,n(n({},i),{},{scope:[ft.Settings]}))}},$=function(e){return function(t,r,i){return W(e)(t,r,n(n({},i),{},{scope:[ft.Synonyms]}))}},Y=function(e){return function(t,n){return t.method===S?e.transporter.read(t,n):e.transporter.write(t,n)}},X=function(e){return function(t,n){return h(e.transporter.write({method:I,path:p("1/keys/%s",t)},n),(function(n,r){return u((function(n){return ee(e)(t,r).then(n).catch((function(e){if(404!==e.status)throw e}))}))}))}},Z=function(e){return function(t,n,r){var i=n.map((function(e){return{action:"deleteEntry",body:{objectID:e}}}));return h(e.transporter.write({method:T,path:p("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:i}},r),(function(t,n){return Te(e)(t.taskID,n)}))}},ee=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/keys/%s",t)},n)}},te=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/task/%s",t.toString())},n)}},ne=function(e){return function(t){return e.transporter.read({method:S,path:"/1/dictionaries/*/settings"},t)}},re=function(e){return function(t){return e.transporter.read({method:S,path:"1/logs"},t)}},ie=function(e){return function(t){return e.transporter.read({method:S,path:"1/clusters/mapping/top"},t)}},oe=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/clusters/mapping/%s",t)},n)}},se=function(e){return function(t){var n=t||{},i=n.retrieveMappings,o=r(n,["retrieveMappings"]);return!0===i&&(o.getClusters=!0),e.transporter.read({method:S,path:"1/clusters/mapping/pending"},o)}},ae=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f({transporter:e.transporter,appId:e.appId,indexName:t},n.methods)}},ce=function(e){return function(t){return e.transporter.read({method:S,path:"1/keys"},t)}},le=function(e){return function(t){return e.transporter.read({method:S,path:"1/clusters"},t)}},ue=function(e){return function(t){return e.transporter.read({method:S,path:"1/indexes"},t)}},he=function(e){return function(t){return e.transporter.read({method:S,path:"1/clusters/mapping"},t)}},de=function(e){return function(t,n,r){return h(e.transporter.write({method:T,path:p("1/indexes/%s/operation",t),data:{operation:"move",destination:n}},r),(function(n,r){return ae(e)(t,{methods:{waitTask:ht}}).waitTask(n.taskID,r)}))}},fe=function(e){return function(t,n){return h(e.transporter.write({method:T,path:"1/indexes/*/batch",data:{requests:t}},n),(function(t,n){return Promise.all(Object.keys(t.taskID).map((function(r){return ae(e)(r,{methods:{waitTask:ht}}).waitTask(t.taskID[r],n)})))}))}},pe=function(e){return function(t,n){return e.transporter.read({method:T,path:"1/indexes/*/objects",data:{requests:t}},n)}},me=function(e){return function(t,r){var i=t.map((function(e){return n(n({},e),{},{params:R(e.params||{})})}));return e.transporter.read({method:T,path:"1/indexes/*/queries",data:{requests:i},cacheable:!0},r)}},ge=function(e){return function(t,i){return Promise.all(t.map((function(t){var o=t.params,s=o.facetName,a=o.facetQuery,c=r(o,["facetName","facetQuery"]);return ae(e)(t.indexName,{methods:{searchForFacetValues:at}}).searchForFacetValues(s,a,n(n({},i),c))})))}},ve=function(e){return function(t,n){var r=g(n);return r.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:I,path:"1/clusters/mapping"},r)}},ye=function(e){return function(t,n,r){var i=n.map((function(e){return{action:"addEntry",body:e}}));return h(e.transporter.write({method:T,path:p("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:i}},r),(function(t,n){return Te(e)(t.taskID,n)}))}},we=function(e){return function(t,n){return h(e.transporter.write({method:T,path:p("1/keys/%s/restore",t)},n),(function(n,r){return u((function(n){return ee(e)(t,r).catch((function(e){if(404!==e.status)throw e;return n()}))}))}))}},be=function(e){return function(t,n,r){var i=n.map((function(e){return{action:"addEntry",body:e}}));return h(e.transporter.write({method:T,path:p("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:i}},r),(function(t,n){return Te(e)(t.taskID,n)}))}},_e=function(e){return function(t,n,r){return e.transporter.read({method:T,path:p("/1/dictionaries/%s/search",t),data:{query:n},cacheable:!0},r)}},Ee=function(e){return function(t,n){return e.transporter.read({method:T,path:"1/clusters/mapping/search",data:{query:t}},n)}},Ie=function(e){return function(t,n){return h(e.transporter.write({method:k,path:"/1/dictionaries/*/settings",data:t},n),(function(t,n){return Te(e)(t.taskID,n)}))}},Se=function(e){return function(t,n){var i=Object.assign({},n),o=n||{},s=o.queryParameters,a=r(o,["queryParameters"]),c=s?{queryParameters:s}:{},l=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return h(e.transporter.write({method:k,path:p("1/keys/%s",t),data:c},a),(function(n,r){return u((function(n){return ee(e)(t,r).then((function(e){return function(e){return Object.keys(i).filter((function(e){return-1!==l.indexOf(e)})).every((function(t){if(Array.isArray(e[t])&&Array.isArray(i[t])){var n=e[t];return n.length===i[t].length&&n.every((function(e,n){return e===i[t][n]}))}return e[t]===i[t]}))}(e)?Promise.resolve():n()}))}))}))}},Te=function(e){return function(t,n){return u((function(r){return te(e)(t,n).then((function(e){return"published"!==e.status?r():void 0}))}))}},ke=function(e){return function(t,n){return h(e.transporter.write({method:T,path:p("1/indexes/%s/batch",e.indexName),data:{requests:t}},n),(function(t,n){return ht(e)(t.taskID,n)}))}},Ce=function(e){return function(t){return B(n(n({shouldStop:function(e){return void 0===e.cursor}},t),{},{request:function(n){return e.transporter.read({method:T,path:p("1/indexes/%s/browse",e.indexName),data:n},t)}}))}},xe=function(e){return function(t){var r=n({hitsPerPage:1e3},t);return B(n(n({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return ct(e)("",n(n({},r),t)).then((function(e){return n(n({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},Ne=function(e){return function(t){var r=n({hitsPerPage:1e3},t);return B(n(n({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return lt(e)("",n(n({},r),t)).then((function(e){return n(n({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},Ae=function(e){return function(t,n,i){var o=i||{},s=o.batchSize,a=r(o,["batchSize"]),c={taskIDs:[],objectIDs:[]};return h(function r(){var i,o=[];for(i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i<t.length&&(o.push(t[i]),o.length!==(s||1e3));i++);return 0===o.length?Promise.resolve(c):ke(e)(o.map((function(e){return{action:n,body:e}})),a).then((function(e){return c.objectIDs=c.objectIDs.concat(e.objectIDs),c.taskIDs.push(e.taskID),i++,r(i)}))}(),(function(t,n){return Promise.all(t.taskIDs.map((function(t){return ht(e)(t,n)})))}))}},Pe=function(e){return function(t){return h(e.transporter.write({method:T,path:p("1/indexes/%s/clear",e.indexName)},t),(function(t,n){return ht(e)(t.taskID,n)}))}},Re=function(e){return function(t){var n=t||{},i=n.forwardToReplicas,o=g(r(n,["forwardToReplicas"]));return i&&(o.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:T,path:p("1/indexes/%s/rules/clear",e.indexName)},o),(function(t,n){return ht(e)(t.taskID,n)}))}},De=function(e){return function(t){var n=t||{},i=n.forwardToReplicas,o=g(r(n,["forwardToReplicas"]));return i&&(o.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:T,path:p("1/indexes/%s/synonyms/clear",e.indexName)},o),(function(t,n){return ht(e)(t.taskID,n)}))}},Oe=function(e){return function(t,n){return h(e.transporter.write({method:T,path:p("1/indexes/%s/deleteByQuery",e.indexName),data:t},n),(function(t,n){return ht(e)(t.taskID,n)}))}},Le=function(e){return function(t){return h(e.transporter.write({method:I,path:p("1/indexes/%s",e.indexName)},t),(function(t,n){return ht(e)(t.taskID,n)}))}},Me=function(e){return function(t,n){return h(Fe(e)([t],n).then((function(e){return{taskID:e.taskIDs[0]}})),(function(t,n){return ht(e)(t.taskID,n)}))}},Fe=function(e){return function(t,n){var r=t.map((function(e){return{objectID:e}}));return Ae(e)(r,dt.DeleteObject,n)}},Ue=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,s=g(r(i,["forwardToReplicas"]));return o&&(s.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:I,path:p("1/indexes/%s/rules/%s",e.indexName,t)},s),(function(t,n){return ht(e)(t.taskID,n)}))}},je=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,s=g(r(i,["forwardToReplicas"]));return o&&(s.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:I,path:p("1/indexes/%s/synonyms/%s",e.indexName,t)},s),(function(t,n){return ht(e)(t.taskID,n)}))}},Ve=function(e){return function(t){return We(e)(t).then((function(){return!0})).catch((function(e){if(404!==e.status)throw e;return!1}))}},ze=function(e){return function(t,n,r){return e.transporter.read({method:T,path:p("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:n},cacheable:!0},r)}},Be=function(e){return function(t,o){var s=o||{},a=s.query,c=s.paginate,l=r(s,["query","paginate"]),u=0;return function r(){return st(e)(a||"",n(n({},l),{},{page:u})).then((function(e){for(var n=0,o=Object.entries(e.hits);n<o.length;n++){var s=i(o[n],2),a=s[0],l=s[1];if(t(l))return{object:l,position:parseInt(a,10),page:u}}if(u++,!1===c||u>=e.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return r()}))}()}},qe=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/indexes/%s/%s",e.indexName,t)},n)}},Ke=function(){return function(e,t){for(var n=0,r=Object.entries(e.hits);n<r.length;n++){var o=i(r[n],2),s=o[0];if(o[1].objectID===t)return parseInt(s,10)}return-1}},Ge=function(e){return function(t,i){var o=i||{},s=o.attributesToRetrieve,a=r(o,["attributesToRetrieve"]),c=t.map((function(t){return n({indexName:e.indexName,objectID:t},s?{attributesToRetrieve:s}:{})}));return e.transporter.read({method:T,path:"1/indexes/*/objects",data:{requests:c}},a)}},He=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/indexes/%s/rules/%s",e.indexName,t)},n)}},We=function(e){return function(t){return e.transporter.read({method:S,path:p("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},t)}},Qe=function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/indexes/%s/synonyms/%s",e.indexName,t)},n)}},Je=function(e){return function(t,n){return h($e(e)([t],n).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,n){return ht(e)(t.taskID,n)}))}},$e=function(e){return function(t,n){var i=n||{},o=i.createIfNotExists,s=r(i,["createIfNotExists"]),a=o?dt.PartialUpdateObject:dt.PartialUpdateObjectNoCreate;return Ae(e)(t,a,s)}},Ye=function(e){return function(t,s){var a=s||{},c=a.safe,l=a.autoGenerateObjectIDIfNotExist,u=a.batchSize,d=r(a,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),f=function(t,n,r,i){return h(e.transporter.write({method:T,path:p("1/indexes/%s/operation",t),data:{operation:r,destination:n}},i),(function(t,n){return ht(e)(t.taskID,n)}))},m=Math.random().toString(36).substring(7),g="".concat(e.indexName,"_tmp_").concat(m),v=tt({appId:e.appId,transporter:e.transporter,indexName:g}),y=[],w=f(e.indexName,g,"copy",n(n({},d),{},{scope:["settings","synonyms","rules"]}));return y.push(w),h((c?w.wait(d):w).then((function(){var e=v(t,n(n({},d),{},{autoGenerateObjectIDIfNotExist:l,batchSize:u}));return y.push(e),c?e.wait(d):e})).then((function(){var t=f(g,e.indexName,"move",d);return y.push(t),c?t.wait(d):t})).then((function(){return Promise.all(y)})).then((function(e){var t=i(e,3),n=t[0],r=t[1],s=t[2];return{objectIDs:r.objectIDs,taskIDs:[n.taskID].concat(o(r.taskIDs),[s.taskID])}})),(function(e,t){return Promise.all(y.map((function(e){return e.wait(t)})))}))}},Xe=function(e){return function(t,r){return rt(e)(t,n(n({},r),{},{clearExistingRules:!0}))}},Ze=function(e){return function(t,r){return ot(e)(t,n(n({},r),{},{clearExistingSynonyms:!0}))}},et=function(e){return function(t,n){return h(tt(e)([t],n).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,n){return ht(e)(t.taskID,n)}))}},tt=function(e){return function(t,n){var i=n||{},o=i.autoGenerateObjectIDIfNotExist,s=r(i,["autoGenerateObjectIDIfNotExist"]),a=o?dt.AddObject:dt.UpdateObject;if(a===dt.UpdateObject){var c=!0,l=!1,u=void 0;try{for(var d,f=t[Symbol.iterator]();!(c=(d=f.next()).done);c=!0)if(void 0===d.value.objectID)return h(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch(e){l=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(l)throw u}}}return Ae(e)(t,a,s)}},nt=function(e){return function(t,n){return rt(e)([t],n)}},rt=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,s=i.clearExistingRules,a=g(r(i,["forwardToReplicas","clearExistingRules"]));return o&&(a.queryParameters.forwardToReplicas=1),s&&(a.queryParameters.clearExistingRules=1),h(e.transporter.write({method:T,path:p("1/indexes/%s/rules/batch",e.indexName),data:t},a),(function(t,n){return ht(e)(t.taskID,n)}))}},it=function(e){return function(t,n){return ot(e)([t],n)}},ot=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,s=i.clearExistingSynonyms,a=i.replaceExistingSynonyms,c=g(r(i,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return o&&(c.queryParameters.forwardToReplicas=1),(a||s)&&(c.queryParameters.replaceExistingSynonyms=1),h(e.transporter.write({method:T,path:p("1/indexes/%s/synonyms/batch",e.indexName),data:t},c),(function(t,n){return ht(e)(t.taskID,n)}))}},st=function(e){return function(t,n){return e.transporter.read({method:T,path:p("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},n)}},at=function(e){return function(t,n,r){return e.transporter.read({method:T,path:p("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:n},cacheable:!0},r)}},ct=function(e){return function(t,n){return e.transporter.read({method:T,path:p("1/indexes/%s/rules/search",e.indexName),data:{query:t}},n)}},lt=function(e){return function(t,n){return e.transporter.read({method:T,path:p("1/indexes/%s/synonyms/search",e.indexName),data:{query:t}},n)}},ut=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,s=g(r(i,["forwardToReplicas"]));return o&&(s.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:k,path:p("1/indexes/%s/settings",e.indexName),data:t},s),(function(t,n){return ht(e)(t.taskID,n)}))}},ht=function(e){return function(t,n){return u((function(r){return function(e){return function(t,n){return e.transporter.read({method:S,path:p("1/indexes/%s/task/%s",e.indexName,t.toString())},n)}}(e)(t,n).then((function(e){return"published"!==e.status?r():void 0}))}))}},dt={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},ft={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},pt=1,mt=2,gt=3,vt=function(e){return function(t,r){var i=t.map((function(e){return n(n({},e),{},{threshold:e.threshold||0})}));return e.transporter.read({method:T,path:"1/indexes/*/recommendations",data:{requests:i},cacheable:!0},r)}},yt=function(e){return function(t,r){return vt(e)(t.map((function(e){return n(n({},e),{},{fallbackParameters:{},model:"bought-together"})})),r)}},wt=function(e){return function(t,r){return vt(e)(t.map((function(e){return n(n({},e),{},{model:"related-products"})})),r)}},bt=function(e){return function(t,r){var i=t.map((function(e){return n(n({},e),{},{model:"trending-facets",threshold:e.threshold||0})}));return e.transporter.read({method:T,path:"1/indexes/*/recommendations",data:{requests:i},cacheable:!0},r)}},_t=function(e){return function(t,r){var i=t.map((function(e){return n(n({},e),{},{model:"trending-items",threshold:e.threshold||0})}));return e.transporter.read({method:T,path:"1/indexes/*/recommendations",data:{requests:i},cacheable:!0},r)}},Et=function(e){return function(t,r){return vt(e)(t.map((function(e){return n(n({},e),{},{model:"looking-similar"})})),r)}},It=function(e){return function(t,r){var i=t.map((function(e){return n(n({},e),{},{model:"recommended-for-you",threshold:e.threshold||0})}));return e.transporter.read({method:T,path:"1/indexes/*/recommendations",data:{requests:i},cacheable:!0},r)}};function St(e,t,r){var i,o={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var n=new XMLHttpRequest;n.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return n.setRequestHeader(t,e.headers[t])}));var r,i=function(e,r){return setTimeout((function(){n.abort(),t({status:0,content:r,isTimedOut:!0})}),1e3*e)},o=i(e.connectTimeout,"Connection timeout");n.onreadystatechange=function(){n.readyState>n.OPENED&&void 0===r&&(clearTimeout(o),r=i(e.responseTimeout,"Socket timeout"))},n.onerror=function(){0===n.status&&(clearTimeout(o),clearTimeout(r),t({content:n.responseText||"Network request failed",status:n.status,isTimedOut:!1}))},n.onload=function(){clearTimeout(o),clearTimeout(r),t({content:n.responseText,status:n.status,isTimedOut:!1})},n.send(e.data)}))}},logger:(i=gt,{debug:function(e,t){return pt>=i&&console.debug(e,t),Promise.resolve()},info:function(e,t){return mt>=i&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:c(),requestsCache:c({serializable:!1}),hostsCache:a({caches:[s({key:"".concat("4.23.3","-").concat(e)}),c()]}),userAgent:A("4.23.3").add({segment:"Browser"})},u=n(n({},o),r),h=function(){return function(e){return function(e){var t=e.region||"us",r=l(m.WithinHeaders,e.appId,e.apiKey),i=N(n(n({hosts:[{url:"personalization.".concat(t,".algolia.com")}]},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return f({appId:e.appId,transporter:i},e.methods)}(n(n(n({},o),e),{},{methods:{getPersonalizationStrategy:V,setPersonalizationStrategy:z}}))}};return function(e){var t=e.appId,r=l(void 0!==e.authMode?e.authMode:m.WithinHeaders,t,e.apiKey),i=N(n(n({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:v.Read},{url:"".concat(t,".algolia.net"),accept:v.Write}].concat(d([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return f({transporter:i,appId:t,addAlgoliaAgent:function(e,t){i.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([i.requestsCache.clear(),i.responsesCache.clear()]).then((function(){}))}},e.methods)}(n(n({},u),{},{methods:{search:me,searchForFacetValues:ge,multipleBatch:fe,multipleGetObjects:pe,multipleQueries:me,copyIndex:W,copySettings:J,copySynonyms:$,copyRules:Q,moveIndex:de,listIndices:ue,getLogs:re,listClusters:le,multipleSearchForFacetValues:ge,getApiKey:ee,addApiKey:q,listApiKeys:ce,updateApiKey:Se,deleteApiKey:X,restoreApiKey:we,assignUserID:K,assignUserIDs:G,getUserID:oe,searchUserIDs:Ee,listUserIDs:he,getTopUserIDs:ie,removeUserID:ve,hasPendingMappings:se,clearDictionaryEntries:H,deleteDictionaryEntries:Z,getDictionarySettings:ne,getAppTask:te,replaceDictionaryEntries:ye,saveDictionaryEntries:be,searchDictionaryEntries:_e,setDictionarySettings:Ie,waitAppTask:Te,customRequest:Y,initIndex:function(e){return function(t){return ae(e)(t,{methods:{batch:ke,delete:Le,findAnswers:ze,getObject:qe,getObjects:Ge,saveObject:et,saveObjects:tt,search:st,searchForFacetValues:at,waitTask:ht,setSettings:ut,getSettings:We,partialUpdateObject:Je,partialUpdateObjects:$e,deleteObject:Me,deleteObjects:Fe,deleteBy:Oe,clearObjects:Pe,browseObjects:Ce,getObjectPosition:Ke,findObject:Be,exists:Ve,saveSynonym:it,saveSynonyms:ot,getSynonym:Qe,searchSynonyms:lt,browseSynonyms:Ne,deleteSynonym:je,clearSynonyms:De,replaceAllObjects:Ye,replaceAllSynonyms:Ze,searchRules:ct,getRule:He,deleteRule:Ue,saveRule:nt,saveRules:rt,replaceAllRules:Xe,browseRules:xe,clearRules:Re}})}},initAnalytics:function(){return function(e){return function(e){var t=e.region||"us",r=l(m.WithinHeaders,e.appId,e.apiKey),i=N(n(n({hosts:[{url:"analytics.".concat(t,".algolia.com")}]},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return f({appId:e.appId,transporter:i},e.methods)}(n(n(n({},o),e),{},{methods:{addABTest:L,getABTest:F,getABTests:U,stopABTest:j,deleteABTest:M}}))}},initPersonalization:h,initRecommendation:function(){return function(e){return u.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),h()(e)}},getRecommendations:vt,getFrequentlyBoughtTogether:yt,getLookingSimilar:Et,getRecommendedForYou:It,getRelatedProducts:wt,getTrendingFacets:bt,getTrendingItems:_t}}))}return St.version="4.23.3",St}()},396:(e,t,n)=>{var r;!function(){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},90:e=>{"use strict";for(var t=function(e){return null!==e&&!Array.isArray(e)&&"object"===typeof e},n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},r=0;r<24;r+=1)n[112+r]="F"+(r+1);for(var i=0;i<26;i+=1){var o=i+65;n[o]=[String.fromCharCode(o+32),String.fromCharCode(o)]}var s={codes:n,getCode:function(e){return t(e)?e.keyCode||e.which||this[e.key]:this[e]},getKey:function(e){var r=t(e);if(r&&e.key)return e.key;var i=n[r?e.keyCode||e.which:e];return Array.isArray(i)&&(i=r?i[e.shiftKey?1:0]:i[0]),i},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};s.Spacebar=s[" "],s.Digit0=s[0],s.Digit1=s[1],s.Digit2=s[2],s.Digit3=s[3],s.Digit4=s[4],s.Digit5=s[5],s.Digit6=s[6],s.Digit7=s[7],s.Digit8=s[8],s.Digit9=s[9],s.Tilde=s["~"],s.GraveAccent=s["`"],s.ExclamationPoint=s["!"],s.AtSign=s["@"],s.PoundSign=s["#"],s.PercentSign=s["%"],s.Caret=s["^"],s.Ampersand=s["&"],s.PlusSign=s["+"],s.MinusSign=s["-"],s.EqualsSign=s["="],s.DivisionSign=s["/"],s.MultiplicationSign=s["*"],s.Comma=s[","],s.Decimal=s["."],s.Colon=s[":"],s.Semicolon=s[";"],s.Pipe=s["|"],s.BackSlash=s["\\"],s.QuestionMark=s["?"],s.SingleQuote=s["'"],s.DoubleQuote=s['"'],s.LeftCurlyBrace=s["{"],s.RightCurlyBrace=s["}"],s.LeftParenthesis=s["("],s.RightParenthesis=s[")"],s.LeftAngleBracket=s["<"],s.RightAngleBracket=s[">"],s.LeftSquareBracket=s["["],s.RightSquareBracket=s["]"],e.exports=s},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},554:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case T:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function oe(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Se=null;function Te(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Ie?Se?Se.push(e):Se=[e]:Ie=e}function Ce(){if(Ie){var e=Ie,t=Se;if(Se=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Ie||null!==Se)&&(Ne(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,o,s,a,c){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ke(i),e;if(s===r)return Ke(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,It,St,Tt,kt=!1,Ct=[],xt=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(jt),Rt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=wt,o=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=o}}function Ht(e,t,n,r){var i=wt,o=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=o}}function Wt(e,t,n,r){if(Kt){var i=Jt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Mt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Mt(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=wi(i);if(null!==o&&_t(o),null===(o=Jt(e,t,n,r))&&Kr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(ln),hn=F({},ln,{view:0,detail:0}),dn=on(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(F({},fn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),vn=on(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=on(yn),bn=on(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Tn(){return Sn}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(kn),xn=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=on(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Jn(e){if(W(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Jn(Wn)){var t=[];Gn(t,Wn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Wn)}function or(e,t){if("click"===e)return Jn(t)}function sr(e,t){if("input"===e||"change"===e)return Jn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Sr={};function Tr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ir[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),c(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(kr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,c,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(o(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Fr(i,a,l),o=c}else for(s=0;s<r.length;s++){if(c=(a=r[s]).instance,l=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Fr(i,a,l),o=c}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(c=s.tag)||6===c){r=o=s;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=o,i=_e(n),s=[];e:{var a=Ar.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case kr:case Cr:case xr:c=vn;break;case Nr:c=An;break;case"scroll":c=dn;break;case"wheel":c=Rn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Gr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==l?a:bi(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==c&&Qr(s,a,c,u,!1),null!==l&&null!==h&&Qr(s,h,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=$n;else if(Kn(a))if(Yn)g=sr;else{g=ir;var v=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Bn=!0)),0<(v=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),s.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Ur(s,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Re(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Re(n,o))&&s.unshift(Gr(n,c,a)):i||null!=(c=Re(n,o))&&s.push(Gr(n,c,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Jr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var Ei=[],Ii=-1;function Si(e){return{current:e}}function Ti(e){0>Ii||(e.current=Ei[Ii],Ei[Ii]=null,Ii--)}function ki(e,t){Ii++,Ei[Ii]=e.current,e.current=t}var Ci={},xi=Si(Ci),Ni=Si(!1),Ai=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ni),Ti(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(o(168));ki(xi,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,ki(xi,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(xi),ki(xi,e)):Ti(Ni),ki(Ni,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Ji=null,$i=1,Yi="";function Xi(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=$i,Wi[Qi++]=Yi,Wi[Qi++]=Ji,Ji=e;var r=$i;e=Yi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$i=1<<32-st(t)+i|n<<i|r,Yi=o+e}else $i=1<<o|n<<i|r,Yi=e}function eo(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function to(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Ji;)Ji=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:$i,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(co(e))throw Error(o(418));t=li(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(co(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=li(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?li(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=li(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&wo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Ol(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ol(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case E:return(t=Ul(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,a,c){for(var l=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),io&&Xi(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(o=s(h,o,m),null===u?l=h:u.sibling=h,u=h);return io&&Xi(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Xi(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),io&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return io&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Xi(i,g),u}return function e(r,o,s,c){if("object"===typeof s&&null!==s&&s.type===I&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var l=s.key,u=o;null!==u;){if(u.key===l){if((l=s.type)===I){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===R&&wo(l)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=vo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===I?((o=Ll(s.props.children,r.mode,c,s.key)).return=r,r=o):((c=Ol(s.type,s.key,s.props,null,r.mode,c)).ref=vo(r,o,s),c.return=r,r=c)}return a(r);case E:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Ul(s,r.mode,c)).return=r,r=o}return a(r);case R:return e(r,o,(u=s._init)(s._payload),c)}if(te(s))return m(r,o,s,c);if(L(s))return g(r,o,s,c);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fl(s,r.mode,c)).return=r,r=o),a(r)):n(r,o)}}var _o=bo(!0),Eo=bo(!1),Io=Si(null),So=null,To=null,ko=null;function Co(){ko=To=So=null}function xo(e){var t=Io.current;Ti(Io),e._currentValue=t}function No(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ao(e,t){So=e,ko=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===So)throw Error(o(308));To=e,So.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Ro=null;function Do(e){null===Ro?Ro=[e]:Ro.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Do(t)):(n.next=i.next,i.next=n),t.interleaved=n,Lo(e,r)}function Lo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Lo(e,n)}return null===(i=r.interleaved)?(t.next=t,Do(r)):(t.next=i.next,i.next=t),r.interleaved=t,Lo(e,n)}function zo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==o){var h=i.baseState;for(s=0,u=l=c=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Mc|=s,e.lanes=s,e.memoizedState=h}}function Ko(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},Ho=Si(Go),Wo=Si(Go),Qo=Si(Go);function Jo(e){if(e===Go)throw Error(o(174));return e}function $o(e,t){switch(ki(Qo,t),ki(Wo,e),ki(Ho,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ho),ki(Ho,t)}function Yo(){Ti(Ho),Ti(Wo),Ti(Qo)}function Xo(e){Jo(Qo.current);var t=Jo(Ho.current),n=ce(t,e.type);t!==n&&(ki(Wo,e),ki(Ho,n))}function Zo(e){Wo.current===e&&(Ti(Ho),Ti(Wo))}var es=Si(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=b.ReactCurrentDispatcher,os=b.ReactCurrentBatchConfig,ss=0,as=null,cs=null,ls=null,us=!1,hs=!1,ds=0,fs=0;function ps(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Zs:ea,e=n(r,i),hs){s=0;do{if(hs=!1,ds=0,25<=s)throw Error(o(301));s+=1,ls=cs=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(hs)}if(is.current=Xs,t=null!==cs&&null!==cs.next,ss=0,ls=cs=as=null,us=!1,t)throw Error(o(300));return e}function vs(){var e=0!==ds;return ds=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?as.memoizedState=ls=e:ls=ls.next=e,ls}function ws(){if(null===cs){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=cs.next;var t=null===ls?as.memoizedState:ls.next;if(null!==t)ls=t,cs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(cs=e).memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},null===ls?as.memoizedState=ls=e:ls=ls.next=e}return ls}function bs(e,t){return"function"===typeof t?t(e):t}function _s(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=cs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var c=a=null,l=null,u=s;do{var h=u.lane;if((ss&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,as.lanes|=h,Mc|=h}u=u.next}while(null!==u&&u!==s);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Mc|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Es(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Is(){}function Ss(e,t){var n=as,r=ws(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,Ms(Cs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Ps(9,ks.bind(null,n,r,i,t),void 0,null),null===Nc)throw Error(o(349));0!==(30&ss)||Ts(n,t,i)}return i}function Ts(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ks(e,t,n,r){t.value=n,t.getSnapshot=r,xs(t)&&Ns(e)}function Cs(e,t,n){return n((function(){xs(t)&&Ns(e)}))}function xs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ns(e){var t=Lo(e,1);null!==t&&nl(t,e,1,-1)}function As(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Qs.bind(null,as,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Rs(){return ws().memoizedState}function Ds(e,t,n,r){var i=ys();as.flags|=e,i.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Os(e,t,n,r){var i=ws();r=void 0===r?null:r;var o=void 0;if(null!==cs){var s=cs.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=Ps(t,n,o,r))}as.flags|=e,i.memoizedState=Ps(1|t,n,o,r)}function Ls(e,t){return Ds(8390656,8,e,t)}function Ms(e,t){return Os(2048,8,e,t)}function Fs(e,t){return Os(4,2,e,t)}function Us(e,t){return Os(4,4,e,t)}function js(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4,4,js.bind(null,t,e),n)}function zs(){}function Bs(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qs(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ks(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),as.lanes|=n,Mc|=n,e.baseState=!0),t)}function Gs(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{wt=n,os.transition=r}}function Hs(){return ws().memoizedState}function Ws(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Js(e))$s(t,n);else if(null!==(n=Oo(e,t,n,r))){nl(n,e,r,el()),Ys(n,t,r)}}function Qs(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Js(e))$s(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var c=t.interleaved;return null===c?(i.next=i,Do(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Oo(e,t,i,r))&&(nl(n,e,r,i=el()),Ys(n,t,r))}}function Js(e){var t=e.alternate;return e===as||null!==t&&t===as}function $s(e,t){hs=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ys(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xs={readContext:Po,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Zs={readContext:Po,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Ls,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ds(4194308,4,js.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ds(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ds(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ws.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:As,useDebugValue:zs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=As(!1),t=e[0];return e=Gs.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=ys();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Nc)throw Error(o(349));0!==(30&ss)||Ts(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ls(Cs.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,ks.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=Nc.identifierPrefix;if(io){var n=Yi;t=":"+t+"R"+(n=($i&~(1<<32-st($i)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Po,useCallback:Bs,useContext:Po,useEffect:Ms,useImperativeHandle:Vs,useInsertionEffect:Fs,useLayoutEffect:Us,useMemo:qs,useReducer:_s,useRef:Rs,useState:function(){return _s(bs)},useDebugValue:zs,useDeferredValue:function(e){return Ks(ws(),cs.memoizedState,e)},useTransition:function(){return[_s(bs)[0],ws().memoizedState]},useMutableSource:Is,useSyncExternalStore:Ss,useId:Hs,unstable_isNewReconciler:!1},ta={readContext:Po,useCallback:Bs,useContext:Po,useEffect:Ms,useImperativeHandle:Vs,useInsertionEffect:Fs,useLayoutEffect:Us,useMemo:qs,useReducer:Es,useRef:Rs,useState:function(){return Es(bs)},useDebugValue:zs,useDeferredValue:function(e){var t=ws();return null===cs?t.memoizedState=e:Ks(t,cs.memoizedState,e)},useTransition:function(){return[Es(bs)[0],ws().memoizedState]},useMutableSource:Is,useSyncExternalStore:Ss,useId:Hs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),o=jo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Vo(e,o,i))&&(nl(t,e,i,r),zo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),o=jo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Vo(e,o,i))&&(nl(t,e,i,r),zo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=jo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vo(e,i,r))&&(nl(t,e,r,n),zo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,o))}function sa(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Ri(t)?Ai:xi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Ri(t)?Ai:xi.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),qo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function la(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=jo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kc||(Kc=!0,Gc=r),ha(0,t)},n}function pa(e,t,n){(n=jo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tl.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=jo(-1,1)).tag=2,Vo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?Eo(t,null,n,r):_o(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var o=t.ref;return Ao(t,i),r=gs(e,t,n,r,o,i),n=vs(),null===e||wa?(io&&n&&eo(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Rl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ol(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ia(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(s,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Dl(o,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(cr(o,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return ka(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dc,Rc),Rc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dc,Rc),Rc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,ki(Dc,Rc),Rc|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ki(Dc,Rc),Rc|=r;return ba(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var o=Ri(n)?Ai:xi.current;return o=Pi(t,o),Ao(t,i),n=gs(e,t,n,r,o,i),r=vs(),null===e||wa?(io&&r&&eo(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ca(e,t,n,r,i){if(Ri(n)){var o=!0;Mi(t)}else o=!1;if(Ao(t,i),null===t.stateNode)qa(e,t),sa(t,n,r),ca(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=Po(l):l=Pi(t,l=Ri(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==l)&&aa(t,s,r,l),Mo=!1;var d=t.memoizedState;s.state=d,qo(t,r,s,i),c=t.memoizedState,a!==r||d!==c||Ni.current||Mo?("function"===typeof u&&(ra(t,n,u,r),c=t.memoizedState),(a=Mo||oa(t,n,a,r,d,c,l))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=l,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uo(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:na(t.type,a),s.props=l,h=t.pendingProps,d=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=Po(c):c=Pi(t,c=Ri(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==c)&&aa(t,s,r,c),Mo=!1,d=t.memoizedState,s.state=d,qo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Mo?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(l=Mo||oa(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=c,r=l):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xa(e,t,n,r,o,i)}function xa(e,t,n,r,i,o){Ta(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Fi(t,n,!1),Ka(e,t,o);r=t.stateNode,ya.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,a,o)):ba(e,t,a,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),$o(e,t.containerInfo)}function Aa(e,t,n,r,i){return po(),mo(i),t.flags|=256,ba(e,t,n,r),t.child}var Pa,Ra,Da,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),ki(es,1&s),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Ml(c,i,0,null),e=Ll(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Ua(t,c));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(s=Ll(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&_o(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,s);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,ja(e,t,a,r=ua(s=Error(o(419)),r,void 0))}if(c=0!==(a&e.childLanes),wa||c){if(null!==(r=Nc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Lo(e,i),nl(r,e,i,-1))}return ml(),ja(e,t,a,r=ua(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=li(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Wi[Qi++]=$i,Wi[Qi++]=Yi,Wi[Qi++]=Ji,$i=e.id,Yi=e.overflow,Ji=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,s,n);if(a){a=i.fallback,c=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Dl(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Dl(r,a):(a=Ll(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Ma(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Dl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&mo(r),_o(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),No(e.return,t,n)}function za(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,o);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Ri(t.type)&&Di(),Ha(t),null;case 3:return r=t.stateNode,Yo(),Ti(Ni),Ti(xi),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sl(oo),oo=null))),Ra(e,t),Ha(t),null;case 5:Zo(t);var i=Jo(Qo.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ha(t),null}if(e=Jo(Ho.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,s),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jr("invalid",r);break;case"textarea":ie(r,s),jr("invalid",r)}for(var c in ye(n,s),i=null,s)if(s.hasOwnProperty(c)){var l=s[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,s,!0);break;case"textarea":H(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=J(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(s in ye(n,i),l=i)if(l.hasOwnProperty(s)){var u=l[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&jr("scroll",e):null!=u&&w(e,s,u,c))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Jo(Qo.current),Jo(Ho.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ti(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),s=!1}else null!==oo&&(sl(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Oc&&(Oc=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return Yo(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return xo(t.type._context),Ha(t),null;case 19:if(Ti(es),null===(s=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(c=s.rendering))if(r)Ga(s,!1);else{if(0!==Oc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ts(e))){for(t.flags|=128,Ga(s,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>Bc&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!io)return Ha(t),null}else 2*Ye()-s.renderingStartTime>Bc&&1073741824!==n&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=s.last)?n.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=es.current,ki(es,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rc)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qa(e,t){switch(to(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yo(),Ti(Ni),Ti(xi),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ti(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(es),null;case 4:return Yo(),null;case 10:return xo(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jo(Ho.current);var o,s=null;switch(n){case"input":i=J(e,i),r=J(e,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&jr("scroll",e),s||c===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,$a=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sl(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Sl(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&ec(t,n,o)}i=i.next}while(i!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,hc=!1;function dc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:$a||Za(n,t);case 6:var r=uc,i=hc;uc=null,dc(e,t,n),hc=i,null!==(uc=r)&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(uc,n.stateNode));break;case 4:r=uc,i=hc,uc=n.stateNode.containerInfo,hc=!0,dc(e,t,n),uc=r,hc=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&ec(n,t,s),i=i.next}while(i!==r)}dc(e,t,n);break;case 1:if(!$a&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sl(n,t,a)}dc(e,t,n);break;case 21:dc(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,dc(e,t,n),$a=r):dc(e,t,n);break;default:dc(e,t,n)}}function pc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach((function(t){var r=xl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,hc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===uc)throw Error(o(160));fc(s,a,i),uc=null,hc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Sl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),vc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(g){Sl(e,e.return,g)}try{nc(5,e,e.return)}catch(g){Sl(e,e.return,g)}}break;case 1:mc(t,e),vc(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(mc(t,e),vc(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Sl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===s.type&&null!=s.name&&Y(i,s),we(c,a);var u=we(c,s);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":X(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Sl(e,e.return,g)}}break;case 6:if(mc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Sl(e,e.return,g)}}break;case 3:if(mc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Sl(e,e.return,g)}break;case 4:default:mc(t,e),vc(e);break;case 13:mc(t,e),vc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=Ye())),4&r&&pc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,mc(t,e),$a=u):mc(t,e),vc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nc(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sl(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){_c(d);continue}}null!==p?(p.return=f,Xa=p):_c(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Sl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mc(t,e),vc(e),4&r&&pc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),lc(e,ac(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cc(e,ac(e),s);break;default:throw Error(o(161))}}catch(a){Sl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Xa=e,wc(e,t,n)}function wc(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ja;if(!s){var a=i.alternate,c=null!==a&&null!==a.memoizedState||$a;a=Ja;var l=$a;if(Ja=s,($a=c)&&!l)for(Xa=i;null!==Xa;)c=(s=Xa).child,22===s.tag&&null!==s.memoizedState?Ec(i):null!==c?(c.return=s,Xa=c):Ec(i);for(;null!==o;)Xa=o,wc(o,t,n),o=o.sibling;Xa=i,Ja=a,$a=l}bc(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Xa=o):bc(e)}}function bc(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ko(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ko(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(o(163))}$a||512&t.flags&&ic(t)}catch(f){Sl(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function _c(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Ec(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Sl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Sl(t,i,c)}}var o=t.return;try{ic(t)}catch(c){Sl(t,o,c)}break;case 5:var s=t.return;try{ic(t)}catch(c){Sl(t,s,c)}}}catch(c){Sl(t,t.return,c)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Ic,Sc=Math.ceil,Tc=b.ReactCurrentDispatcher,kc=b.ReactCurrentOwner,Cc=b.ReactCurrentBatchConfig,xc=0,Nc=null,Ac=null,Pc=0,Rc=0,Dc=Si(0),Oc=0,Lc=null,Mc=0,Fc=0,Uc=0,jc=null,Vc=null,zc=0,Bc=1/0,qc=null,Kc=!1,Gc=null,Hc=null,Wc=!1,Qc=null,Jc=0,$c=0,Yc=null,Xc=-1,Zc=0;function el(){return 0!==(6&xc)?Ye():-1!==Xc?Xc:Xc=Ye()}function tl(e){return 0===(1&e.mode)?1:0!==(2&xc)&&0!==Pc?Pc&-Pc:null!==go.transition?(0===Zc&&(Zc=mt()),Zc):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nl(e,t,n,r){if(50<$c)throw $c=0,Yc=null,Error(o(185));vt(e,n,r),0!==(2&xc)&&e===Nc||(e===Nc&&(0===(2&xc)&&(Fc|=n),4===Oc&&al(e,Pc)),rl(e,r),1===n&&0===xc&&0===(1&t.mode)&&(Bc=Ye()+500,ji&&Bi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,c=i[s];-1===c?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Nc?Pc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cl.bind(null,e)):zi(cl.bind(null,e)),si((function(){0===(6&xc)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Xc=-1,Zc=0,0!==(6&xc))throw Error(o(327));var n=e.callbackNode;if(El()&&e.callbackNode!==n)return null;var r=dt(e,e===Nc?Pc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var i=xc;xc|=2;var s=pl();for(Nc===e&&Pc===t||(qc=null,Bc=Ye()+500,dl(e,t));;)try{yl();break}catch(c){fl(e,c)}Co(),Tc.current=s,xc=i,null!==Ac?t=0:(Nc=null,Pc=0,t=Oc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Lc,dl(e,0),al(e,r),rl(e,Ye()),n;if(6===t)al(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gl(e,r))&&(0!==(s=pt(e))&&(r=s,t=ol(e,s))),1===t))throw n=Lc,dl(e,0),al(e,r),rl(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:_l(e,Vc,qc);break;case 3:if(al(e,r),(130023424&r)===r&&10<(t=zc+500-Ye())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_l.bind(null,e,Vc,qc),t);break}_l(e,Vc,qc);break;case 4:if(al(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sc(r/1960))-r)){e.timeoutHandle=ri(_l.bind(null,e,Vc,qc),r);break}_l(e,Vc,qc);break;default:throw Error(o(329))}}}return rl(e,Ye()),e.callbackNode===n?il.bind(null,e):null}function ol(e,t){var n=jc;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=Vc,Vc=n,null!==t&&sl(t)),e}function sl(e){null===Vc?Vc=e:Vc.push.apply(Vc,e)}function al(e,t){for(t&=~Uc,t&=~Fc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&xc))throw Error(o(327));El();var t=dt(e,0);if(0===(1&t))return rl(e,Ye()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Lc,dl(e,0),al(e,t),rl(e,Ye()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_l(e,Vc,qc),rl(e,Ye()),null}function ll(e,t){var n=xc;xc|=1;try{return e(t)}finally{0===(xc=n)&&(Bc=Ye()+500,ji&&Bi())}}function ul(e){null!==Qc&&0===Qc.tag&&0===(6&xc)&&El();var t=xc;xc|=1;var n=Cc.transition,r=wt;try{if(Cc.transition=null,wt=1,e)return e()}finally{wt=r,Cc.transition=n,0===(6&(xc=t))&&Bi()}}function hl(){Rc=Dc.current,Ti(Dc)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ac)for(n=Ac.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Yo(),Ti(Ni),Ti(xi),rs();break;case 5:Zo(r);break;case 4:Yo();break;case 13:case 19:Ti(es);break;case 10:xo(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Nc=e,Ac=e=Dl(e.current,null),Pc=Rc=t,Oc=0,Lc=null,Uc=Fc=Mc=0,Vc=jc=null,null!==Ro){for(t=0;t<Ro.length;t++)if(null!==(r=(n=Ro[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Ro=null}return e}function fl(e,t){for(;;){var n=Ac;try{if(Co(),is.current=Xs,us){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}us=!1}if(ss=0,ls=cs=as=null,hs=!1,ds=0,kc.current=null,null===n||null===n.return){Oc=1,Lc=t,Ac=null;break}e:{var s=e,a=n.return,c=n,l=t;if(t=Pc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,va(p,a,c,0,t),1&p.mode&&ma(s,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ma(s,u,t),ml();break e}l=Error(o(426))}else if(io&&1&c.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,c,0,t),mo(la(l,c));break e}}s=l=la(l,c),4!==Oc&&(Oc=2),null===jc?jc=[s]:jc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,fa(0,l,t));break e;case 1:c=l;var y=s.type,w=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hc||!Hc.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,pa(s,c,t));break e}}s=s.return}while(null!==s)}bl(n)}catch(b){t=b,Ac===n&&null!==n&&(Ac=n=n.return);continue}break}}function pl(){var e=Tc.current;return Tc.current=Xs,null===e?Xs:e}function ml(){0!==Oc&&3!==Oc&&2!==Oc||(Oc=4),null===Nc||0===(268435455&Mc)&&0===(268435455&Fc)||al(Nc,Pc)}function gl(e,t){var n=xc;xc|=2;var r=pl();for(Nc===e&&Pc===t||(qc=null,dl(e,t));;)try{vl();break}catch(i){fl(e,i)}if(Co(),xc=n,Tc.current=r,null!==Ac)throw Error(o(261));return Nc=null,Pc=0,Oc}function vl(){for(;null!==Ac;)wl(Ac)}function yl(){for(;null!==Ac&&!Je();)wl(Ac)}function wl(e){var t=Ic(e.alternate,e,Rc);e.memoizedProps=e.pendingProps,null===t?bl(e):Ac=t,kc.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Rc)))return void(Ac=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Ac=n);if(null===e)return Oc=6,void(Ac=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ac=t);Ac=t=e}while(null!==t);0===Oc&&(Oc=5)}function _l(e,t,n){var r=wt,i=Cc.transition;try{Cc.transition=null,wt=1,function(e,t,n,r){do{El()}while(null!==Qc);if(0!==(6&xc))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Nc&&(Ac=Nc=null,Pc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wc||(Wc=!0,Nl(tt,(function(){return El(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Cc.transition,Cc.transition=null;var a=wt;wt=1;var c=xc;xc|=4,kc.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==s||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===s&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(_){Sl(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tc,tc=!1}(e,n),gc(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,yc(n,e,i),$e(),xc=c,wt=a,Cc.transition=s}else e.current=n;if(Wc&&(Wc=!1,Qc=e,Jc=i),s=e.pendingLanes,0===s&&(Hc=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kc)throw Kc=!1,e=Gc,Gc=null,e;0!==(1&Jc)&&0!==e.tag&&El(),s=e.pendingLanes,0!==(1&s)?e===Yc?$c++:($c=0,Yc=e):$c=0,Bi()}(e,t,n,r)}finally{Cc.transition=i,wt=r}return null}function El(){if(null!==Qc){var e=bt(Jc),t=Cc.transition,n=wt;try{if(Cc.transition=null,wt=16>e?16:e,null===Qc)var r=!1;else{if(e=Qc,Qc=null,Jc=0,0!==(6&xc))throw Error(o(331));var i=xc;for(xc|=4,Xa=e.current;null!==Xa;){var s=Xa,a=s.child;if(0!==(16&Xa.flags)){var c=s.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nc(8,h,s)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(oc(h),h===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(s=Xa).flags))switch(s.tag){case 0:case 11:case 15:nc(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Xa=y;break e}Xa=s.return}}var w=e.current;for(Xa=w;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=w;null!==Xa;){if(0!==(2048&(c=Xa).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(E){Sl(c,c.return,E)}if(c===a){Xa=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Xa=_;break e}Xa=c.return}}if(xc=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Cc.transition=t}}return!1}function Il(e,t,n){e=Vo(e,t=fa(0,t=la(n,t),1),1),t=el(),null!==e&&(vt(e,1,t),rl(e,t))}function Sl(e,t,n){if(3===e.tag)Il(e,e,n);else for(;null!==t;){if(3===t.tag){Il(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){t=Vo(t,e=pa(t,e=la(n,e),1),1),e=el(),null!==t&&(vt(t,1,e),rl(t,e));break}}t=t.return}}function Tl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Nc===e&&(Pc&n)===n&&(4===Oc||3===Oc&&(130023424&Pc)===Pc&&500>Ye()-zc?dl(e,0):Uc|=n),rl(e,t)}function kl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=el();null!==(e=Lo(e,t))&&(vt(e,t,n),rl(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kl(e,n)}function xl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),kl(e,n)}function Nl(e,t){return We(e,t)}function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Al(e,t,n,r)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ol(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Rl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Ll(n.children,i,s,t);case S:a=8,i|=8;break;case T:return(e=Pl(12,n,t,2|i)).elementType=T,e.lanes=s,e;case N:return(e=Pl(13,n,t,i)).elementType=N,e.lanes=s,e;case A:return(e=Pl(19,n,t,i)).elementType=A,e.lanes=s,e;case D:return Ml(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pl(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ll(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fl(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,i,o,s,a,c){return e=new jl(e,t,n,a,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(o),e}function zl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bl(e,t,n,r,i,o,s,a,c){return(e=Vl(n,r,!0,e,0,o,0,a,c)).context=zl(null),n=e.current,(o=jo(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Vo(n,o,i),e.current.lanes=i,vt(e,i,r),rl(e,r),e}function ql(e,t,n,r){var i=t.current,o=el(),s=tl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=jo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vo(i,t,s))&&(nl(e,i,s,o),zo(e,i,s)),s}function Kl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Ic=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),po();break;case 5:Xo(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:$o(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Io,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(ki(es,1&es.current),null!==(e=Ka(e,t,n))?e.sibling:null);ki(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Ka(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,io&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Pi(t,xi.current);Ao(t,n),i=gs(null,t,r,e,i,n);var s=vs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=xa(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Uo(e,t),qo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Aa(e,t,r,n,i=la(Error(o(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=la(Error(o(424)),t));break e}for(ro=li(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Eo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ka(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&lo(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ta(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Fa(e,t,n);case 4:return $o(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,ki(Io,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ni.current){t=Ka(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){a=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=jo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),No(s.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),No(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ao(t,n),r=r(i=Po(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ao(t,n),sa(t,r,i),ca(t,r,i,n),xa(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Sa(e,t,n)}throw Error(o(156,t.tag))};var Wl="function"===typeof reportError?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}function Jl(e){this._internalRoot=e}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xl(){}function Zl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Kl(s);a.call(e)}}ql(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Kl(s);o.call(e)}}var s=Bl(t,r,e,0,null,!1,0,"",Xl);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),ul(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kl(c);a.call(e)}}var c=Vl(e,0,!1,null,0,!1,0,"",Xl);return e._reactRootContainer=c,e[pi]=c.current,Br(8===e.nodeType?e.parentNode:e),ul((function(){ql(t,c,n,r)})),c}(n,t,e,i,r);return Kl(s)}Jl.prototype.render=Ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));ql(e,t,null,null)},Jl.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){ql(null,e,null,null)})),t[pi]=null}},Jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Ye()),0===(6&xc)&&(Bc=Ye()+500,Bi()))}break;case 13:ul((function(){var t=Lo(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Hl(e,1)}},Et=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)nl(t,e,134217728,el());Hl(e,134217728)}},It=function(e){if(13===e.tag){var t=tl(e),n=Lo(e,t);if(null!==n)nl(n,e,t,el());Hl(e,t)}},St=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));W(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ll,Ne=ul;var eu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,ll]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$l(e))throw Error(o(299));var n=!1,r="",i=Wl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!Yl(t))throw Error(o(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$l(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Wl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jl(t)},t.render=function(e,t,n){if(!Yl(t))throw Error(o(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yl(e))throw Error(o(40));return!!e._reactRootContainer&&(ul((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yl(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},82:(e,t)=>{"use strict";var n=60103,r=60106,i=60107,o=60108,s=60114,a=60109,c=60110,l=60112,u=60113,h=60120,d=60115,f=60116,p=60121,m=60122,g=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w("react.element"),r=w("react.portal"),i=w("react.fragment"),o=w("react.strict_mode"),s=w("react.profiler"),a=w("react.provider"),c=w("react.context"),l=w("react.forward_ref"),u=w("react.suspense"),h=w("react.suspense_list"),d=w("react.memo"),f=w("react.lazy"),p=w("react.block"),m=w("react.server.block"),g=w("react.fundamental"),v=w("react.debug_trace_mode"),y=w("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case u:case h:return e;default:switch(e=e&&e.$$typeof){case c:case l:case f:case d:case a:return e;default:return t}}case r:return t}}}t.isForwardRef=function(e){return b(e)===l}},86:(e,t,n)=>{"use strict";e.exports=n(82)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return s=s(c=e),e=""===o?"."+x(c,0):o,_(s)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(s,t,i,"",(function(e){return e}))):null!=s&&(k(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",_(e))for(var l=0;l<e.length;l++){var u=o+x(a=e[l],l);c+=N(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=N(a=a.value,t,i,u=o+x(a,l++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=w,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=I.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>o(c,n))l<i&&0>o(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>o(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,D(E);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var o=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!N());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),c=!1}return c}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,S=!1,T=null,k=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?I():(S=!1,T=null)}}else S=!1}if("function"===typeof w)I=function(){w(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,I=function(){R.postMessage(null)}}else I=function(){v(A,0)};function D(e){T=e,S||(S=!0,I())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(l)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(_,o-s))):(e.sortIndex=a,n(l,e),m||p||(m=!0,D(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var l=o[c];if(!a(l))return!1;var u=e[l],h=t[l];if(!1===(i=n?n.call(r,u,h,l):void 0)||void 0===i&&u!==h)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>vo,SDK_VERSION:()=>Qs,_DEFAULT_ENTRY_NAME:()=>Rs,_addComponent:()=>Fs,_addOrOverwriteComponent:()=>Us,_apps:()=>Os,_clearComponents:()=>Ks,_components:()=>Ms,_getProvider:()=>Vs,_isFirebaseApp:()=>Bs,_isFirebaseServerApp:()=>qs,_registerComponent:()=>js,_removeServiceInstance:()=>zs,_serverApps:()=>Ls,deleteApp:()=>Zs,getApp:()=>Ys,getApps:()=>Xs,initializeApp:()=>Js,initializeServerApp:()=>$s,onLog:()=>ta,registerVersion:()=>ea,setLogLevel:()=>na});var t,r=n(391),i=n(43),o=n.t(i,2),s=n(950),a=n.t(s,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const l="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,h=t.Pop,m=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){h=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:h,location:b.location,delta:n})}function w(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(c({},a.state,{idx:g}),""));let b={get action(){return h},get location(){return e(o,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(l,y),m=e,()=>{o.removeEventListener(l,y),m=null}},createHref:e=>n(o,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(b.location,e,n);r&&r(i,e),g=v()+1;let c=d(i,g),l=b.createHref(i);try{a.pushState(c,"",l)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(l)}s&&m&&m({action:h,location:b.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(b.location,e,n);r&&r(i,e),g=v();let o=d(i,g),c=b.createHref(i);a.replaceState(o,"",c),s&&m&&m({action:h,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=R(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s){let e=P(r);o=N(i[s],e)}return o}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=F([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:x(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=b(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,E=3,I=2,S=1,T=10,k=-2,C=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=k),t&&(r+=I),n.filter((e=>!C(e))).reduce(((e,t)=>e+(_.test(t)?E:""===t?S:T)),r)}function N(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(r,l.params);let u=e.route;o.push({params:r,pathname:F([i,l.pathname]),pathnameBase:U(F([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=F([i,l.pathnameBase]))}return o}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function P(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=O(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=c({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:j(r),hash:V(i)}}(i,o),h=a&&"/"!==a&&a.endsWith("/"),d=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!d||(l.pathname+="/"),l}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const G=i.createContext(null);const H=i.createContext(null);const W=i.createContext(null);const Q=i.createContext(null);const J=i.createContext({outlet:null,matches:[],isDataRoute:!1});const $=i.createContext(null);function Y(){return null!=i.useContext(Q)}function X(){return Y()||u(!1),i.useContext(Q).location}function Z(e){i.useContext(W).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(J);return e?function(){let{router:e}=he(le.UseNavigateStable),t=fe(ue.UseNavigateStable),n=i.useRef(!1);Z((()=>{n.current=!0}));let r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},i)))}),[e,t]);return r}():function(){Y()||u(!1);let e=i.useContext(G),{basename:t,future:n,navigator:r}=i.useContext(W),{matches:o}=i.useContext(J),{pathname:s}=X(),a=JSON.stringify(L(o,n.v7_relativeSplatPath)),c=i.useRef(!1);return Z((()=>{c.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!c.current)return;if("number"===typeof n)return void r.go(n);let o=M(n,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:F([t,o.pathname])),(i.replace?r.replace:r.push)(o,i.state,i)}),[t,r,a,s,e])}()}const te=i.createContext(null);function ne(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(W),{matches:o}=i.useContext(J),{pathname:s}=X(),a=JSON.stringify(L(o,r.v7_relativeSplatPath));return i.useMemo((()=>M(e,JSON.parse(a),s,"path"===n)),[e,a,s,n])}function re(e,n,r,o){Y()||u(!1);let{navigator:s}=i.useContext(W),{matches:a}=i.useContext(J),c=a[a.length-1],l=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let d,f=X();if(n){var p;let e="string"===typeof n?m(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",v=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=y(e,{pathname:v});let b=ce(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:F([h,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,r,o);return n&&b?i.createElement(Q.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},b):b}function ie(){let e=function(){var e;let t=i.useContext($),n=de(ue.UseRouteError),r=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:o},n):null,null)}const oe=i.createElement(ie,null);class se extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(J.Provider,{value:this.props.routeContext},i.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:r}=e,o=i.useContext(G);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(J.Provider,{value:t},r)}function ce(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let a=e,c=null==(o=n)?void 0:o.errors;if(null!=c){let e=a.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,r,o)=>{let s,u=!1,d=null,f=null;var p;n&&(s=c&&r.route.id?c[r.route.id]:void 0,d=r.route.errorElement||oe,l&&(h<0&&0===o?(p="route-fallback",!1||pe[p]||(pe[p]=!0),u=!0,f=null):h===o&&(u=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=s?d:u?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ae,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(se,{location:n.location,revalidation:n.revalidation,component:d,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=i.useContext(G);return t||u(!1),t}function de(e){let t=i.useContext(H);return t||u(!1),t}function fe(e){let t=function(e){let t=i.useContext(J);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const pe={};o.startTransition;function me(e){let{to:t,replace:n,state:r,relative:o}=e;Y()||u(!1);let{future:s,static:a}=i.useContext(W),{matches:c}=i.useContext(J),{pathname:l}=X(),h=ee(),d=M(t,L(c,s.v7_relativeSplatPath),l,"path"===o),f=JSON.stringify(d);return i.useEffect((()=>h(JSON.parse(f),{replace:n,state:r,relative:o})),[h,f,o,n,r]),null}function ge(e){return function(e){let t=i.useContext(J).outlet;return t?i.createElement(te.Provider,{value:e},t):t}(e.context)}function ve(e){u(!1)}function ye(e){let{basename:n="/",children:r=null,location:o,navigationType:s=t.Pop,navigator:a,static:c=!1,future:l}=e;Y()&&u(!1);let h=n.replace(/^\/*/,"/"),d=i.useMemo((()=>({basename:h,navigator:a,static:c,future:K({v7_relativeSplatPath:!1},l)})),[h,l,a,c]);"string"===typeof o&&(o=m(o));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=o,w=i.useMemo((()=>{let e=R(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:s}}),[h,f,p,g,v,y,s]);return null==w?null:i.createElement(W.Provider,{value:d},i.createElement(Q.Provider,{children:r,value:w}))}function we(e){let{children:t,location:n}=e;return re(be(t),n)}new Promise((()=>{}));i.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let o=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,be(e.props.children,o));e.type!==ve&&u(!1),e.props.index&&e.props.children&&u(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=be(e.props.children,o)),n.push(s)})),n}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ie=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(Sj){}new Map;const Se=o.startTransition;a.flushSync,o.useId;function Te(e){let{basename:t,children:n,future:r,window:o}=e,s=i.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let c=s.current,[l,u]=i.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},d=i.useCallback((e=>{h&&Se?Se((()=>u(e))):u(e)}),[u,h]);return i.useLayoutEffect((()=>c.listen(d)),[c,d]),i.createElement(ye,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c,future:r})}const ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=i.forwardRef((function(e,t){let n,{onClick:r,relative:o,reloadDocument:s,replace:a,state:c,target:l,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=Ee(e,Ie),{basename:g}=i.useContext(W),v=!1;if("string"===typeof h&&Ce.test(h)&&(n=h,ke))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=R(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(Sj){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;Y()||u(!1);let{basename:r,navigator:o}=i.useContext(W),{hash:s,pathname:a,search:c}=ne(e,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:F([r,a])),o.createHref({pathname:l,search:c,hash:s})}(h,{relative:o}),w=function(e,t){let{target:n,replace:r,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:c}=void 0===t?{}:t,l=ee(),u=X(),h=ne(e,{relative:a});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:p(u)===p(h);l(e,{replace:n,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:c})}}),[u,l,h,r,o,n,e,s,a,c])}(h,{replace:a,state:c,target:l,preventScrollReset:d,relative:o,unstable_viewTransition:f});return i.createElement("a",_e({},m,{href:n||y,onClick:v||s?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:l}))}));var Ne,Ae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ae||(Ae={}));function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe.apply(this,arguments)}function Re(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Re(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const De=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Re(e))&&(r&&(r+=" "),r+=t);return r};var Oe={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"};function Le(e){var t=typeof e;return"string"===t||"number"===t?Oe[e]||e:""}var Me=function(e,t){return e&&t},Fe=function(e,t){return e&&!0!==e&&e+" "+t},Ue=function(e,t){return e&&(!0===e?t:e+" "+t)},je=function(e,t){return e&&!0!==e?e.replace("large screen","large-screen").replace(/ vertically/g,"-vertically").split(" ").map((function(e){return e.replace("-"," ")+" "+t})).join(" "):null},Ve=function(e){return"justified"===e?"justified":Fe(e,"aligned")},ze=function(e){return Fe(e,"aligned")},Be=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=!1),n&&"equal"===e)return"equal width";var r=typeof e;return"string"!==r&&"number"!==r||!t?Le(e):Le(e)+" "+t};const qe=function(e,t){var n=e.handledProps,r=void 0===n?[]:n;return Object.keys(t).reduce((function(e,n){return"childKey"===n||-1===r.indexOf(n)&&(e[n]=t[n]),e}),{})};const Ke=function(e,t,n){var r=e.defaultProps,i=void 0===r?{}:r;if(t.as&&t.as!==i.as)return t.as;if(n){var o=n();if(o)return o}return t.href?"a":i.as||"div"};const Ge=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};const He=function(){this.__data__=[],this.size=0};const We=function(e,t){return e===t||e!==e&&t!==t};const Qe=function(e,t){for(var n=e.length;n--;)if(We(e[n][0],t))return n;return-1};var Je=Array.prototype.splice;const $e=function(e){var t=this.__data__,n=Qe(t,e);return!(n<0)&&(n==t.length-1?t.pop():Je.call(t,n,1),--this.size,!0)};const Ye=function(e){var t=this.__data__,n=Qe(t,e);return n<0?void 0:t[n][1]};const Xe=function(e){return Qe(this.__data__,e)>-1};const Ze=function(e,t){var n=this.__data__,r=Qe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function et(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}et.prototype.clear=He,et.prototype.delete=$e,et.prototype.get=Ye,et.prototype.has=Xe,et.prototype.set=Ze;const tt=et;const nt=function(){this.__data__=new tt,this.size=0};const rt=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const it=function(e){return this.__data__.get(e)};const ot=function(e){return this.__data__.has(e)};const st="object"==typeof global&&global&&global.Object===Object&&global;var at="object"==typeof self&&self&&self.Object===Object&&self;const ct=st||at||Function("return this")();const lt=ct.Symbol;var ut=Object.prototype,ht=ut.hasOwnProperty,dt=ut.toString,ft=lt?lt.toStringTag:void 0;const pt=function(e){var t=ht.call(e,ft),n=e[ft];try{e[ft]=void 0;var r=!0}catch(Sj){}var i=dt.call(e);return r&&(t?e[ft]=n:delete e[ft]),i};var mt=Object.prototype.toString;const gt=function(e){return mt.call(e)};var vt=lt?lt.toStringTag:void 0;const yt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":vt&&vt in Object(e)?pt(e):gt(e)};const wt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const bt=function(e){if(!wt(e))return!1;var t=yt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const _t=ct["__core-js_shared__"];var Et=function(){var e=/[^.]+$/.exec(_t&&_t.keys&&_t.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const It=function(e){return!!Et&&Et in e};var St=Function.prototype.toString;const Tt=function(e){if(null!=e){try{return St.call(e)}catch(Sj){}try{return e+""}catch(Sj){}}return""};var kt=/^\[object .+?Constructor\]$/,Ct=Function.prototype,xt=Object.prototype,Nt=Ct.toString,At=xt.hasOwnProperty,Pt=RegExp("^"+Nt.call(At).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Rt=function(e){return!(!wt(e)||It(e))&&(bt(e)?Pt:kt).test(Tt(e))};const Dt=function(e,t){return null==e?void 0:e[t]};const Ot=function(e,t){var n=Dt(e,t);return Rt(n)?n:void 0};const Lt=Ot(ct,"Map");const Mt=Ot(Object,"create");const Ft=function(){this.__data__=Mt?Mt(null):{},this.size=0};const Ut=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var jt=Object.prototype.hasOwnProperty;const Vt=function(e){var t=this.__data__;if(Mt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return jt.call(t,e)?t[e]:void 0};var zt=Object.prototype.hasOwnProperty;const Bt=function(e){var t=this.__data__;return Mt?void 0!==t[e]:zt.call(t,e)};const qt=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Mt&&void 0===t?"__lodash_hash_undefined__":t,this};function Kt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Kt.prototype.clear=Ft,Kt.prototype.delete=Ut,Kt.prototype.get=Vt,Kt.prototype.has=Bt,Kt.prototype.set=qt;const Gt=Kt;const Ht=function(){this.size=0,this.__data__={hash:new Gt,map:new(Lt||tt),string:new Gt}};const Wt=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const Qt=function(e,t){var n=e.__data__;return Wt(t)?n["string"==typeof t?"string":"hash"]:n.map};const Jt=function(e){var t=Qt(this,e).delete(e);return this.size-=t?1:0,t};const $t=function(e){return Qt(this,e).get(e)};const Yt=function(e){return Qt(this,e).has(e)};const Xt=function(e,t){var n=Qt(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Zt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Zt.prototype.clear=Ht,Zt.prototype.delete=Jt,Zt.prototype.get=$t,Zt.prototype.has=Yt,Zt.prototype.set=Xt;const en=Zt;const tn=function(e,t){var n=this.__data__;if(n instanceof tt){var r=n.__data__;if(!Lt||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new en(r)}return n.set(e,t),this.size=n.size,this};function nn(e){var t=this.__data__=new tt(e);this.size=t.size}nn.prototype.clear=nt,nn.prototype.delete=rt,nn.prototype.get=it,nn.prototype.has=ot,nn.prototype.set=tn;const rn=nn;const on=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const sn=function(e){return this.__data__.has(e)};function an(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new en;++t<n;)this.add(e[t])}an.prototype.add=an.prototype.push=on,an.prototype.has=sn;const cn=an;const ln=function(e,t){return e.has(t)};const un=function(e,t,n,r,i,o){var s=1&n,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var h=-1,d=!0,f=2&n?new cn:void 0;for(o.set(e,t),o.set(t,e);++h<a;){var p=e[h],m=t[h];if(r)var g=s?r(m,p,h,t,e,o):r(p,m,h,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!Ge(t,(function(e,t){if(!ln(f,t)&&(p===e||i(p,e,n,r,o)))return f.push(t)}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d};const hn=ct.Uint8Array;const dn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};const fn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var pn=lt?lt.prototype:void 0,mn=pn?pn.valueOf:void 0;const gn=function(e,t,n,r,i,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new hn(e),new hn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return We(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=dn;case"[object Set]":var c=1&r;if(a||(a=fn),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;r|=2,s.set(e,t);var u=un(a(e),a(t),r,i,o,s);return s.delete(e),u;case"[object Symbol]":if(mn)return mn.call(e)==mn.call(t)}return!1};const vn=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};const yn=Array.isArray;const wn=function(e,t,n){var r=t(e);return yn(e)?r:vn(r,n(e))};const bn=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o};const _n=function(){return[]};var En=Object.prototype.propertyIsEnumerable,In=Object.getOwnPropertySymbols;const Sn=In?function(e){return null==e?[]:(e=Object(e),bn(In(e),(function(t){return En.call(e,t)})))}:_n;const Tn=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};const kn=function(e){return null!=e&&"object"==typeof e};const Cn=function(e){return kn(e)&&"[object Arguments]"==yt(e)};var xn=Object.prototype,Nn=xn.hasOwnProperty,An=xn.propertyIsEnumerable;const Pn=Cn(function(){return arguments}())?Cn:function(e){return kn(e)&&Nn.call(e,"callee")&&!An.call(e,"callee")};const Rn=function(){return!1};var Dn="object"==typeof exports&&exports&&!exports.nodeType&&exports,On=Dn&&"object"==typeof module&&module&&!module.nodeType&&module,Ln=On&&On.exports===Dn?ct.Buffer:void 0;const Mn=(Ln?Ln.isBuffer:void 0)||Rn;var Fn=/^(?:0|[1-9]\d*)$/;const Un=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Fn.test(e))&&e>-1&&e%1==0&&e<t};const jn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Vn={};Vn["[object Float32Array]"]=Vn["[object Float64Array]"]=Vn["[object Int8Array]"]=Vn["[object Int16Array]"]=Vn["[object Int32Array]"]=Vn["[object Uint8Array]"]=Vn["[object Uint8ClampedArray]"]=Vn["[object Uint16Array]"]=Vn["[object Uint32Array]"]=!0,Vn["[object Arguments]"]=Vn["[object Array]"]=Vn["[object ArrayBuffer]"]=Vn["[object Boolean]"]=Vn["[object DataView]"]=Vn["[object Date]"]=Vn["[object Error]"]=Vn["[object Function]"]=Vn["[object Map]"]=Vn["[object Number]"]=Vn["[object Object]"]=Vn["[object RegExp]"]=Vn["[object Set]"]=Vn["[object String]"]=Vn["[object WeakMap]"]=!1;const zn=function(e){return kn(e)&&jn(e.length)&&!!Vn[yt(e)]};const Bn=function(e){return function(t){return e(t)}};var qn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Kn=qn&&"object"==typeof module&&module&&!module.nodeType&&module,Gn=Kn&&Kn.exports===qn&&st.process,Hn=function(){try{var e=Kn&&Kn.require&&Kn.require("util").types;return e||Gn&&Gn.binding&&Gn.binding("util")}catch(Sj){}}();var Wn=Hn&&Hn.isTypedArray;const Qn=Wn?Bn(Wn):zn;var Jn=Object.prototype.hasOwnProperty;const $n=function(e,t){var n=yn(e),r=!n&&Pn(e),i=!n&&!r&&Mn(e),o=!n&&!r&&!i&&Qn(e),s=n||r||i||o,a=s?Tn(e.length,String):[],c=a.length;for(var l in e)!t&&!Jn.call(e,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Un(l,c))||a.push(l);return a};var Yn=Object.prototype;const Xn=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Yn)};const Zn=function(e,t){return function(n){return e(t(n))}};const er=Zn(Object.keys,Object);var tr=Object.prototype.hasOwnProperty;const nr=function(e){if(!Xn(e))return er(e);var t=[];for(var n in Object(e))tr.call(e,n)&&"constructor"!=n&&t.push(n);return t};const rr=function(e){return null!=e&&jn(e.length)&&!bt(e)};const ir=function(e){return rr(e)?$n(e):nr(e)};const or=function(e){return wn(e,ir,Sn)};var sr=Object.prototype.hasOwnProperty;const ar=function(e,t,n,r,i,o){var s=1&n,a=or(e),c=a.length;if(c!=or(t).length&&!s)return!1;for(var l=c;l--;){var u=a[l];if(!(s?u in t:sr.call(t,u)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=s;++l<c;){var m=e[u=a[l]],g=t[u];if(r)var v=s?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,w=t.constructor;y==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(f=!1)}return o.delete(e),o.delete(t),f};const cr=Ot(ct,"DataView");const lr=Ot(ct,"Promise");const ur=Ot(ct,"Set");const hr=Ot(ct,"WeakMap");var dr="[object Map]",fr="[object Promise]",pr="[object Set]",mr="[object WeakMap]",gr="[object DataView]",vr=Tt(cr),yr=Tt(Lt),wr=Tt(lr),br=Tt(ur),_r=Tt(hr),Er=yt;(cr&&Er(new cr(new ArrayBuffer(1)))!=gr||Lt&&Er(new Lt)!=dr||lr&&Er(lr.resolve())!=fr||ur&&Er(new ur)!=pr||hr&&Er(new hr)!=mr)&&(Er=function(e){var t=yt(e),n="[object Object]"==t?e.constructor:void 0,r=n?Tt(n):"";if(r)switch(r){case vr:return gr;case yr:return dr;case wr:return fr;case br:return pr;case _r:return mr}return t});const Ir=Er;var Sr="[object Arguments]",Tr="[object Array]",kr="[object Object]",Cr=Object.prototype.hasOwnProperty;const xr=function(e,t,n,r,i,o){var s=yn(e),a=yn(t),c=s?Tr:Ir(e),l=a?Tr:Ir(t),u=(c=c==Sr?kr:c)==kr,h=(l=l==Sr?kr:l)==kr,d=c==l;if(d&&Mn(e)){if(!Mn(t))return!1;s=!0,u=!1}if(d&&!u)return o||(o=new rn),s||Qn(e)?un(e,t,n,r,i,o):gn(e,t,c,n,r,i,o);if(!(1&n)){var f=u&&Cr.call(e,"__wrapped__"),p=h&&Cr.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,g=p?t.value():t;return o||(o=new rn),i(m,g,n,r,o)}}return!!d&&(o||(o=new rn),ar(e,t,n,r,i,o))};const Nr=function e(t,n,r,i,o){return t===n||(null==t||null==n||!kn(t)&&!kn(n)?t!==t&&n!==n:xr(t,n,r,i,e,o))};const Ar=function(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var c=(a=n[i])[0],l=e[c],u=a[1];if(s&&a[2]){if(void 0===l&&!(c in e))return!1}else{var h=new rn;if(r)var d=r(l,u,c,e,t,h);if(!(void 0===d?Nr(u,l,3,r,h):d))return!1}}return!0};const Pr=function(e){return e===e&&!wt(e)};const Rr=function(e){for(var t=ir(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Pr(i)]}return t};const Dr=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};const Or=function(e){var t=Rr(e);return 1==t.length&&t[0][2]?Dr(t[0][0],t[0][1]):function(n){return n===e||Ar(n,e,t)}};const Lr=function(e){return"symbol"==typeof e||kn(e)&&"[object Symbol]"==yt(e)};var Mr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fr=/^\w*$/;const Ur=function(e,t){if(yn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Lr(e))||(Fr.test(e)||!Mr.test(e)||null!=t&&e in Object(t))};function jr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(jr.Cache||en),n}jr.Cache=en;const Vr=jr;var zr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Br=/\\(\\)?/g;const qr=function(e){var t=Vr(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(zr,(function(e,n,r,i){t.push(r?i.replace(Br,"$1"):n||e)})),t}));const Kr=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var Gr=lt?lt.prototype:void 0,Hr=Gr?Gr.toString:void 0;const Wr=function e(t){if("string"==typeof t)return t;if(yn(t))return Kr(t,e)+"";if(Lr(t))return Hr?Hr.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const Qr=function(e){return null==e?"":Wr(e)};const Jr=function(e,t){return yn(e)?e:Ur(e,t)?[e]:qr(Qr(e))};const $r=function(e){if("string"==typeof e||Lr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};const Yr=function(e,t){for(var n=0,r=(t=Jr(t,e)).length;null!=e&&n<r;)e=e[$r(t[n++])];return n&&n==r?e:void 0};const Xr=function(e,t,n){var r=null==e?void 0:Yr(e,t);return void 0===r?n:r};const Zr=function(e,t){return null!=e&&t in Object(e)};const ei=function(e,t,n){for(var r=-1,i=(t=Jr(t,e)).length,o=!1;++r<i;){var s=$r(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&jn(i)&&Un(s,i)&&(yn(e)||Pn(e))};const ti=function(e,t){return null!=e&&ei(e,t,Zr)};const ni=function(e,t){return Ur(e)&&Pr(t)?Dr($r(e),t):function(n){var r=Xr(n,e);return void 0===r&&r===t?ti(n,e):Nr(t,r,3)}};const ri=function(e){return e};const ii=function(e){return function(t){return null==t?void 0:t[e]}};const oi=function(e){return function(t){return Yr(t,e)}};const si=function(e){return Ur(e)?ii($r(e)):oi(e)};const ai=function(e){return"function"==typeof e?e:null==e?ri:"object"==typeof e?yn(e)?ni(e[0],e[1]):Or(e):si(e)};const ci=function(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===n(o[c],c,o))break}return t}}();const li=function(e,t){return function(n,r){if(null==n)return n;if(!rr(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Object(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}};const ui=li((function(e,t){return e&&ci(e,t,ir)}));const hi=function(e,t){var n;return ui(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n};const di=function(e,t,n){if(!wt(n))return!1;var r=typeof t;return!!("number"==r?rr(n)&&Un(t,n.length):"string"==r&&t in n)&&We(n[t],e)};const fi=function(e,t,n){var r=yn(e)?Ge:hi;return n&&di(e,t,n)&&(t=void 0),r(e,ai(t,3))};var pi=function(e){return null===e||void 0===e||Array.isArray(e)&&0===e.length};function mi(e){var t=e.children,n=e.className,r=e.content,o=e.fluid,s=e.text,a=e.textAlign,c=De("ui",Me(s,"text"),Me(o,"fluid"),Ve(a),"container",n),l=qe(mi,e),u=Ke(mi,e);return i.createElement(u,Pe({},l,{className:c}),pi(t)?r:t)}mi.handledProps=["as","children","className","content","fluid","text","textAlign"],mi.propTypes={};const gi=mi;const vi=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1};const yi=function(e){return e!==e};const wi=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};const bi=function(e,t,n){return t===t?wi(e,t,n):vi(e,yi,n)};const _i=function(e,t){return!!(null==e?0:e.length)&&bi(e,t,0)>-1};const Ei=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};const Ii=function(){};var Si=ur&&1/fn(new ur([,-0]))[1]==1/0?function(e){return new ur(e)}:Ii;const Ti=Si;const ki=function(e,t,n){var r=-1,i=_i,o=e.length,s=!0,a=[],c=a;if(n)s=!1,i=Ei;else if(o>=200){var l=t?null:Ti(e);if(l)return fn(l);s=!1,i=ln,c=new cn}else c=t?[]:a;e:for(;++r<o;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,s&&h===h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),a.push(u)}else i(c,h,n)||(c!==a&&c.push(h),a.push(u))}return a};const Ci=function(e){return e&&e.length?ki(e):[]};const xi=Zn(Object.getPrototypeOf,Object);var Ni=Function.prototype,Ai=Object.prototype,Pi=Ni.toString,Ri=Ai.hasOwnProperty,Di=Pi.call(Object);const Oi=function(e){if(!kn(e)||"[object Object]"!=yt(e))return!1;var t=xi(e);if(null===t)return!0;var n=Ri.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pi.call(n)==Di};const Li=function(e){return"number"==typeof e||kn(e)&&"[object Number]"==yt(e)};const Mi=function(e){return"string"==typeof e||!yn(e)&&kn(e)&&"[object String]"==yt(e)};const Fi=function(e){return!0===e||!1===e||kn(e)&&"[object Boolean]"==yt(e)};const Ui=function(e){return null==e};function ji(e,t,n,r){if(void 0===r&&(r={}),"function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthand() Component must be a string or function.");if(Ui(n)||Fi(n))return null;var o=Mi(n),s=Li(n),a=bt(n),c=i.isValidElement(n),l=Oi(n),u=o||s||yn(n);if(!a&&!c&&!l&&!u)return null;var h=r.defaultProps,d=void 0===h?{}:h,f=c&&n.props||l&&n||u&&t(n),p=r.overrideProps,m=void 0===p?{}:p;m=bt(m)?m(Pe({},d,f)):m;var g=Pe({},d,f,m);if(d.className||m.className||f.className){var v=De(d.className,m.className,f.className);g.className=Ci(v.split(" ")).join(" ")}if((d.style||m.style||f.style)&&(g.style=Pe({},d.style,f.style,m.style)),Ui(g.key)){var y=g.childKey,w=r.autoGenerateKey,b=void 0===w||w;Ui(y)?b&&(o||s)&&(g.key=n):(g.key="function"===typeof y?y(g):y,delete g.childKey)}return c?i.cloneElement(n,g):"function"===typeof g.children?g.children(e,Pe({},g,{children:void 0})):u||l?i.createElement(e,g):a?n(e,g,g.children):void 0}function Vi(e,t){if("function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return ji(e,t,n,r)}}var zi=Vi("img",(function(e){return{src:e}})),Bi=Vi("input",(function(e){return{type:e}})),qi=Vi("label",(function(e){return{children:e}})),Ki=Vi("p",(function(e){return{children:e}}));function Gi(e){var t=e.children,n=e.className,r=e.computer,o=e.color,s=e.floated,a=e.largeScreen,c=e.mobile,l=e.only,u=e.stretched,h=e.tablet,d=e.textAlign,f=e.verticalAlign,p=e.widescreen,m=e.width,g=De(o,Me(u,"stretched"),je(l,"only"),Ve(d),Fe(s,"floated"),ze(f),Be(r,"wide computer"),Be(a,"wide large screen"),Be(c,"wide mobile"),Be(h,"wide tablet"),Be(p,"wide widescreen"),Be(m,"wide"),"column",n),v=qe(Gi,e),y=Ke(Gi,e);return i.createElement(y,Pe({},v,{className:g}),t)}Gi.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],Gi.propTypes={},Gi.create=Vi(Gi,(function(e){return{children:e}}));const Hi=Gi;function Wi(e){var t=e.centered,n=e.children,r=e.className,o=e.color,s=e.columns,a=e.divided,c=e.only,l=e.reversed,u=e.stretched,h=e.textAlign,d=e.verticalAlign,f=De(o,Me(t,"centered"),Me(a,"divided"),Me(u,"stretched"),je(c,"only"),je(l,"reversed"),Ve(h),ze(d),Be(s,"column",!0),"row",r),p=qe(Wi,e),m=Ke(Wi,e);return i.createElement(m,Pe({},p,{className:f}),n)}Wi.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],Wi.propTypes={};const Qi=Wi;function Ji(e){var t=e.celled,n=e.centered,r=e.children,o=e.className,s=e.columns,a=e.container,c=e.divided,l=e.doubling,u=e.inverted,h=e.padded,d=e.relaxed,f=e.reversed,p=e.stackable,m=e.stretched,g=e.textAlign,v=e.verticalAlign,y=De("ui",Me(n,"centered"),Me(a,"container"),Me(l,"doubling"),Me(u,"inverted"),Me(p,"stackable"),Me(m,"stretched"),Ue(t,"celled"),Ue(c,"divided"),Ue(h,"padded"),Ue(d,"relaxed"),je(f,"reversed"),Ve(g),ze(v),Be(s,"column",!0),"grid",o),w=qe(Ji,e),b=Ke(Ji,e);return i.createElement(b,Pe({},w,{className:y}),r)}Ji.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],Ji.Column=Hi,Ji.Row=Qi,Ji.propTypes={};const $i=Ji,Yi=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Xi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|s>>4;let h=(15&s)<<2|c>>6,d=63&c;a||(d=64,o||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Yi(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Zi;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Zi extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eo=function(e){return function(e){const t=Yi(e);return Xi.encodeByteArray(t,!0)}(e).replace(/\./g,"")},to=function(e){try{return Xi.decodeString(e,!0)}catch(Sj){console.error("base64Decode failed: ",Sj)}return null};function no(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=no(e[n],t[n]));return e}const ro=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,io=()=>{try{return ro()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/gameforum",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Sj){return}const t=e&&to(e[1]);return t&&JSON.parse(t)})()}catch(Sj){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Sj))}},oo=()=>{var e;return null===(e=io())||void 0===e?void 0:e.config};class so{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function ao(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[eo(JSON.stringify({alg:"none",type:"JWT"})),eo(JSON.stringify(o)),""].join(".")}function co(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function lo(){var e;const t=null===(e=io())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Sj){return!1}}function uo(){return"object"===typeof self&&self.self===self}function ho(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function fo(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function po(){const e=co();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function mo(){return!lo()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function go(){try{return"object"===typeof indexedDB}catch(Sj){return!1}}class vo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,vo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yo.prototype.create)}}class yo{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(wo,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new vo(n,o,t)}}const wo=/\{\$([^}]+)}/g;function bo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _o(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Eo(n)&&Eo(o)){if(!_o(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Eo(e){return null!==e&&"object"===typeof e}function Io(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function So(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function To(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ko(e,t){const n=new Co(e,t);return n.subscribe.bind(n)}class Co{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=xo),void 0===r.error&&(r.error=xo),void 0===r.complete&&(r.complete=xo);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Sj){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Sj){"undefined"!==typeof console&&console.error&&console.error(Sj)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function xo(){}function No(e){return e&&e._delegate?e._delegate:e}class Ao{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Po="[DEFAULT]";class Ro{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new so;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Sj){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Sj){if(r)return null;throw Sj}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch(Sj){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Sj){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Po?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Do{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ro(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Oo=[];var Lo;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Lo||(Lo={}));const Mo={debug:Lo.DEBUG,verbose:Lo.VERBOSE,info:Lo.INFO,warn:Lo.WARN,error:Lo.ERROR,silent:Lo.SILENT},Fo=Lo.INFO,Uo={[Lo.DEBUG]:"log",[Lo.VERBOSE]:"log",[Lo.INFO]:"info",[Lo.WARN]:"warn",[Lo.ERROR]:"error"},jo=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Uo[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Vo{constructor(e){this.name=e,this._logLevel=Fo,this._logHandler=jo,this._userLogHandler=null,Oo.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lo))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Mo[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lo.DEBUG,...t),this._logHandler(this,Lo.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lo.VERBOSE,...t),this._logHandler(this,Lo.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lo.INFO,...t),this._logHandler(this,Lo.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lo.WARN,...t),this._logHandler(this,Lo.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lo.ERROR,...t),this._logHandler(this,Lo.ERROR,...t)}}const zo=(e,t)=>t.some((t=>e instanceof t));let Bo,qo;const Ko=new WeakMap,Go=new WeakMap,Ho=new WeakMap,Wo=new WeakMap,Qo=new WeakMap;let Jo={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Go.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ho.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xo(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function $o(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(qo||(qo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Zo(this),n),Xo(Ko.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xo(e.apply(Zo(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Zo(this),t,...r);return Ho.set(o,t.sort?t.sort():[t]),Xo(o)}}function Yo(e){return"function"===typeof e?$o(e):(e instanceof IDBTransaction&&function(e){if(Go.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Go.set(e,t)}(e),zo(e,Bo||(Bo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Jo):e)}function Xo(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Xo(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Ko.set(t,e)})).catch((()=>{})),Qo.set(t,e),t}(e);if(Wo.has(e))return Wo.get(e);const t=Yo(e);return t!==e&&(Wo.set(e,t),Qo.set(t,e)),t}const Zo=e=>Qo.get(e);const es=["get","getKey","getAll","getAllKeys","count"],ts=["put","add","delete","clear"],ns=new Map;function rs(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ns.get(t))return ns.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ts.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!es.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return ns.set(t,o),o}Jo=(e=>({...e,get:(t,n,r)=>rs(t,n)||e.get(t,n,r),has:(t,n)=>!!rs(t,n)||e.has(t,n)}))(Jo);class is{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const os="@firebase/app",ss="0.10.2",as=new Vo("@firebase/app"),cs="@firebase/app-compat",ls="@firebase/analytics-compat",us="@firebase/analytics",hs="@firebase/app-check-compat",ds="@firebase/app-check",fs="@firebase/auth",ps="@firebase/auth-compat",ms="@firebase/database",gs="@firebase/database-compat",vs="@firebase/functions",ys="@firebase/functions-compat",ws="@firebase/installations",bs="@firebase/installations-compat",_s="@firebase/messaging",Es="@firebase/messaging-compat",Is="@firebase/performance",Ss="@firebase/performance-compat",Ts="@firebase/remote-config",ks="@firebase/remote-config-compat",Cs="@firebase/storage",xs="@firebase/storage-compat",Ns="@firebase/firestore",As="@firebase/firestore-compat",Ps="firebase",Rs="[DEFAULT]",Ds={[os]:"fire-core",[cs]:"fire-core-compat",[us]:"fire-analytics",[ls]:"fire-analytics-compat",[ds]:"fire-app-check",[hs]:"fire-app-check-compat",[fs]:"fire-auth",[ps]:"fire-auth-compat",[ms]:"fire-rtdb",[gs]:"fire-rtdb-compat",[vs]:"fire-fn",[ys]:"fire-fn-compat",[ws]:"fire-iid",[bs]:"fire-iid-compat",[_s]:"fire-fcm",[Es]:"fire-fcm-compat",[Is]:"fire-perf",[Ss]:"fire-perf-compat",[Ts]:"fire-rc",[ks]:"fire-rc-compat",[Cs]:"fire-gcs",[xs]:"fire-gcs-compat",[Ns]:"fire-fst",[As]:"fire-fst-compat","fire-js":"fire-js",[Ps]:"fire-js-all"},Os=new Map,Ls=new Map,Ms=new Map;function Fs(e,t){try{e.container.addComponent(t)}catch(Sj){as.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Sj)}}function Us(e,t){e.container.addOrOverwriteComponent(t)}function js(e){const t=e.name;if(Ms.has(t))return as.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ms.set(t,e);for(const n of Os.values())Fs(n,e);for(const n of Ls.values())Fs(n,e);return!0}function Vs(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function zs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rs;Vs(e,t).clearInstance(n)}function Bs(e){return void 0!==e.options}function qs(e){return void 0!==e.settings}function Ks(){Ms.clear()}const Gs=new yo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Hs{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ao("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}class Ws extends Hs{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,o,r);else{super(e.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,ea(os,ss,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Zs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Gs.create("server-app-deleted")}}const Qs="10.11.1";function Js(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Rs,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Gs.create("bad-app-name",{appName:String(i)});if(n||(n=oo()),!n)throw Gs.create("no-options");const o=Os.get(i);if(o){if(_o(n,o.options)&&_o(r,o.config))return o;throw Gs.create("duplicate-app",{appName:i})}const s=new Do(i);for(const c of Ms.values())s.addComponent(c);const a=new Hs(n,r,s);return Os.set(i,a),a}function $s(e,t){if(uo())throw Gs.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Bs(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Gs.create("finalization-registry-not-supported",{});const i=""+(o=JSON.stringify(r),[...o].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var o;const s=Ls.get(i);if(s)return s.incRefCount(t.releaseOnDeref),s;const a=new Do(i);for(const l of Ms.values())a.addComponent(l);const c=new Ws(n,t,i,a);return Ls.set(i,c),c}function Ys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rs;const t=Os.get(e);if(!t&&e===Rs&&oo())return Js();if(!t)throw Gs.create("no-app",{appName:e});return t}function Xs(){return Array.from(Os.values())}async function Zs(e){let t=!1;const n=e.name;if(Os.has(n))t=!0,Os.delete(n);else if(Ls.has(n)){e.decRefCount()<=0&&(Ls.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function ea(e,t,n){var r;let i=null!==(r=Ds[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void as.warn(e.join(" "))}js(new Ao("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function ta(e,t){if(null!==e&&"function"!==typeof e)throw Gs.create("invalid-log-argument");!function(e,t){for(const n of Oo){let r=null;t&&t.level&&(r=Mo[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Lo[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function na(e){var t;t=e,Oo.forEach((e=>{e.setLogLevel(t)}))}const ra="firebase-heartbeat-database",ia=1,oa="firebase-heartbeat-store";let sa=null;function aa(){return sa||(sa=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Xo(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Xo(s.result),e.oldVersion,e.newVersion,Xo(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(ra,ia,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(oa)}catch(Sj){console.warn(Sj)}}}).catch((e=>{throw Gs.create("idb-open",{originalErrorMessage:e.message})}))),sa}async function ca(e,t){try{const n=(await aa()).transaction(oa,"readwrite"),r=n.objectStore(oa);await r.put(t,la(e)),await n.done}catch(Sj){if(Sj instanceof vo)as.warn(Sj.message);else{const t=Gs.create("idb-set",{originalErrorMessage:null===Sj||void 0===Sj?void 0:Sj.message});as.warn(t.message)}}}function la(e){return"".concat(e.name,"!").concat(e.options.appId)}class ua{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new da(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ha();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ha(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),fa(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),fa(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=eo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ha(){return(new Date).toISOString().substring(0,10)}class da{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!go()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await aa()).transaction(oa),n=await t.objectStore(oa).get(la(e));return await t.done,n}catch(Sj){if(Sj instanceof vo)as.warn(Sj.message);else{const t=Gs.create("idb-get",{originalErrorMessage:null===Sj||void 0===Sj?void 0:Sj.message});as.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ca(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ca(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function fa(e){return eo(JSON.stringify({version:2,heartbeats:e})).length}var pa;pa="",js(new Ao("platform-logger",(e=>new is(e)),"PRIVATE")),js(new Ao("heartbeat",(e=>new ua(e)),"PRIVATE")),ea(os,ss,pa),ea(os,ss,"esm2017"),ea("fire-js","");class ma{constructor(e,t){this._delegate=e,this.firebase=t,Fs(e,new Ao("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Zs(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rs;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rs;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Fs(this._delegate,e)}_addOrOverwriteComponent(e){Us(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ga=new yo("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const va=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Js(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(bo(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:ea,setLogLevel:na,onLog:ta,apps:null,SDK_VERSION:Qs,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(js(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw ga.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&no(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!bo(n,e=e||Rs))throw ga.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(ma);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){no(n,e)},createSubscribe:ko,ErrorFactory:yo,deepExtend:no}),n}(),ya=new Vo("@firebase/app-compat");if(uo()&&void 0!==self.firebase){ya.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ya.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const wa=va;!function(e){ea("@firebase/app-compat","0.2.32",e)}();wa.registerVersion("firebase","10.11.1","app-compat");function ba(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const _a={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ea="EMAIL_SIGNIN",Ia="PASSWORD_RESET",Sa="RECOVER_EMAIL",Ta="REVERT_SECOND_FACTOR_ADDITION",ka="VERIFY_AND_CHANGE_EMAIL",Ca="VERIFY_EMAIL";function xa(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Na=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Aa=xa,Pa=new yo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ra=new Vo("@firebase/auth");function Da(e){if(Ra.logLevel<=Lo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ra.error("Auth (".concat(Qs,"): ").concat(e),...n)}}function Oa(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ja(e,...n)}function La(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ja(e,...n)}function Ma(e,t,n){const r=Object.assign(Object.assign({},Aa()),{[t]:n});return new yo("auth","Firebase",r).create(t,{appName:e.name})}function Fa(e){return Ma(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ua(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Oa(e,"argument-error"),Ma(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ja(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Pa.create(e,...n)}function Va(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ja(t,...r)}}function za(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Da(t),new Error(t)}function Ba(e,t){e||za(t)}function qa(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ka(){return"http:"===Ga()||"https:"===Ga()}function Ga(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ha{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ba(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(co())||fo()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ka()||ho()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Wa(e,t){Ba(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Qa{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void za("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void za("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void za("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ja={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},$a=new Ha(3e4,6e4);function Ya(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Xa(e,t,n,r){return Za(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=Io(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Qa.fetch()(tc(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Za(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ja),t);try{const t=new rc(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ic(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ic(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw ic(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw ic(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Ma(e,a,s);Oa(e,a)}}catch(Sj){if(Sj instanceof vo)throw Sj;Oa(e,"network-request-failed",{message:String(Sj)})}}async function ec(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Xa(e,t,n,r,i);return"mfaPendingCredential"in o&&Oa(e,"multi-factor-auth-required",{_serverResponse:o}),o}function tc(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Wa(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function nc(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rc{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(La(this.auth,"network-request-failed"))),$a.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ic(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=La(e,t,r);return i.customData._tokenResponse=n,i}function oc(e){return void 0!==e&&void 0!==e.getResponse}function sc(e){return void 0!==e&&void 0!==e.enterprise}class ac{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nc(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function cc(e,t){return Xa(e,"GET","/v2/recaptchaConfig",Ya(e,t))}async function lc(e,t){return Xa(e,"POST","/v1/accounts:lookup",t)}function uc(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Sj){}}function hc(e){return 1e3*Number(e)}function dc(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Da("JWT malformed, contained fewer than 3 sections"),null;try{const e=to(n);return e?JSON.parse(e):(Da("Failed to decode base64 JWT payload"),null)}catch(Sj){return Da("Caught error parsing JWT payload as JSON",null===Sj||void 0===Sj?void 0:Sj.toString()),null}}function fc(e){const t=dc(e);return Va(t,"internal-error"),Va("undefined"!==typeof t.exp,"internal-error"),Va("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function pc(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Sj){throw Sj instanceof vo&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Sj)&&e.auth.currentUser===e&&await e.auth.signOut(),Sj}}class mc{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Sj){return void((null===Sj||void 0===Sj?void 0:Sj.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class gc{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uc(this.lastLoginAt),this.creationTime=uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vc(e){var t;const n=e.auth,r=await e.getIdToken(),i=await pc(e,lc(n,{idToken:r}));Va(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?yc(o.providerUserInfo):[],a=(c=e.providerData,l=s,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new gc(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function yc(e){return e.map((e=>{var{providerId:t}=e,n=ba(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class wc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Va(e.idToken,"internal-error"),Va("undefined"!==typeof e.idToken,"internal-error"),Va("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):fc(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Va(0!==e.length,"internal-error");const t=fc(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Va(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Za(e,{},(async()=>{const n=Io({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=tc(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Qa.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new wc;return n&&(Va("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Va("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Va("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wc,this.toJSON())}_performRefresh(){return za("not implemented")}}function bc(e,t){Va("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class _c{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ba(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await pc(this,this.stsTokenManager.getToken(this.auth,e));return Va(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=No(e),r=await n.getIdToken(t),i=dc(r);Va(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:uc(hc(i.auth_time)),issuedAtTime:uc(hc(i.iat)),expirationTime:uc(hc(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=No(e);await vc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Va(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _c(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Va(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qs(this.auth.app))return Promise.reject(Fa(this.auth));const e=await this.getIdToken();return await pc(this,async function(e,t){return Xa(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;Va(y&&E,e,"internal-error");const I=wc.fromJSON(this.name,E);Va("string"===typeof y,e,"internal-error"),bc(u,e.name),bc(h,e.name),Va("boolean"===typeof w,e,"internal-error"),Va("boolean"===typeof b,e,"internal-error"),bc(d,e.name),bc(f,e.name),bc(p,e.name),bc(m,e.name),bc(g,e.name),bc(v,e.name);const S=new _c({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new wc;r.updateFromServerResponse(t);const i=new _c({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await vc(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Va(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?yc(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new wc;s.updateFromIdToken(n);const a=new _c({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new gc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}const Ec=new Map;function Ic(e){Ba(e instanceof Function,"Expected a class definition");let t=Ec.get(e);return t?(Ba(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ec.set(e,t),t)}class Sc{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sc.type="NONE";const Tc=Sc;function kc(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Cc{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=kc(this.userKey,r.apiKey,i),this.fullPersistenceKey=kc("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_c._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Cc(Ic(Tc),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ic(Tc);const o=kc(n,e.config.apiKey,e.name);let s=null;for(const l of t)try{const t=await l._get(o);if(t){const n=_c._fromJSON(e,t);l!==i&&(s=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(c){}}))),new Cc(i,e,n)):new Cc(i,e,n)}}function xc(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Rc(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Nc(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Oc(t))return"Blackberry";if(Lc(t))return"Webos";if(Ac(t))return"Safari";if((t.includes("chrome/")||Pc(t))&&!t.includes("edge/"))return"Chrome";if(Dc(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Nc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return/firefox\//i.test(e)}function Ac(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:co()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return/crios\//i.test(e)}function Rc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return/iemobile/i.test(e)}function Dc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return/android/i.test(e)}function Oc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return/blackberry/i.test(e)}function Lc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return/webos/i.test(e)}function Mc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return Mc(e)||Dc(e)||Lc(e)||Oc(e)||/windows phone/i.test(e)||Rc(e)}function Uc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xc(co());break;case"Worker":t="".concat(xc(co()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Qs,"/").concat(r)}class jc{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Sj){r(Sj)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Sj){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Sj||void 0===Sj?void 0:Sj.message})}}}class Vc{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class zc{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qc(this),this.idTokenSubscription=new qc(this),this.beforeStateQueue=new jc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pa,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ic(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Cc.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Sj){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await lc(this,{idToken:e}),n=await _c._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qs(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Sj){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Sj)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Va(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Sj){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vc(e)}catch(Sj){if((null===Sj||void 0===Sj?void 0:Sj.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qs(this.app))return Promise.reject(Fa(this));const t=e?No(e):null;return t&&Va(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Va(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return qs(this.app)?Promise.reject(Fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qs(this.app)?Promise.reject(Fa(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ic(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Xa(e,"GET","/v2/passwordPolicy",Ya(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Vc(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yo("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Xa(e,"POST","/v2/accounts:revokeToken",Ya(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ic(e)||this._popupRedirectResolver;Va(t,this,"argument-error"),this.redirectPersistenceManager=await Cc.create(this,[Ic(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Va(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Va(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Uc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Ra.logLevel<=Lo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ra.warn("Auth (".concat(Qs,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Bc(e){return No(e)}class qc{constructor(e){this.auth=e,this.observer=null,this.addObserver=ko((e=>this.observer=e))}get next(){return Va(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gc(e){return Kc.loadJS(e)}function Hc(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Wc{constructor(e){this.type="recaptcha-enterprise",this.auth=Bc(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;sc(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{cc(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ac(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&sc(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Kc.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Gc(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Qc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Wc(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Jc(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Qc(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Qc(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function $c(e,t,n){const r=Bc(e);Va(r._canInitEmulator,r,"emulator-config-failed"),Va(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Yc(t),{host:s,port:a}=function(e){const t=Yc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Xc(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Xc(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Yc(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Xc(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Zc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return za("not implemented")}_getIdTokenResponse(e){return za("not implemented")}_linkToIdToken(e,t){return za("not implemented")}_getReauthenticationResolver(e){return za("not implemented")}}async function el(e,t){return Xa(e,"POST","/v1/accounts:resetPassword",Ya(e,t))}async function tl(e,t){return Xa(e,"POST","/v1/accounts:signUp",t)}async function nl(e,t){return ec(e,"POST","/v1/accounts:signInWithPassword",Ya(e,t))}async function rl(e,t){return Xa(e,"POST","/v1/accounts:sendOobCode",Ya(e,t))}async function il(e,t){return rl(e,t)}async function ol(e,t){return rl(e,t)}class sl extends Zc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new sl(e,t,"password")}static _fromEmailAndCode(e,t){return new sl(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Jc(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",nl);case"emailLink":return async function(e,t){return ec(e,"POST","/v1/accounts:signInWithEmailLink",Ya(e,t))}(e,{email:this._email,oobCode:this._password});default:Oa(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Jc(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tl);case"emailLink":return async function(e,t){return ec(e,"POST","/v1/accounts:signInWithEmailLink",Ya(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Oa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function al(e,t){return ec(e,"POST","/v1/accounts:signInWithIdp",Ya(e,t))}class cl extends Zc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Oa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ba(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new cl(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return al(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,al(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,al(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Io(t)}return e}}const ll={USER_NOT_FOUND:"user-not-found"};class ul extends Zc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ul({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ul({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ec(e,"POST","/v1/accounts:signInWithPhoneNumber",Ya(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ec(e,"POST","/v1/accounts:signInWithPhoneNumber",Ya(e,t));if(n.temporaryProof)throw ic(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ec(e,"POST","/v1/accounts:signInWithPhoneNumber",Ya(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ll)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ul({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class hl{constructor(e){var t,n,r,i,o,s;const a=So(To(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Va(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=So(To(e)).link,n=t?So(To(t)).deep_link_id:null,r=So(To(e)).deep_link_id;return(r?So(To(r)).link:null)||r||n||t||e}(e);try{return new hl(t)}catch(n){return null}}}class dl{constructor(){this.providerId=dl.PROVIDER_ID}static credential(e,t){return sl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=hl.parseLink(t);return Va(n,"argument-error"),sl._fromEmailAndCode(e,n.code,n.tenantId)}}dl.PROVIDER_ID="password",dl.EMAIL_PASSWORD_SIGN_IN_METHOD="password",dl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class fl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pl extends fl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ml extends pl{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Va("providerId"in t&&"signInMethod"in t,"argument-error"),cl._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Va(e.idToken||e.accessToken,"argument-error"),cl._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ml.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ml.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=t;if(!r&&!i&&!n&&!o)return null;if(!a)return null;try{return new ml(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch(Sj){return null}}}class gl extends pl{constructor(){super("facebook.com")}static credential(e){return cl._fromParams({providerId:gl.PROVIDER_ID,signInMethod:gl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gl.credentialFromTaggedObject(e)}static credentialFromError(e){return gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return gl.credential(t.oauthAccessToken)}catch(n){return null}}}gl.FACEBOOK_SIGN_IN_METHOD="facebook.com",gl.PROVIDER_ID="facebook.com";class vl extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return cl._fromParams({providerId:vl.PROVIDER_ID,signInMethod:vl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vl.credentialFromTaggedObject(e)}static credentialFromError(e){return vl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return vl.credential(n,r)}catch(i){return null}}}vl.GOOGLE_SIGN_IN_METHOD="google.com",vl.PROVIDER_ID="google.com";class yl extends pl{constructor(){super("github.com")}static credential(e){return cl._fromParams({providerId:yl.PROVIDER_ID,signInMethod:yl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yl.credentialFromTaggedObject(e)}static credentialFromError(e){return yl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yl.credential(t.oauthAccessToken)}catch(n){return null}}}yl.GITHUB_SIGN_IN_METHOD="github.com",yl.PROVIDER_ID="github.com";class wl extends Zc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return al(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,al(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,al(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new wl(n,i):null}static _create(e,t){return new wl(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bl extends fl{constructor(e){Va(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return bl.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return bl.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=wl.fromJSON(e);return Va(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return wl._create(r,n)}catch(Sj){return null}}}class _l extends pl{constructor(){super("twitter.com")}static credential(e,t){return cl._fromParams({providerId:_l.PROVIDER_ID,signInMethod:_l.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _l.credentialFromTaggedObject(e)}static credentialFromError(e){return _l.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return _l.credential(n,r)}catch(i){return null}}}async function El(e,t){return ec(e,"POST","/v1/accounts:signUp",Ya(e,t))}_l.TWITTER_SIGN_IN_METHOD="twitter.com",_l.PROVIDER_ID="twitter.com";class Il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await _c._fromIdTokenResponse(e,n,r),o=Sl(n);return new Il({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Sl(n);return new Il({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Sl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Tl extends vo{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Tl.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Tl(e,t,n,r)}}function kl(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Tl._fromErrorAndOperation(e,n,t,r);throw n}))}function Cl(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function xl(e,t){const n=No(e);await Al(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Xa(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Cl(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Nl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await pc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Il._forOperation(e,"link",r)}async function Al(e,t,n){await vc(t);const r=!1===e?"provider-already-linked":"no-such-provider";Va(Cl(t.providerData).has(n)===e,t.auth,r)}async function Pl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(qs(r.app))return Promise.reject(Fa(r));const i="reauthenticate";try{const o=await pc(e,kl(r,i,t,e),n);Va(o.idToken,r,"internal-error");const s=dc(o.idToken);Va(s,r,"internal-error");const{sub:a}=s;return Va(e.uid===a,r,"user-mismatch"),Il._forOperation(e,i,o)}catch(Sj){throw(null===Sj||void 0===Sj?void 0:Sj.code)==="auth/".concat("user-not-found")&&Oa(r,"user-mismatch"),Sj}}async function Rl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qs(e.app))return Promise.reject(Fa(e));const r="signIn",i=await kl(e,r,t),o=await Il._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Dl(e,t){return Rl(Bc(e),t)}async function Ol(e,t){const n=No(e);return await Al(!1,n,t.providerId),Nl(n,t)}async function Ll(e,t){return Pl(No(e),t)}async function Ml(e,t){if(qs(e.app))return Promise.reject(Fa(e));const n=Bc(e),r=await async function(e,t){return ec(e,"POST","/v1/accounts:signInWithCustomToken",Ya(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Il._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Fl{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Ul._fromServerResponse(e,t):"totpInfo"in t?jl._fromServerResponse(e,t):Oa(e,"internal-error")}}class Ul extends Fl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Ul(t)}}class jl extends Fl{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new jl(t)}}function Vl(e,t,n){var r;Va((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Va("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Va(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Va(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function zl(e){const t=Bc(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Bl(e,t){await async function(e,t){return Xa(e,"POST","/v1/accounts:update",Ya(e,t))}(No(e),{oobCode:t})}async function ql(e,t){const n=No(e),r=await el(n,{oobCode:t}),i=r.requestType;switch(Va(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Va(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Va(r.mfaInfo,n,"internal-error");default:Va(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Fl._fromServerResponse(Bc(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function Kl(e,t){const n={identifier:t,continueUri:Ka()?qa():"http://localhost"},{signinMethods:r}=await async function(e,t){return Xa(e,"POST","/v1/accounts:createAuthUri",Ya(e,t))}(No(e),n);return r||[]}async function Gl(e,t){const n=No(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Vl(n.auth,r,t);const{email:i}=await async function(e,t){return rl(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Hl(e,t,n){const r=No(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Vl(r.auth,i,n);const{email:o}=await async function(e,t){return rl(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function Wl(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=No(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await pc(i,async function(e,t){return Xa(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function Ql(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await pc(e,async function(e,t){return Xa(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}class Jl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class $l extends Jl{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Yl extends Jl{constructor(e,t){super(e,"facebook.com",t)}}class Xl extends $l{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Zl extends Jl{constructor(e,t){super(e,"google.com",t)}}class eu extends $l{constructor(e,t,n){super(e,"twitter.com",t,n)}}function tu(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=dc(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Jl(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Yl(o,i);case"github.com":return new Xl(o,i);case"google.com":return new Zl(o,i);case"twitter.com":return new eu(o,i,e.screenName||null);case"custom":case"anonymous":return new Jl(o,null);default:return new Jl(o,r,i)}}(n)}class nu{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new nu("enroll",e,t)}static _fromMfaPendingCredential(e){return new nu("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return nu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return nu._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ru{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Bc(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Fl._fromServerResponse(n,e)));Va(r.mfaPendingCredential,n,"internal-error");const o=nu._fromMfaPendingCredential(r.mfaPendingCredential);return new ru(o,i,(async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Il._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Va(t.user,n,"internal-error"),Il._forOperation(t.user,t.operationType,s);default:Oa(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class iu{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Fl._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new iu(e)}async getSession(){return nu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await pc(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await pc(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},Xa(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Ya(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(Sj){throw Sj}var r,i}}const ou=new WeakMap;const su="__sak";class au{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(su,"1"),this.storage.removeItem(su),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class cu extends au{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=co();return Ac(e)||Mc(e)}()&&function(){try{return!(!window||window===window.top)}catch(Sj){return!1}}(),this.fallbackToPolling=Fc(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);po()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cu.type="LOCAL";const lu=cu;class uu extends au{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uu.type="SESSION";const hu=uu;class du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new du(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function fu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}du.receivers=[];class pu{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const c=fu("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function mu(){return window}function gu(){return"undefined"!==typeof mu().WorkerGlobalScope&&"function"===typeof mu().importScripts}const vu="firebaseLocalStorageDb",yu="firebaseLocalStorage",wu="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function _u(e,t){return e.transaction([yu],t?"readwrite":"readonly").objectStore(yu)}function Eu(){const e=indexedDB.open(vu,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(yu,{keyPath:wu})}catch(Sj){n(Sj)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(yu)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(vu);return new bu(e).toPromise()}(),t(await Eu()))}))}))}async function Iu(e,t,n){const r=_u(e,!0).put({[wu]:t,value:n});return new bu(r).toPromise()}function Su(e,t){const n=_u(e,!0).delete(t);return new bu(n).toPromise()}class Tu{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Eu()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Sj){if(t++>3)throw Sj;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gu()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=du._getInstance(gu()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new pu(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Eu();return await Iu(e,su,"1"),await Su(e,su),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Iu(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=_u(e,!1).get(t),r=await new bu(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Su(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=_u(e,!1).getAll();return new bu(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Tu.type="LOCAL";const ku=Tu;const Cu=1e12;class xu{constructor(e){this.auth=e,this.counter=Cu,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Nu(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Cu;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Cu;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Cu;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Nu{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Va(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(Sj){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(Sj){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Au=Hc("rcb"),Pu=new Ha(3e4,6e4);class Ru{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=mu().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Va(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&oc(mu().grecaptcha)?Promise.resolve(mu().grecaptcha):new Promise(((n,r)=>{const i=mu().setTimeout((()=>{r(La(e,"network-request-failed"))}),Pu.get());mu()[Au]=()=>{mu().clearTimeout(i),delete mu()[Au];const o=mu().grecaptcha;if(!o||!oc(o))return void r(La(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};Gc("".concat(Kc.recaptchaV2Script,"?").concat(Io({onload:Au,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(La(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=mu().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Du{async load(e){return new xu(e)}clearedOneInstance(){}}const Ou="recaptcha",Lu={theme:"light",type:"image"};class Mu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Lu);this.parameters=n,this.type=Ou,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bc(e),this.isInvisible="invisible"===this.parameters.size,Va("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Va(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Du:new Ru,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(Sj){return Promise.reject(Sj)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Va(!this.parameters.sitekey,this.auth,"argument-error"),Va(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Va("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=mu()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Va(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Va(Ka()&&!gu(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Xa(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Va(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Va(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fu{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ul._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Uu(e,t,n){var r;const i=await n.verify();try{let o;if(Va("string"===typeof i,e,"argument-error"),Va(n.type===Ou,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){Va("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Xa(e,"POST","/v2/accounts/mfaEnrollment:start",Ya(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Va("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;Va(n,e,"missing-multi-factor-info");const s=await function(e,t){return Xa(e,"POST","/v2/accounts/mfaSignIn:start",Ya(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Xa(e,"POST","/v1/accounts:sendVerificationCode",Ya(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class ju{constructor(e){this.providerId=ju.PROVIDER_ID,this.auth=Bc(e)}verifyPhoneNumber(e,t){return Uu(this.auth,e,No(t))}static credential(e,t){return ul._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ju.credentialFromTaggedObject(t)}static credentialFromError(e){return ju.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ul._fromTokenResponse(n,r):null}}function Vu(e,t){return t?Ic(t):(Va(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ju.PROVIDER_ID="phone",ju.PHONE_SIGN_IN_METHOD="phone";class zu extends Zc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return al(e,this._buildIdpRequest())}_linkToIdToken(e,t){return al(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return al(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bu(e){return Rl(e.auth,new zu(e),e.bypassAuthState)}function qu(e){const{auth:t,user:n}=e;return Va(n,t,"internal-error"),Pl(n,new zu(e),e.bypassAuthState)}async function Ku(e){const{auth:t,user:n}=e;return Va(n,t,"internal-error"),Nl(n,new zu(e),e.bypassAuthState)}class Gu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Sj){this.reject(Sj)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(Sj){this.reject(Sj)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bu;case"linkViaPopup":case"linkViaRedirect":return Ku;case"reauthViaPopup":case"reauthViaRedirect":return qu;default:Oa(this.auth,"internal-error")}}resolve(e){Ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hu=new Ha(2e3,1e4);class Wu extends Gu{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Wu.currentPopupAction&&Wu.currentPopupAction.cancel(),Wu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Va(e,this.auth,"internal-error"),e}async onExecution(){Ba(1===this.filter.length,"Popup operations only handle one event");const e=fu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(La(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(La(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(La(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Hu.get())};e()}}Wu.currentPopupAction=null;const Qu="pendingRedirect",Ju=new Map;class $u extends Gu{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=eh(t),r=Zu(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(Sj){e=()=>Promise.reject(Sj)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Yu(e,t){return Zu(e)._set(eh(t),"true")}function Xu(e,t){Ju.set(e._key(),t)}function Zu(e){return Ic(e._redirectPersistence)}function eh(e){return kc(Qu,e.config.apiKey,e.name)}function th(e,t,n){return async function(e,t,n){if(qs(e.app))return Promise.reject(Fa(e));const r=Bc(e);Ua(e,t,fl),await r._initializationPromise;const i=Vu(r,n);return await Yu(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function nh(e,t,n){return async function(e,t,n){const r=No(e);if(Ua(r.auth,t,fl),qs(r.auth.app))return Promise.reject(Fa(r.auth));await r.auth._initializationPromise;const i=Vu(r.auth,n);await Yu(i,r.auth);const o=await oh(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}function rh(e,t,n){return async function(e,t,n){const r=No(e);Ua(r.auth,t,fl),await r.auth._initializationPromise;const i=Vu(r.auth,n);await Al(!1,r,t.providerId),await Yu(i,r.auth);const o=await oh(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function ih(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qs(e.app))return Promise.reject(Fa(e));const r=Bc(e),i=Vu(r,t),o=new $u(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function oh(e){const t=fu("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class sh{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ch(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ch(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(La(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ah(e))}saveEventToCache(e){this.cachedEventUids.add(ah(e)),this.lastProcessedEventTime=Date.now()}}function ah(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ch(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function lh(e){return Xa(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const uh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hh=/^https?/;function dh(e){const t=qa(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!hh.test(n))return!1;if(uh.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const fh=new Ha(3e4,6e4);function ph(){const e=mu().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function mh(e){return new Promise(((t,n)=>{var r,i,o;function s(){ph(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ph(),n(La(e,"network-request-failed"))},timeout:fh.get()})}if(null===(i=null===(r=mu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=mu().gapi)||void 0===o?void 0:o.load)){const t=Hc("iframefcb");return mu()[t]=()=>{gapi.load?s():n(La(e,"network-request-failed"))},Gc("".concat(Kc.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw gh=null,e}))}let gh=null;const vh=new Ha(5e3,15e3),yh="__/auth/iframe",wh="emulator/auth/iframe",bh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_h=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Eh(e){const t=e.config;Va(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Wa(t,wh):"https://".concat(e.config.authDomain,"/").concat(yh),r={apiKey:t.apiKey,appName:e.name,v:Qs},i=_h.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Io(r).slice(1))}async function Ih(e){const t=await function(e){return gh=gh||mh(e),gh}(e),n=mu().gapi;return Va(n,e,"internal-error"),t.open({where:document.body,url:Eh(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bh,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=La(e,"network-request-failed"),o=mu().setTimeout((()=>{r(i)}),vh.get());function s(){mu().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const Sh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Th{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Sj){}}}function kh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Sh),{width:r.toString(),height:i.toString(),top:o,left:s}),l=co().toLowerCase();n&&(a=Pc(l)?"_blank":n),Nc(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Mc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:co())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Th(null);const h=window.open(t||"",a,u);Va(h,e,"popup-blocked");try{h.focus()}catch(Sj){}return new Th(h)}const Ch="__/auth/handler",xh="emulator/auth/handler",Nh=encodeURIComponent("fac");async function Ah(e,t,n,r,i,o){Va(e.config.authDomain,e,"auth-domain-config-required"),Va(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Qs,eventId:i};if(t instanceof fl){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof pl){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(Nh,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ch);return Wa(t,xh)}(e),"?").concat(Io(a).slice(1)).concat(l)}const Ph="webStorageSupport";const Rh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hu,this._completeRedirectFn=ih,this._overrideRedirectResult=Xu}async _openPopup(e,t,n,r){var i;Ba(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return kh(e,await Ah(e,t,n,qa(),r),fu())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){mu().location.href=e}(await Ah(e,t,n,qa(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ba(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ih(e),n=new sh(e);return t.register("authEvent",(t=>{Va(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ph,{type:Ph},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ph];void 0!==i&&t(!!i),Oa(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await lh(e);for(const r of t)try{if(dh(r))return}catch(n){}Oa(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fc()||Ac()||Mc()}};class Dh{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return za("unexpected MultiFactorSessionType")}}}class Oh extends Dh{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Oh(e)}_finalizeEnroll(e,t,n){return function(e,t){return Xa(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ya(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Xa(e,"POST","/v2/accounts/mfaSignIn:finalize",Ya(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Lh{constructor(){}static assertion(e){return Oh._fromCredential(e)}}Lh.FACTOR_ID="phone";var Mh="@firebase/auth",Fh="1.7.2";class Uh{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Va(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=io())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var jh;function Vh(){return window}!function(e){Kc=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=La("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),jh="Browser",js(new Ao("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Va(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:jh,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uc(jh)},l=new zc(r,i,o,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ic);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),js(new Ao("auth-internal",(e=>(e=>new Uh(e))(Bc(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),ea(Mh,Fh,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(jh)),ea(Mh,Fh,"esm2017");async function zh(e,t,n){var r;const{BuildInfo:i}=Vh();Ba(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(Ba(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),s={};return Mc()?s.ibi=i.packageName:Dc()?s.apn=i.packageName:Oa(e,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,Ah(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,s)}function Bh(e){const{cordova:t}=Vh();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const qh=20;class Kh extends sh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Gh(e){const t=await Qh()._get(Jh(e));return t&&await Qh()._remove(Jh(e)),t}function Hh(e,t){var n,r;const i=function(e){const t=$h(e),n=t.link?decodeURIComponent(t.link):void 0,r=$h(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return $h(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=$h(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(Sj){return null}}(decodeURIComponent(t.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=s?La(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Wh(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<qh;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Qh(){return Ic(lu)}function Jh(e){return kc("authEvent",e.config.apiKey,e.name)}function $h(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return So(n.join("?"))}const Yh=class{constructor(){this._redirectPersistence=hu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ih,this._overrideRedirectResult=Xu}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Kh(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Oa(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,s,a,c,l,u;const h=Vh();Va("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Va("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Va("function"===typeof(null===(o=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Va("function"===typeof(null===(c=null===(a=null===(s=null===h||void 0===h?void 0:h.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Va("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Ju.clear(),await this._originValidation(e);const o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Wh(),postBody:null,tenantId:e.tenantId,error:La(e,"no-auth-event")}}(e,n,r);await function(e,t){return Qh()._set(Jh(e),t)}(e,o);const s=await zh(e,o,t);return async function(e,t,n){const{cordova:r}=Vh();let i=()=>{};try{await new Promise(((o,s)=>{let a=null;function c(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{s(La(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),Dc()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Bh(s))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Vh(),n={};Mc()?n.iosBundleId=t.packageName:Dc()?n.androidPackageName=t.packageName:Oa(e,"operation-not-supported-in-this-environment"),await lh(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Vh(),o=setTimeout((async()=>{await Gh(e),t.onEvent(Xh())}),500),s=async n=>{clearTimeout(o);const r=await Gh(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Hh(r,n.url)),t.onEvent(i||Xh())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,s);const a=r,c="".concat(i.packageName.toLowerCase(),"://");Vh().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&s({url:e}),"function"===typeof a)try{a(e)}catch(Sj){console.error(Sj)}}}};function Xh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:La("no-auth-event")}}function Zh(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return!("file:"!==Zh()&&"ionic:"!==Zh()&&"capacitor:"!==Zh()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function td(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return po()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co();return/Edge\/\d+/.test(e)}(e)}function nd(){try{const e=self.localStorage,t=fu();if(e)return e.setItem(t,"1"),e.removeItem(t),!td()||go()}catch(Sj){return rd()&&go()}return!1}function rd(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function id(){return("http:"===Zh()||"https:"===Zh()||ho()||ed())&&!(fo()||lo())&&nd()&&!rd()}function od(){return ed()&&"undefined"!==typeof document}const sd={LOCAL:"local",NONE:"none",SESSION:"session"},ad=Va,cd="persistence";async function ld(e){await e._initializationPromise;const t=ud(),n=kc(cd,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function ud(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(Sj){return null}}const hd=Va;class dd{constructor(){this.browserResolver=Ic(Rh),this.cordovaResolver=Ic(Yh),this.underlyingResolver=null,this._redirectPersistence=hu,this._completeRedirectFn=ih,this._overrideRedirectResult=Xu}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return od()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hd(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!od()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function fd(e){return e.unwrap()}function pd(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new yd(e,function(e,t){var n;const r=No(e),i=t;return Va(t.customData.operationType,r,"argument-error"),Va(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ru._fromError(r,i)}(e,t))}else if(r){const e=md(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function md(e){const{_tokenResponse:t}=e instanceof vo?e.customData:e;if(!t)return null;if(!(e instanceof vo)&&"temporaryProof"in t&&"phoneNumber"in t)return ju.credentialFromResult(e);const n=t.providerId;if(!n||n===_a.PASSWORD)return null;let r;switch(n){case _a.GOOGLE:r=vl;break;case _a.FACEBOOK:r=gl;break;case _a.GITHUB:r=yl;break;case _a.TWITTER:r=_l;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:s,nonce:a}=t;return i||o||e||s?s?n.startsWith("saml.")?wl._create(n,s):cl._fromParams({providerId:n,signInMethod:n,pendingToken:s,idToken:e,accessToken:i}):new ml(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof vo?r.credentialFromError(e):r.credentialFromResult(e)}function gd(e,t){return t.catch((t=>{throw t instanceof vo&&pd(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,md(r)),additionalUserInfo:tu(e),user:wd.getOrCreate(n)};var r}))}async function vd(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>gd(e,n.confirm(t))}}class yd{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return gd(fd(this.auth),this.resolver.resolveSignIn(e))}}class wd{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=No(e);return ou.has(t)||ou.set(t,iu._fromUser(t)),ou.get(t)}(e)}static getOrCreate(e){return wd.USER_MAP.has(e)||wd.USER_MAP.set(e,new wd(e)),wd.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return gd(this.auth,Ol(this._delegate,e))}async linkWithPhoneNumber(e,t){return vd(this.auth,async function(e,t,n){const r=No(e);await Al(!1,r,"phone");const i=await Uu(r.auth,t,No(n));return new Fu(i,(e=>Ol(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return gd(this.auth,async function(e,t,n){const r=No(e);Ua(r.auth,t,fl);const i=Vu(r.auth,n);return new Wu(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,dd))}async linkWithRedirect(e){return await ld(Bc(this.auth)),rh(this._delegate,e,dd)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return gd(this.auth,Ll(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return vd(this.auth,async function(e,t,n){const r=No(e);if(qs(r.auth.app))return Promise.reject(Fa(r.auth));const i=await Uu(r.auth,t,No(n));return new Fu(i,(e=>Ll(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return gd(this.auth,async function(e,t,n){const r=No(e);if(qs(r.auth.app))return Promise.reject(La(r.auth,"operation-not-supported-in-this-environment"));Ua(r.auth,t,fl);const i=Vu(r.auth,n);return new Wu(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,dd))}async reauthenticateWithRedirect(e){return await ld(Bc(this.auth)),nh(this._delegate,e,dd)}sendEmailVerification(e){return Gl(this._delegate,e)}async unlink(e){return await xl(this._delegate,e),this}updateEmail(e){return function(e,t){const n=No(e);return qs(n.auth.app)?Promise.reject(Fa(n.auth)):Ql(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Ql(No(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=No(e);if(qs(n.auth.app))return Promise.reject(Fa(n.auth));await Nl(n,t)}(this._delegate,e)}updateProfile(e){return Wl(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Hl(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wd.USER_MAP=new WeakMap;const bd=Va;class _d{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;bd(n,"invalid-api-key",{appName:e.name}),bd(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?dd:void 0;this._delegate=t.initialize({options:{persistence:Id(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Na),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wd.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){$c(this._delegate,e,t)}applyActionCode(e){return Bl(this._delegate,e)}checkActionCode(e){return ql(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await el(No(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&zl(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return gd(this._delegate,async function(e,t,n){if(qs(e.app))return Promise.reject(Fa(e));const r=Bc(e),i=Jc(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",El),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&zl(e),t})),s=await Il._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Kl(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=hl.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){bd(id(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Bc(e)._initializationPromise,ih(e,t,!1)}(this._delegate,dd);return e?gd(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Bc(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:o}=Ed(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:o}=Ed(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Bc(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Va(t.handleCodeInApp,r,"argument-error"),t&&Vl(r,e,t)}(i,n),await Jc(r,i,"getOobCode",ol)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Bc(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Vl(r,i,n),await Jc(r,i,"getOobCode",il)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){ad(Object.values(sd).includes(t),e,"invalid-persistence-type"),fo()?ad(t!==sd.SESSION,e,"unsupported-persistence-type"):lo()?ad(t===sd.NONE,e,"unsupported-persistence-type"):rd()?ad(t===sd.NONE||t===sd.LOCAL&&go(),e,"unsupported-persistence-type"):ad(t===sd.NONE||nd(),e,"unsupported-persistence-type")}(this._delegate,e),e){case sd.SESSION:t=hu;break;case sd.LOCAL:t=await Ic(ku)._isAvailable()?ku:lu;break;case sd.NONE:t=Tc;break;default:return Oa("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return gd(this._delegate,async function(e){var t;if(qs(e.app))return Promise.reject(Fa(e));const n=Bc(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Il({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await El(n,{returnSecureToken:!0}),i=await Il._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return gd(this._delegate,Dl(this._delegate,e))}signInWithCustomToken(e){return gd(this._delegate,Ml(this._delegate,e))}signInWithEmailAndPassword(e,t){return gd(this._delegate,function(e,t,n){return qs(e.app)?Promise.reject(Fa(e)):Dl(No(e),dl.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&zl(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return gd(this._delegate,async function(e,t,n){if(qs(e.app))return Promise.reject(Fa(e));const r=No(e),i=dl.credentialWithLink(t,n||qa());return Va(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Dl(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return vd(this._delegate,async function(e,t,n){if(qs(e.app))return Promise.reject(Fa(e));const r=Bc(e),i=await Uu(r,t,No(n));return new Fu(i,(e=>Dl(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return bd(id(),this._delegate,"operation-not-supported-in-this-environment"),gd(this._delegate,async function(e,t,n){if(qs(e.app))return Promise.reject(La(e,"operation-not-supported-in-this-environment"));const r=Bc(e);Ua(e,t,fl);const i=Vu(r,n);return new Wu(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,dd))}async signInWithRedirect(e){return bd(id(),this._delegate,"operation-not-supported-in-this-environment"),await ld(this._delegate),th(this._delegate,e,dd)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ql(No(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Ed(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&wd.getOrCreate(e)),error:t,complete:n}}function Id(e,t){const n=function(e,t){const n=ud();if(!n)return[];const r=kc(cd,e,t);switch(n.getItem(r)){case sd.NONE:return[Tc];case sd.LOCAL:return[ku,hu];case sd.SESSION:return[hu];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ku)||n.push(ku),"undefined"!==typeof window)for(const r of[lu,hu])n.includes(r)||n.push(r);return n.includes(Tc)||n.push(Tc),n}_d.Persistence=sd;class Sd{constructor(){this.providerId="phone",this._delegate=new ju(fd(wa.auth()))}static credential(e,t){return ju.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Sd.PHONE_SIGN_IN_METHOD=ju.PHONE_SIGN_IN_METHOD,Sd.PROVIDER_ID=ju.PROVIDER_ID;const Td=Va;class kd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wa.app();var r;Td(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Mu(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Cd;(Cd=wa).INTERNAL.registerComponent(new Ao("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new _d(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ea,PASSWORD_RESET:Ia,RECOVER_EMAIL:Sa,REVERT_SECOND_FACTOR_ADDITION:Ta,VERIFY_AND_CHANGE_EMAIL:ka,VERIFY_EMAIL:Ca}},EmailAuthProvider:dl,FacebookAuthProvider:gl,GithubAuthProvider:yl,GoogleAuthProvider:vl,OAuthProvider:ml,SAMLAuthProvider:bl,PhoneAuthProvider:Sd,PhoneMultiFactorGenerator:Lh,RecaptchaVerifier:kd,TwitterAuthProvider:_l,Auth:_d,AuthCredential:Zc,Error:vo}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Cd.registerVersion("@firebase/auth-compat","0.5.7");var xd,Nd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ad={},Pd=Pd||{},Rd=Nd||self;function Dd(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Od(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ld="closure_uid_"+(1e9*Math.random()>>>0),Md=0;function Fd(e,t,n){return e.call.apply(e.bind,arguments)}function Ud(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function jd(e,t,n){return(jd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fd:Ud).apply(null,arguments)}function Vd(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function zd(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Bd(){this.s=this.s,this.o=this.o}Bd.prototype.s=!1,Bd.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Ld)&&e[Ld]||(e[Ld]=++Md))},Bd.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qd=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Kd(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Gd(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Dd(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Hd(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Hd.prototype.h=function(){this.defaultPrevented=!0};var Wd=function(){if(!Rd.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Rd.addEventListener("test",e,t),Rd.removeEventListener("test",e,t)}catch(n){}return e}();function Qd(e){return/^[\s\xa0]*$/.test(e)}function Jd(){var e=Rd.navigator;return e&&(e=e.userAgent)?e:""}function $d(e){return-1!=Jd().indexOf(e)}function Yd(e){return Yd[" "](e),e}Yd[" "]=function(){};var Xd,Zd,ef=$d("Opera"),tf=$d("Trident")||$d("MSIE"),nf=$d("Edge"),rf=nf||tf,of=$d("Gecko")&&!(-1!=Jd().toLowerCase().indexOf("webkit")&&!$d("Edge"))&&!($d("Trident")||$d("MSIE"))&&!$d("Edge"),sf=-1!=Jd().toLowerCase().indexOf("webkit")&&!$d("Edge");function af(){var e=Rd.document;return e?e.documentMode:void 0}e:{var cf="",lf=function(){var e=Jd();return of?/rv:([^\);]+)(\)|;)/.exec(e):nf?/Edge\/([\d\.]+)/.exec(e):tf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):sf?/WebKit\/(\S+)/.exec(e):ef?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(lf&&(cf=lf?lf[1]:""),tf){var uf=af();if(null!=uf&&uf>parseFloat(cf)){Xd=String(uf);break e}}Xd=cf}if(Rd.document&&tf){var hf=af();Zd=hf||(parseInt(Xd,10)||void 0)}else Zd=void 0;var df=Zd;function ff(e,t){if(Hd.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(of){e:{try{Yd(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:pf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ff.$.h.call(this)}}zd(ff,Hd);var pf={2:"touch",3:"pen",4:"mouse"};ff.prototype.h=function(){ff.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var mf="closure_listenable_"+(1e6*Math.random()|0),gf=0;function vf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++gf,this.fa=this.ia=!1}function yf(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function wf(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function bf(e){const t={};for(const n in e)t[n]=e[n];return t}const _f="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ef(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<_f.length;t++)n=_f[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function If(e){this.src=e,this.g={},this.h=0}function Sf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=qd(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(yf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Tf(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}If.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=Tf(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new vf(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var kf="closure_lm_"+(1e6*Math.random()|0),Cf={};function xf(e,t,n,r,i){if(r&&r.once)return Af(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)xf(e,t[o],n,r,i);return null}return n=Ff(n),e&&e[mf]?e.O(t,n,Od(r)?!!r.capture:!!r,i):Nf(e,t,n,!1,r,i)}function Nf(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=Od(i)?!!i.capture:!!i,a=Lf(e);if(a||(e[kf]=a=new If(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Of;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Wd||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Df(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Af(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Af(e,t[o],n,r,i);return null}return n=Ff(n),e&&e[mf]?e.P(t,n,Od(r)?!!r.capture:!!r,i):Nf(e,t,n,!0,r,i)}function Pf(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Pf(e,t[o],n,r,i);else r=Od(r)?!!r.capture:!!r,n=Ff(n),e&&e[mf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Tf(o=e.g[t],n,r,i))&&(yf(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Lf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Tf(t,n,r,i)),(n=-1<e?t[e]:null)&&Rf(n))}function Rf(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[mf])Sf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Df(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Lf(t))?(Sf(n,e),0==n.h&&(n.src=null,t[kf]=null)):yf(e)}}}function Df(e){return e in Cf?Cf[e]:Cf[e]="on"+e}function Of(e,t){if(e.fa)e=!0;else{t=new ff(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Rf(e),e=n.call(r,t)}return e}function Lf(e){return(e=e[kf])instanceof If?e:null}var Mf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ff(e){return"function"===typeof e?e:(e[Mf]||(e[Mf]=function(t){return e.handleEvent(t)}),e[Mf])}function Uf(){Bd.call(this),this.i=new If(this),this.S=this,this.J=null}function jf(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Hd(t,e);else if(t instanceof Hd)t.target=t.target||e;else{var i=t;Ef(t=new Hd(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Vf(s,r,!0,t)&&i}if(i=Vf(s=t.g=e,r,!0,t)&&i,i=Vf(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Vf(s=t.g=n[o],r,!1,t)&&i}function Vf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&Sf(e.i,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}zd(Uf,Bd),Uf.prototype[mf]=!0,Uf.prototype.removeEventListener=function(e,t,n,r){Pf(this,e,t,n,r)},Uf.prototype.N=function(){if(Uf.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)yf(n[r]);delete t.g[e],t.h--}}this.J=null},Uf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Uf.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var zf=Rd.JSON.stringify;function Bf(){var e=Jf;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var qf=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Kf),(e=>e.reset()));class Kf{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Gf(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Hf(e){Rd.setTimeout((()=>{throw e}),0)}let Wf,Qf=!1,Jf=new class{constructor(){this.h=this.g=null}add(e,t){const n=qf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},$f=()=>{const e=Rd.Promise.resolve(void 0);Wf=()=>{e.then(Yf)}};var Yf=()=>{for(var e;e=Bf();){try{e.h.call(e.g)}catch(n){Hf(n)}var t=qf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Qf=!1};function Xf(e,t){Uf.call(this),this.h=e||1,this.g=t||Rd,this.j=jd(this.qb,this),this.l=Date.now()}function Zf(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ep(e,t,n){if("function"===typeof e)n&&(e=jd(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=jd(e.handleEvent,e)}return 2147483647<Number(t)?-1:Rd.setTimeout(e,t||0)}function tp(e){e.g=ep((()=>{e.g=null,e.i&&(e.i=!1,tp(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}zd(Xf,Uf),(xd=Xf.prototype).ga=!1,xd.T=null,xd.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),jf(this,"tick"),this.ga&&(Zf(this),this.start()))}},xd.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},xd.N=function(){Xf.$.N.call(this),Zf(this),delete this.g};class np extends Bd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tp(this)}N(){super.N(),this.g&&(Rd.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rp(e){Bd.call(this),this.h=e,this.g={}}zd(rp,Bd);var ip=[];function op(e,t,n,r){Array.isArray(n)||(n&&(ip[0]=n.toString()),n=ip);for(var i=0;i<n.length;i++){var o=xf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function sp(e){wf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Rf(e)}),e),e.g={}}function ap(){this.g=!0}function cp(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return zf(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}rp.prototype.N=function(){rp.$.N.call(this),sp(this)},rp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ap.prototype.Ea=function(){this.g=!1},ap.prototype.info=function(){};var lp={},up=null;function hp(){return up=up||new Uf}function dp(e){Hd.call(this,lp.Ta,e)}function fp(e){const t=hp();jf(t,new dp(t))}function pp(e,t){Hd.call(this,lp.STAT_EVENT,e),this.stat=t}function mp(e){const t=hp();jf(t,new pp(t,e))}function gp(e,t){Hd.call(this,lp.Ua,e),this.size=t}function vp(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Rd.setTimeout((function(){e()}),t)}lp.Ta="serverreachability",zd(dp,Hd),lp.STAT_EVENT="statevent",zd(pp,Hd),lp.Ua="timingevent",zd(gp,Hd);var yp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},wp={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bp(){}function _p(e){return e.h||(e.h=e.i())}function Ep(){}bp.prototype.h=null;var Ip,Sp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Tp(){Hd.call(this,"d")}function kp(){Hd.call(this,"c")}function Cp(){}function xp(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new rp(this),this.P=Ap,e=rf?125:void 0,this.V=new Xf(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Np}function Np(){this.i=null,this.g="",this.h=!1}zd(Tp,Hd),zd(kp,Hd),zd(Cp,bp),Cp.prototype.g=function(){return new XMLHttpRequest},Cp.prototype.i=function(){return{}},Ip=new Cp;var Ap=45e3,Pp={},Rp={};function Dp(e,t,n){e.L=1,e.A=Xp(Wp(t)),e.u=n,e.S=!0,Op(e,null)}function Op(e,t){e.G=Date.now(),Up(e),e.B=Wp(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),hm(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Np,e.g=dg(e.l,n?t:null,!e.u),0<e.O&&(e.M=new np(jd(e.Pa,e,e.g),e.O)),op(e.U,e.g,"readystatechange",e.nb),t=e.I?bf(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),fp(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");s=2<=h.length&&"type"==h[1]?s+(u+"=")+l+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Lp(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Mp(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Fp(e,n),r==Rp){4==t&&(e.s=4,mp(14),i=!1),cp(e.j,e.m,null,"[Incomplete Response]");break}if(r==Pp){e.s=4,mp(15),cp(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}cp(e.j,e.m,r,null),qp(e,r)}Lp(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,mp(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ig(t),t.M=!0,mp(11))):(cp(e.j,e.m,n,"[Invalid Chunked Response]"),Bp(e),zp(e))}function Fp(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Rp:(n=Number(t.substring(n,r)),isNaN(n)?Pp:(r+=1)+n>t.length?Rp:(t=t.slice(r,r+n),e.o=r+n,t))}function Up(e){e.Y=Date.now()+e.P,jp(e,e.P)}function jp(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=vp(jd(e.lb,e),t)}function Vp(e){e.C&&(Rd.clearTimeout(e.C),e.C=null)}function zp(e){0==e.l.H||e.J||ag(e.l,e)}function Bp(e){Vp(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Zf(e.V),sp(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function qp(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ym(n.i,e)))if(!e.K&&ym(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;sg(n),$m(n)}rg(n),mp(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=vp(jd(n.ib,n),6e3));if(1>=vm(n.i)&&n.oa){try{n.oa()}catch(l){}n.oa=void 0}}else lg(n,11)}else if((e.K||n.g==e)&&sg(n),!Qd(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(wm(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Yp(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=hg(r,r.J?r.pa:null,r.Y),s.K){bm(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(Vp(a),Up(a)),r.g=s}else ng(r);0<n.j.length&&Xm(n)}else"stop"!=l[0]&&"close"!=l[0]||lg(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?lg(n,7):Jm(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}fp()}catch(l){}}function Kp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Dd(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Dd(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Dd(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(xd=xp.prototype).setTimeout=function(e){this.P=e},xd.nb=function(e){e=e.target;const t=this.M;t&&3==qm(e)?t.l():this.Pa(e)},xd.Pa=function(e){try{if(e==this.g)e:{const u=qm(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||rf||this.g&&(this.h.h||this.g.ja()||Km(this.g)))){this.J||4!=u||7==t||fp(),Vp(this);var n=this.g.da();this.ca=n;t:if(Lp(this)){var r=Km(this.g);e="";var i=r.length,o=4==qm(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Bp(this),zp(this);var s="";break t}this.h.i=new Rd.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qd(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,mp(12),Bp(this),zp(this);break e}cp(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qp(this,n)}this.S?(Mp(this,u,s),rf&&this.i&&3==u&&(op(this.U,this.V,"tick",this.mb),this.V.start())):(cp(this.j,this.m,s,null),qp(this,s)),4==u&&Bp(this),this.i&&!this.J&&(4==u?ag(this.l,this):(this.i=!1,Up(this)))}else(function(e){const t={};e=(e.g&&2<=qm(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Qd(e[r]))continue;var n=Gf(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,mp(12)):(this.s=0,mp(13)),Bp(this),zp(this)}}}catch(u){}},xd.mb=function(){if(this.g){var e=qm(this.g),t=this.g.ja();this.o<t.length&&(Vp(this),Mp(this,e,t),this.i&&4!=e&&Up(this))}},xd.cancel=function(){this.J=!0,Bp(this)},xd.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(fp(),mp(17)),Bp(this),this.s=2,zp(this)):jp(this,this.Y-e)};var Gp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hp(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Hp){this.h=e.h,Qp(this,e.j),this.s=e.s,this.g=e.g,Jp(this,e.m),this.l=e.l;var t=e.i,n=new am;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),$p(this,n),this.o=e.o}else e&&(t=String(e).match(Gp))?(this.h=!1,Qp(this,t[1]||"",!0),this.s=Zp(t[2]||""),this.g=Zp(t[3]||"",!0),Jp(this,t[4]),this.l=Zp(t[5]||"",!0),$p(this,t[6]||"",!0),this.o=Zp(t[7]||"")):(this.h=!1,this.i=new am(null,this.h))}function Wp(e){return new Hp(e)}function Qp(e,t,n){e.j=n?Zp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Jp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function $p(e,t,n){t instanceof am?(e.i=t,function(e,t){t&&!e.j&&(cm(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(lm(this,t),hm(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=em(t,om)),e.i=new am(t,e.h))}function Yp(e,t,n){e.i.set(t,n)}function Xp(e){return Yp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Zp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function em(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,tm),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tm(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Hp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(em(t,nm,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(em(t,nm,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(em(n,"/"==n.charAt(0)?im:rm,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",em(n,sm)),e.join("")};var nm=/[#\/\?@]/g,rm=/[#\?:]/g,im=/[#\?]/g,om=/[#\?@]/g,sm=/#/g;function am(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function cm(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function lm(e,t){cm(e),t=dm(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function um(e,t){return cm(e),t=dm(e,t),e.g.has(t)}function hm(e,t,n){lm(e,t),0<n.length&&(e.i=null,e.g.set(dm(e,t),Kd(n)),e.h+=n.length)}function dm(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(xd=am.prototype).add=function(e,t){cm(this),this.i=null,e=dm(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},xd.forEach=function(e,t){cm(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},xd.ta=function(){cm(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},xd.Z=function(e){cm(this);let t=[];if("string"===typeof e)um(this,e)&&(t=t.concat(this.g.get(dm(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},xd.set=function(e,t){return cm(this),this.i=null,um(this,e=dm(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},xd.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},xd.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var fm=class{constructor(e,t){this.g=e,this.map=t}};function pm(e){this.l=e||mm,Rd.PerformanceNavigationTiming?e=0<(e=Rd.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Rd.g&&Rd.g.Ka&&Rd.g.Ka()&&Rd.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var mm=10;function gm(e){return!!e.h||!!e.g&&e.g.size>=e.j}function vm(e){return e.h?1:e.g?e.g.size:0}function ym(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function wm(e,t){e.g?e.g.add(t):e.h=t}function bm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function _m(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Kd(e.i)}pm.prototype.cancel=function(){if(this.i=_m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Em,Im=class{stringify(e){return Rd.JSON.stringify(e,void 0)}parse(e){return Rd.JSON.parse(e,void 0)}};function Sm(){this.g=new Im}function Tm(e,t,n){const r=n||"";try{Kp(e,(function(e,n){let i=e;Od(e)&&(i=zf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Sj){throw t.push(r+"type="+encodeURIComponent("_badmap")),Sj}}function km(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Cm(e){this.l=e.ec||null,this.j=e.ob||!1}function xm(e,t){Uf.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Nm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zd(Cm,bp),Cm.prototype.g=function(){return new xm(this.l,this.j)},Cm.prototype.i=(Em={},function(){return Em}),zd(xm,Uf);var Nm=0;function Am(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Pm(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Rm(e)}function Rm(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(xd=xm.prototype).open=function(e,t){if(this.readyState!=Nm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Rm(this)},xd.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Rd).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},xd.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pm(this)),this.readyState=Nm},xd.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rm(this)),this.g&&(this.readyState=3,Rm(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Rd.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Am(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},xd.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pm(this):Rm(this),3==this.readyState&&Am(this)}},xd.Za=function(e){this.g&&(this.response=this.responseText=e,Pm(this))},xd.Ya=function(e){this.g&&(this.response=e,Pm(this))},xd.ka=function(){this.g&&Pm(this)},xd.setRequestHeader=function(e,t){this.v.append(e,t)},xd.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},xd.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(xm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Dm=Rd.JSON.parse;function Om(e){Uf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Lm,this.L=this.M=!1}zd(Om,Uf);var Lm="",Mm=/^https?$/i,Fm=["POST","PUT"];function Um(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,jm(e),zm(e)}function jm(e){e.F||(e.F=!0,jf(e,"complete"),jf(e,"error"))}function Vm(e){if(e.h&&"undefined"!=typeof Pd&&(!e.C[1]||4!=qm(e)||2!=e.da()))if(e.v&&4==qm(e))ep(e.La,0,e);else if(jf(e,"readystatechange"),4==qm(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Gp)[1]||null;!i&&Rd.self&&Rd.self.location&&(i=Rd.self.location.protocol.slice(0,-1)),r=!Mm.test(i?i.toLowerCase():"")}n=r}if(n)jf(e,"complete"),jf(e,"success");else{e.m=6;try{var o=2<qm(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",jm(e)}}finally{zm(e)}}}function zm(e,t){if(e.g){Bm(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||jf(e,"ready");try{n.onreadystatechange=r}catch(Sj){}}}function Bm(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Rd.clearTimeout(e.A),e.A=null)}function qm(e){return e.g?e.g.readyState:0}function Km(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Lm:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Yg){return null}}function Gm(e){let t="";return wf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Hm(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gm(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Yp(e,t,n))}function Wm(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qm(e){this.Ga=0,this.j=[],this.l=new ap,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Wm("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Wm("baseRetryDelayMs",5e3,e),this.hb=Wm("retryDelaySeedMs",1e4,e),this.eb=Wm("forwardChannelMaxRetries",2,e),this.xa=Wm("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new pm(e&&e.concurrentRequestLimit),this.Ja=new Sm,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Jm(e){if(Ym(e),3==e.H){var t=e.W++,n=Wp(e.I);if(Yp(n,"SID",e.K),Yp(n,"RID",t),Yp(n,"TYPE","terminate"),eg(e,n),(t=new xp(e,e.l,t)).L=2,t.A=Xp(Wp(n)),n=!1,Rd.navigator&&Rd.navigator.sendBeacon)try{n=Rd.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Rd.Image&&((new Image).src=t.A,n=!0),n||(t.g=dg(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Up(t)}ug(e)}function $m(e){e.g&&(ig(e),e.g.cancel(),e.g=null)}function Ym(e){$m(e),e.u&&(Rd.clearTimeout(e.u),e.u=null),sg(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Rd.clearTimeout(e.m),e.m=null)}function Xm(e){if(!gm(e.i)&&!e.m){e.m=!0;var t=e.Na;Wf||$f(),Qf||(Wf(),Qf=!0),Jf.add(t,e),e.C=0}}function Zm(e,t){var n;n=t?t.m:e.W++;const r=Wp(e.I);Yp(r,"SID",e.K),Yp(r,"RID",n),Yp(r,"AID",e.V),eg(e,r),e.o&&e.s&&Hm(r,e.o,e.s),n=new xp(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=tg(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),wm(e.i,n),Dp(n,r,t)}function eg(e,t){e.na&&wf(e.na,(function(e,n){Yp(t,n,e)})),e.h&&Kp({},(function(e,n){Yp(t,n,e)}))}function tg(e,t,n){n=Math.min(e.j.length,n);var r=e.h?jd(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{Tm(a,e,"req"+n+"_")}catch(py){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function ng(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Wf||$f(),Qf||(Wf(),Qf=!0),Jf.add(t,e),e.A=0}}function rg(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=vp(jd(e.Ma,e),cg(e,e.A)),e.A++,!0)}function ig(e){null!=e.B&&(Rd.clearTimeout(e.B),e.B=null)}function og(e){e.g=new xp(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Wp(e.wa);Yp(t,"RID","rpc"),Yp(t,"SID",e.K),Yp(t,"AID",e.V),Yp(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Yp(t,"TO",e.qa),Yp(t,"TYPE","xmlhttp"),eg(e,t),e.o&&e.s&&Hm(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Xp(Wp(t)),n.u=null,n.S=!0,Op(n,e)}function sg(e){null!=e.v&&(Rd.clearTimeout(e.v),e.v=null)}function ag(e,t){var n=null;if(e.g==t){sg(e),ig(e),e.g=null;var r=2}else{if(!ym(e.i,t))return;n=t.F,bm(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;jf(r=hp(),new gp(r,n)),Xm(e)}else ng(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(vm(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=vp(jd(e.Na,e,t),cg(e,e.C)),e.C++,!0))}(e,t)||2==r&&rg(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:lg(e,5);break;case 4:lg(e,10);break;case 3:lg(e,6);break;default:lg(e,2)}}function cg(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function lg(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=jd(e.pb,e);n||(n=new Hp("//www.google.com/images/cleardot.gif"),Rd.location&&"http"==Rd.location.protocol||Qp(n,"https"),Xp(n)),function(e,t){const n=new ap;if(Rd.Image){const r=new Image;r.onload=Vd(km,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Vd(km,n,r,"TestLoadImage: error",!1,t),r.onabort=Vd(km,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Vd(km,n,r,"TestLoadImage: timeout",!1,t),Rd.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else mp(2);e.H=0,e.h&&e.h.za(t),ug(e),Ym(e)}function ug(e){if(e.H=0,e.ma=[],e.h){const t=_m(e.i);0==t.length&&0==e.j.length||(Gd(e.ma,t),Gd(e.ma,e.j),e.i.i.length=0,Kd(e.j),e.j.length=0),e.h.ya()}}function hg(e,t,n){var r=n instanceof Hp?Wp(n):new Hp(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Jp(r,r.m);else{var i=Rd.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Hp(null);r&&Qp(o,r),t&&(o.g=t),i&&Jp(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Yp(r,n,t),Yp(r,"VER",e.ra),eg(e,r),r}function dg(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Om(new Cm({ob:n})):new Om(e.va)).Oa(e.J),t}function fg(){}function pg(){if(tf&&!(10<=Number(df)))throw Error("Environmental error: no available transport.")}function mg(e,t){Uf.call(this),this.g=new Qm(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Qd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Qd(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yg(this)}function gg(e){Tp.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vg(){kp.call(this),this.status=1}function yg(e){this.g=e}function wg(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function bg(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function _g(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(xd=Om.prototype).Oa=function(e){this.M=e},xd.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ip.g(),this.C=this.u?_p(this.u):_p(Ip),this.g.onreadystatechange=jd(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void Um(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Rd.FormData&&e instanceof Rd.FormData,!(0<=qd(Fm,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Bm(this),0<this.B&&((this.L=function(e){return tf&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jd(this.ua,this)):this.A=ep(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Um(this,o)}},xd.ua=function(){"undefined"!=typeof Pd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jf(this,"timeout"),this.abort(8))},xd.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,jf(this,"complete"),jf(this,"abort"),zm(this))},xd.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zm(this,!0)),Om.$.N.call(this)},xd.La=function(){this.s||(this.G||this.v||this.l?Vm(this):this.kb())},xd.kb=function(){Vm(this)},xd.isActive=function(){return!!this.g},xd.da=function(){try{return 2<qm(this)?this.g.status:-1}catch(Em){return-1}},xd.ja=function(){try{return this.g?this.g.responseText:""}catch(Em){return""}},xd.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Dm(t)}},xd.Ia=function(){return this.m},xd.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(xd=Qm.prototype).ra=8,xd.H=1,xd.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new xp(this,this.l,e);let o=this.s;if(this.U&&(o?(o=bf(o),Ef(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tg(this,i,t),Yp(n=Wp(this.I),"RID",e),Yp(n,"CVER",22),this.F&&Yp(n,"X-HTTP-Session-Id",this.F),eg(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Gm(o)))+"&"+t:this.o&&Hm(n,this.o,o)),wm(this.i,i),this.bb&&Yp(n,"TYPE","init"),this.P?(Yp(n,"$req",t),Yp(n,"SID","null"),i.aa=!0,Dp(i,n,null)):Dp(i,n,t),this.H=2}}else 3==this.H&&(e?Zm(this,e):0==this.j.length||gm(this.i)||Zm(this))},xd.Ma=function(){if(this.u=null,og(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=vp(jd(this.jb,this),e)}},xd.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,mp(10),$m(this),og(this))},xd.ib=function(){null!=this.v&&(this.v=null,$m(this),rg(this),mp(19))},xd.pb=function(e){e?(this.l.info("Successfully pinged google.com"),mp(2)):(this.l.info("Failed to ping google.com"),mp(1))},xd.isActive=function(){return!!this.h&&this.h.isActive(this)},(xd=fg.prototype).Ba=function(){},xd.Aa=function(){},xd.za=function(){},xd.ya=function(){},xd.isActive=function(){return!0},xd.Va=function(){},pg.prototype.g=function(e,t){return new mg(e,t)},zd(mg,Uf),mg.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;mp(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=hg(e,null,e.Y),Xm(e)},mg.prototype.close=function(){Jm(this.g)},mg.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=zf(e),e=n);t.j.push(new fm(t.fb++,e)),3==t.H&&Xm(t)},mg.prototype.N=function(){this.g.h=null,delete this.j,Jm(this.g),delete this.g,mg.$.N.call(this)},zd(gg,Tp),zd(vg,kp),zd(yg,fg),yg.prototype.Ba=function(){jf(this.g,"a")},yg.prototype.Aa=function(e){jf(this.g,new gg(e))},yg.prototype.za=function(e){jf(this.g,new vg)},yg.prototype.ya=function(){jf(this.g,"b")},zd(wg,(function(){this.blockSize=-1})),wg.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},wg.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)bg(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){bg(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){bg(this,r),i=0;break}}this.h=i,this.i+=t},wg.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Eg={};function Ig(e){return-128<=e&&128>e?function(e,t){var n=Eg;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new _g([0|e],0>e?-1:0)})):new _g([0|e],0>e?-1:0)}function Sg(e){if(isNaN(e)||!isFinite(e))return kg;if(0>e)return Pg(Sg(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Tg;return new _g(t,0)}var Tg=4294967296,kg=Ig(0),Cg=Ig(1),xg=Ig(16777216);function Ng(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Ag(e){return-1==e.h}function Pg(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new _g(n,~e.h).add(Cg)}function Rg(e,t){return e.add(Pg(t))}function Dg(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Og(e,t){this.g=e,this.h=t}function Lg(e,t){if(Ng(t))throw Error("division by zero");if(Ng(e))return new Og(kg,kg);if(Ag(e))return t=Lg(Pg(e),t),new Og(Pg(t.g),Pg(t.h));if(Ag(t))return t=Lg(e,Pg(t)),new Og(Pg(t.g),t.h);if(30<e.g.length){if(Ag(e)||Ag(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Cg,r=t;0>=r.X(e);)n=Mg(n),r=Mg(r);var i=Fg(n,1),o=Fg(r,1);for(r=Fg(r,2),n=Fg(n,2);!Ng(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=Fg(r,1),n=Fg(n,1)}return t=Rg(e,i.R(t)),new Og(i,t)}for(i=kg;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Sg(n)).R(t);Ag(s)||0<s.X(e);)s=(o=Sg(n-=r)).R(t);Ng(o)&&(o=Cg),i=i.add(o),e=Rg(e,s)}return new Og(i,e)}function Mg(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new _g(n,e.h)}function Fg(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new _g(i,e.h)}(xd=_g.prototype).ea=function(){if(Ag(this))return-Pg(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Tg+r)*t,t*=Tg}return e},xd.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ng(this))return"0";if(Ag(this))return"-"+Pg(this).toString(e);for(var t=Sg(Math.pow(e,6)),n=this,r="";;){var i=Lg(n,t).g,o=((0<(n=Rg(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ng(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},xd.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},xd.X=function(e){return Ag(e=Rg(this,e))?-1:Ng(e)?0:1},xd.abs=function(){return Ag(this)?Pg(this):this},xd.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new _g(n,-2147483648&n[n.length-1]?-1:0)},xd.R=function(e){if(Ng(this)||Ng(e))return kg;if(Ag(this))return Ag(e)?Pg(this).R(Pg(e)):Pg(Pg(this).R(e));if(Ag(e))return Pg(this.R(Pg(e)));if(0>this.X(xg)&&0>e.X(xg))return Sg(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=s*c,Dg(n,2*r+2*i),n[2*r+2*i+1]+=o*c,Dg(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Dg(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Dg(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new _g(n,0)},xd.gb=function(e){return Lg(this,e).h},xd.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new _g(n,this.h&e.h)},xd.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new _g(n,this.h|e.h)},xd.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new _g(n,this.h^e.h)},pg.prototype.createWebChannel=pg.prototype.g,mg.prototype.send=mg.prototype.u,mg.prototype.open=mg.prototype.m,mg.prototype.close=mg.prototype.close,yp.NO_ERROR=0,yp.TIMEOUT=8,yp.HTTP_ERROR=6,wp.COMPLETE="complete",Ep.EventType=Sp,Sp.OPEN="a",Sp.CLOSE="b",Sp.ERROR="c",Sp.MESSAGE="d",Uf.prototype.listen=Uf.prototype.O,Om.prototype.listenOnce=Om.prototype.P,Om.prototype.getLastError=Om.prototype.Sa,Om.prototype.getLastErrorCode=Om.prototype.Ia,Om.prototype.getStatus=Om.prototype.da,Om.prototype.getResponseJson=Om.prototype.Wa,Om.prototype.getResponseText=Om.prototype.ja,Om.prototype.send=Om.prototype.ha,Om.prototype.setWithCredentials=Om.prototype.Oa,wg.prototype.digest=wg.prototype.l,wg.prototype.reset=wg.prototype.reset,wg.prototype.update=wg.prototype.j,_g.prototype.add=_g.prototype.add,_g.prototype.multiply=_g.prototype.R,_g.prototype.modulo=_g.prototype.gb,_g.prototype.compare=_g.prototype.X,_g.prototype.toNumber=_g.prototype.ea,_g.prototype.toString=_g.prototype.toString,_g.prototype.getBits=_g.prototype.D,_g.fromNumber=Sg,_g.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Pg(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Sg(Math.pow(n,8)),i=kg,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=Sg(Math.pow(n,s)),i=i.R(s).add(Sg(a))):i=(i=i.R(r)).add(Sg(a))}return i};var Ug=Ad.createWebChannelTransport=function(){return new pg},jg=Ad.getStatEventTarget=function(){return hp()},Vg=Ad.ErrorCode=yp,zg=Ad.EventType=wp,Bg=Ad.Event=lp,qg=Ad.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Kg=Ad.FetchXmlHttpFactory=Cm,Gg=Ad.WebChannel=Ep,Hg=Ad.XhrIo=Om,Wg=Ad.Md5=wg,Qg=Ad.Integer=_g;const Jg="@firebase/firestore";class $g{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$g.UNAUTHENTICATED=new $g(null),$g.GOOGLE_CREDENTIALS=new $g("google-credentials-uid"),$g.FIRST_PARTY=new $g("first-party-uid"),$g.MOCK_USER=new $g("mock-user");let Yg="10.11.1";const Xg=new Vo("@firebase/firestore");function Zg(){return Xg.logLevel}function ev(e){if(Xg.logLevel<=Lo.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(rv);Xg.debug("Firestore (".concat(Yg,"): ").concat(e),...i)}}function tv(e){if(Xg.logLevel<=Lo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(rv);Xg.error("Firestore (".concat(Yg,"): ").concat(e),...i)}}function nv(e){if(Xg.logLevel<=Lo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(rv);Xg.warn("Firestore (".concat(Yg,"): ").concat(e),...i)}}function rv(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function iv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Yg,") INTERNAL ASSERTION FAILED: ")+e;throw tv(t),new Error(t)}function ov(e,t){e||iv()}function sv(e,t){return e}const av={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cv extends vo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class lv{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class uv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class hv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($g.UNAUTHENTICATED)))}shutdown(){}}class dv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class fv{constructor(e){this.t=e,this.currentUser=$g.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new lv;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new lv,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{ev("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(ev("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new lv)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ev("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ov("string"==typeof t.accessToken),new uv(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ov(null===e||"string"==typeof e),new $g(e)}}class pv{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=$g.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mv{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new pv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t($g.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vv{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&ev("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,ev("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ev("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):ev("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ov("string"==typeof e.token),this.R=e.token,new gv(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yv(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class wv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=yv(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function bv(e,t){return e<t?-1:e>t?1:0}function _v(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Ev(e){return e+"\0"}class Iv{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new cv(av.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new cv(av.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new cv(av.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new cv(av.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Iv.fromMillis(Date.now())}static fromDate(e){return Iv.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Iv(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bv(this.nanoseconds,e.nanoseconds):bv(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Sv{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Sv(e)}static min(){return new Sv(new Iv(0,0))}static max(){return new Sv(new Iv(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Tv{constructor(e,t,n){void 0===t?t=0:t>e.length&&iv(),void 0===n?n=e.length-t:n>e.length-t&&iv(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Tv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tv?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class kv extends Tv{construct(e,t,n){return new kv(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new cv(av.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new kv(e)}static emptyPath(){return new kv([])}}const Cv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xv extends Tv{construct(e,t,n){return new xv(e,t,n)}static isValidIdentifier(e){return Cv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xv.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xv(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new cv(av.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new cv(av.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new cv(av.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new cv(av.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xv(t)}static emptyPath(){return new xv([])}}class Nv{constructor(e){this.path=e}static fromPath(e){return new Nv(kv.fromString(e))}static fromName(e){return new Nv(kv.fromString(e).popFirst(5))}static empty(){return new Nv(kv.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===kv.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return kv.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Nv(new kv(e.slice()))}}class Av{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Pv(e){return e.fields.find((e=>2===e.kind))}function Rv(e){return e.fields.filter((e=>2!==e.kind))}Av.UNKNOWN_ID=-1;class Dv{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ov{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ov(0,Fv.min())}}function Lv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Sv.fromTimestamp(1e9===r?new Iv(n+1,0):new Iv(n,r));return new Fv(i,Nv.empty(),t)}function Mv(e){return new Fv(e.readTime,e.key,-1)}class Fv{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Fv(Sv.min(),Nv.empty(),-1)}static max(){return new Fv(Sv.max(),Nv.empty(),-1)}}function Uv(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Nv.comparator(e.documentKey,t.documentKey),0!==n?n:bv(e.largestBatchId,t.largestBatchId))}const jv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zv(e){if(e.code!==av.FAILED_PRECONDITION||e.message!==jv)throw e;ev("LocalStore","Unexpectedly lost primary lease")}class Bv{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&iv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Bv(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Bv?t:Bv.resolve(t)}catch(e){return Bv.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Bv.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Bv.reject(t)}static resolve(e){return new Bv(((t,n)=>{t(e)}))}static reject(e){return new Bv(((t,n)=>{n(e)}))}static waitFor(e){return new Bv(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Bv.resolve(!1);for(const n of e)t=t.next((e=>e?Bv.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Bv(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{o[c]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Bv(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class qv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new lv,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Wv(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Xv(t.target.error);this.V.reject(new Wv(e,n))}}static open(e,t,n,r){try{return new qv(t,e.transaction(r,n))}catch(e){throw new Wv(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ev("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Jv(t)}}class Kv{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Kv.S(co())&&tv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ev("SimpleDb","Removing database:",e),$v(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!go())return!1;if(Kv.C())return!0;const e=co(),t=Kv.S(e),n=0<t&&t<10,r=Gv(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ev("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Wv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new cv(av.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new cv(av.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Wv(e,r))},r.onupgradeneeded=e=>{ev("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{ev("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.M(e);const t=qv.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Bv.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(ev("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Gv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Hv{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return $v(this.B.delete())}}class Wv extends cv{constructor(e,t){super(av.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Qv(e){return"IndexedDbTransactionError"===e.name}class Jv{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(ev("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ev("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$v(n)}add(e){return ev("SimpleDb","ADD",this.store.name,e,e),$v(this.store.add(e))}get(e){return $v(this.store.get(e)).next((t=>(void 0===t&&(t=null),ev("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ev("SimpleDb","DELETE",this.store.name,e),$v(this.store.delete(e))}count(){return ev("SimpleDb","COUNT",this.store.name),$v(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Bv(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Bv(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){ev("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new Bv(((n,r)=>{t.onerror=e=>{const t=Xv(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Bv(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new Hv(i),s=t(i.primaryKey,i.value,o);if(s instanceof Bv){const e=s.catch((e=>(o.done(),Bv.reject(e))));n.push(e)}o.isDone?r():null===o.K?i.continue():i.continue(o.K)}})).next((()=>Bv.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $v(e){return new Bv(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Xv(e.target.error);n(t)}}))}let Yv=!1;function Xv(e){const t=Kv.S(co());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new cv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Yv||(Yv=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Zv{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){ev("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ev("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){Qv(e)?ev("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await zv(e)}await this.X(6e4)}))}}class ey{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return Bv.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return ev("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(ev("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Mv(t);Uv(r,n)>0&&(n=r)})),new Fv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ty{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function ny(e){return null==e}function ry(e){return 0===e&&1/e==-1/0}function iy(e){return"number"==typeof e&&Number.isInteger(e)&&!ry(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function oy(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ay(t)),t=sy(e.get(n),t);return ay(t)}function sy(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function ay(e){return e+"\x01\x01"}function cy(e){const t=e.length;if(ov(t>=2),2===t)return ov("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),kv.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&iv(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:iv()}o=t+2}return new kv(r)}ty.oe=-1;const ly=["userId","batchId"];function uy(e,t){return[e,oy(t)]}function hy(e,t,n){return[e,oy(t),n]}const dy={},fy=["prefixPath","collectionGroup","readTime","documentId"],py=["prefixPath","collectionGroup","documentId"],my=["collectionGroup","readTime","prefixPath","documentId"],gy=["canonicalId","targetId"],vy=["targetId","path"],yy=["path","targetId"],wy=["collectionId","parent"],by=["indexId","uid"],_y=["uid","sequenceNumber"],Ey=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Iy=["indexId","uid","orderedDocumentKey"],Sy=["userId","collectionPath","documentId"],Ty=["userId","collectionPath","largestBatchId"],ky=["userId","collectionGroup","largestBatchId"],Cy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xy=[...Cy,"documentOverlays"],Ny=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ay=Ny,Py=[...Ay,"indexConfiguration","indexState","indexEntries"],Ry=Py;class Dy extends Vv{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Oy(e,t){const n=sv(e);return Kv.F(n._e,t)}function Ly(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function My(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fy(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Uy{constructor(e,t){this.comparator=e,this.root=t||Vy.EMPTY}insert(e,t){return new Uy(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vy.BLACK,null,null))}remove(e){return new Uy(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vy.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jy(this.root,e,this.comparator,!1)}getReverseIterator(){return new jy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jy(this.root,e,this.comparator,!0)}}class jy{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vy{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Vy.RED,this.left=null!=r?r:Vy.EMPTY,this.right=null!=i?i:Vy.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Vy(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vy.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Vy.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vy.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vy.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw iv();if(this.right.isRed())throw iv();const e=this.left.check();if(e!==this.right.check())throw iv();return e+(this.isRed()?0:1)}}Vy.EMPTY=null,Vy.RED=!0,Vy.BLACK=!1,Vy.EMPTY=new class{constructor(){this.size=0}get key(){throw iv()}get value(){throw iv()}get color(){throw iv()}get left(){throw iv()}get right(){throw iv()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Vy(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zy{constructor(e){this.comparator=e,this.data=new Uy(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new By(this.data.getIterator())}getIteratorFrom(e){return new By(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof zy))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new zy(this.comparator);return t.data=e,t}}class By{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qy(e){return e.hasNext()?e.getNext():void 0}class Ky{constructor(e){this.fields=e,e.sort(xv.comparator)}static empty(){return new Ky([])}unionWith(e){let t=new zy(xv.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ky(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _v(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Gy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hy{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Gy("Invalid base64 string: "+e):e}}(e);return new Hy(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Hy(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bv(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hy.EMPTY_BYTE_STRING=new Hy("");const Wy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qy(e){if(ov(!!e),"string"==typeof e){let t=0;const n=Wy.exec(e);if(ov(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Jy(e.seconds),nanos:Jy(e.nanos)}}function Jy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $y(e){return"string"==typeof e?Hy.fromBase64String(e):Hy.fromUint8Array(e)}function Yy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xy(e){const t=e.mapValue.fields.__previous_value__;return Yy(t)?Xy(t):t}function Zy(e){const t=Qy(e.mapValue.fields.__local_write_time__.timestampValue);return new Iv(t.seconds,t.nanos)}class ew{constructor(e,t,n,r,i,o,s,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=c}}class tw{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new tw("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof tw&&e.projectId===this.projectId&&e.database===this.database}}const nw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rw={nullValue:"NULL_VALUE"};function iw(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Yy(e)?4:yw(e)?9007199254740991:10:iv()}function ow(e,t){if(e===t)return!0;const n=iw(e);if(n!==iw(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zy(e).isEqual(Zy(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Qy(e.timestampValue),r=Qy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $y(e.bytesValue).isEqual($y(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jy(e.geoPointValue.latitude)===Jy(t.geoPointValue.latitude)&&Jy(e.geoPointValue.longitude)===Jy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jy(e.integerValue)===Jy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Jy(e.doubleValue),r=Jy(t.doubleValue);return n===r?ry(n)===ry(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return _v(e.arrayValue.values||[],t.arrayValue.values||[],ow);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ly(n)!==Ly(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ow(n[i],r[i])))return!1;return!0}(e,t);default:return iv()}}function sw(e,t){return void 0!==(e.values||[]).find((e=>ow(e,t)))}function aw(e,t){if(e===t)return 0;const n=iw(e),r=iw(t);if(n!==r)return bv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bv(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Jy(e.integerValue||e.doubleValue),r=Jy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return cw(e.timestampValue,t.timestampValue);case 4:return cw(Zy(e),Zy(t));case 5:return bv(e.stringValue,t.stringValue);case 6:return function(e,t){const n=$y(e),r=$y(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=bv(n[i],r[i]);if(0!==e)return e}return bv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=bv(Jy(e.latitude),Jy(t.latitude));return 0!==n?n:bv(Jy(e.longitude),Jy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=aw(n[i],r[i]);if(e)return e}return bv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===nw.mapValue&&t===nw.mapValue)return 0;if(e===nw.mapValue)return 1;if(t===nw.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=bv(r[s],o[s]);if(0!==e)return e;const t=aw(n[r[s]],i[o[s]]);if(0!==t)return t}return bv(r.length,o.length)}(e.mapValue,t.mapValue);default:throw iv()}}function cw(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return bv(e,t);const n=Qy(e),r=Qy(t),i=bv(n.seconds,r.seconds);return 0!==i?i:bv(n.nanos,r.nanos)}function lw(e){return uw(e)}function uw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Qy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return $y(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Nv.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=uw(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(uw(e.fields[i]));return n+"}"}(e.mapValue):iv()}function hw(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function dw(e){return!!e&&"integerValue"in e}function fw(e){return!!e&&"arrayValue"in e}function pw(e){return!!e&&"nullValue"in e}function mw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gw(e){return!!e&&"mapValue"in e}function vw(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return My(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=vw(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=vw(e.arrayValue.values[n]);return t}return Object.assign({},e)}function yw(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ww(e){return"nullValue"in e?rw:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?hw(tw.empty(),Nv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:iv()}function bw(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?hw(tw.empty(),Nv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?nw:iv()}function _w(e,t){const n=aw(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ew(e,t){const n=aw(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Iw{constructor(e){this.value=e}static empty(){return new Iw({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!gw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vw(t)}setAll(e){let t=xv.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=vw(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());gw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ow(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];gw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){My(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Iw(vw(this.value))}}function Sw(e){const t=[];return My(e.fields,((e,n)=>{const r=new xv([e]);if(gw(n)){const e=Sw(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ky(t)}class Tw{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Tw(e,0,Sv.min(),Sv.min(),Sv.min(),Iw.empty(),0)}static newFoundDocument(e,t,n,r){return new Tw(e,1,t,Sv.min(),n,r,0)}static newNoDocument(e,t){return new Tw(e,2,t,Sv.min(),Sv.min(),Iw.empty(),0)}static newUnknownDocument(e,t){return new Tw(e,3,t,Sv.min(),Sv.min(),Iw.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Sv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Iw.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Iw.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Sv.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tw&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tw(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class kw{constructor(e,t){this.position=e,this.inclusive=t}}function Cw(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Nv.comparator(Nv.fromName(s.referenceValue),n.key):aw(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function xw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ow(e.position[n],t.position[n]))return!1;return!0}class Nw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Aw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Pw{}class Rw extends Pw{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Bw(e,t,n):"array-contains"===t?new Hw(e,n):"in"===t?new Ww(e,n):"not-in"===t?new Qw(e,n):"array-contains-any"===t?new Jw(e,n):new Rw(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new qw(e,n):new Kw(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(aw(t,this.value)):null!==t&&iw(this.value)===iw(t)&&this.matchesComparison(aw(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return iv()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dw extends Pw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Dw(e,t)}matches(e){return Ow(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ow(e){return"and"===e.op}function Lw(e){return"or"===e.op}function Mw(e){return Fw(e)&&Ow(e)}function Fw(e){for(const t of e.filters)if(t instanceof Dw)return!1;return!0}function Uw(e){if(e instanceof Rw)return e.field.canonicalString()+e.op.toString()+lw(e.value);if(Mw(e))return e.filters.map((e=>Uw(e))).join(",");{const t=e.filters.map((e=>Uw(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function jw(e,t){return e instanceof Rw?function(e,t){return t instanceof Rw&&e.op===t.op&&e.field.isEqual(t.field)&&ow(e.value,t.value)}(e,t):e instanceof Dw?function(e,t){return t instanceof Dw&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&jw(n,t.filters[r])),!0)}(e,t):void iv()}function Vw(e,t){const n=e.filters.concat(t);return Dw.create(n,e.op)}function zw(e){return e instanceof Rw?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(lw(e.value))}(e):e instanceof Dw?function(e){return e.op.toString()+" {"+e.getFilters().map(zw).join(" ,")+"}"}(e):"Filter"}class Bw extends Rw{constructor(e,t,n){super(e,t,n),this.key=Nv.fromName(n.referenceValue)}matches(e){const t=Nv.comparator(e.key,this.key);return this.matchesComparison(t)}}class qw extends Rw{constructor(e,t){super(e,"in",t),this.keys=Gw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Kw extends Rw{constructor(e,t){super(e,"not-in",t),this.keys=Gw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Gw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Nv.fromName(e.referenceValue)))}class Hw extends Rw{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fw(t)&&sw(t.arrayValue,this.value)}}class Ww extends Rw{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sw(this.value.arrayValue,t)}}class Qw extends Rw{constructor(e,t){super(e,"not-in",t)}matches(e){if(sw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sw(this.value.arrayValue,t)}}class Jw extends Rw{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fw(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>sw(this.value.arrayValue,e)))}}class $w{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ue=null}}function Yw(e){return new $w(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Xw(e){const t=sv(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Uw(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ny(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>lw(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>lw(e))).join(",")),t.ue=e}return t.ue}function Zw(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Aw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!jw(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!xw(e.startAt,t.startAt)&&xw(e.endAt,t.endAt)}function eb(e){return Nv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function tb(e,t){return e.filters.filter((e=>e instanceof Rw&&e.field.isEqual(t)))}function nb(e,t,n){let r=rw,i=!0;for(const o of tb(e,t)){let e=rw,t=!0;switch(o.op){case"<":case"<=":e=ww(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=rw}_w({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];_w({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function rb(e,t,n){let r=nw,i=!0;for(const o of tb(e,t)){let e=nw,t=!0;switch(o.op){case">=":case">":e=bw(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=nw}Ew({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Ew({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class ib{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ob(e,t,n,r,i,o,s,a){return new ib(e,t,n,r,i,o,s,a)}function sb(e){return new ib(e)}function ab(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function cb(e){return null!==e.collectionGroup}function lb(e){const t=sv(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new zy(xv.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Nw(r,n))})),e.has(xv.keyField().canonicalString())||t.ce.push(new Nw(xv.keyField(),n))}return t.ce}function ub(e){const t=sv(e);return t.le||(t.le=hb(t,lb(e))),t.le}function hb(e,t){if("F"===e.limitType)return Yw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Nw(e.field,t)}));const n=e.endAt?new kw(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new kw(e.startAt.position,e.startAt.inclusive):null;return Yw(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function db(e,t){const n=e.filters.concat([t]);return new ib(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function fb(e,t,n){return new ib(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function pb(e,t){return Zw(ub(e),ub(t))&&e.limitType===t.limitType}function mb(e){return"".concat(Xw(ub(e)),"|lt:").concat(e.limitType)}function gb(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>zw(e))).join(", "),"]")),ny(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>lw(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>lw(e))).join(",")),"Target(".concat(t,")")}(ub(e)),"; limitType=").concat(e.limitType,")")}function vb(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Nv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of lb(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Cw(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,lb(e),t))&&!(e.endAt&&!function(e,t,n){const r=Cw(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,lb(e),t))}(e,t)}function yb(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wb(e){return(t,n)=>{let r=!1;for(const i of lb(e)){const e=bb(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function bb(e,t,n){const r=e.field.isKeyField()?Nv.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?aw(r,i):iv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return iv()}}class _b{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){My(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Fy(this.inner)}size(){return this.innerSize}}const Eb=new Uy(Nv.comparator);function Ib(){return Eb}const Sb=new Uy(Nv.comparator);function Tb(){let e=Sb;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function kb(e){let t=Sb;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Cb(){return Nb()}function xb(){return Nb()}function Nb(){return new _b((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ab=new Uy(Nv.comparator),Pb=new zy(Nv.comparator);function Rb(){let e=Pb;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Db=new zy(bv);function Ob(){return Db}function Lb(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ry(t)?"-0":t}}function Mb(e){return{integerValue:""+e}}function Fb(e,t){return iy(t)?Mb(t):Lb(e,t)}class Ub{constructor(){this._=void 0}}function jb(e,t,n){return e instanceof Bb?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Yy(t)&&(t=Xy(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof qb?Kb(e,t):e instanceof Gb?Hb(e,t):function(e,t){const n=zb(e,t),r=Qb(n)+Qb(e.Pe);return dw(n)&&dw(e.Pe)?Mb(r):Lb(e.serializer,r)}(e,t)}function Vb(e,t,n){return e instanceof qb?Kb(e,t):e instanceof Gb?Hb(e,t):n}function zb(e,t){return e instanceof Wb?function(e){return dw(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Bb extends Ub{}class qb extends Ub{constructor(e){super(),this.elements=e}}function Kb(e,t){const n=Jb(t);for(const r of e.elements)n.some((e=>ow(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Gb extends Ub{constructor(e){super(),this.elements=e}}function Hb(e,t){let n=Jb(t);for(const r of e.elements)n=n.filter((e=>!ow(e,r)));return{arrayValue:{values:n}}}class Wb extends Ub{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Qb(e){return Jy(e.integerValue||e.doubleValue)}function Jb(e){return fw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class $b{constructor(e,t){this.field=e,this.transform=t}}class Yb{constructor(e,t){this.version=e,this.transformResults=t}}class Xb{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xb}static exists(e){return new Xb(void 0,e)}static updateTime(e){return new Xb(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class e_{}function t_(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new h_(e.key,Xb.none()):new s_(e.key,e.data,Xb.none());{const n=e.data,r=Iw.empty();let i=new zy(xv.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new a_(e.key,r,new Ky(i.toArray()),Xb.none())}}function n_(e,t,n){e instanceof s_?function(e,t,n){const r=e.value.clone(),i=l_(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof a_?function(e,t,n){if(!Zb(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=l_(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(c_(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function r_(e,t,n,r){return e instanceof s_?function(e,t,n,r){if(!Zb(e.precondition,t))return n;const i=e.value.clone(),o=u_(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof a_?function(e,t,n,r){if(!Zb(e.precondition,t))return n;const i=u_(e.fieldTransforms,r,t),o=t.data;return o.setAll(c_(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Zb(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function i_(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=zb(r.transform,e||null);null!=i&&(null===n&&(n=Iw.empty()),n.set(r.field,i))}return n||null}function o_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&_v(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof qb&&t instanceof qb||e instanceof Gb&&t instanceof Gb?_v(e.elements,t.elements,ow):e instanceof Wb&&t instanceof Wb?ow(e.Pe,t.Pe):e instanceof Bb&&t instanceof Bb}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class s_ extends e_{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class a_ extends e_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function c_(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function l_(e,t,n){const r=new Map;ov(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Vb(s,a,n[i]))}return r}function u_(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,jb(e,o,t))}return r}class h_ extends e_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d_ extends e_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class f_{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&n_(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=r_(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=r_(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=xb();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=t_(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Sv.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Rb())}isEqual(e){return this.batchId===e.batchId&&_v(this.mutations,e.mutations,((e,t)=>o_(e,t)))&&_v(this.baseMutations,e.baseMutations,((e,t)=>o_(e,t)))}}class p_{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ov(e.mutations.length===n.length);let r=Ab;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new p_(e,t,n,r)}}class m_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class g_{constructor(e,t){this.count=e,this.unchangedNames=t}}var v_,y_;function w_(e){switch(e){default:return iv();case av.CANCELLED:case av.UNKNOWN:case av.DEADLINE_EXCEEDED:case av.RESOURCE_EXHAUSTED:case av.INTERNAL:case av.UNAVAILABLE:case av.UNAUTHENTICATED:return!1;case av.INVALID_ARGUMENT:case av.NOT_FOUND:case av.ALREADY_EXISTS:case av.PERMISSION_DENIED:case av.FAILED_PRECONDITION:case av.ABORTED:case av.OUT_OF_RANGE:case av.UNIMPLEMENTED:case av.DATA_LOSS:return!0}}function b_(e){if(void 0===e)return tv("GRPC error has no .code"),av.UNKNOWN;switch(e){case v_.OK:return av.OK;case v_.CANCELLED:return av.CANCELLED;case v_.UNKNOWN:return av.UNKNOWN;case v_.DEADLINE_EXCEEDED:return av.DEADLINE_EXCEEDED;case v_.RESOURCE_EXHAUSTED:return av.RESOURCE_EXHAUSTED;case v_.INTERNAL:return av.INTERNAL;case v_.UNAVAILABLE:return av.UNAVAILABLE;case v_.UNAUTHENTICATED:return av.UNAUTHENTICATED;case v_.INVALID_ARGUMENT:return av.INVALID_ARGUMENT;case v_.NOT_FOUND:return av.NOT_FOUND;case v_.ALREADY_EXISTS:return av.ALREADY_EXISTS;case v_.PERMISSION_DENIED:return av.PERMISSION_DENIED;case v_.FAILED_PRECONDITION:return av.FAILED_PRECONDITION;case v_.ABORTED:return av.ABORTED;case v_.OUT_OF_RANGE:return av.OUT_OF_RANGE;case v_.UNIMPLEMENTED:return av.UNIMPLEMENTED;case v_.DATA_LOSS:return av.DATA_LOSS;default:return iv()}}(y_=v_||(v_={}))[y_.OK=0]="OK",y_[y_.CANCELLED=1]="CANCELLED",y_[y_.UNKNOWN=2]="UNKNOWN",y_[y_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",y_[y_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",y_[y_.NOT_FOUND=5]="NOT_FOUND",y_[y_.ALREADY_EXISTS=6]="ALREADY_EXISTS",y_[y_.PERMISSION_DENIED=7]="PERMISSION_DENIED",y_[y_.UNAUTHENTICATED=16]="UNAUTHENTICATED",y_[y_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",y_[y_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",y_[y_.ABORTED=10]="ABORTED",y_[y_.OUT_OF_RANGE=11]="OUT_OF_RANGE",y_[y_.UNIMPLEMENTED=12]="UNIMPLEMENTED",y_[y_.INTERNAL=13]="INTERNAL",y_[y_.UNAVAILABLE=14]="UNAVAILABLE",y_[y_.DATA_LOSS=15]="DATA_LOSS";let __=null;function E_(){return new TextEncoder}const I_=new Qg([4294967295,4294967295],0);function S_(e){const t=E_().encode(e),n=new Wg;return n.update(t),new Uint8Array(n.digest())}function T_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Qg([n,r],0),new Qg([i,o],0)]}class k_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new C_("Invalid padding: ".concat(t));if(n<0)throw new C_("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new C_("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new C_("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Qg.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Qg.fromNumber(n)));return 1===r.compare(I_)&&(r=new Qg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=S_(e),[n,r]=T_(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new k_(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Ie)return;const t=S_(e),[n,r]=T_(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class C_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class x_{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,N_.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new x_(Sv.min(),r,new Uy(bv),Ib(),Rb())}}class N_{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new N_(n,t,Rb(),Rb(),Rb())}}class A_{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class P_{constructor(e,t){this.targetId=e,this.me=t}}class R_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hy.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class D_{constructor(){this.fe=0,this.ge=M_(),this.pe=Hy.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Rb(),t=Rb(),n=Rb();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:iv()}})),new N_(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=M_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ov(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class O_{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ib(),this.qe=L_(),this.Qe=new Uy(bv)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:iv()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(eb(i))if(0===n){const e=new Nv(i.path);this.Ue(t,e,Tw.newNoDocument(e,Sv.min()))}else ov(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==__||__.et(function(e,t,n,r,i){var o,s,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(c=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=$y(n).toUint8Array()}catch(e){if(e instanceof Gy)return nv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new k_(o,r,i)}catch(e){return nv(e instanceof C_?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Ie?null:s}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&eb(i.target)){const t=new Nv(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Tw.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Rb();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new x_(e,t,this.Qe,this.ke,n);return this.ke=Ib(),this.qe=L_(),this.Qe=new Uy(bv),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new D_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new zy(bv),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ev("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new D_),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function L_(){return new Uy(Nv.comparator)}function M_(){return new Uy(Nv.comparator)}const F_={asc:"ASCENDING",desc:"DESCENDING"},U_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j_={and:"AND",or:"OR"};class V_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function z_(e,t){return e.useProto3Json||ny(t)?t:{value:t}}function B_(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function q_(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function K_(e,t){return B_(e,t.toTimestamp())}function G_(e){return ov(!!e),Sv.fromTimestamp(function(e){const t=Qy(e);return new Iv(t.seconds,t.nanos)}(e))}function H_(e,t){return W_(e,t).canonicalString()}function W_(e,t){const n=function(e){return new kv(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Q_(e){const t=kv.fromString(e);return ov(gE(t)),t}function J_(e,t){return H_(e.databaseId,t.path)}function $_(e,t){const n=Q_(t);if(n.get(1)!==e.databaseId.projectId)throw new cv(av.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new cv(av.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Nv(eE(n))}function Y_(e,t){return H_(e.databaseId,t)}function X_(e){const t=Q_(e);return 4===t.length?kv.emptyPath():eE(t)}function Z_(e){return new kv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function eE(e){return ov(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function tE(e,t,n){return{name:J_(e,t),fields:n.value.mapValue.fields}}function nE(e,t,n){const r=$_(e,t.name),i=G_(t.updateTime),o=t.createTime?G_(t.createTime):Sv.min(),s=new Iw({mapValue:{fields:t.fields}}),a=Tw.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function rE(e,t){let n;if(t instanceof s_)n={update:tE(e,t.key,t.value)};else if(t instanceof h_)n={delete:J_(e,t.key)};else if(t instanceof a_)n={update:tE(e,t.key,t.data),updateMask:mE(t.fieldMask)};else{if(!(t instanceof d_))return iv();n={verify:J_(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Bb)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof qb)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Gb)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wb)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw iv()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:K_(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:iv()}(e,t.precondition)),n}function iE(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Xb.updateTime(G_(e.updateTime)):void 0!==e.exists?Xb.exists(e.exists):Xb.none()}(t.currentDocument):Xb.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)ov("REQUEST_TIME"===t.setToServerValue),n=new Bb;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new qb(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Gb(e)}else"increment"in t?n=new Wb(e,t.increment):iv();const r=xv.fromServerFormat(t.fieldPath);return new $b(r,n)}(e,t))):[];if(t.update){t.update.name;const i=$_(e,t.update.name),o=new Iw({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ky(t.map((e=>xv.fromServerFormat(e))))}(t.updateMask);return new a_(i,o,e,n,r)}return new s_(i,o,n,r)}if(t.delete){const r=$_(e,t.delete);return new h_(r,n)}if(t.verify){const r=$_(e,t.verify);return new d_(r,n)}return iv()}function oE(e,t){return{documents:[Y_(e,t.path)]}}function sE(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Y_(e,i);const o=function(e){if(0!==e.length)return pE(Dw.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:dE(e.field),direction:lE(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=z_(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function aE(e){let t=X_(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ov(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=cE(e);return t instanceof Dw&&Mw(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Nw(fE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ny(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new kw(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new kw(n,t)}(n.endAt)),ob(t,i,s,o,a,"F",c,l)}function cE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=fE(e.unaryFilter.field);return Rw.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=fE(e.unaryFilter.field);return Rw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=fE(e.unaryFilter.field);return Rw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=fE(e.unaryFilter.field);return Rw.create(i,"!=",{nullValue:"NULL_VALUE"});default:return iv()}}(e):void 0!==e.fieldFilter?function(e){return Rw.create(fE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return iv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Dw.create(e.compositeFilter.filters.map((e=>cE(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return iv()}}(e.compositeFilter.op))}(e):iv()}function lE(e){return F_[e]}function uE(e){return U_[e]}function hE(e){return j_[e]}function dE(e){return{fieldPath:e.canonicalString()}}function fE(e){return xv.fromServerFormat(e.fieldPath)}function pE(e){return e instanceof Rw?function(e){if("=="===e.op){if(mw(e.value))return{unaryFilter:{field:dE(e.field),op:"IS_NAN"}};if(pw(e.value))return{unaryFilter:{field:dE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(mw(e.value))return{unaryFilter:{field:dE(e.field),op:"IS_NOT_NAN"}};if(pw(e.value))return{unaryFilter:{field:dE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dE(e.field),op:uE(e.op),value:e.value}}}(e):e instanceof Dw?function(e){const t=e.getFilters().map((e=>pE(e)));return 1===t.length?t[0]:{compositeFilter:{op:hE(e.op),filters:t}}}(e):iv()}function mE(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function gE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class vE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Sv.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hy.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new vE(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vE(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yE{constructor(e){this.ut=e}}function wE(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:bE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:J_(e,t.key),fields:t.data.value.mapValue.fields,updateTime:B_(e,t.version.toTimestamp()),createTime:B_(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:_E(t.version)};else{if(!t.isUnknownDocument())return iv();r.unknownDocument={path:n.path.toArray(),version:_E(t.version)}}return r}function bE(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function _E(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function EE(e){const t=new Iv(e.seconds,e.nanoseconds);return Sv.fromTimestamp(t)}function IE(e,t){const n=(t.baseMutations||[]).map((t=>iE(e.ut,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>iE(e.ut,t))),i=Iv.fromMillis(t.localWriteTimeMs);return new f_(t.batchId,i,n,r)}function SE(e){const t=EE(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?EE(e.lastLimboFreeSnapshotVersion):Sv.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return ov(1===e.documents.length),ub(sb(X_(e.documents[0])))}(e.query):function(e){return ub(aE(e))}(e.query),new vE(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Hy.fromBase64String(e.resumeToken))}function TE(e,t){const n=_E(t.snapshotVersion),r=_E(t.lastLimboFreeSnapshotVersion);let i;i=eb(t.target)?oE(e.ut,t.target):sE(e.ut,t.target)._t;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Xw(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function kE(e){const t=aE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?fb(t,t.limit,"L"):t}function CE(e,t){return new m_(t.largestBatchId,iE(e.ut,t.overlayMutation))}function xE(e,t){const n=t.path.lastSegment();return[e,oy(t.path.popLast()),n]}function NE(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:_E(r.readTime),documentKey:oy(r.documentKey.path),largestBatchId:r.largestBatchId}}class AE{getBundleMetadata(e,t){return PE(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:EE(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return PE(e).put(function(e){return{bundleId:e.id,createTime:_E(G_(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return RE(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:kE(e.bundledQuery),readTime:EE(e.readTime)}}(e)}))}saveNamedQuery(e,t){return RE(e).put(function(e){return{name:e.name,readTime:_E(G_(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function PE(e){return Oy(e,"bundles")}function RE(e){return Oy(e,"namedQueries")}class DE{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new DE(e,n)}getOverlay(e,t){return OE(e).get(xE(this.userId,t)).next((e=>e?CE(this.serializer,e):null))}getOverlays(e,t){const n=Cb();return Bv.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new m_(t,i);r.push(this.lt(e,o))})),Bv.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(oy(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(OE(e).j("collectionPathOverlayIndex",r))})),Bv.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Cb(),i=oy(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return OE(e).U("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=CE(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Cb();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return OE(e).J({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=CE(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return OE(e).put(function(e,t,n){const[r,i,o]=xE(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:rE(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function OE(e){return Oy(e,"documentOverlays")}class LE{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Jy(e.integerValue));else if("doubleValue"in e){const n=Jy(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),ry(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Tt(t,20),"string"==typeof n&&(n=Qy(n)),t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt($y(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?yw(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):iv()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),Nv.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function ME(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function FE(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=ME(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}LE.St=new LE;class UE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Lt(e),n=FE(t);this.Bt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Lt(e),n=FE(t);this.Bt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Bt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Bt(1),this.buffer[this.position++]=e}$t(e){this.Bt(1),this.buffer[this.position++]=~e}Bt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class jE{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class VE{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class zE{constructor(){this.Wt=new UE,this.Gt=new jE(this.Wt),this.zt=new VE(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class BE{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new BE(this.indexId,this.documentKey,this.arrayValue,n)}}function qE(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=KE(e.arrayValue,t.arrayValue),0!==n?n:(n=KE(e.directionalValue,t.directionalValue),0!==n?n:Nv.comparator(e.documentKey,t.documentKey)))}function KE(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class GE{constructor(e){this.Jt=new zy(((e,t)=>xv.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(ov(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=Pv(e);if(void 0!==t&&!this.tn(t))return!1;const n=Rv(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Yt.length||!this.rn(this.Yt[o++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new zy(xv.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Dv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Dv(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Dv(n.field,"asc"===n.dir?0:1)));return new Av(Av.UNKNOWN_ID,this.collectionId,t,Ov.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function HE(e){var t,n;if(ov(e instanceof Rw||e instanceof Dw),e instanceof Rw){if(e instanceof Ww){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Rw.create(e.field,"==",t))))||[];return Dw.create(r,"or")}return e}const r=e.filters.map((e=>HE(e)));return Dw.create(r,e.op)}function WE(e){if(0===e.getFilters().length)return[];const t=YE(HE(e));return ov($E(t)),QE(t)||JE(t)?[t]:t.getFilters()}function QE(e){return e instanceof Rw}function JE(e){return e instanceof Dw&&Mw(e)}function $E(e){return QE(e)||JE(e)||function(e){if(e instanceof Dw&&Lw(e)){for(const t of e.getFilters())if(!QE(t)&&!JE(t))return!1;return!0}return!1}(e)}function YE(e){if(ov(e instanceof Rw||e instanceof Dw),e instanceof Rw)return e;if(1===e.filters.length)return YE(e.filters[0]);const t=e.filters.map((e=>YE(e)));let n=Dw.create(t,e.op);return n=eI(n),$E(n)?n:(ov(n instanceof Dw),ov(Ow(n)),ov(n.filters.length>1),n.filters.reduce(((e,t)=>XE(e,t))))}function XE(e,t){let n;return ov(e instanceof Rw||e instanceof Dw),ov(t instanceof Rw||t instanceof Dw),n=e instanceof Rw?t instanceof Rw?function(e,t){return Dw.create([e,t],"and")}(e,t):ZE(e,t):t instanceof Rw?ZE(t,e):function(e,t){if(ov(e.filters.length>0&&t.filters.length>0),Ow(e)&&Ow(t))return Vw(e,t.getFilters());const n=Lw(e)?e:t,r=Lw(e)?t:e,i=n.filters.map((e=>XE(e,r)));return Dw.create(i,"or")}(e,t),eI(n)}function ZE(e,t){if(Ow(t))return Vw(t,e.getFilters());{const n=t.filters.map((t=>XE(e,t)));return Dw.create(n,"or")}}function eI(e){if(ov(e instanceof Rw||e instanceof Dw),e instanceof Rw)return e;const t=e.getFilters();if(1===t.length)return eI(t[0]);if(Fw(e))return e;const n=t.map((e=>eI(e))),r=[];return n.forEach((t=>{t instanceof Rw?r.push(t):t instanceof Dw&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Dw.create(r,e.op)}class tI{constructor(){this.on=new nI}addToCollectionParentIndex(e,t){return this.on.add(t),Bv.resolve()}getCollectionParents(e,t){return Bv.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Bv.resolve()}deleteFieldIndex(e,t){return Bv.resolve()}deleteAllFieldIndexes(e){return Bv.resolve()}createTargetIndexes(e,t){return Bv.resolve()}getDocumentsMatchingTarget(e,t){return Bv.resolve(null)}getIndexType(e,t){return Bv.resolve(0)}getFieldIndexes(e,t){return Bv.resolve([])}getNextCollectionGroupToUpdate(e){return Bv.resolve(null)}getMinOffset(e,t){return Bv.resolve(Fv.min())}getMinOffsetFromCollectionGroup(e,t){return Bv.resolve(Fv.min())}updateCollectionGroup(e,t,n){return Bv.resolve()}updateIndexEntries(e,t){return Bv.resolve()}}class nI{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zy(kv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new zy(kv.comparator)).toArray()}}const rI=new Uint8Array(0);class iI{constructor(e,t){this.databaseId=t,this._n=new nI,this.an=new _b((e=>Xw(e)),((e,t)=>Zw(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:oy(r)};return oI(e).put(i)}return Bv.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Ev(t),""],!1,!0);return oI(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(cy(r.parent))}return n}))}addFieldIndex(e,t){const n=aI(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=cI(e);return i.next((e=>{n.put(NE(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=aI(e),r=cI(e),i=sI(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=aI(e),n=sI(e),r=cI(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return Bv.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new GE(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=sI(e);let r=!0;const i=new Map;return Bv.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Rb();const r=[];return Bv.forEach(i,((i,o)=>{ev("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Xw(t)));const s=function(e,t){const n=Pv(t);if(void 0===n)return null;for(const r of tb(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of Rv(t))for(const t of tb(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of Rv(t)){const t=0===i.kind?nb(e,i.fieldPath,e.startAt):rb(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new kw(n,r)}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of Rv(t)){const t=0===i.kind?rb(e,i.fieldPath,e.endAt):nb(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new kw(n,r)}(o,i),u=this.ln(i,o,c),h=this.ln(i,o,l),d=this.hn(i,o,a),f=this.Pn(i.indexId,s,u,c.inclusive,h,l.inclusive,d);return Bv.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=Nv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Bv.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:WE(Dw.create(e.filters,"and")).map((t=>Yw(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/c]):rI,h=this.Tn(e,a,n[u%c],r),d=this.En(e,a,i[u%c],o),f=s.map((t=>this.Tn(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}Tn(e,t,n,r){const i=new BE(e,Nv.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new BE(e,Nv.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new GE(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return Bv.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new zy(xv.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new zE;for(const r of Rv(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);LE.St.ht(e,i)}return n.Ut()}In(e){const t=new zE;return LE.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new zE;return LE.St.ht(hw(this.databaseId,t),n.jt(function(e){const t=Rv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new zE);let i=0;for(const o of Rv(e)){const e=n[i++];for(const n of r)if(this.Rn(t,o.fieldPath)&&fw(e))r=this.Vn(r,o,e);else{const t=n.jt(o.kind);LE.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new zE;n.seed(e.Ut()),LE.St.ht(o,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof Rw&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=aI(e),r=cI(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return Bv.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Ov(t.sequenceNumber,new Fv(EE(t.readTime),new Nv(cy(t.documentKey)),t.largestBatchId)):Ov.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Dv(xv.fromServerFormat(t),n)}));return new Av(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:bv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=aI(e),i=cI(e);return this.fn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Bv.forEach(t,(t=>i.put(NE(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Bv.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Bv.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Bv.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?Bv.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return sI(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return sI(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=sI(e);let i=new zy(qE);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new BE(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new zy(qE);const r=this.dn(t,e);if(null==r)return n;const i=Pv(t);if(null!=i){const o=e.data.field(i.fieldPath);if(fw(o))for(const i of o.arrayValue.values||[])n=n.add(new BE(t.indexId,e.key,this.In(i),r))}else n=n.add(new BE(t.indexId,e.key,rI,r));return n}yn(e,t,n,r,i){ev("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=qy(o),c=qy(s);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=qy(s)):t?(i(a),a=qy(o)):(a=qy(o),c=qy(s))}}(r,i,qE,(r=>{o.push(this.wn(e,t,n,r))}),(r=>{o.push(this.Sn(e,t,n,r))})),Bv.waitFor(o)}fn(e){let t=1;return cI(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>qE(e,t))).filter(((e,t,n)=>!t||0!==qE(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=qE(o,e),i=qE(o,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(o),r.push(o.Ht());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,rI,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,rI,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return qE(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lI)}getMinOffset(e,t){return Bv.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||iv())))).next(lI)}}function oI(e){return Oy(e,"collectionParents")}function sI(e){return Oy(e,"indexEntries")}function aI(e){return Oy(e,"indexConfiguration")}function cI(e){return Oy(e,"indexState")}function lI(e){ov(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Uv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Fv(t.readTime,t.documentKey,n)}const uI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hI{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new hI(e,hI.DEFAULT_COLLECTION_PERCENTILE,hI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dI(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:s},((e,t,n)=>(a++,n.delete())));o.push(c.next((()=>{ov(1===a)})));const l=[];for(const u of n.mutations){const e=hy(t,u.key.path,n.batchId);o.push(i.delete(e)),l.push(u.key)}return Bv.waitFor(o).next((()=>l))}function fI(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw iv();t=e.noDocument}return JSON.stringify(t).length}hI.DEFAULT_COLLECTION_PERCENTILE=10,hI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hI.DEFAULT=new hI(41943040,hI.DEFAULT_COLLECTION_PERCENTILE,hI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hI.DISABLED=new hI(-1,0,0);class pI{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){ov(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new pI(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gI(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=vI(e),o=gI(e);return o.add({}).next((s=>{ov("number"==typeof s);const a=new f_(s,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>rE(e.ut,t))),i=n.mutations.map((t=>rE(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new zy(((e,t)=>bv(e.canonicalString(),t.canonicalString())));for(const e of r){const t=hy(this.userId,e.key.path,s);u=u.add(e.key.path.popLast()),l.push(o.put(c)),l.push(i.put(t,dy))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[s]=a.keys()})),Bv.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return gI(e).get(t).next((e=>e?(ov(e.userId===this.userId),IE(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?Bv.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return gI(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(ov(t.batchId>=n),i=IE(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return gI(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gI(e).U("userMutationsIndex",t).next((e=>e.map((e=>IE(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=uy(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return vI(e).J({range:r},((n,r,o)=>{const[s,a,c]=n,l=cy(a);if(s===this.userId&&t.path.isEqual(l))return gI(e).get(c).next((e=>{if(!e)throw iv();ov(e.userId===this.userId),i.push(IE(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new zy(bv);const r=[];return t.forEach((t=>{const i=uy(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=vI(e).J({range:o},((e,r,i)=>{const[o,s,a]=e,c=cy(s);o===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(s)})),Bv.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=uy(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new zy(bv);return vI(e).J({range:o},((e,t,i)=>{const[o,a,c]=e,l=cy(a);o===this.userId&&n.isPrefixOf(l)?l.length===r&&(s=s.add(c)):i.done()})).next((()=>this.vn(e,s)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(gI(e).get(t).next((e=>{if(null===e)throw iv();ov(e.userId===this.userId),n.push(IE(this.serializer,e))})))})),Bv.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return dI(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),Bv.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Bv.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return vI(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=cy(e[1]);r.push(t)}else n.done()})).next((()=>{ov(0===r.length)}))}))}containsKey(e,t){return mI(e,this.userId,t)}Mn(e){return yI(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function mI(e,t,n){const r=uy(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return vI(e).J({range:o,H:!0},((e,n,r)=>{const[o,a,c]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function gI(e){return Oy(e,"mutations")}function vI(e){return Oy(e,"documentMutations")}function yI(e){return Oy(e,"mutationQueues")}class wI{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new wI(0)}static Nn(){return new wI(-1)}}class bI{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new wI(t.highestTargetId);return t.highestTargetId=n.next(),this.Bn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>Sv.fromTimestamp(new Iv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Bn(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Bn(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>_I(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(ov(t.targetCount>0),t.targetCount-=1,this.Bn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return _I(e).J(((o,s)=>{const a=SE(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Bv.waitFor(i))).next((()=>r))}forEachTarget(e,t){return _I(e).J(((e,n)=>{const r=SE(n);t(r)}))}Ln(e){return EI(e).get("targetGlobalKey").next((e=>(ov(null!==e),e)))}Bn(e,t){return EI(e).put("targetGlobalKey",t)}kn(e,t){return _I(e).put(TE(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Xw(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return _I(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=SE(n);Zw(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=II(e);return t.forEach((t=>{const o=oy(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),Bv.waitFor(r)}removeMatchingKeys(e,t,n){const r=II(e);return Bv.forEach(t,(t=>{const i=oy(t.path);return Bv.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=II(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=II(e);let i=Rb();return r.J({range:n,H:!0},((e,t,n)=>{const r=cy(e[1]),o=new Nv(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=oy(t.path),r=IDBKeyRange.bound([n],[Ev(n)],!1,!0);let i=0;return II(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return _I(e).get(t).next((e=>e?SE(e):null))}}function _I(e){return Oy(e,"targets")}function EI(e){return Oy(e,"targetGlobal")}function II(e){return Oy(e,"targetDocuments")}function SI(e,t){let[n,r]=e,[i,o]=t;const s=bv(n,i);return 0===s?bv(r,o):s}class TI{constructor(e){this.Qn=e,this.buffer=new zy(SI),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();SI(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kI{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){ev("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Qv(e)?ev("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await zv(e)}await this.Gn(3e5)}))}}class CI{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Bv.resolve(ty.oe);const n=new TI(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ev("LruGarbageCollector","Garbage collection skipped; disabled"),Bv.resolve(uI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ev("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),uI):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,o,s,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(ev("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Zg()<=Lo.DEBUG&&ev("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),Bv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function xI(e,t){return new CI(e,t)}class NI{constructor(e,t){this.db=e,this.garbageCollector=xI(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return AI(e,n)}removeReference(e,t,n){return AI(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return AI(e,t)}Xn(e,t){return function(e,t){let n=!1;return yI(e).Y((r=>mI(e,r,t).next((e=>(e&&(n=!0),Bv.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((o,s)=>{if(s<=t){const t=this.Xn(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Sv.min()),II(e).delete(function(e){return[0,oy(e.path)]}(o)))))}));r.push(t)}})).next((()=>Bv.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return AI(e,t)}Zn(e,t){const n=II(e);let r,i=ty.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:c}=n;0===o?(i!==ty.oe&&t(new Nv(cy(r)),i),i=c,r=a):i=ty.oe})).next((()=>{i!==ty.oe&&t(new Nv(cy(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function AI(e,t){return II(e).put(function(e,t){return{targetId:0,path:oy(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class PI{constructor(){this.changes=new _b((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tw.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Bv.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RI{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return MI(e).put(n)}removeEntry(e,t,n){return MI(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],bE(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=Tw.newInvalidDocument(t);return MI(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(FI(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:Tw.newInvalidDocument(t)};return MI(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(FI(t))},((e,r)=>{n={document:this.tr(t,r),size:fI(r)}})).next((()=>n))}getEntries(e,t){let n=Ib();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=Ib(),r=new Uy(Nv.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,fI(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return Bv.resolve();let r=new zy(jI);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(FI(r.first()),FI(r.last())),o=r.getIterator();let s=o.getNext();return MI(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Nv.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&jI(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.$(FI(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),bE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return MI(e).U(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Ib();for(const i of e){const e=this.tr(Nv.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(vb(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Ib();const o=UI(t,n),s=UI(t,Fv.max());return MI(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.tr(Nv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new OI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return LI(e).get("remoteDocumentGlobalKey").next((e=>(ov(!!e),e)))}er(e,t){return LI(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=nE(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Nv.fromSegments(t.noDocument.path),r=EE(t.noDocument.readTime);n=Tw.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return iv();{const e=Nv.fromSegments(t.unknownDocument.path),r=EE(t.unknownDocument.version);n=Tw.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Iv(e[0],e[1]);return Sv.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Sv.min()))return e}return Tw.newInvalidDocument(e)}}function DI(e){return new RI(e)}class OI extends PI{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new _b((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new zy(((e,t)=>bv(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=wE(this._r.serializer,o);r=r.add(i.path.popLast());const c=fI(a);n+=c-s.size,t.push(this._r.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=wE(this._r.serializer,o.convertToNoDocument(Sv.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),Bv.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function LI(e){return Oy(e,"remoteDocumentGlobal")}function MI(e){return Oy(e,"remoteDocumentsV14")}function FI(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function UI(e,t){const n=t.documentKey.path.toArray();return[e,bE(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jI(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=bv(n[o],r[o]),i)return i;return i=bv(n.length,r.length),i||(i=bv(n[n.length-2],r[r.length-2]),i||bv(n[n.length-1],r[r.length-1]))}class VI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zI{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&r_(n.mutation,e,Ky.empty(),Iv.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Rb()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rb();const r=Cb();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Tb();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Cb();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Rb())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Ib();const o=Nb(),s=Nb();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof a_)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),r_(s.mutation,t,s.mutation.getFieldMask(),Iv.now())):o.set(t.key,Ky.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new VI(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Nb();let r=new Uy(((e,t)=>e-t)),i=Rb();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Ky.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Rb()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,c=r.value,l=xb();c.forEach((e=>{if(!i.has(e)){const r=t_(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Bv.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Nv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Bv.resolve(Cb());let s=-1,a=i;return o.next((t=>Bv.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Bv.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Rb()))).next((e=>({batchId:s,changes:kb(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Nv(t)).next((e=>{let t=Tb();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Tb();return this.indexManager.getCollectionParents(e,i).next((s=>Bv.forEach(s,(s=>{const a=function(e,t){return new ib(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Tw.newInvalidDocument(r)))}));let n=Tb();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&r_(o.mutation,r,Ky.empty(),Iv.now()),vb(t,r)&&(n=n.insert(e,r))})),n}))}}class BI{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Bv.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:G_(e.createTime)}}(t)),Bv.resolve()}getNamedQuery(e,t){return Bv.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:kE(e.bundledQuery),readTime:G_(e.readTime)}}(t)),Bv.resolve()}}class qI{constructor(){this.overlays=new Uy(Nv.comparator),this.lr=new Map}getOverlay(e,t){return Bv.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Cb();return Bv.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),Bv.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Bv.resolve()}getOverlaysForCollection(e,t,n){const r=Cb(),i=t.length+1,o=new Nv(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Bv.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Uy(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Cb(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Cb(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Bv.resolve(s)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new m_(t,n));let i=this.lr.get(t);void 0===i&&(i=Rb(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class KI{constructor(){this.hr=new zy(GI.Pr),this.Ir=new zy(GI.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new GI(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new GI(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new Nv(new kv([])),n=new GI(t,e),r=new GI(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Nv(new kv([])),n=new GI(t,e),r=new GI(t,e+1);let i=Rb();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new GI(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class GI{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Nv.comparator(e.key,t.key)||bv(e.gr,t.gr)}static Tr(e,t){return bv(e.gr,t.gr)||Nv.comparator(e.key,t.key)}}class HI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new zy(GI.Pr)}checkEmpty(e){return Bv.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new f_(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.yr=this.yr.add(new GI(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Bv.resolve(o)}lookupMutationBatch(e,t){return Bv.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return Bv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Bv.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Bv.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new GI(t,0),r=new GI(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),Bv.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new zy(bv);return t.forEach((e=>{const t=new GI(e,0),r=new GI(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),Bv.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Nv.isDocumentKey(i)||(i=i.child(""));const o=new GI(new Nv(i),0);let s=new zy(bv);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.gr)),!0)}),o),Bv.resolve(this.br(s))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ov(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Bv.forEach(t.mutations,(r=>{const i=new GI(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new GI(t,0),r=this.yr.firstAfterOrEqual(n);return Bv.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Bv.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class WI{constructor(e){this.Cr=e,this.docs=new Uy(Nv.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Bv.resolve(n?n.document.mutableCopy():Tw.newInvalidDocument(t))}getEntries(e,t){let n=Ib();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Tw.newInvalidDocument(e))})),Bv.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ib();const o=t.path,s=new Nv(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Uv(Mv(s),n)<=0||(r.has(s.key)||vb(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Bv.resolve(i)}getAllFromCollectionGroup(e,t,n,r){iv()}vr(e,t){return Bv.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new QI(this)}getSize(e){return Bv.resolve(this.size)}}class QI extends PI{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),Bv.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class JI{constructor(e){this.persistence=e,this.Fr=new _b((e=>Xw(e)),Zw),this.lastRemoteSnapshotVersion=Sv.min(),this.highestTargetId=0,this.Mr=0,this.Or=new KI,this.targetCount=0,this.Nr=wI.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Bv.resolve()}getLastRemoteSnapshotVersion(e){return Bv.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bv.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Bv.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Bv.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new wI(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Bv.resolve()}updateTargetData(e,t){return this.kn(t),Bv.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Bv.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Fr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Bv.waitFor(i).next((()=>r))}getTargetCount(e){return Bv.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Bv.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Bv.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Bv.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Bv.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Bv.resolve(n)}containsKey(e,t){return Bv.resolve(this.Or.containsKey(t))}}class $I{constructor(e,t){this.Lr={},this.overlays={},this.Br=new ty(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new JI(this),this.indexManager=new tI,this.remoteDocumentCache=function(e){return new WI(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new yE(t),this.Kr=new BI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new HI(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){ev("MemoryPersistence","Starting transaction:",e);const r=new YI(this.Br.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return Bv.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class YI extends Vv{constructor(e){super(),this.currentSequenceNumber=e}}class XI{constructor(e){this.persistence=e,this.Gr=new KI,this.zr=null}static jr(e){return new XI(e)}get Hr(){if(this.zr)return this.zr;throw iv()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Bv.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Bv.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Bv.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bv.forEach(this.Hr,(n=>{const r=Nv.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,Sv.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Bv.or([()=>Bv.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class ZI{constructor(e){this.serializer=e}O(e,t,n,r){const i=new qv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ly,{unique:!0}),e.createObjectStore("documentMutations")}(e),eS(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=Bv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),eS(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Sv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ly,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Bv.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Zr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(o=o.next((()=>this.ei(i)))),n<8&&r>=8&&(o=o.next((()=>this.ti(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ni(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Sy});t.createIndex("collectionPathOverlayIndex",Ty,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ky,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:fy});t.createIndex("documentKeyIndex",py),t.createIndex("collectionGroupIndex",my)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.ii(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:by}).createIndex("sequenceNumberIndex",_y,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ey}).createIndex("documentKeyIndex",Iy,{unique:!1})}(e)))),n<16&&r>=16&&(o=o.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),o}Xr(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=fI(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>Bv.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>Bv.forEach(n,(n=>{ov(n.userId===t.userId);const r=IE(this.serializer,n);return dI(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const o=new kv(n),s=function(e){return[0,oy(e)]}(o);r.push(t.get(s).next((n=>n?Bv.resolve():(n=>t.put({targetId:0,path:oy(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>Bv.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:wy});const n=t.store("collectionParents"),r=new nI,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:oy(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new kv(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,o]=e;const s=cy(r);return i(s.popLast())}))))}ni(e){const t=e.store("targets");return t.J(((e,n)=>{const r=SE(n),i=TE(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new Nv(kv.fromString(e.document.name).popFirst(5)):e.noDocument?Nv.fromSegments(e.noDocument.path):e.unknownDocument?Nv.fromSegments(e.unknownDocument.path):iv()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>Bv.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=DI(this.serializer),i=new $I(XI.jr,this.serializer.ut);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Rb();IE(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Bv.forEach(n,((e,n)=>{const o=new $g(n),s=DE.ct(this.serializer,o),a=i.getIndexManager(o),c=pI.ct(o,this.serializer,a,i.referenceDelegate);return new zI(r,c,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Dy(t,ty.oe),e).next()}))}))}}function eS(e){e.createObjectStore("targetDocuments",{keyPath:vy}).createIndex("documentTargetsIndex",yy,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gy,{unique:!0}),e.createObjectStore("targetGlobal")}const tS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class nS{constructor(e,t,n,r,i,o,s,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=o,this.document=s,this.oi=c,this._i=l,this.ai=u,this.Br=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!nS.D())throw new cv(av.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NI(this,r),this.Ii=t+"main",this.serializer=new yE(a),this.Ti=new Kv(this.Ii,this.ai,new ZI(this.serializer)),this.qr=new bI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DI(this.serializer),this.Kr=new AE,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===l&&tv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new cv(av.FAILED_PRECONDITION,tS);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Br=new ty(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>iS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(Qv(e))return ev("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ev("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return rS(e).get("owner").next((e=>Bv.resolve(this.wi(e))))}Si(e){return iS(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Oy(e,"clientMetadata");return t.U().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Bv.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?Bv.resolve(!0):rS(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new cv(av.FAILED_PRECONDITION,tS);return!1}}return!(!this.networkEnabled||!this.inForeground)||iS(e).U().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&ev("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Dy(e,ty.oe);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>iS(e).U().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return pI.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iI(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return DE.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){ev("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?Ry:15===e?Py:14===e?Ay:13===e?Ny:12===e?xy:11===e?Cy:void iv()}(this.ai);let o;return this.Ti.runTransaction(e,r,i,(r=>(o=new Dy(r,this.Br?this.Br.next():ty.oe),"readwrite-primary"===t?this.fi(o).next((e=>!!e||this.gi(o))).next((t=>{if(!t)throw tv("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new cv(av.FAILED_PRECONDITION,jv);return n(o)})).next((e=>this.yi(o).next((()=>e)))):this.Bi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Bi(e){return rS(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new cv(av.FAILED_PRECONDITION,tS)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rS(e).put("owner",t)}static D(){return Kv.D()}pi(e){const t=rS(e);return t.get("owner").next((e=>this.wi(e)?(ev("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Bv.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(tv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;mo()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return ev("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return tv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(Sj){tv("Failed to set zombie client id.",Sj)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(Sj){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function rS(e){return Oy(e,"owner")}function iS(e){return Oy(e,"clientMetadata")}function oS(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class sS{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=Rb(),r=Rb();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new sS(e,t.fromCache,n,r)}}class aS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class cS{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=mo()?8:Gv(co())>0?6:4}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new aS;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Zg()<=Lo.DEBUG&&ev("QueryEngine","SDK will not create cache indexes for query:",gb(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Bv.resolve()):(Zg()<=Lo.DEBUG&&ev("QueryEngine","Query:",gb(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Zg()<=Lo.DEBUG&&ev("QueryEngine","The SDK decides to create cache indexes for query:",gb(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ub(t))):Bv.resolve())}zi(e,t){if(ab(t))return Bv.resolve(null);let n=ub(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=fb(t,null,"F"),n=ub(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Rb(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Yi(t,r);return this.Zi(t,o,i,n.readTime)?this.zi(e,fb(t,null,"F")):this.Xi(e,o,t,n)}))))})))))}ji(e,t,n,r){return ab(t)||r.isEqual(Sv.min())?Bv.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const o=this.Yi(t,i);return this.Zi(t,o,n,r)?Bv.resolve(null):(Zg()<=Lo.DEBUG&&ev("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gb(t)),this.Xi(e,o,t,Lv(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new zy(wb(e));return t.forEach(((t,r)=>{vb(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Zg()<=Lo.DEBUG&&ev("QueryEngine","Using full collection scan to execute query:",gb(t)),this.Gi.getDocumentsMatchingQuery(e,t,Fv.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class lS{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Uy(bv),this.ns=new _b((e=>Xw(e)),Zw),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zI(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function uS(e,t,n,r){return new lS(e,t,n,r)}async function hS(e,t){const n=sv(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Rb();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function dS(e){const t=sv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function fS(e,t,n){let r=Rb(),i=Rb();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ib();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Sv.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):ev("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{us:r,cs:i}}))}function pS(e,t){const n=sv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function mS(e,t){const n=sv(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,Bv.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new vE(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function gS(e,t,n){const r=sv(e),i=r.ts.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Qv(e))throw e;ev("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function vS(e,t,n){const r=sv(e);let i=Sv.min(),o=Rb();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=sv(e),i=r.ns.get(n);return void 0!==i?Bv.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,ub(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:Sv.min(),n?o:Rb()))).next((e=>(bS(r,yb(t),e),{documents:e,ls:o})))))}function yS(e,t){const n=sv(e),r=sv(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function wS(e,t){const n=sv(e),r=n.rs.get(t)||Sv.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,Lv(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(bS(n,t,e),e)))}function bS(e,t,n){let r=e.rs.get(t)||Sv.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function _S(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rb();const r=await mS(e,ub(kE(t.bundledQuery))),i=sv(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=G_(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(e,t);const s=r.withResumeToken(Hy.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(s.targetId,s),i.qr.updateTargetData(e,s).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function ES(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function IS(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function SS(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class TS{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new cv(r.error.code,r.error.message))),o?new TS(e,t,r.state,i):(tv("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kS{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new cv(n.error.code,n.error.message))),i?new kS(e,n.state,r):(tv("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ob();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=iy(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new CS(e,i):(tv("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class xS{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new xS(t.clientId,t.onlineState):(tv("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class NS{constructor(){this.activeTargetIds=Ob()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AS{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Uy(bv),this.started=!1,this.ps=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=ES(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new NS),this.Ss=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(ES(this.persistenceKey,n));if(e){const t=CS.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(SS(this.persistenceKey,e));if(n){const r=kS.Ts(e,n);r&&(t=r.state)}}return this.Bs.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Bs.As(e),this.Fs()}isLocalQueryTarget(e){return this.Bs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(SS(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ev("SharedClientState","READ",e,t),t}setItem(e,t){ev("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ev("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(ev("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void tv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=ty.oe;if(null!=e)try{const n=JSON.parse(e);ov("number"==typeof n),t=n}catch(e){tv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==ty.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Bs(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Bs.Es())}Ns(e,t,n){const r=new TS(this.currentUser,e,t,n),i=IS(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Ls(e){const t=IS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=SS(this.persistenceKey,e),i=new kS(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return CS.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return TS.Ts(new $g(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return kS.Ts(r,t)}Ms(e){return xS.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);ev("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.Xs(o,s).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=Ob();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class PS{constructor(){this.eo=new NS,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new NS,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RS{ro(e){}shutdown(){}}class DS{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ev("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ev("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let OS=null;function LS(){return null===OS?OS=268435456+Math.round(2147483648*Math.random()):OS++,"0x"+OS.toString(16)}const MS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FS{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}}const US="WebChannelConnection";class jS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.yo=t+"://"+e.host,this.wo="projects/".concat(n,"/databases/").concat(r),this.So="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get bo(){return!1}Do(e,t,n,r,i){const o=LS(),s=this.Co(e,t.toUriEncodedString());ev("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(a,r,i),this.Fo(e,s,a,n).then((t=>(ev("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw nv("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}Mo(e,t,n,r,i,o){return this.Do(e,t,n,r,i)}vo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Co(e,t){const n=MS[e];return"".concat(this.yo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,t,n,r){const i=LS();return new Promise(((o,s)=>{const a=new Hg;a.setWithCredentials(!0),a.listenOnce(zg.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Vg.NO_ERROR:const t=a.getResponseJson();ev(US,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Vg.TIMEOUT:ev(US,"RPC '".concat(e,"' ").concat(i," timed out")),s(new cv(av.DEADLINE_EXCEEDED,"Request time out"));break;case Vg.HTTP_ERROR:const n=a.getStatus();if(ev(US,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(av).indexOf(t)>=0?t:av.UNKNOWN}(t.status);s(new cv(e,t.message))}else s(new cv(av.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new cv(av.UNAVAILABLE,"Connection failed."));break;default:iv()}}finally{ev(US,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);ev(US,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}xo(e,t,n){const r=LS(),i=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ug(),s=jg(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Kg({})),this.vo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");ev(US,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=o.createWebChannel(l,a);let h=!1,d=!1;const f=new FS({co:t=>{d?ev(US,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(ev(US,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),ev(US,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Gg.EventType.OPEN,(()=>{d||(ev(US,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.Vo())})),p(u,Gg.EventType.CLOSE,(()=>{d||(d=!0,ev(US,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.fo())})),p(u,Gg.EventType.ERROR,(t=>{d||(d=!0,nv(US,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.fo(new cv(av.UNAVAILABLE,"The operation could not be completed")))})),p(u,Gg.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];ov(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){ev(US,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=v_[e];if(void 0!==t)return b_(t)}(t),i=s.message;void 0===n&&(n=av.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.fo(new cv(n,i)),u.close()}else ev(US,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.po(i)}})),p(s,Bg.STAT_EVENT,(t=>{t.stat===qg.PROXY?ev(US,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===qg.NOPROXY&&ev(US,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.mo()}),0),f}}function VS(){return"undefined"!=typeof window?window:null}function zS(){return"undefined"!=typeof document?document:null}function BS(e){return new V_(e,!0)}class qS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Oo=n,this.No=r,this.Lo=i,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();const t=Math.floor(this.Bo+this.$o()),n=Math.max(0,Date.now()-this.qo),r=Math.max(0,t-n);r>0&&ev("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.ko=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.qo=Date.now(),e()))),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){null!==this.ko&&(this.ko.skipDelay(),this.ko=null)}cancel(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}class KS{constructor(e,t,n,r,i,o,s,a){this.si=e,this.Wo=n,this.Go=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new qS(e,t)}Yo(){return 1===this.state||5===this.state||this.Zo()}Zo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&null===this.jo&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,(()=>this.n_())))}r_(e){this.i_(),this.stream.send(e)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(e,t){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,4!==e?this.Jo.reset():t&&t.code===av.RESOURCE_EXHAUSTED?(tv(t.toString()),tv("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):t&&t.code===av.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(t)}o_(){}auth(){this.state=1;const e=this.__(this.zo),t=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.zo===t&&this.a_(n,r)}),(t=>{e((()=>{const e=new cv(av.UNKNOWN,"Fetching auth token failed: "+t.message);return this.u_(e)}))}))}a_(e,t){const n=this.__(this.zo);this.stream=this.c_(e,t),this.stream.ho((()=>{n((()=>this.listener.ho()))})),this.stream.Io((()=>{n((()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,(()=>(this.Zo()&&(this.state=3),Promise.resolve()))),this.listener.Io())))})),this.stream.Eo((e=>{n((()=>this.u_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Xo(){this.state=5,this.Jo.Ko((async()=>{this.state=0,this.start()}))}u_(e){return ev("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}__(e){return t=>{this.si.enqueueAndForget((()=>this.zo===e?t():(ev("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GS extends KS{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}c_(e,t){return this.connection.xo("Listen",e,t)}onMessage(e){this.Jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:iv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(ov(void 0===t||"string"==typeof t),Hy.fromBase64String(t||"")):(ov(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Hy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?av.UNKNOWN:b_(e.code);return new cv(t,e.message||"")}(s);n=new R_(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=$_(e,r.document.name),o=G_(r.document.updateTime),s=r.document.createTime?G_(r.document.createTime):Sv.min(),a=new Iw({mapValue:{fields:r.document.fields}}),c=Tw.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new A_(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=$_(e,r.document),o=r.readTime?G_(r.readTime):Sv.min(),s=Tw.newNoDocument(i,o),a=r.removedTargetIds||[];n=new A_([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=$_(e,r.document),o=r.removedTargetIds||[];n=new A_([],o,i,null)}else{if(!("filter"in t))return iv();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new g_(r,i),s=e.targetId;n=new P_(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Sv.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Sv.min():t.readTime?G_(t.readTime):Sv.min()}(e);return this.listener.l_(t,n)}h_(e){const t={};t.database=Z_(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=eb(r)?{documents:oE(e,r)}:{query:sE(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=q_(e,t.resumeToken);const r=z_(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Sv.min())>0){n.readTime=B_(e,t.snapshotVersion.toTimestamp());const r=z_(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return iv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.r_(t)}P_(e){const t={};t.database=Z_(this.serializer),t.removeTarget=e,this.r_(t)}}class HS extends KS{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,t){return this.connection.xo("Write",e,t)}onMessage(e){if(ov(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();const t=function(e,t){return e&&e.length>0?(ov(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?G_(e.updateTime):G_(t);return n.isEqual(Sv.min())&&(n=G_(t)),new Yb(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=G_(e.commitTime);return this.listener.d_(n,t)}return ov(!e.writeResults||0===e.writeResults.length),this.I_=!0,this.listener.A_()}R_(){const e={};e.database=Z_(this.serializer),this.r_(e)}E_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>rE(this.serializer,e)))};this.r_(t)}}class WS extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new cv(av.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,t,n,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.Do(e,W_(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===av.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new cv(av.UNKNOWN,e.toString())}))}Mo(e,t,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.Mo(e,W_(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===av.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new cv(av.UNKNOWN,e.toString())}))}terminate(){this.V_=!0,this.connection.terminate()}}class QS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(tv(t),this.y_=!1):ev("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class JS{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.ro((e=>{n.enqueueAndForget((async()=>{iT(this)&&(ev("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=sv(e);t.M_.add(4),await YS(t),t.N_.set("Unknown"),t.M_.delete(4),await $S(t)}(this))}))})),this.N_=new QS(n,r)}}async function $S(e){if(iT(e))for(const t of e.x_)await t(!0)}async function YS(e){for(const t of e.x_)await t(!1)}function XS(e,t){const n=sv(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),rT(n)?nT(n):IT(n).Zo()&&eT(n,t))}function ZS(e,t){const n=sv(e),r=IT(n);n.F_.delete(t),r.Zo()&&tT(n,t),0===n.F_.size&&(r.Zo()?r.t_():iT(n)&&n.N_.set("Unknown"))}function eT(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Sv.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}IT(e).h_(t)}function tT(e,t){e.L_.xe(t),IT(e).P_(t)}function nT(e){e.L_=new O_({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),IT(e).start(),e.N_.w_()}function rT(e){return iT(e)&&!IT(e).Yo()&&e.F_.size>0}function iT(e){return 0===sv(e).M_.size}function oT(e){e.L_=void 0}async function sT(e){e.N_.set("Online")}async function aT(e){e.F_.forEach(((t,n)=>{eT(e,t)}))}async function cT(e,t){oT(e),rT(e)?(e.N_.D_(t),nT(e)):e.N_.set("Unknown")}async function lT(e,t,n){if(e.N_.set("Online"),t instanceof R_&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){ev("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await uT(e,n)}else if(t instanceof A_?e.L_.Ke(t):t instanceof P_?e.L_.He(t):e.L_.We(t),!n.isEqual(Sv.min()))try{const t=await dS(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Hy.EMPTY_BYTE_STRING,r.snapshotVersion)),tT(e,t);const i=new vE(r.target,t,n,r.sequenceNumber);eT(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ev("RemoteStore","Failed to raise snapshot:",t),await uT(e,t)}}async function uT(e,t,n){if(!Qv(t))throw t;e.M_.add(1),await YS(e),e.N_.set("Offline"),n||(n=()=>dS(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ev("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await $S(e)}))}function hT(e,t){return t().catch((n=>uT(e,n,t)))}async function dT(e){const t=sv(e),n=ST(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;fT(t);)try{const e=await pS(t.localStore,r);if(null===e){0===t.v_.length&&n.t_();break}r=e.batchId,pT(t,e)}catch(e){await uT(t,e)}mT(t)&&gT(t)}function fT(e){return iT(e)&&e.v_.length<10}function pT(e,t){e.v_.push(t);const n=ST(e);n.Zo()&&n.T_&&n.E_(t.mutations)}function mT(e){return iT(e)&&!ST(e).Yo()&&e.v_.length>0}function gT(e){ST(e).start()}async function vT(e){ST(e).R_()}async function yT(e){const t=ST(e);for(const n of e.v_)t.E_(n.mutations)}async function wT(e,t,n){const r=e.v_.shift(),i=p_.from(r,t,n);await hT(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await dT(e)}async function bT(e,t){t&&ST(e).T_&&await async function(e,t){if(function(e){return w_(e)&&e!==av.ABORTED}(t.code)){const n=e.v_.shift();ST(e).e_(),await hT(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await dT(e)}}(e,t),mT(e)&&gT(e)}async function _T(e,t){const n=sv(e);n.asyncQueue.verifyOperationInProgress(),ev("RemoteStore","RemoteStore received new credentials");const r=iT(n);n.M_.add(3),await YS(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await $S(n)}async function ET(e,t){const n=sv(e);t?(n.M_.delete(2),await $S(n)):t||(n.M_.add(2),await YS(n),n.N_.set("Unknown"))}function IT(e){return e.B_||(e.B_=function(e,t,n){const r=sv(e);return r.m_(),new GS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:sT.bind(null,e),Io:aT.bind(null,e),Eo:cT.bind(null,e),l_:lT.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.e_(),rT(e)?nT(e):e.N_.set("Unknown")):(await e.B_.stop(),oT(e))}))),e.B_}function ST(e){return e.k_||(e.k_=function(e,t,n){const r=sv(e);return r.m_(),new HS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:()=>Promise.resolve(),Io:vT.bind(null,e),Eo:bT.bind(null,e),A_:yT.bind(null,e),d_:wT.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.e_(),await dT(e)):(await e.k_.stop(),e.v_.length>0&&(ev("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class TT{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new lv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new TT(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cv(av.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kT(e,t){if(tv("AsyncQueue","".concat(t,": ").concat(e)),Qv(e))return new cv(av.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class CT{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Nv.comparator(t.key,n.key):(e,t)=>Nv.comparator(e.key,t.key),this.keyedMap=Tb(),this.sortedSet=new Uy(this.comparator)}static emptySet(e){return new CT(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof CT))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new CT;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class xT{constructor(){this.q_=new Uy(Nv.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):iv():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class NT{constructor(e,t,n,r,i,o,s,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new NT(e,t,CT.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class AT{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class PT{constructor(){this.queries=new _b((e=>mb(e)),pb),this.onlineState="Unknown",this.z_=new Set}}async function RT(e,t){const n=sv(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.W_()&&t.G_()&&(r=2):(o=new AT,r=t.G_()?0:1);try{switch(r){case 0:o.K_=await n.onListen(i,!0);break;case 1:o.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=kT(e,"Initialization of query '".concat(gb(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.U_.push(t),t.j_(n.onlineState),o.K_&&t.H_(o.K_)&&MT(n)}async function DT(e,t){const n=sv(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.U_.indexOf(t);e>=0&&(o.U_.splice(e,1),0===o.U_.length?i=t.G_()?0:1:!o.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OT(e,t){const n=sv(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&MT(n)}function LT(e,t,n){const r=sv(e),i=r.queries.get(t);if(i)for(const o of i.U_)o.onError(n);r.queries.delete(t)}function MT(e){e.z_.forEach((e=>{e.next()}))}var FT,UT;(UT=FT||(FT={})).J_="default",UT.Cache="cache";class jT{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new NT(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=NT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==FT.Cache}}class VT{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class zT{constructor(e){this.serializer=e}hs(e){return $_(this.serializer,e)}Ps(e){return e.metadata.exists?nE(this.serializer,e.document,!1):Tw.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return G_(e)}}class BT{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qT(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=kv.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new zT(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Rb()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=sv(e);let o=Rb(),s=Ib();for(const l of n){const e=t.hs(l.metadata.name);l.document&&(o=o.add(e));const n=t.Ps(l);n.setReadTime(t.Is(l.metadata.readTime)),s=s.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),c=await mS(i,function(e){return ub(sb(kv.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>fS(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.qr.addMatchingKeys(e,o,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new zT(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await _S(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function qT(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class KT{constructor(e){this.key=e}}class GT{constructor(e){this.key=e}}class HT{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Rb(),this.mutatedKeys=Rb(),this.Ia=wb(e),this.Ta=new CT(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new xT,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=vb(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||c&&this.Ia(u,c)<0)&&(s=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(s=!0)),f&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:o,Aa:n,Zi:s,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return iv()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const s=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,c=a!==this.ha;return this.ha=a,0!==o.length||c?{snapshot:new NT(this.query,e.Ta,i,o,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:s}:{fa:s}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new xT,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Rb(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new GT(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new KT(n))})),t}pa(e){this.la=e.ls,this.Pa=Rb();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return NT.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class WT{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class QT{constructor(e){this.key=e,this.wa=!1}}class JT{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new _b((e=>mb(e)),pb),this.Da=new Map,this.Ca=new Set,this.va=new Uy(Nv.comparator),this.Fa=new Map,this.Ma=new KI,this.xa={},this.Oa=new Map,this.Na=wI.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function $T(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Tk(e);let i;const o=r.ba.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=await XT(r,t,n,!0),i}async function YT(e,t){const n=Tk(e);await XT(n,t,!0,!1)}async function XT(e,t,n,r){const i=await mS(e.localStore,ub(t)),o=i.targetId,s=n?e.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=await ZT(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&XS(e.remoteStore,i),a}async function ZT(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Zi&&(i=await vS(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return hk(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const o=await vS(e.localStore,t,!0),s=new HT(t,o.ls),a=s.da(o.documents),c=N_.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=s.applyChanges(a,e.isPrimaryClient,c);hk(e,n,l.fa);const u=new WT(t,n,s);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function ek(e,t,n){const r=sv(e),i=r.ba.get(t),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter((e=>!pb(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gS(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ZS(r.remoteStore,i.targetId),lk(r,i.targetId)})).catch(zv)):(lk(r,i.targetId),await gS(r.localStore,i.targetId,!0))}async function tk(e,t){const n=sv(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ZS(n.remoteStore,r.targetId))}async function nk(e,t){const n=sv(e);try{const e=await function(e,t){const n=sv(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const s=[];t.targetChanges.forEach(((o,a)=>{const c=i.get(a);if(!c)return;s.push(n.qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,o.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Hy.EMPTY_BYTE_STRING,Sv.min()).withLastLimboFreeSnapshotVersion(Sv.min()):o.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(o.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,o)&&s.push(n.qr.updateTargetData(e,l))}));let a=Ib(),c=Rb();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(fS(e,o,t.documentUpdates).next((e=>{a=e.us,c=e.cs}))),!r.isEqual(Sv.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Bv.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(ov(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?ov(r.wa):e.removedDocuments.size>0&&(ov(r.wa),r.wa=!1))})),await pk(n,e,t)}catch(e){await zv(e)}}function rk(e,t,n){const r=sv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=sv(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&MT(n)}(r.eventManager,t),e.length&&r.Sa.l_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ik(e,t,n){const r=sv(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),o=i&&i.key;if(o){let e=new Uy(Nv.comparator);e=e.insert(o,Tw.newNoDocument(o,Sv.min()));const n=Rb().add(o),i=new x_(Sv.min(),new Map,new Uy(bv),e,n);await nk(r,i),r.va=r.va.remove(o),r.Fa.delete(t),fk(r)}else await gS(r.localStore,t,!1).then((()=>lk(r,t,n))).catch(zv)}async function ok(e,t){const n=sv(e),r=t.batch.batchId;try{const e=await function(e,t){const n=sv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Bv.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);ov(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Rb();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);ck(n,r,null),ak(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pk(n,e)}catch(e){await zv(e)}}async function sk(e,t,n){const r=sv(e);try{const e=await function(e,t){const n=sv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ov(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);ck(r,t,n),ak(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await pk(r,e)}catch(n){await zv(n)}}function ak(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function ck(e,t,n){const r=sv(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function lk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Rr(t).forEach((t=>{e.Ma.containsKey(t)||uk(e,t)}))}function uk(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(ZS(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),fk(e))}function hk(e,t,n){for(const r of n)r instanceof KT?(e.Ma.addReference(r.key,t),dk(e,r)):r instanceof GT?(ev("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||uk(e,r.key)):iv()}function dk(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(ev("SyncEngine","New document in limbo: "+n),e.Ca.add(r),fk(e))}function fk(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Nv(kv.fromString(t)),r=e.Na.next();e.Fa.set(r,new QT(n)),e.va=e.va.insert(n,r),XS(e.remoteStore,new vE(ub(sb(n.path)),r,"TargetPurposeLimboResolution",ty.oe))}}async function pk(e,t,n){const r=sv(e),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{s.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=sS.Qi(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.Sa.l_(i),await async function(e,t){const n=sv(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Bv.forEach(t,(t=>Bv.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Bv.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Qv(e))throw e;ev("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,o))}async function mk(e,t){const n=sv(e);if(!n.currentUser.isEqual(t)){ev("SyncEngine","User change. New user:",t.toKey());const e=await hS(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new cv(av.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await pk(n,e._s)}}function gk(e,t){const n=sv(e),r=n.Fa.get(t);if(r&&r.wa)return Rb().add(r.key);{let e=Rb();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function vk(e,t){const n=sv(e),r=await vS(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&hk(n,t.targetId,i.fa),i}async function yk(e,t){const n=sv(e);return wS(n.localStore,t).then((e=>pk(n,e)))}async function wk(e,t,n,r){const i=sv(e),o=await function(e,t){const n=sv(e),r=sv(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Bv.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await dT(i.remoteStore):"acknowledged"===n||"rejected"===n?(ck(i,t,r||null),ak(i,t),function(e,t){sv(sv(e).mutationQueue).Fn(t)}(i.localStore,t)):iv(),await pk(i,o)):ev("SyncEngine","Cannot apply mutation batch with id: "+t)}async function bk(e,t,n){const r=sv(e),i=[],o=[];for(const s of t){let e;const t=r.Da.get(s);if(t&&0!==t.length){e=await mS(r.localStore,ub(t[0]));for(const e of t){const t=r.ba.get(e),n=await vk(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await yS(r.localStore,s);e=await mS(r.localStore,t),await ZT(r,_k(t),s,!1,e.resumeToken)}i.push(e)}return r.Sa.l_(o),i}function _k(e){return ob(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ek(e){return function(e){return sv(sv(e).persistence).Li()}(sv(e).localStore)}async function Ik(e,t,n,r){const i=sv(e);if(i.La)return void ev("SyncEngine","Ignoring unexpected query state notification.");const o=i.Da.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await wS(i.localStore,yb(o[0])),r=x_.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Hy.EMPTY_BYTE_STRING);await pk(i,e,r);break}case"rejected":await gS(i.localStore,t,!0),lk(i,t,r);break;default:iv()}}async function Sk(e,t,n){const r=Tk(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){ev("SyncEngine","Adding an already active target "+e);continue}const t=await yS(r.localStore,e),n=await mS(r.localStore,t);await ZT(r,_k(t),n.targetId,!1,n.resumeToken),XS(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await gS(r.localStore,e,!1).then((()=>{ZS(r.remoteStore,e),lk(r,e)})).catch(zv)}}function Tk(e){const t=sv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ik.bind(null,t),t.Sa.l_=OT.bind(null,t.eventManager),t.Sa.ka=LT.bind(null,t.eventManager),t}function kk(e){const t=sv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ok.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sk.bind(null,t),t}class Ck{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=BS(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return uS(this.persistence,new cS,e.initialUser,this.serializer)}createPersistence(e){return new $I(XI.jr,this.serializer)}createSharedClientState(e){return new PS}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class xk extends Ck{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await kk(this.Qa.syncEngine),await dT(this.Qa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return uS(this.persistence,new cS,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new kI(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ey(t,this.persistence);return new Zv(e.asyncQueue,n)}createPersistence(e){const t=oS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?hI.withCacheSize(this.cacheSizeBytes):hI.DEFAULT;return new nS(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,VS(),zS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new PS}}class Nk extends xk{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof AS&&(this.sharedClientState.syncEngine={Ys:wk.bind(null,t),Zs:Ik.bind(null,t),Xs:Sk.bind(null,t),Li:Ek.bind(null,t),Js:yk.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=sv(e);if(Tk(n),kk(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await bk(n,e.toArray());n.La=!0,await ET(n.remoteStore,!0);for(const r of t)XS(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(lk(n,i),gS(n.localStore,i,!0)))),ZS(n.remoteStore,i)})),await t,await bk(n,e),function(e){const t=sv(e);t.Fa.forEach(((e,n)=>{ZS(t.remoteStore,n)})),t.Ma.Vr(),t.Fa=new Map,t.va=new Uy(Nv.comparator)}(n),n.La=!1,await ET(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=VS();if(!AS.D(t))throw new cv(av.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=oS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new AS(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Ak{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>rk(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,this.syncEngine),await ET(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new PT}createDatastore(e){const t=BS(e.databaseInfo.databaseId),n=function(e){return new jS(e)}(e.databaseInfo);return function(e,t,n,r){return new WS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new JS(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>rk(this.syncEngine,e,0)),DS.D()?new DS:new RS)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new JT(e,t,n,r,i,o);return s&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=sv(e);ev("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await YS(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Pk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Rk{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):tv("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Dk{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new lv,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new VT(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Ok{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new cv(av.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=sv(e),r={documents:t.map((e=>J_(n.serializer,e)))},i=await n.Mo("BatchGetDocuments",n.serializer.databaseId,kv.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){ov(!!t.found),t.found.name,t.found.updateTime;const n=$_(e,t.found.name),r=G_(t.found.updateTime),i=t.found.createTime?G_(t.found.createTime):Sv.min(),o=new Iw({mapValue:{fields:t.found.fields}});return Tw.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){ov(!!t.missing),ov(!!t.readTime);const n=$_(e,t.missing),r=G_(t.readTime);return Tw.newNoDocument(n,r)}(e,t):iv()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());ov(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new h_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Nv.fromPath(t);this.mutations.push(new d_(n,this.precondition(n)))})),await async function(e,t){const n=sv(e),r={writes:t.map((e=>rE(n.serializer,e)))};await n.Do("Commit",n.serializer.databaseId,kv.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw iv();t=Sv.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new cv(av.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Sv.min())?Xb.exists(!1):Xb.updateTime(t):Xb.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Sv.min()))throw new cv(av.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xb.updateTime(t)}return Xb.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Lk{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Jo=new qS(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Jo.Ko((async()=>{const e=new Ok(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!ny(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!w_(t)}return!1}}class Mk{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=$g.UNAUTHENTICATED,this.clientId=wv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{ev("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ev("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new cv(av.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=kT(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Fk(e,t){e.asyncQueue.verifyOperationInProgress(),ev("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await hS(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Uk(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Vk(e);ev("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>_T(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>_T(t.remoteStore,n))),e._onlineComponents=t}function jk(e){return"FirebaseError"===e.name?e.code===av.FAILED_PRECONDITION||e.code===av.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Vk(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ev("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fk(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!jk(n))throw n;nv("Error using user provided cache. Falling back to memory cache: "+n),await Fk(e,new Ck)}}else ev("FirestoreClient","Using default OfflineComponentProvider"),await Fk(e,new Ck);return e._offlineComponents}async function zk(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ev("FirestoreClient","Using user provided OnlineComponentProvider"),await Uk(e,e._uninitializedComponentsProvider._online)):(ev("FirestoreClient","Using default OnlineComponentProvider"),await Uk(e,new Ak))),e._onlineComponents}function Bk(e){return Vk(e).then((e=>e.persistence))}function qk(e){return Vk(e).then((e=>e.localStore))}function Kk(e){return zk(e).then((e=>e.remoteStore))}function Gk(e){return zk(e).then((e=>e.syncEngine))}function Hk(e){return zk(e).then((e=>e.datastore))}async function Wk(e){const t=await zk(e),n=t.eventManager;return n.onListen=$T.bind(null,t.syncEngine),n.onUnlisten=ek.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=YT.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=tk.bind(null,t.syncEngine),n}function Qk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new lv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Rk({next:o=>{t.enqueueAndForget((()=>DT(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new cv(av.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new cv(av.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new jT(sb(n.path),o,{includeMetadataChanges:!0,ra:!0});return RT(e,s)}(await Wk(e),e.asyncQueue,t,n,r))),r.promise}function Jk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new lv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Rk({next:n=>{t.enqueueAndForget((()=>DT(e,s))),n.fromCache&&"server"===r.source?i.reject(new cv(av.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new jT(n,o,{includeMetadataChanges:!0,ra:!0});return RT(e,s)}(await Wk(e),e.asyncQueue,t,n,r))),r.promise}function $k(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?E_().encode(e):e,function(e,t){return new Dk(e,t)}(function(e,t){if(e instanceof Uint8Array)return Pk(e,t);if(e instanceof ArrayBuffer)return Pk(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,BS(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=sv(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=sv(e),r=G_(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(qT(r));const i=new BT(r,e.localStore,t.serializer);let o=await t.qa();for(;o;){const e=await i._a(o);e&&n._updateProgress(e),o=await t.qa()}const s=await i.complete();return await pk(e,s.ca,void 0),await function(e,t){const n=sv(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.ua)}catch(e){return nv("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Gk(e),i,r)}))}function Yk(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Xk=new Map;function Zk(e,t,n){if(!n)throw new cv(av.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function eC(e,t,n,r){if(!0===t&&!0===r)throw new cv(av.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function tC(e){if(!Nv.isDocumentKey(e))throw new cv(av.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function nC(e){if(Nv.isDocumentKey(e))throw new cv(av.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function rC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":iv()}function iC(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new cv(av.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rC(e);throw new cv(av.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function oC(e,t){if(t<=0)throw new cv(av.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class sC{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new cv(av.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new cv(av.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yk(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new cv(av.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new cv(av.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new cv(av.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class aC{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new cv(av.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new cv(av.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sC(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new hv;switch(e.type){case"firstParty":return new mv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new cv(av.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xk.get(e);t&&(ev("ComponentProvider","Removing Datastore"),Xk.delete(e),t.terminate())}(this),Promise.resolve()}}function cC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=iC(e,aC))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&nv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=$g.MOCK_USER;else{t=ao(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new cv(av.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new $g(o)}e._authCredentials=new dv(new uv(t,n))}}class lC{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new lC(this.firestore,e,this._query)}}class uC{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hC(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uC(this.firestore,e,this._key)}}class hC extends lC{constructor(e,t,n){super(e,t,sb(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new uC(this.firestore,null,new Nv(e))}withConverter(e){return new hC(this.firestore,e,this._path)}}function dC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=No(e),Zk("collection","path",t),e instanceof aC){const n=kv.fromString(t,...r);return nC(n),new hC(e,null,n)}{if(!(e instanceof uC||e instanceof hC))throw new cv(av.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(kv.fromString(t,...r));return nC(n),new hC(e.firestore,null,n)}}function fC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=No(e),1===arguments.length&&(t=wv.newId()),Zk("doc","path",t),e instanceof aC){const n=kv.fromString(t,...r);return tC(n),new uC(e,null,new Nv(n))}{if(!(e instanceof uC||e instanceof hC))throw new cv(av.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(kv.fromString(t,...r));return tC(n),new uC(e.firestore,e instanceof hC?e.converter:null,new Nv(n))}}function pC(e,t){return e=No(e),t=No(t),(e instanceof uC||e instanceof hC)&&(t instanceof uC||t instanceof hC)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function mC(e,t){return e=No(e),t=No(t),e instanceof lC&&t instanceof lC&&e.firestore===t.firestore&&pb(e._query,t._query)&&e.converter===t.converter}class gC{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new qS(this,"async_queue_retry"),this.hu=()=>{const e=zS();e&&ev("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Jo.Uo()};const e=zS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=zS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new lv;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(Sj){if(!Qv(Sj))throw Sj;ev("AsyncQueue","Operation failed with retryable error: "+Sj)}this.su.length>0&&this.Jo.Ko((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw tv("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=TT.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&iv()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function vC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class yC{constructor(){this._progressObserver={},this._taskCompletionResolver=new lv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wC extends aC{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new gC,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_C(this),this._firestoreClient.terminate()}}function bC(e){return e._firestoreClient||_C(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function _C(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new ew(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Yk(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Mk(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function EC(e,t,n){const r=new lv;return e.asyncQueue.enqueue((async()=>{try{await Fk(e,n),await Uk(e,t),r.resolve()}catch(e){const n=e;if(!jk(n))throw n;nv("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function IC(e){return function(e){const t=new lv;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=sv(e);iT(n.remoteStore)||ev("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=sv(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=kT(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Gk(e),t))),t.promise}(bC(e=iC(e,wC)))}function SC(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Bk(e),n=await Kk(e);return t.setNetworkEnabled(!0),function(e){const t=sv(e);return t.M_.delete(0),$S(t)}(n)}))}(bC(e=iC(e,wC)))}function TC(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Bk(e),n=await Kk(e);return t.setNetworkEnabled(!1),async function(e){const t=sv(e);t.M_.add(0),await YS(t),t.N_.set("Offline")}(n)}))}(bC(e=iC(e,wC)))}function kC(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=sv(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await qk(e),t)))}(bC(e=iC(e,wC)),t).then((t=>t?new lC(e,null,t.query):null))}function CC(e){if(e._initialized||e._terminated)throw new cv(av.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xC{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xC(Hy.fromBase64String(e))}catch(e){throw new cv(av.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new xC(Hy.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class NC{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new cv(av.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xv(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class AC{constructor(e){this._methodName=e}}class PC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new cv(av.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new cv(av.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bv(this._lat,e._lat)||bv(this._long,e._long)}}const RC=/^__.*__$/;class DC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new a_(e,this.data,this.fieldMask,t,this.fieldTransforms):new s_(e,this.data,t,this.fieldTransforms)}}class OC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new a_(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw iv()}}class MC{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new MC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return nx(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(LC(this.fu)&&RC.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class FC{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||BS(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new MC({fu:e,methodName:t,vu:n,path:xv.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UC(e){const t=e._freezeSettings(),n=BS(e._databaseId);return new FC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function jC(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Fu(o.merge||o.mergeFields?2:0,t,n,i);XC("Data must be an object, but it was:",s,r);const a=$C(r,s);let c,l;if(o.merge)c=new Ky(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=ZC(t,r,n);if(!s.contains(i))throw new cv(av.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));rx(e,i)||e.push(i)}c=new Ky(e),l=s.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=s.fieldTransforms;return new DC(new Iw(a),c,l)}class VC extends AC{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof VC}}function zC(e,t,n){return new MC({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class BC extends AC{_toFieldTransform(e){return new $b(e.path,new Bb)}isEqual(e){return e instanceof BC}}class qC extends AC{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=zC(this,e,!0),n=this.Mu.map((e=>JC(e,t))),r=new qb(n);return new $b(e.path,r)}isEqual(e){return e instanceof qC&&_o(this.Mu,e.Mu)}}class KC extends AC{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=zC(this,e,!0),n=this.Mu.map((e=>JC(e,t))),r=new Gb(n);return new $b(e.path,r)}isEqual(e){return e instanceof KC&&_o(this.Mu,e.Mu)}}class GC extends AC{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Wb(e.serializer,Fb(e.serializer,this.xu));return new $b(e.path,t)}isEqual(e){return e instanceof GC&&this.xu===e.xu}}function HC(e,t,n,r){const i=e.Fu(1,t,n);XC("Data must be an object, but it was:",i,r);const o=[],s=Iw.empty();My(r,((e,r)=>{const a=tx(t,e,n);r=No(r);const c=i.Su(a);if(r instanceof VC)o.push(a);else{const e=JC(r,c);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Ky(o);return new OC(s,a,i.fieldTransforms)}function WC(e,t,n,r,i,o){const s=e.Fu(1,t,n),a=[ZC(t,r,n)],c=[i];if(o.length%2!=0)throw new cv(av.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(ZC(t,o[d])),c.push(o[d+1]);const l=[],u=Iw.empty();for(let d=a.length-1;d>=0;--d)if(!rx(l,a[d])){const e=a[d];let t=c[d];t=No(t);const n=s.Su(e);if(t instanceof VC)l.push(e);else{const r=JC(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new Ky(l);return new OC(u,h,s.fieldTransforms)}function QC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return JC(n,e.Fu(r?4:3,t))}function JC(e,t){if(YC(e=No(e)))return XC("Unsupported field value:",t,e),$C(e,t);if(e instanceof AC)return function(e,t){if(!LC(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=JC(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=No(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Fb(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Iv.fromDate(e);return{timestampValue:B_(t.serializer,n)}}if(e instanceof Iv){const n=new Iv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:B_(t.serializer,n)}}if(e instanceof PC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xC)return{bytesValue:q_(t.serializer,e._byteString)};if(e instanceof uC){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:H_(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(rC(e)))}(e,t)}function $C(e,t){const n={};return Fy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):My(e,((e,r)=>{const i=JC(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function YC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Iv||e instanceof PC||e instanceof xC||e instanceof uC||e instanceof AC)}function XC(e,t,n){if(!YC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=rC(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function ZC(e,t,n){if((t=No(t))instanceof NC)return t._internalPath;if("string"==typeof t)return tx(e,t);throw nx("Field path arguments must be of type string or ",e,!1,void 0,n)}const ex=new RegExp("[~\\*/\\[\\]]");function tx(e,t,n){if(t.search(ex)>=0)throw nx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new NC(...t.split("."))._internalPath}catch(Re){throw nx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function nx(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=" in field ".concat(r)),s&&(c+=" in document ".concat(i)),c+=")"),new cv(av.INVALID_ARGUMENT,a+e+c)}function rx(e,t){return e.some((e=>e.isEqual(t)))}class ix{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new uC(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ox(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ox extends ix{data(){return super.data()}}function sx(e,t){return"string"==typeof t?tx(e,t):t instanceof NC?t._internalPath:t._delegate._internalPath}function ax(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new cv(av.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cx{}class lx extends cx{}function ux(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof cx&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof dx)).length,n=e.filter((e=>e instanceof hx)).length;if(t>1||t>0&&n>0)throw new cv(av.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class hx extends lx{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new hx(e,t,n)}_apply(e){const t=this._parse(e);return bx(e._query,t),new lC(e.firestore,e.converter,db(e._query,t))}_parse(e){const t=UC(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new cv(av.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){wx(s,o);const t=[];for(const n of s)t.push(yx(r,e,n));a={arrayValue:{values:t}}}else a=yx(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||wx(s,o),a=QC(n,t,s,"in"===o||"not-in"===o);return Rw.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class dx extends cx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dx(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Dw.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)bx(n,i),n=db(n,i)}(e._query,t),new lC(e.firestore,e.converter,db(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fx extends lx{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fx(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new cv(av.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new cv(av.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nw(t,n)}(e._query,this._field,this._direction);return new lC(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ib(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class px extends lx{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new px(e,t,n)}_apply(e){return new lC(e.firestore,e.converter,fb(e._query,this._limit,this._limitType))}}class mx extends lx{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new mx(e,t,n)}_apply(e){const t=vx(e,this.type,this._docOrFields,this._inclusive);return new lC(e.firestore,e.converter,function(e,t){return new ib(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class gx extends lx{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new gx(e,t,n)}_apply(e){const t=vx(e,this.type,this._docOrFields,this._inclusive);return new lC(e.firestore,e.converter,function(e,t){return new ib(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function vx(e,t,n,r){if(n[0]=No(n[0]),n[0]instanceof ix)return function(e,t,n,r,i){if(!r)throw new cv(av.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of lb(e))if(s.field.isKeyField())o.push(hw(t,r.key));else{const e=r.data.field(s.field);if(Yy(e))throw new cv(av.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new cv(av.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new kw(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=UC(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new cv(av.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const o=i[c];if(s[c].field.isKeyField()){if("string"!=typeof o)throw new cv(av.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!cb(e)&&-1!==o.indexOf("/"))throw new cv(av.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(kv.fromString(o));if(!Nv.isDocumentKey(n))throw new cv(av.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Nv(n);a.push(hw(t,i))}else{const e=QC(n,r,o);a.push(e)}}return new kw(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function yx(e,t,n){if("string"==typeof(n=No(n))){if(""===n)throw new cv(av.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cb(t)&&-1!==n.indexOf("/"))throw new cv(av.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(kv.fromString(n));if(!Nv.isDocumentKey(r))throw new cv(av.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return hw(e,new Nv(r))}if(n instanceof uC)return hw(e,n._key);throw new cv(av.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(rC(n),"."))}function wx(e,t){if(!Array.isArray(e)||0===e.length)throw new cv(av.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function bx(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new cv(av.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new cv(av.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class _x{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(iw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($y(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw iv()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return My(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new PC(Jy(e.latitude),Jy(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Xy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zy(e));default:return null}}convertTimestamp(e){const t=Qy(e);return new Iv(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=kv.fromString(e);ov(gE(n));const r=new tw(n.get(1),n.get(3)),i=new Nv(n.popFirst(5));return r.isEqual(t)||tv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Ex(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ix extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new xC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new uC(this.firestore,null,t)}}class Sx{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tx extends ix{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new kx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(sx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class kx extends Tx{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Cx{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Sx(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new kx(this._firestore,this._userDataWriter,n.key,n,new Sx(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new cv(av.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new kx(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Sx(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new kx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:xx(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function xx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return iv()}}function Nx(e,t){return e instanceof Tx&&t instanceof Tx?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Cx&&t instanceof Cx&&e._firestore===t._firestore&&mC(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Ax extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new xC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new uC(this.firestore,null,t)}}function Px(e){e=iC(e,uC);const t=iC(e.firestore,wC),n=bC(t),r=new Ax(t);return function(e,t){const n=new lv;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=sv(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new cv(av.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=kT(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await qk(e),t,n))),n.promise}(n,e._key).then((n=>new Tx(t,r,e._key,n,new Sx(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Rx(e){e=iC(e,lC);const t=iC(e.firestore,wC),n=bC(t),r=new Ax(t);return function(e,t){const n=new lv;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await vS(e,t,!0),i=new HT(t,r.ls),o=i.da(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=kT(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await qk(e),t,n))),n.promise}(n,e._query).then((n=>new Cx(t,r,e,n)))}function Dx(e,t,n){e=iC(e,uC);const r=iC(e.firestore,wC),i=Ex(e.converter,t,n);return Fx(r,[jC(UC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Xb.none())])}function Ox(e,t,n){e=iC(e,uC);const r=iC(e.firestore,wC),i=UC(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),c=3;c<s;c++)a[c-3]=arguments[c];return o="string"==typeof(t=No(t))||t instanceof NC?WC(i,"updateDoc",e._key,t,n,a):HC(i,"updateDoc",e._key,t),Fx(r,[o.toMutation(e._key,Xb.exists(!0))])}function Lx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=No(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||vC(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(vC(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[c+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,h,d;if(e instanceof uC)h=iC(e.firestore,wC),d=sb(e._key.path),u={next:t=>{n[c]&&n[c](Ux(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=iC(e,lC);h=iC(t.firestore,wC),d=t._query;const r=new Ax(h);u={next:e=>{n[c]&&n[c](new Cx(h,r,t,e))},error:n[c+1],complete:n[c+2]},ax(e._query)}return function(e,t,n,r){const i=new Rk(r),o=new jT(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>RT(await Wk(e),o))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>DT(await Wk(e),o)))}}(bC(h),d,l,u)}function Mx(e,t){return function(e,t){const n=new Rk(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){sv(e).z_.add(t),t.next()}(await Wk(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){sv(e).z_.delete(t)}(await Wk(e),n)))}}(bC(e=iC(e,wC)),vC(t)?t:{next:t})}function Fx(e,t){return function(e,t){const n=new lv;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=kk(e);try{const e=await function(e,t){const n=sv(e),r=Iv.now(),i=t.reduce(((e,t)=>e.add(t.key)),Rb());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Ib(),c=Rb();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=i_(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new a_(e.key,t,Sw(t.value.mapValue),Xb.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:kb(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Uy(bv)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await pk(r,e.changes),await dT(r.remoteStore)}catch(e){const t=kT(e,"Failed to persist write");n.reject(t)}}(await Gk(e),t,n))),n.promise}(bC(e),t)}function Ux(e,t,n){const r=n.docs.get(t._key),i=new Ax(e);return new Tx(e,i,t._key,r,new Sx(n.hasPendingWrites,n.fromCache),t.converter)}const jx={maxAttempts:5};class Vx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=UC(e)}set(e,t,n){this._verifyNotCommitted();const r=zx(e,this._firestore),i=Ex(r.converter,t,n),o=jC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Xb.none())),this}update(e,t,n){this._verifyNotCommitted();const r=zx(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=No(t))||t instanceof NC?WC(this._dataReader,"WriteBatch.update",r._key,t,n,s):HC(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Xb.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zx(e,this._firestore);return this._mutations=this._mutations.concat(new h_(t._key,Xb.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new cv(av.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zx(e,t){if((e=No(e)).firestore!==t)throw new cv(av.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Bx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=UC(e)}get(e){const t=zx(e,this._firestore),n=new Ix(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return iv();const r=e[0];if(r.isFoundDocument())return new ix(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new ix(this._firestore,n,t._key,null,t.converter);throw iv()}))}set(e,t,n){const r=zx(e,this._firestore),i=Ex(r.converter,t,n),o=jC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=zx(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=No(t))||t instanceof NC?WC(this._dataReader,"Transaction.update",r._key,t,n,s):HC(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=zx(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zx(e,this._firestore),n=new Ax(this._firestore);return super.get(e).then((e=>new Tx(this._firestore,n,t._key,e._document,new Sx(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Yg=e}(Qs),js(new Ao("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new wC(new fv(e.getProvider("auth-internal")),new vv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new cv(av.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tw(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),ea(Jg,"4.6.1",e),ea(Jg,"4.6.1","esm2017")}();function qx(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new cv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Kx(){if("undefined"===typeof Uint8Array)throw new cv("unimplemented","Uint8Arrays are not available in this environment.")}function Gx(){if("undefined"==typeof atob)throw new cv("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Hx{constructor(e){this._delegate=e}static fromBase64String(e){return Gx(),new Hx(xC.fromBase64String(e))}static fromUint8Array(e){return Kx(),new Hx(xC.fromUint8Array(e))}toBase64(){return Gx(),this._delegate.toBase64()}toUint8Array(){return Kx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Wx(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Qx{enableIndexedDbPersistence(e,t){return function(e,t){CC(e=iC(e,wC));const n=bC(e);if(n._uninitializedComponentsProvider)throw new cv(av.FAILED_PRECONDITION,"SDK cache is already specified.");nv("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Ak;return EC(n,i,new xk(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){CC(e=iC(e,wC));const t=bC(e);if(t._uninitializedComponentsProvider)throw new cv(av.FAILED_PRECONDITION,"SDK cache is already specified.");nv("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Ak;return EC(t,r,new Nk(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new cv(av.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new lv;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Kv.D())return Promise.resolve();const t=e+"main";await Kv.delete(t)}(oS(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Jx{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof tw||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||nv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};cC(this._delegate,e,t,n)}enableNetwork(){return SC(this._delegate)}disableNetwork(){return TC(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,eC("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return IC(this._delegate)}onSnapshotsInSync(e){return Mx(this._delegate,e)}get app(){if(!this._appCompat)throw new cv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new lN(this,dC(this._delegate,e))}catch(Sj){throw tN(Sj,"collection()","Firestore.collection()")}}doc(e){try{return new eN(this,fC(this._delegate,e))}catch(Sj){throw tN(Sj,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sN(this,function(e,t){if(e=iC(e,aC),Zk("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new cv(av.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new lC(e,null,function(e){return new ib(kv.emptyPath(),e)}(t))}(this._delegate,e))}catch(Sj){throw tN(Sj,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=iC(e,wC);const r=Object.assign(Object.assign({},jx),n);return function(e){if(e.maxAttempts<1)throw new cv(av.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new lv;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Hk(e);new Lk(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(bC(e),(n=>t(new Bx(e,n))),r)}(this._delegate,(t=>e(new Yx(this,t))))}batch(){return bC(this._delegate),new Xx(new Vx(this._delegate,(e=>Fx(this._delegate,e))))}loadBundle(e){return function(e,t){const n=bC(e=iC(e,wC)),r=new yC;return $k(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return kC(this._delegate,e).then((e=>e?new sN(this,e):null))}}class $x extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hx(new xC(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return eN.forKey(t,this.firestore,null)}}class Yx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $x(e)}get(e){const t=uN(e);return this._delegate.get(t).then((e=>new iN(this._firestore,new Tx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=uN(e);return n?(qx("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=uN(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=uN(e);return this._delegate.delete(t),this}}class Xx{constructor(e){this._delegate=e}set(e,t,n){const r=uN(e);return n?(qx("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=uN(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=uN(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zx{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new kx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new oN(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Zx.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Zx(e,new $x(e),t),r.set(t,i)),i}}Zx.INSTANCES=new WeakMap;class eN{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $x(e)}static forPath(e,t,n){if(e.length%2!==0)throw new cv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new eN(t,new uC(t._delegate,n,new Nv(e)))}static forKey(e,t,n){return new eN(t,new uC(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new lN(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new lN(this.firestore,dC(this._delegate,e))}catch(Sj){throw tN(Sj,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=No(e))instanceof uC&&pC(this._delegate,e)}set(e,t){t=qx("DocumentReference.set",t);try{return t?Dx(this._delegate,e,t):Dx(this._delegate,e)}catch(Sj){throw tN(Sj,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Ox(this._delegate,e):Ox(this._delegate,e,t,...r)}catch(Sj){throw tN(Sj,"updateDoc()","DocumentReference.update()")}}delete(){return Fx(iC((e=this._delegate).firestore,wC),[new h_(e._key,Xb.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=nN(t),i=rN(t,(e=>new iN(this.firestore,new Tx(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Lx(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Px(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=iC(e,uC);const t=iC(e.firestore,wC);return Qk(bC(t),e._key,{source:"server"}).then((n=>Ux(t,e,n)))}(this._delegate):function(e){e=iC(e,uC);const t=iC(e.firestore,wC);return Qk(bC(t),e._key).then((n=>Ux(t,e,n)))}(this._delegate),t.then((e=>new iN(this.firestore,new Tx(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new eN(this.firestore,e?this._delegate.withConverter(Zx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function tN(e,t,n){return e.message=e.message.replace(t,n),e}function nN(e){for(const t of e)if("object"===typeof t&&!Wx(t))return t;return{}}function rN(e,t){var n,r;let i;return i=Wx(e[0])?e[0]:Wx(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class iN{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new eN(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Nx(this._delegate,e._delegate)}}class oN extends iN{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||iv(),t}}class sN{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $x(e)}where(e,t,n){try{return new sN(this.firestore,ux(this._delegate,function(e,t,n){const r=t,i=sx("where",e);return hx._create(i,r,n)}(e,t,n)))}catch(Sj){throw tN(Sj,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new sN(this.firestore,ux(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=sx("orderBy",e);return fx._create(n,t)}(e,t)))}catch(Sj){throw tN(Sj,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sN(this.firestore,ux(this._delegate,(oC("limit",t=e),px._create("limit",t,"F"))))}catch(t){throw tN(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new sN(this.firestore,ux(this._delegate,(oC("limitToLast",t=e),px._create("limitToLast",t,"L"))))}catch(t){throw tN(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new sN(this.firestore,ux(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mx._create("startAt",t,!0)}(...arguments)))}catch(Sj){throw tN(Sj,"startAt()","Query.startAt()")}}startAfter(){try{return new sN(this.firestore,ux(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mx._create("startAfter",t,!1)}(...arguments)))}catch(Sj){throw tN(Sj,"startAfter()","Query.startAfter()")}}endBefore(){try{return new sN(this.firestore,ux(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gx._create("endBefore",t,!1)}(...arguments)))}catch(Sj){throw tN(Sj,"endBefore()","Query.endBefore()")}}endAt(){try{return new sN(this.firestore,ux(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gx._create("endAt",t,!0)}(...arguments)))}catch(Sj){throw tN(Sj,"endAt()","Query.endAt()")}}isEqual(e){return mC(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Rx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=iC(e,lC);const t=iC(e.firestore,wC),n=bC(t),r=new Ax(t);return Jk(n,e._query,{source:"server"}).then((n=>new Cx(t,r,e,n)))}(this._delegate):function(e){e=iC(e,lC);const t=iC(e.firestore,wC),n=bC(t),r=new Ax(t);return ax(e._query),Jk(n,e._query).then((n=>new Cx(t,r,e,n)))}(this._delegate),t.then((e=>new cN(this.firestore,new Cx(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=nN(t),i=rN(t,(e=>new cN(this.firestore,new Cx(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Lx(this._delegate,r,i)}withConverter(e){return new sN(this.firestore,e?this._delegate.withConverter(Zx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class aN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new oN(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new sN(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new oN(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new aN(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new oN(this._firestore,n))}))}isEqual(e){return Nx(this._delegate,e._delegate)}}class lN extends sN{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new eN(this.firestore,e):null}doc(e){try{return new eN(this.firestore,void 0===e?fC(this._delegate):fC(this._delegate,e))}catch(Sj){throw tN(Sj,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=iC(e.firestore,wC),r=fC(e),i=Ex(e.converter,t);return Fx(n,[jC(UC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Xb.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new eN(this.firestore,e)))}isEqual(e){return pC(this._delegate,e._delegate)}withConverter(e){return new lN(this.firestore,e?this._delegate.withConverter(Zx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function uN(e){return iC(e,uC)}class hN{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new NC(...t)}static documentId(){return new hN(xv.keyField().canonicalString())}isEqual(e){return(e=No(e))instanceof NC&&this._delegate._internalPath.isEqual(e._internalPath)}}class dN{constructor(e){this._delegate=e}static serverTimestamp(){const e=new BC("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new dN(e)}static delete(){const e=new VC("deleteField");return e._methodName="FieldValue.delete",new dN(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qC("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new dN(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new KC("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new dN(e)}static increment(e){const t=new GC("increment",e);return t._methodName="FieldValue.increment",new dN(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const fN={Firestore:Jx,GeoPoint:PC,Timestamp:Iv,Blob:Hx,Transaction:Yx,WriteBatch:Xx,DocumentReference:eN,DocumentSnapshot:iN,Query:sN,QueryDocumentSnapshot:oN,QuerySnapshot:cN,CollectionReference:lN,FieldPath:hN,FieldValue:dN,setLogLevel:function(e){var t;t=e,Xg.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ao("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},fN)))}(e,((e,t)=>new Jx(e,t,new Qx))),e.registerVersion("@firebase/firestore-compat","0.3.30")}(wa);wa.initializeApp({apiKey:"AIzaSyAd-zZc6ClG5NCVFua7AoxgVmfBHEG8LzY",authDomain:"gameforum-880eb.firebaseapp.com",projectId:"gameforum-880eb",storageBucket:"gameforum-880eb.appspot.com",messagingSenderId:"994604446436",appId:"1:994604446436:web:4a01fc9ef61ce1fdbb32f1"});const pN=wa;function mN(e,t){return mN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mN(e,t)}function gN(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,mN(e,t)}const vN=function(e,t){var n=-1,r=rr(e)?Array(e.length):[];return ui(e,(function(e,i,o){r[++n]=t(e,i,o)})),r};const yN=function(e,t){return(yn(e)?Kr:vN)(e,ai(t,3))};const wN=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};const bN=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};const _N=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};const EN=function(e,t){return t.length<2?e:Yr(e,_N(t,0,-1))};const IN=function(e,t,n){t=Jr(t,e);var r=null==(e=EN(e,t))?e:e[$r(bN(t))];return null==r?void 0:wN(r,e,n)};var SN=Math.max;const TN=function(e,t,n){return t=SN(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=SN(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),wN(e,this,a)}};const kN=function(e){return function(){return e}};const CN=function(){try{var e=Ot(Object,"defineProperty");return e({},"",{}),e}catch(Sj){}}();const xN=CN?function(e,t){return CN(e,"toString",{configurable:!0,enumerable:!1,value:kN(t),writable:!0})}:ri;var NN=Date.now;const AN=function(e){var t=0,n=0;return function(){var r=NN(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};const PN=AN(xN);const RN=function(e,t){return PN(TN(e,t,ri),e+"")};const DN=RN(IN);const ON=function(e){return void 0===e};var LN=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=(t=e.call.apply(e,[this].concat(r))||this).constructor,s=o.autoControlledProps,a=o.getAutoControlledStateFromProps,c=DN(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),"getInitialAutoControlledState",t.props)||{},l=s.reduce((function(e,n){return e[n]=function(e,t,n,r){void 0===r&&(r=!1);var i,o=t[e];if(void 0!==o)return o;if(r){var s=t[(i=e,"default"+(i[0].toUpperCase()+i.slice(1)))];if(void 0!==s)return s;if(n){var a=n[e];if(void 0!==a)return a}}return"checked"!==e&&("value"===e?t.multiple?[]:"":void 0)}(n,t.props,c,!0),e}),{});return t.state=Pe({},c,l,{autoControlledProps:s,getAutoControlledStateFromProps:a}),t}return gN(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.autoControlledProps,r=t.getAutoControlledStateFromProps,i=n.reduce((function(t,n){return!ON(e[n])&&(t[n]=e[n]),t}),{});if(r){var o=r(e,Pe({},t,i),t);return Pe({},i,o)}return i},t.getAutoControlledStateFromProps=function(){return null},t}(i.Component);function MN(e){var t=e.children,n=e.className,r=e.content,o=De("header",n),s=qe(MN,e),a=Ke(MN,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}MN.handledProps=["as","children","className","content"],MN.propTypes={};const FN=MN;const UN=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n};const jN=function(e){return function(t){return null==e?void 0:e[t]}}({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"});var VN=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zN=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");const BN=function(e){return(e=Qr(e))&&e.replace(VN,jN).replace(zN,"")};var qN=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;const KN=function(e){return e.match(qN)||[]};var GN=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;const HN=function(e){return GN.test(e)};var WN="\\ud800-\\udfff",QN="\\u2700-\\u27bf",JN="a-z\\xdf-\\xf6\\xf8-\\xff",$N="A-Z\\xc0-\\xd6\\xd8-\\xde",YN="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",XN="["+YN+"]",ZN="\\d+",eA="["+QN+"]",tA="["+JN+"]",nA="[^"+WN+YN+ZN+QN+JN+$N+"]",rA="(?:\\ud83c[\\udde6-\\uddff]){2}",iA="[\\ud800-\\udbff][\\udc00-\\udfff]",oA="["+$N+"]",sA="(?:"+tA+"|"+nA+")",aA="(?:"+oA+"|"+nA+")",cA="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",lA="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",uA="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",hA="[\\ufe0e\\ufe0f]?",dA=hA+uA+("(?:\\u200d(?:"+["[^"+WN+"]",rA,iA].join("|")+")"+hA+uA+")*"),fA="(?:"+[eA,rA,iA].join("|")+")"+dA,pA=RegExp([oA+"?"+tA+"+"+cA+"(?="+[XN,oA,"$"].join("|")+")",aA+"+"+lA+"(?="+[XN,oA+sA,"$"].join("|")+")",oA+"?"+sA+"+"+cA,oA+"+"+lA,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ZN,fA].join("|"),"g");const mA=function(e){return e.match(pA)||[]};const gA=function(e,t,n){return e=Qr(e),void 0===(t=n?void 0:t)?HN(e)?mA(e):KN(e):e.match(t)||[]};var vA=RegExp("['\u2019]","g");const yA=function(e){return function(t){return UN(gA(BN(t).replace(vA,"")),e,"")}};const wA=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:_N(e,t,n)};var bA=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const _A=function(e){return bA.test(e)};const EA=function(e){return e.split("")};var IA="\\ud800-\\udfff",SA="["+IA+"]",TA="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",kA="\\ud83c[\\udffb-\\udfff]",CA="[^"+IA+"]",xA="(?:\\ud83c[\\udde6-\\uddff]){2}",NA="[\\ud800-\\udbff][\\udc00-\\udfff]",AA="(?:"+TA+"|"+kA+")"+"?",PA="[\\ufe0e\\ufe0f]?",RA=PA+AA+("(?:\\u200d(?:"+[CA,xA,NA].join("|")+")"+PA+AA+")*"),DA="(?:"+[CA+TA+"?",TA,xA,NA,SA].join("|")+")",OA=RegExp(kA+"(?="+kA+")|"+DA+RA,"g");const LA=function(e){return e.match(OA)||[]};const MA=function(e){return _A(e)?LA(e):EA(e)};const FA=function(e){return function(t){t=Qr(t);var n=_A(t)?MA(t):void 0,r=n?n[0]:t.charAt(0),i=n?wA(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase");const UA=yA((function(e,t,n){return e+(n?" ":"")+FA(t)}));function jA(e){var t=e.children,n=e.className,r=e.content,o=e.size,s=De(o,"icons",n),a=qe(jA,e),c=Ke(jA,e);return i.createElement(c,Pe({},a,{className:s}),pi(t)?r:t)}jA.handledProps=["as","children","className","content","size"],jA.propTypes={},jA.defaultProps={as:"i"};const VA=jA;var zA=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled?e.preventDefault():DN(t.props,"onClick",e,t.props)},t}gN(t,e);var n=t.prototype;return n.getIconAriaOptions=function(){var e={},t=this.props,n=t["aria-label"],r=t["aria-hidden"];return Ui(n)?e["aria-hidden"]="true":e["aria-label"]=n,Ui(r)||(e["aria-hidden"]=r),e},n.render=function(){var e=this.props,n=e.bordered,r=e.circular,o=e.className,s=e.color,a=e.corner,c=e.disabled,l=e.fitted,u=e.flipped,h=e.inverted,d=e.link,f=e.loading,p=e.name,m=e.rotated,g=e.size,v=De(s,p,g,Me(n,"bordered"),Me(r,"circular"),Me(c,"disabled"),Me(l,"fitted"),Me(h,"inverted"),Me(d,"link"),Me(f,"loading"),Ue(a,"corner"),Fe(u,"flipped"),Fe(m,"rotated"),"icon",o),y=qe(t,this.props),w=Ke(t,this.props),b=this.getIconAriaOptions();return i.createElement(w,Pe({},y,b,{className:v,onClick:this.handleClick}))},t}(i.PureComponent);zA.handledProps=["aria-hidden","aria-label","as","bordered","circular","className","color","corner","disabled","fitted","flipped","inverted","link","loading","name","rotated","size"],zA.propTypes={},zA.defaultProps={as:"i"},zA.Group=VA,zA.create=Vi(zA,(function(e){return{name:e}}));const BA=zA;var qA=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||DN(t.props,"onClick",e,t.props)},t}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,o=e.className,s=e.color,a=e.content,c=e.disabled,l=e.fitted,u=e.header,h=e.icon,d=e.link,f=e.name,p=e.onClick,m=e.position,g=De(s,m,Me(n,"active"),Me(c,"disabled"),Me(!0===h||h&&!(f||a),"icon"),Me(u,"header"),Me(d,"link"),Ue(l,"fitted"),"item",o),v=Ke(t,this.props,(function(){if(p)return"a"})),y=qe(t,this.props);return pi(r)?i.createElement(v,Pe({},y,{className:g,onClick:this.handleClick}),BA.create(h,{autoGenerateKey:!1}),pi(a)?UA(f):a):i.createElement(v,Pe({},y,{className:g,onClick:this.handleClick}),r)},t}(i.Component);function KA(e){var t=e.children,n=e.className,r=e.content,o=e.position,s=De(o,"menu",n),a=qe(KA,e),c=Ke(KA,e);return i.createElement(c,Pe({},a,{className:s}),pi(t)?r:t)}qA.handledProps=["active","as","children","className","color","content","disabled","fitted","header","icon","index","link","name","onClick","position"],qA.propTypes={},qA.create=Vi(qA,(function(e){return{content:e,name:e}})),KA.handledProps=["as","children","className","content","position"],KA.propTypes={};const GA=KA;var HA=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){var i=r.index;t.setState({activeIndex:i}),DN(e,"onClick",n,r),DN(t.props,"onItemClick",n,r)}}},t}gN(t,e);var n=t.prototype;return n.renderItems=function(){var e=this,t=this.props.items,n=this.state.activeIndex;return yN(t,(function(t,r){return qA.create(t,{defaultProps:{active:parseInt(n,10)===r,index:r},overrideProps:e.handleItemOverrides})}))},n.render=function(){var e=this.props,n=e.attached,r=e.borderless,o=e.children,s=e.className,a=e.color,c=e.compact,l=e.fixed,u=e.floated,h=e.fluid,d=e.icon,f=e.inverted,p=e.pagination,m=e.pointing,g=e.secondary,v=e.size,y=e.stackable,w=e.tabular,b=e.text,_=e.vertical,E=e.widths,I=De("ui",a,v,Me(r,"borderless"),Me(c,"compact"),Me(h,"fluid"),Me(f,"inverted"),Me(p,"pagination"),Me(m,"pointing"),Me(g,"secondary"),Me(y,"stackable"),Me(b,"text"),Me(_,"vertical"),Ue(n,"attached"),Ue(u,"floated"),Ue(d,"icon"),Ue(w,"tabular"),Fe(l,"fixed"),Be(E,"item"),s,"menu"),S=qe(t,this.props),T=Ke(t,this.props);return i.createElement(T,Pe({},S,{className:I}),pi(o)?this.renderItems():o)},t}(LN);HA.handledProps=["activeIndex","as","attached","borderless","children","className","color","compact","defaultActiveIndex","fixed","floated","fluid","icon","inverted","items","onItemClick","pagination","pointing","secondary","size","stackable","tabular","text","vertical","widths"],HA.propTypes={},HA.autoControlledProps=["activeIndex"],HA.Header=FN,HA.Item=qA,HA.Menu=GA,HA.create=Vi(HA,(function(e){return{items:e}}));const WA=HA;function QA(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var JA=Object.prototype.hasOwnProperty;const $A=function(e){if(null==e)return!0;if(rr(e)&&(yn(e)||"string"==typeof e||"function"==typeof e.splice||Mn(e)||Qn(e)||Pn(e)))return!e.length;var t=Ir(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Xn(e))return!nr(e).length;for(var n in e)if(JA.call(e,n))return!1;return!0};const YA=hr&&new hr;const XA=YA?function(e,t){return YA.set(e,t),e}:ri;var ZA=Object.create;const eP=function(){function e(){}return function(t){if(!wt(t))return{};if(ZA)return ZA(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const tP=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=eP(e.prototype),r=e.apply(n,t);return wt(r)?r:n}};const nP=function(e,t,n){var r=1&t,i=tP(e);return function t(){return(this&&this!==ct&&this instanceof t?i:e).apply(r?n:this,arguments)}};var rP=Math.max;const iP=function(e,t,n,r){for(var i=-1,o=e.length,s=n.length,a=-1,c=t.length,l=rP(o-s,0),u=Array(c+l),h=!r;++a<c;)u[a]=t[a];for(;++i<s;)(h||i<o)&&(u[n[i]]=e[i]);for(;l--;)u[a++]=e[i++];return u};var oP=Math.max;const sP=function(e,t,n,r){for(var i=-1,o=e.length,s=-1,a=n.length,c=-1,l=t.length,u=oP(o-a,0),h=Array(u+l),d=!r;++i<u;)h[i]=e[i];for(var f=i;++c<l;)h[f+c]=t[c];for(;++s<a;)(d||i<o)&&(h[f+n[s]]=e[i++]);return h};const aP=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};const cP=function(){};function lP(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}lP.prototype=eP(cP.prototype),lP.prototype.constructor=lP;const uP=lP;const hP=YA?function(e){return YA.get(e)}:Ii;const dP={};var fP=Object.prototype.hasOwnProperty;const pP=function(e){for(var t=e.name+"",n=dP[t],r=fP.call(dP,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t};function mP(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}mP.prototype=eP(cP.prototype),mP.prototype.constructor=mP;const gP=mP;const vP=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};const yP=function(e){if(e instanceof uP)return e.clone();var t=new gP(e.__wrapped__,e.__chain__);return t.__actions__=vP(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t};var wP=Object.prototype.hasOwnProperty;function bP(e){if(kn(e)&&!yn(e)&&!(e instanceof uP)){if(e instanceof gP)return e;if(wP.call(e,"__wrapped__"))return yP(e)}return new gP(e)}bP.prototype=cP.prototype,bP.prototype.constructor=bP;const _P=bP;const EP=function(e){var t=pP(e),n=_P[t];if("function"!=typeof n||!(t in uP.prototype))return!1;if(e===n)return!0;var r=hP(n);return!!r&&e===r[0]};const IP=AN(XA);var SP=/\{\n\/\* \[wrapped with (.+)\] \*/,TP=/,? & /;const kP=function(e){var t=e.match(SP);return t?t[1].split(TP):[]};var CP=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;const xP=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(CP,"{\n/* [wrapped with "+t+"] */\n")};const NP=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var AP=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];const PP=function(e,t){return NP(AP,(function(n){var r="_."+n[0];t&n[1]&&!_i(e,r)&&e.push(r)})),e.sort()};const RP=function(e,t,n){var r=t+"";return PN(e,xP(r,PP(kP(r),n)))};const DP=function(e,t,n,r,i,o,s,a,c,l){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var h=[e,t,i,u?o:void 0,u?s:void 0,u?void 0:o,u?void 0:s,a,c,l],d=n.apply(void 0,h);return EP(e)&&IP(d,h),d.placeholder=r,RP(d,e,t)};const OP=function(e){return e.placeholder};var LP=Math.min;const MP=function(e,t){for(var n=e.length,r=LP(t.length,n),i=vP(e);r--;){var o=t[r];e[r]=Un(o,n)?i[o]:void 0}return e};var FP="__lodash_placeholder__";const UP=function(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==FP||(e[n]=FP,o[i++]=n)}return o};const jP=function e(t,n,r,i,o,s,a,c,l,u){var h=128&n,d=1&n,f=2&n,p=24&n,m=512&n,g=f?void 0:tP(t);return function v(){for(var y=arguments.length,w=Array(y),b=y;b--;)w[b]=arguments[b];if(p)var _=OP(v),E=aP(w,_);if(i&&(w=iP(w,i,o,p)),s&&(w=sP(w,s,a,p)),y-=E,p&&y<u){var I=UP(w,_);return DP(t,n,e,v.placeholder,r,w,I,c,l,u-y)}var S=d?r:this,T=f?S[t]:t;return y=w.length,c?w=MP(w,c):m&&y>1&&w.reverse(),h&&l<y&&(w.length=l),this&&this!==ct&&this instanceof v&&(T=g||tP(T)),T.apply(S,w)}};const VP=function(e,t,n){var r=tP(e);return function i(){for(var o=arguments.length,s=Array(o),a=o,c=OP(i);a--;)s[a]=arguments[a];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:UP(s,c);return(o-=l.length)<n?DP(e,t,jP,i.placeholder,void 0,s,l,void 0,void 0,n-o):wN(this&&this!==ct&&this instanceof i?r:e,this,s)}};const zP=function(e,t,n,r){var i=1&t,o=tP(e);return function t(){for(var s=-1,a=arguments.length,c=-1,l=r.length,u=Array(l+a),h=this&&this!==ct&&this instanceof t?o:e;++c<l;)u[c]=r[c];for(;a--;)u[c++]=arguments[++s];return wN(h,i?n:this,u)}};var BP="__lodash_placeholder__",qP=128,KP=Math.min;const GP=function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=r==qP&&8==n||r==qP&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var a=t[3];if(a){var c=e[3];e[3]=c?iP(c,a,t[4]):a,e[4]=c?UP(e[3],BP):t[4]}return(a=t[5])&&(c=e[5],e[5]=c?sP(c,a,t[6]):a,e[6]=c?UP(e[5],BP):t[6]),(a=t[7])&&(e[7]=a),r&qP&&(e[8]=null==e[8]?t[8]:KP(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e};var HP=/\s/;const WP=function(e){for(var t=e.length;t--&&HP.test(e.charAt(t)););return t};var QP=/^\s+/;const JP=function(e){return e?e.slice(0,WP(e)+1).replace(QP,""):e};var $P=/^[-+]0x[0-9a-f]+$/i,YP=/^0b[01]+$/i,XP=/^0o[0-7]+$/i,ZP=parseInt;const eR=function(e){if("number"==typeof e)return e;if(Lr(e))return NaN;if(wt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=wt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=JP(e);var n=YP.test(e);return n||XP.test(e)?ZP(e.slice(2),n?2:8):$P.test(e)?NaN:+e};var tR=1/0;const nR=function(e){return e?(e=eR(e))===tR||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};const rR=function(e){var t=nR(e),n=t%1;return t===t?n?t-n:t:0};var iR=Math.max;const oR=function(e,t,n,r,i,o,s,a){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var l=r?r.length:0;if(l||(t&=-97,r=i=void 0),s=void 0===s?s:iR(rR(s),0),a=void 0===a?a:rR(a),l-=i?i.length:0,64&t){var u=r,h=i;r=i=void 0}var d=c?void 0:hP(e),f=[e,t,n,r,i,u,h,o,s,a];if(d&&GP(f,d),e=f[0],t=f[1],n=f[2],r=f[3],i=f[4],!(a=f[9]=void 0===f[9]?c?0:e.length:iR(f[9]-l,0))&&24&t&&(t&=-25),t&&1!=t)p=8==t||16==t?VP(e,t,a):32!=t&&33!=t||i.length?jP.apply(void 0,f):zP(e,t,n,r);else var p=nP(e,t,n);return RP((d?XA:IP)(p,f),e,t)};var sR=RN((function(e,t){var n=UP(t,OP(sR));return oR(e,64,void 0,t,n)}));sR.placeholder={};const aR=sR;var cR=Math.max,lR=Math.min;const uR=function(e,t,n){return e>=lR(t,n)&&e<cR(t,n)};const hR=function(e,t,n){return t=nR(t),void 0===n?(n=t,t=0):n=nR(n),e=eR(e),uR(e,t,n)};const dR=function(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n};const fR=function(e,t,n){var r=yn(e)?UN:dR,i=arguments.length<3;return r(e,ai(t,4),n,i,ui)};var pR=n(90),mR=n.n(pR),gR=n(324),vR=n.n(gR),yR=n(173),wR=n.n(yR);const bR=yR.instance;var _R="object"===typeof document&&null!==document,ER="object"===typeof window&&null!==window&&window.self===window;const IR=function e(){return Ui(e.override)?_R&&ER:e.override};const SR=function(e,t){return Kr(t,(function(t){return e[t]}))};const TR=function(e){return null==e?[]:SR(e,ir(e))};var kR=Math.max;const CR=function(e,t,n,r){e=rr(e)?e:TR(e),n=n&&!r?rR(n):0;var i=e.length;return n<0&&(n=kR(i+n,0)),Mi(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&bi(e,t,n)>-1};const xR=function(e){return"function"==typeof e?e:ri};const NR=function(e,t){return(yn(e)?NP:ui)(e,xR(t))};var AR=["selected","defaultValue","defaultChecked","accept","autoCapitalize","autoComplete","autoCorrect","autoFocus","checked","disabled","enterKeyHint","form","id","inputMode","lang","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","readOnly","required","step","title","type","value"],PR=[].concat(AR,["onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onClick","onContextMenu","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"]),RR=["alt","height","src","srcSet","width","loading"],DR=function(e,t){void 0===t&&(t={});var n=t,r=n.htmlProps,i=void 0===r?PR:r,o=n.includeAria,s=void 0===o||o,a={},c={};return NR(e,(function(e,t){var n=s&&(/^aria-.*$/.test(t)||"role"===t);(CR(i,t)||n?a:c)[t]=e})),[a,c]},OR=function(e,t){"function"!==typeof e?null!==e&&"object"===typeof e&&(e.current=t):e(t)},LR=function(e){return null!==e&&"object"===typeof e&&e.hasOwnProperty("current")},MR=n(904);var FR=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).prevNode=void 0,t}gN(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=s.findDOMNode(this);this.prevNode=e,OR(this.props.innerRef,e)},n.componentDidUpdate=function(e){var t=s.findDOMNode(this);this.prevNode!==t&&(this.prevNode=t,OR(this.props.innerRef,t)),e.innerRef!==this.props.innerRef&&OR(this.props.innerRef,t)},n.componentWillUnmount=function(){OR(this.props.innerRef,null),delete this.prevNode},n.render=function(){return this.props.children},t}(i.Component),UR=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).currentNode=void 0,t.handleRefOverride=function(e){var n=t.props,r=n.children,i=n.innerRef;OR(r.ref,e),OR(i,e),t.currentNode=e},t}gN(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.innerRef!==this.props.innerRef&&OR(this.props.innerRef,this.currentNode)},n.componentWillUnmount=function(){delete this.currentNode},n.render=function(){var e=this.props.children;return i.cloneElement(e,{ref:this.handleRefOverride})},t}(i.Component),jR=["children","innerRef"],VR=function(e){var t=e.children,n=e.innerRef,r=QA(e,jR),o=i.Children.only(t),s=MR.isForwardRef(o)?UR:FR,a=o&&r&&Object.keys(r).length>0?i.cloneElement(o,r):o;return i.createElement(s,{innerRef:n},a)};const zR=function(e){return e&&e.length?e[0]:void 0};const BR=function(e,t){if(fi([t,e],Ui))return!1;if(t.target&&(DN(t.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return DN(t.target,"removeAttribute","data-suir-click-target"),e.contains(t.target);var n=t.clientX,r=t.clientY;if(fi([n,r],Ui))return!1;var i=e.getClientRects();if(!e.offsetWidth||!e.offsetHeight||!i||!i.length)return!1;var o=zR(i),s=o.top,a=o.bottom,c=o.left,l=o.right;return!fi([s,a,c,l],Ui)&&(hR(r,s,a+.001)&&hR(n,c,l+.001))};var qR=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRef=function(e){OR(t.props.innerRef,e)},t}gN(t,e);var n=t.prototype;return n.componentDidMount=function(){DN(this.props,"onMount",null,this.props)},n.componentWillUnmount=function(){DN(this.props,"onUnmount",null,this.props)},n.render=function(){if(!IR())return null;var e=this.props,t=e.children,n=e.mountNode,r=void 0===n?document.body:n;return(0,s.createPortal)(i.createElement(VR,{innerRef:this.handleRef},t),r)},t}(i.Component);qR.handledProps=["children","innerRef","mountNode","onMount","onUnmount"],qR.propTypes={};const KR=qR;var GR=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).contentRef=i.createRef(),t.triggerRef=i.createRef(),t.latestDocumentMouseDownEvent=null,t.handleDocumentMouseDown=function(e){t.latestDocumentMouseDownEvent=e},t.handleDocumentClick=function(e){var n=t.props.closeOnDocumentClick,r=t.latestDocumentMouseDownEvent;t.latestDocumentMouseDownEvent=null,!t.contentRef.current||BR(t.triggerRef.current,e)||r&&BR(t.contentRef.current,r)||BR(t.contentRef.current,e)||n&&t.close(e)},t.handleEscape=function(e){t.props.closeOnEscape&&mR().getCode(e)===mR().Escape&&t.close(e)},t.handlePortalMouseLeave=function(e){var n=t.props,r=n.closeOnPortalMouseLeave,i=n.mouseLeaveDelay;r&&e.target===t.contentRef.current&&(t.mouseLeaveTimer=t.closeWithTimeout(e,i))},t.handlePortalMouseEnter=function(){t.props.closeOnPortalMouseLeave&&clearTimeout(t.mouseLeaveTimer)},t.handleTriggerBlur=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerBlur,o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];DN.apply(void 0,[r,"props.onBlur",e].concat(s));var c=e.relatedTarget||document.activeElement,l=DN(t.contentRef.current,"contains",c);i&&!l&&t.close(e)},t.handleTriggerClick=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerClick,o=n.openOnTriggerClick,s=t.state.open,a=arguments.length,c=new Array(a>1?a-1:0),l=1;l<a;l++)c[l-1]=arguments[l];DN.apply(void 0,[r,"props.onClick",e].concat(c)),s&&i?t.close(e):!s&&o&&t.open(e)},t.handleTriggerFocus=function(e){for(var n=t.props,r=n.trigger,i=n.openOnTriggerFocus,o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];DN.apply(void 0,[r,"props.onFocus",e].concat(s)),i&&t.open(e)},t.handleTriggerMouseLeave=function(e){clearTimeout(t.mouseEnterTimer);for(var n=t.props,r=n.trigger,i=n.closeOnTriggerMouseLeave,o=n.mouseLeaveDelay,s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];DN.apply(void 0,[r,"props.onMouseLeave",e].concat(a)),i&&(t.mouseLeaveTimer=t.closeWithTimeout(e,o))},t.handleTriggerMouseEnter=function(e){clearTimeout(t.mouseLeaveTimer);for(var n=t.props,r=n.trigger,i=n.mouseEnterDelay,o=n.openOnTriggerMouseEnter,s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];DN.apply(void 0,[r,"props.onMouseEnter",e].concat(a)),o&&(t.mouseEnterTimer=t.openWithTimeout(e,i))},t.open=function(e){DN(t.props,"onOpen",e,Pe({},t.props,{open:!0})),t.setState({open:!0})},t.openWithTimeout=function(e,n){var r=Pe({},e);return setTimeout((function(){return t.open(r)}),n||0)},t.close=function(e){t.setState({open:!1}),DN(t.props,"onClose",e,Pe({},t.props,{open:!1}))},t.closeWithTimeout=function(e,n){var r=Pe({},e);return setTimeout((function(){return t.close(r)}),n||0)},t.handleMount=function(){DN(t.props,"onMount",null,t.props)},t.handleUnmount=function(){DN(t.props,"onUnmount",null,t.props)},t.handleTriggerRef=function(e){t.triggerRef.current=e,OR(t.props.triggerRef,e)},t}gN(t,e);var n=t.prototype;return n.componentWillUnmount=function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)},n.render=function(){var e=this.props,t=e.children,n=e.eventPool,r=e.mountNode,o=e.trigger,s=this.state.open;return i.createElement(i.Fragment,null,s&&i.createElement(i.Fragment,null,i.createElement(KR,{innerRef:this.contentRef,mountNode:r,onMount:this.handleMount,onUnmount:this.handleUnmount},t),i.createElement(wR(),{name:"mouseleave",on:this.handlePortalMouseLeave,pool:n,target:this.contentRef}),i.createElement(wR(),{name:"mouseenter",on:this.handlePortalMouseEnter,pool:n,target:this.contentRef}),i.createElement(wR(),{name:"mousedown",on:this.handleDocumentMouseDown,pool:n}),i.createElement(wR(),{name:"click",on:this.handleDocumentClick,pool:n}),i.createElement(wR(),{name:"keydown",on:this.handleEscape,pool:n})),o&&i.createElement(VR,{innerRef:this.handleTriggerRef},i.cloneElement(o,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))},t}(LN);GR.handledProps=["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"],GR.propTypes={},GR.defaultProps={closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0},GR.autoControlledProps=["open"],GR.Inner=KR;const HR=GR;function WR(e){var t=e.blurring,n=e.className,r=e.children,o=e.content,s=e.dimmed,a=De(Me(t,"blurring"),Me(s,"dimmed"),"dimmable",n),c=qe(WR,e),l=Ke(WR,e);return i.createElement(l,Pe({},c,{className:a}),pi(r)?o:r)}WR.handledProps=["as","blurring","children","className","content","dimmed"],WR.propTypes={};const QR=WR;var JR=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).containerRef=(0,i.createRef)(),t.contentRef=(0,i.createRef)(),t.handleClick=function(e){var n=t.contentRef.current;DN(t.props,"onClick",e,t.props),n&&n!==e.target&&BR(n,e)||DN(t.props,"onClickOutside",e,t.props)},t}gN(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.active;this.toggleStyles(e)},n.componentDidUpdate=function(e){var t=this.props.active;e.active!==t&&this.toggleStyles(t)},n.toggleStyles=function(e){var t=this.containerRef.current;t&&t.style&&(e?t.style.setProperty("display","flex","important"):t.style.removeProperty("display"))},n.render=function(){var e=this.props,n=e.active,r=e.children,o=e.className,s=e.content,a=e.disabled,c=e.inverted,l=e.page,u=e.simple,h=e.verticalAlign,d=De("ui",Me(n,"active transition visible"),Me(a,"disabled"),Me(c,"inverted"),Me(l,"page"),Me(u,"simple"),ze(h),"dimmer",o),f=qe(t,this.props),p=Ke(t,this.props),m=pi(r)?s:r;return i.createElement(VR,{innerRef:this.containerRef},i.createElement(p,Pe({},f,{className:d,onClick:this.handleClick}),m&&i.createElement("div",{className:"content",ref:this.contentRef},m)))},t}(i.Component);JR.handledProps=["active","as","children","className","content","disabled","inverted","onClick","onClickOutside","page","simple","verticalAlign"],JR.propTypes={};var $R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePortalMount=function(){IR()&&(document.body.classList.add("dimmed"),document.body.classList.add("dimmable"))},t.handlePortalUnmount=function(){IR()&&(document.body.classList.remove("dimmed"),document.body.classList.remove("dimmable"))},t}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.page,o=qe(t,this.props);return r?i.createElement(HR,{closeOnEscape:!1,closeOnDocumentClick:!1,onMount:this.handlePortalMount,onUnmount:this.handlePortalUnmount,open:n,openOnTriggerClick:!1},i.createElement(JR,Pe({},o,{active:n,page:r}))):i.createElement(JR,Pe({},o,{active:n,page:r}))},t}(i.Component);function YR(e){var t=e.children,n=e.className,r=e.content,o=e.size,s=De("ui",o,n,"images"),a=qe(YR,e),c=Ke(YR,e);return i.createElement(c,Pe({},a,{className:s}),pi(t)?r:t)}$R.handledProps=["active","page"],$R.propTypes={},$R.Dimmable=QR,$R.Inner=JR,$R.create=Vi($R,(function(e){return{content:e}})),YR.handledProps=["as","children","className","content","size"],YR.propTypes={};const XR=YR;function ZR(e){var t=e.avatar,n=e.bordered,r=e.centered,o=e.children,s=e.circular,a=e.className,c=e.content,l=e.dimmer,u=e.disabled,h=e.floated,d=e.fluid,f=e.hidden,p=e.href,m=e.inline,g=e.label,v=e.rounded,y=e.size,w=e.spaced,b=e.verticalAlign,_=e.wrapped,E=e.ui,I=De(Me(E,"ui"),y,Me(t,"avatar"),Me(n,"bordered"),Me(s,"circular"),Me(r,"centered"),Me(u,"disabled"),Me(d,"fluid"),Me(f,"hidden"),Me(m,"inline"),Me(v,"rounded"),Ue(w,"spaced"),Fe(h,"floated"),ze(b),"image",a),S=qe(ZR,e),T=DR(S,{htmlProps:RR}),k=T[0],C=T[1],x=Ke(ZR,e,(function(){if(!Ui(l)||!Ui(g)||!Ui(_)||!pi(o))return"div"}));return pi(o)?pi(c)?"img"===x?i.createElement(x,Pe({},C,k,{className:I})):i.createElement(x,Pe({},C,{className:I,href:p}),$R.create(l,{autoGenerateKey:!1}),oD.create(g,{autoGenerateKey:!1}),i.createElement("img",k)):i.createElement(x,Pe({},S,{className:I}),c):i.createElement(x,Pe({},S,{className:I}),o)}ZR.handledProps=["as","avatar","bordered","centered","children","circular","className","content","dimmer","disabled","floated","fluid","hidden","href","inline","label","rounded","size","spaced","ui","verticalAlign","wrapped"],ZR.Group=XR,ZR.propTypes={},ZR.defaultProps={as:"img",ui:!0},ZR.create=Vi(ZR,(function(e){return{src:e}}));const eD=ZR;function tD(e){var t=e.children,n=e.className,r=e.content,o=De("detail",n),s=qe(tD,e),a=Ke(tD,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}tD.handledProps=["as","children","className","content"],tD.propTypes={},tD.create=Vi(tD,(function(e){return{content:e}}));const nD=tD;function rD(e){var t=e.children,n=e.circular,r=e.className,o=e.color,s=e.content,a=e.size,c=e.tag,l=De("ui",o,a,Me(n,"circular"),Me(c,"tag"),"labels",r),u=qe(rD,e),h=Ke(rD,e);return i.createElement(h,Pe({},u,{className:l}),pi(t)?s:t)}rD.handledProps=["as","children","circular","className","color","content","size","tag"],rD.propTypes={};const iD=rD;var oD=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t.handleIconOverrides=function(e){return{onClick:function(n){DN(e,"onClick",n),DN(t.props,"onRemove",n,t.props)}}},t}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.attached,o=e.basic,s=e.children,a=e.circular,c=e.className,l=e.color,u=e.content,h=e.corner,d=e.detail,f=e.empty,p=e.floating,m=e.horizontal,g=e.icon,v=e.image,y=e.onRemove,w=e.pointing,b=e.prompt,_=e.removeIcon,E=e.ribbon,I=e.size,S=e.tag,T=De("ui",l,(!0===w?"pointing":("left"===w||"right"===w)&&w+" pointing")||("above"===w||"below"===w)&&"pointing "+w,I,Me(n,"active"),Me(o,"basic"),Me(a,"circular"),Me(f,"empty"),Me(p,"floating"),Me(m,"horizontal"),Me(!0===v,"image"),Me(b,"prompt"),Me(S,"tag"),Ue(h,"corner"),Ue(E,"ribbon"),Fe(r,"attached"),"label",c),k=qe(t,this.props),C=Ke(t,this.props);if(!pi(s))return i.createElement(C,Pe({},k,{className:T,onClick:this.handleClick}),s);var x=ON(_)?"delete":_;return i.createElement(C,Pe({className:T,onClick:this.handleClick},k),BA.create(g,{autoGenerateKey:!1}),"boolean"!==typeof v&&eD.create(v,{autoGenerateKey:!1}),u,nD.create(d,{autoGenerateKey:!1}),y&&BA.create(x,{autoGenerateKey:!1,overrideProps:this.handleIconOverrides}))},t}(i.Component);function sD(e){var t=e.children,n=e.className,r=e.content,o=e.hidden,s=e.visible,a=De(Me(s,"visible"),Me(o,"hidden"),"content",n),c=qe(sD,e),l=Ke(sD,e);return i.createElement(l,Pe({},c,{className:a}),pi(t)?r:t)}oD.handledProps=["active","as","attached","basic","children","circular","className","color","content","corner","detail","empty","floating","horizontal","icon","image","onClick","onRemove","pointing","prompt","removeIcon","ribbon","size","tag"],oD.propTypes={},oD.Detail=nD,oD.Group=iD,oD.create=Vi(oD,(function(e){return{content:e}})),sD.handledProps=["as","children","className","content","hidden","visible"],sD.propTypes={};const aD=sD;function cD(e){var t=e.attached,n=e.basic,r=e.buttons,o=e.children,s=e.className,a=e.color,c=e.compact,l=e.content,u=e.floated,h=e.fluid,d=e.icon,f=e.inverted,p=e.labeled,m=e.negative,g=e.positive,v=e.primary,y=e.secondary,w=e.size,b=e.toggle,_=e.vertical,E=e.widths,I=De("ui",a,w,Me(n,"basic"),Me(c,"compact"),Me(h,"fluid"),Me(d,"icon"),Me(f,"inverted"),Me(p,"labeled"),Me(m,"negative"),Me(g,"positive"),Me(v,"primary"),Me(y,"secondary"),Me(b,"toggle"),Me(_,"vertical"),Ue(t,"attached"),Fe(u,"floated"),Be(E),"buttons",s),S=qe(cD,e),T=Ke(cD,e);return Ui(r)?i.createElement(T,Pe({},S,{className:I}),pi(o)?l:o):i.createElement(T,Pe({},S,{className:I}),yN(r,(function(e){return fD.create(e)})))}cD.handledProps=["as","attached","basic","buttons","children","className","color","compact","content","floated","fluid","icon","inverted","labeled","negative","positive","primary","secondary","size","toggle","vertical","widths"],cD.propTypes={};const lD=cD;function uD(e){var t=e.className,n=e.text,r=De("or",t),o=qe(uD,e),s=Ke(uD,e);return i.createElement(s,Pe({},o,{className:r,"data-text":n}))}uD.handledProps=["as","className","text"],uD.propTypes={};const hD=uD;var dD=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).ref=(0,i.createRef)(),t.computeElementType=function(){var e=t.props,n=e.attached,r=e.label;if(!Ui(n)||!Ui(r))return"div"},t.computeTabIndex=function(e){var n=t.props,r=n.disabled,i=n.tabIndex;return Ui(i)?r?-1:"div"===e?0:void 0:i},t.focus=function(e){return DN(t.ref.current,"focus",e)},t.handleClick=function(e){t.props.disabled?e.preventDefault():DN(t.props,"onClick",e,t.props)},t.hasIconClass=function(){var e=t.props,n=e.labelPosition,r=e.children,i=e.content,o=e.icon;return!0===o||o&&(n||pi(r)&&Ui(i))},t}gN(t,e);var n=t.prototype;return n.computeButtonAriaRole=function(e){var t=this.props.role;return Ui(t)?"button"!==e?"button":void 0:t},n.render=function(){var e=this.props,n=e.active,r=e.animated,o=e.attached,s=e.basic,a=e.children,c=e.circular,l=e.className,u=e.color,h=e.compact,d=e.content,f=e.disabled,p=e.floated,m=e.fluid,g=e.icon,v=e.inverted,y=e.label,w=e.labelPosition,b=e.loading,_=e.negative,E=e.positive,I=e.primary,S=e.secondary,T=e.size,k=e.toggle,C=e.type,x=De(u,T,Me(n,"active"),Me(s,"basic"),Me(c,"circular"),Me(h,"compact"),Me(m,"fluid"),Me(this.hasIconClass(),"icon"),Me(v,"inverted"),Me(b,"loading"),Me(_,"negative"),Me(E,"positive"),Me(I,"primary"),Me(S,"secondary"),Me(k,"toggle"),Ue(r,"animated"),Ue(o,"attached")),N=De(Ue(w||!!y,"labeled")),A=De(Me(f,"disabled"),Fe(p,"floated")),P=qe(t,this.props),R=Ke(t,this.props,this.computeElementType),D=this.computeTabIndex(R);if(!Ui(y)){var O=De("ui",x,"button",l),L=De("ui",N,"button",l,A),M=oD.create(y,{defaultProps:{basic:!0,pointing:"left"===w?"right":"left"},autoGenerateKey:!1});return i.createElement(R,Pe({},P,{className:L,onClick:this.handleClick}),"left"===w&&M,i.createElement(VR,{innerRef:this.ref},i.createElement("button",{className:O,"aria-pressed":k?!!n:void 0,disabled:f,type:C,tabIndex:D},BA.create(g,{autoGenerateKey:!1})," ",d)),("right"===w||!w)&&M)}var F=De("ui",x,A,N,"button",l),U=!pi(a),j=this.computeButtonAriaRole(R);return i.createElement(VR,{innerRef:this.ref},i.createElement(R,Pe({},P,{className:F,"aria-pressed":k?!!n:void 0,disabled:f&&"button"===R||void 0,onClick:this.handleClick,role:j,type:C,tabIndex:D}),U&&a,!U&&BA.create(g,{autoGenerateKey:!1}),!U&&d))},t}(i.Component);dD.handledProps=["active","animated","as","attached","basic","children","circular","className","color","compact","content","disabled","floated","fluid","icon","inverted","label","labelPosition","loading","negative","onClick","positive","primary","role","secondary","size","tabIndex","toggle","type"],dD.propTypes={},dD.defaultProps={as:"button"},dD.Content=aD,dD.Group=lD,dD.Or=hD,dD.create=Vi(dD,(function(e){return{content:e}}));const fD=dD;var pD=function(e){function t(){for(var n,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=e.call.apply(e,[this].concat(o))||this).inputRef=(0,i.createRef)(),n.computeIcon=function(){var e=n.props,t=e.loading,r=e.icon;return Ui(r)?t?"spinner":void 0:r},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return Ui(r)?t?-1:void 0:r},n.focus=function(e){return n.inputRef.current.focus(e)},n.select=function(){return n.inputRef.current.select()},n.handleChange=function(e){var t=Xr(e,"target.value");DN(n.props,"onChange",e,Pe({},n.props,{value:t}))},n.handleChildOverrides=function(e,t){return Pe({},t,e.props,{ref:function(t){OR(e.ref,t),n.inputRef.current=t}})},n.partitionProps=function(){var e=n.props,r=e.disabled,i=e.type,o=n.computeTabIndex(),s=qe(t,n.props),a=DR(s),c=a[0],l=a[1];return[Pe({},c,{disabled:r,type:i,tabIndex:o,onChange:n.handleChange,ref:n.inputRef}),l]},n}return gN(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.action,o=n.actionPosition,s=n.children,a=n.className,c=n.disabled,l=n.error,u=n.fluid,h=n.focus,d=n.icon,f=n.iconPosition,p=n.input,m=n.inverted,g=n.label,v=n.labelPosition,y=n.loading,w=n.size,b=n.transparent,_=n.type,E=De("ui",w,Me(c,"disabled"),Me(l,"error"),Me(u,"fluid"),Me(h,"focus"),Me(m,"inverted"),Me(y,"loading"),Me(b,"transparent"),Fe(o,"action")||Me(r,"action"),Fe(f,"icon")||Me(d||y,"icon"),Fe(v,"labeled")||Me(g,"labeled"),"input",a),I=Ke(t,this.props),S=this.partitionProps(),T=S[0],k=S[1];if(!pi(s)){var C=yN(i.Children.toArray(s),(function(t){return"input"!==t.type?t:(0,i.cloneElement)(t,e.handleChildOverrides(t,T))}));return i.createElement(I,Pe({},k,{className:E}),C)}var x=fD.create(r,{autoGenerateKey:!1}),N=oD.create(g,{defaultProps:{className:De("label",CR(v,"corner")&&v)},autoGenerateKey:!1});return i.createElement(I,Pe({},k,{className:E}),"left"===o&&x,"right"!==v&&N,Bi(p||_,{defaultProps:T,autoGenerateKey:!1}),BA.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==o&&x,"right"===v&&N)},t}(i.Component);pD.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],pD.propTypes={},pD.defaultProps={type:"text"},pD.create=Vi(pD,(function(e){return{type:e}}));const mD=pD;function gD(e){var t=e.categoryContent,n=e.resultsContent;return i.createElement(i.Fragment,null,i.createElement("div",{className:"name"},t),i.createElement("div",{className:"results"},n))}gD.handledProps=["categoryContent","resultsContent"],gD.propTypes={};const vD=gD;function yD(e){var t=e.active,n=e.children,r=e.className,o=e.content,s=e.layoutRenderer,a=e.renderer,c=De(Me(t,"active"),"category",r),l=qe(yD,e),u=Ke(yD,e),h=a(e),d=pi(n)?o:n;return i.createElement(u,Pe({},l,{className:c}),s({categoryContent:h,resultsContent:d}))}yD.handledProps=["active","as","children","className","content","layoutRenderer","name","renderer","results"],yD.defaultProps={layoutRenderer:vD,renderer:function(e){return e.name}},yD.propTypes={};const wD=yD;var bD=function(e){var t=e.image,n=e.price,r=e.title,o=e.description;return[t&&i.createElement("div",{key:"image",className:"image"},zi(t,{autoGenerateKey:!1})),i.createElement("div",{key:"content",className:"content"},n&&i.createElement("div",{className:"price"},n),r&&i.createElement("div",{className:"title"},r),o&&i.createElement("div",{className:"description"},o))]};bD.handledProps=[];var _D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.className,o=e.renderer,s=De(Me(n,"active"),"result",r),a=qe(t,this.props),c=Ke(t,this.props);return i.createElement(c,Pe({},a,{className:s,onClick:this.handleClick}),o(this.props))},t}(i.Component);function ED(e){var t=e.children,n=e.className,r=e.content,o=De("results transition",n),s=qe(ED,e),a=Ke(ED,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}_D.handledProps=["active","as","className","content","description","id","image","onClick","price","renderer","title"],_D.propTypes={},_D.defaultProps={renderer:bD},ED.handledProps=["as","children","className","content"],ED.propTypes={};const ID=ED;var SD=function(e){var t=e.input;return ON(t)?Pe({},e,{input:{className:"prompt"}}):Oi(t)?Pe({},e,{input:Pe({},t,{className:De(t.className,"prompt")})}):e},TD=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).handleResultSelect=function(e,n){DN(t.props,"onResultSelect",e,Pe({},t.props,{result:n}))},t.handleSelectionChange=function(e){var n=t.getSelectedResult();DN(t.props,"onSelectionChange",e,Pe({},t.props,{result:n}))},t.closeOnEscape=function(e){mR().getCode(e)===mR().Escape&&(e.preventDefault(),t.close())},t.moveSelectionOnKeyDown=function(e){switch(mR().getCode(e)){case mR().ArrowDown:e.preventDefault(),t.moveSelectionBy(e,1);break;case mR().ArrowUp:e.preventDefault(),t.moveSelectionBy(e,-1)}},t.selectItemOnEnter=function(e){if(mR().getCode(e)===mR().Enter){var n=t.getSelectedResult();n&&(e.preventDefault(),t.setValue(n.title),t.handleResultSelect(e,n),t.close())}},t.closeOnDocumentClick=function(e){t.close()},t.handleMouseDown=function(e){t.isMouseDown=!0,DN(t.props,"onMouseDown",e,t.props),bR.sub("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,bR.unsub("mouseup",t.handleDocumentMouseUp)},t.handleInputClick=function(e){e.nativeEvent.stopImmediatePropagation(),t.tryOpen()},t.handleItemClick=function(e,n){var r=n.id,i=t.getSelectedResult(r);e.nativeEvent.stopImmediatePropagation(),t.setValue(i.title),t.handleResultSelect(e,i),t.close()},t.handleItemMouseDown=function(e){e.preventDefault()},t.handleFocus=function(e){DN(t.props,"onFocus",e,t.props),t.setState({focus:!0})},t.handleBlur=function(e){DN(t.props,"onBlur",e,t.props),t.setState({focus:!1})},t.handleSearchChange=function(e){e.stopPropagation();var n=t.props.minCharacters,r=t.state.open,i=e.target.value;DN(t.props,"onSearchChange",e,Pe({},t.props,{value:i})),i.length<n?t.close():r||t.tryOpen(i),t.setValue(i)},t.getFlattenedResults=function(){var e=t.props,n=e.category,r=e.results;return n?fR(r,(function(e,t){return e.concat(t.results)}),[]):r},t.getSelectedResult=function(e){void 0===e&&(e=t.state.selectedIndex);var n=t.getFlattenedResults();return Xr(n,e)},t.setValue=function(e){var n=t.props.selectFirstResult;t.setState({value:e,selectedIndex:n?0:-1})},t.moveSelectionBy=function(e,n){var r=t.state.selectedIndex,i=t.getFlattenedResults().length-1,o=r+n;o>i?o=0:o<0&&(o=i),t.setState({selectedIndex:o}),t.scrollSelectedItemIntoView(),t.handleSelectionChange(e)},t.scrollSelectedItemIntoView=function(){if(IR()){var e=document.querySelector(".ui.search.active.visible .results.visible");if(e){var t=e.querySelector(".result.active");if(t){var n=t.offsetTop<e.scrollTop,r=t.offsetTop+t.clientHeight>e.scrollTop+e.clientHeight;n?e.scrollTop=t.offsetTop:r&&(e.scrollTop=t.offsetTop+t.clientHeight-e.clientHeight)}}}},t.tryOpen=function(e){void 0===e&&(e=t.state.value);var n=t.props.minCharacters;e.length<n||t.open()},t.open=function(){t.setState({open:!0})},t.close=function(){t.setState({open:!1})},t.renderSearchInput=function(e){var n=t.props,r=n.icon,i=n.input,o=n.placeholder,s=t.state.value;return mD.create(i,{autoGenerateKey:!1,defaultProps:Pe({},e,{autoComplete:"off",icon:r,onChange:t.handleSearchChange,onClick:t.handleInputClick,tabIndex:"0",value:s,placeholder:o}),overrideProps:SD})},t.renderNoResults=function(){var e=t.props,n=e.noResultsDescription,r=e.noResultsMessage;return i.createElement("div",{className:"message empty"},i.createElement("div",{className:"header"},r),n&&i.createElement("div",{className:"description"},n))},t.renderResult=function(e,n,r,o){var s=e.childKey,a=QA(e,["childKey"]);void 0===o&&(o=0);var c=t.props.resultRenderer,l=t.state.selectedIndex,u=n+o;return i.createElement(_D,Pe({key:null!=s?s:a.id||a.title,active:l===u,onClick:t.handleItemClick,onMouseDown:t.handleItemMouseDown,renderer:c},a,{id:u}))},t.renderResults=function(){var e=t.props.results;return yN(e,t.renderResult)},t.renderCategories=function(){var e=t.props,n=e.categoryLayoutRenderer,r=e.categoryRenderer,o=e.results,s=t.state.selectedIndex,a=0;return yN(o,(function(e){var o=e.childKey,c=QA(e,["childKey"]),l=Pe({key:null!=o?o:c.name,active:hR(s,a,a+c.results.length),layoutRenderer:n,renderer:r},c),u=aR(t.renderResult,a);return a+=c.results.length,i.createElement(wD,l,c.results.map(u))}))},t.renderMenuContent=function(){var e=t.props,n=e.category,r=e.showNoResults,i=e.results;return $A(i)?r?t.renderNoResults():null:n?t.renderCategories():t.renderResults()},t.renderResultsMenu=function(){var e=t.state.open?"visible":"",n=t.renderMenuContent();if(n)return i.createElement(ID,{className:e},n)},t}gN(t,e),t.getAutoControlledStateFromProps=function(e,t){if("undefined"!==typeof t.prevValue&&vR()(t.prevValue,t.value))return{prevValue:t.value};var n=e.selectFirstResult?0:-1;return{prevValue:t.value,selectedIndex:n}};var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!vR()(e,this.props)||!vR()(t,this.state)},n.componentDidUpdate=function(e,t){!t.focus&&this.state.focus?(this.isMouseDown||this.tryOpen(),this.state.open&&bR.sub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.focus&&!this.state.focus&&(this.isMouseDown||this.close(),bR.unsub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])),!t.open&&this.state.open?(this.open(),bR.sub("click",this.closeOnDocumentClick),bR.sub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.open&&!this.state.open&&(this.close(),bR.unsub("click",this.closeOnDocumentClick),bR.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter]))},n.componentWillUnmount=function(){bR.unsub("click",this.closeOnDocumentClick),bR.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])},n.render=function(){var e=this.state,n=e.searchClasses,r=e.focus,o=e.open,s=this.props,a=s.aligned,c=s.category,l=s.className,u=s.fluid,h=s.loading,d=s.size,f=De("ui",o&&"active visible",d,n,Me(c,"category"),Me(r,"focus"),Me(u,"fluid"),Me(h,"loading"),Fe(a,"aligned"),"search",l),p=qe(t,this.props),m=Ke(t,this.props),g=DR(p,{htmlProps:AR}),v=g[0],y=g[1];return i.createElement(m,Pe({},y,{className:f,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown}),this.renderSearchInput(v),this.renderResultsMenu())},t}(LN);TD.handledProps=["aligned","as","category","categoryLayoutRenderer","categoryRenderer","className","defaultOpen","defaultValue","fluid","icon","input","loading","minCharacters","noResultsDescription","noResultsMessage","onBlur","onFocus","onMouseDown","onResultSelect","onSearchChange","onSelectionChange","open","placeholder","resultRenderer","results","selectFirstResult","showNoResults","size","value"],TD.propTypes={},TD.defaultProps={icon:"search",input:"text",minCharacters:1,noResultsMessage:"No results found.",showNoResults:!0},TD.autoControlledProps=["open","value"],TD.Category=wD,TD.Result=_D,TD.Results=ID;var kD=n(651);const CD=n.n(kD)()("65OAN0Y5F8","107f126e7ff48bbd211f9c03abe30209").initIndex("gameforum");var xD=n(579);const ND=function(e){let{user:t}=e;const n=ee(),[r,o]=(0,i.useState)(""),[s,a]=(0,i.useState)([]);return(0,xD.jsxs)(WA,{children:[(0,xD.jsx)(WA.Item,{as:xe,to:"/",children:"\u554a\u54c8\u59c6\u7279\u904a\u6232\u8ad6\u58c7"}),(0,xD.jsx)(WA.Item,{as:xe,to:"/gamenews",children:"\u904a\u6232"}),(0,xD.jsx)(WA.Item,{as:xe,to:"/posts",children:"\u8a0e\u8ad6"}),(0,xD.jsxs)(WA.Menu,{position:"right",children:[(0,xD.jsx)(WA.Item,{children:(0,xD.jsx)(TD,{value:r,onSearchChange:function(e,t){let{value:n}=t;o(n),CD.search(n).then((e=>{const t=e.hits.map((e=>({title:e.title,description:e.description,id:e.objectID})));a(t)}))},results:s,noResultsMessage:"\u627e\u4e0d\u5230\u76f8\u95dc\u6587\u7ae0",onResultSelect:function(e,t){let{result:r}=t;n("/post/".concat(r.id))}})}),t?(0,xD.jsxs)(xD.Fragment,{children:[(0,xD.jsx)(WA.Item,{as:xe,to:"/new-post",children:"\u767c\u8868\u6587\u7ae0"}),(0,xD.jsx)(WA.Item,{as:xe,to:"/my/posts",children:"\u6703\u54e1"}),(0,xD.jsx)(WA.Item,{onClick:()=>pN.auth().signOut(),children:"\u767b\u51fa"})]}):(0,xD.jsx)(WA.Item,{as:xe,to:"/signin",children:"\u8a3b\u518a/\u767b\u5165"})]})]})};const AD=function(e,t,n){"__proto__"==t&&CN?CN(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var PD=Object.prototype.hasOwnProperty;const RD=function(e,t,n){var r=e[t];PD.call(e,t)&&We(r,n)&&(void 0!==n||t in e)||AD(e,t,n)};const DD=function(e,t,n,r){if(!wt(e))return e;for(var i=-1,o=(t=Jr(t,e)).length,s=o-1,a=e;null!=a&&++i<o;){var c=$r(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var u=a[c];void 0===(l=r?r(u,c,a):void 0)&&(l=wt(u)?u:Un(t[i+1])?[]:{})}RD(a,c,l),a=a[c]}return e};const OD=function(e,t,n){return null==e?e:DD(e,t,n)};var LD=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).inputRef=(0,i.createRef)(),t.labelRef=(0,i.createRef)(),t.canToggle=function(){var e=t.props,n=e.disabled,r=e.radio,i=e.readOnly,o=t.state.checked;return!n&&!i&&!(r&&o)},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return Ui(r)?n?-1:0:r},t.handleClick=function(e){var n=t.props.id,r=t.state,i=r.checked,o=r.indeterminate,s=DN(t.inputRef.current,"contains",e.target),a=DN(t.labelRef.current,"contains",e.target),c=!a&&!s,l=!Ui(n);a&&l||DN(t.props,"onClick",e,Pe({},t.props,{checked:!i,indeterminate:!!o})),t.isClickFromMouse&&(t.isClickFromMouse=!1,a&&!l&&t.handleChange(e),c&&t.handleChange(e),a&&l&&e.stopPropagation())},t.handleChange=function(e){var n=t.state.checked;t.canToggle()&&(DN(t.props,"onChange",e,Pe({},t.props,{checked:!n,indeterminate:!1})),t.setState({checked:!n,indeterminate:!1}))},t.handleMouseDown=function(e){var n=t.state,r=n.checked,i=n.indeterminate;DN(t.props,"onMouseDown",e,Pe({},t.props,{checked:!!r,indeterminate:!!i})),e.defaultPrevented||DN(t.inputRef.current,"focus"),e.preventDefault()},t.handleMouseUp=function(e){var n=t.state,r=n.checked,i=n.indeterminate;t.isClickFromMouse=!0,DN(t.props,"onMouseUp",e,Pe({},t.props,{checked:!!r,indeterminate:!!i}))},t.setIndeterminate=function(){var e=t.state.indeterminate;OD(t.inputRef,"current.indeterminate",!!e)},t}gN(t,e);var n=t.prototype;return n.componentDidMount=function(){this.setIndeterminate()},n.componentDidUpdate=function(){this.setIndeterminate()},n.render=function(){var e=this.props,n=e.className,r=e.disabled,o=e.label,s=e.id,a=e.name,c=e.radio,l=e.readOnly,u=e.slider,h=e.toggle,d=e.type,f=e.value,p=this.state,m=p.checked,g=p.indeterminate,v=De("ui",Me(m,"checked"),Me(r,"disabled"),Me(g,"indeterminate"),Me(Ui(o),"fitted"),Me(c,"radio"),Me(l,"read-only"),Me(u,"slider"),Me(h,"toggle"),"checkbox",n),y=qe(t,this.props),w=Ke(t,this.props),b=DR(y,{htmlProps:AR}),_=b[0],E=b[1],I=qi(o,{defaultProps:{htmlFor:s},autoGenerateKey:!1})||i.createElement("label",{htmlFor:s});return i.createElement(w,Pe({},E,{className:v,onClick:this.handleClick,onChange:this.handleChange,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),i.createElement(VR,{innerRef:this.inputRef},i.createElement("input",Pe({},_,{checked:m,className:"hidden",disabled:r,id:s,name:a,readOnly:!0,tabIndex:this.computeTabIndex(),type:d,value:f}))),i.createElement(VR,{innerRef:this.labelRef},I))},t}(LN);function MD(e){var t=e.slider,n=e.toggle,r=e.type,o=qe(MD,e),s=!(t||n)||void 0;return i.createElement(LD,Pe({},o,{type:r,radio:s,slider:t,toggle:n}))}LD.handledProps=["as","checked","className","defaultChecked","defaultIndeterminate","disabled","fitted","id","indeterminate","label","name","onChange","onClick","onMouseDown","onMouseUp","radio","readOnly","slider","tabIndex","toggle","type","value"],LD.propTypes={},LD.defaultProps={type:"checkbox"},LD.autoControlledProps=["checked","indeterminate"],MD.handledProps=["slider","toggle","type"],MD.propTypes={},MD.defaultProps={type:"radio"};const FD=MD;function UD(e){var t=e.children,n=e.className,r=e.content,o=e.control,s=e.disabled,a=e.error,c=e.inline,l=e.label,u=e.required,h=e.type,d=e.width,f=e.id,p=De(Me(s,"disabled"),Me(a,"error"),Me(c,"inline"),Me(u,"required"),Be(d,"wide"),"field",n),m=qe(UD,e),g=Ke(UD,e),v=Xr(a,"pointing","above"),y=oD.create(a,{autoGenerateKey:!1,defaultProps:{prompt:!0,pointing:v,id:f?f+"-error-message":void 0,role:"alert","aria-atomic":!0}}),w=("below"===v||"right"===v)&&y,b=("above"===v||"left"===v)&&y;if(Ui(o))return Ui(l)?i.createElement(g,Pe({},m,{className:p,id:f}),pi(t)?r:t):i.createElement(g,Pe({},m,{className:p,id:f}),w,qi(l,{autoGenerateKey:!1}),b);var _={"aria-describedby":f&&a?f+"-error-message":null,"aria-invalid":!!a||void 0},E=Pe({},m,{content:r,children:t,disabled:s,required:u,type:h,id:f});return"input"!==o||"checkbox"!==h&&"radio"!==h?o===LD||o===FD?i.createElement(g,{className:p},w,(0,i.createElement)(o,Pe({},_,E,{label:l})),b):i.createElement(g,{className:p},qi(l,{defaultProps:{htmlFor:f},autoGenerateKey:!1}),w,(0,i.createElement)(o,Pe({},_,E)),b):i.createElement(g,{className:p},i.createElement("label",null,w,(0,i.createElement)(o,Pe({},_,E))," ",l,b))}UD.handledProps=["as","children","className","content","control","disabled","error","id","inline","label","required","type","width"],UD.propTypes={};const jD=UD;function VD(e){var t=e.control,n=qe(VD,e),r=Ke(VD,e);return i.createElement(r,Pe({},n,{control:t}))}VD.handledProps=["as","control"],VD.propTypes={},VD.defaultProps={as:jD,control:fD};const zD=VD;function BD(e){var t=e.control,n=qe(BD,e),r=Ke(BD,e);return i.createElement(r,Pe({},n,{control:t}))}BD.handledProps=["as","control"],BD.propTypes={},BD.defaultProps={as:jD,control:LD};const qD=BD;const KD=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i};const GD=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0};const HD=function(e,t){var n=!0;return ui(e,(function(e,r,i){return n=!!t(e,r,i)})),n};const WD=function(e,t,n){var r=yn(e)?GD:HD;return n&&di(e,t,n)&&(t=void 0),r(e,ai(t,3))};const QD=function(e,t,n,r){var i=-1,o=_i,s=!0,a=e.length,c=[],l=t.length;if(!a)return c;n&&(t=Kr(t,Bn(n))),r?(o=Ei,s=!1):t.length>=200&&(o=ln,s=!1,t=new cn(t));e:for(;++i<a;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,s&&h===h){for(var d=l;d--;)if(t[d]===h)continue e;c.push(u)}else o(t,h,r)||c.push(u)}return c};const JD=function(e){return kn(e)&&rr(e)};var $D=RN((function(e,t){return JD(e)?QD(e,t):[]}));const YD=$D;const XD=function(e){return function(t,n,r){var i=Object(t);if(!rr(t)){var o=ai(n,3);t=ir(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:void 0}};var ZD=Math.max;const eO=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:rR(n);return i<0&&(i=ZD(r+i,0)),vi(e,ai(t,3),i)};const tO=XD(eO);const nO=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:rR(t),_N(e,0,(t=r-t)<0?0:t)):[]};const rO=ii("length");var iO="\\ud800-\\udfff",oO="["+iO+"]",sO="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",aO="\\ud83c[\\udffb-\\udfff]",cO="[^"+iO+"]",lO="(?:\\ud83c[\\udde6-\\uddff]){2}",uO="[\\ud800-\\udbff][\\udc00-\\udfff]",hO="(?:"+sO+"|"+aO+")"+"?",dO="[\\ufe0e\\ufe0f]?",fO=dO+hO+("(?:\\u200d(?:"+[cO,lO,uO].join("|")+")"+dO+hO+")*"),pO="(?:"+[cO+sO+"?",sO,lO,uO,oO].join("|")+")",mO=RegExp(aO+"(?="+aO+")|"+pO+fO,"g");const gO=function(e){for(var t=mO.lastIndex=0;mO.test(e);)++t;return t};const vO=function(e){return _A(e)?gO(e):rO(e)};const yO=function(e){if(null==e)return 0;if(rr(e))return Mi(e)?vO(e):e.length;var t=Ir(e);return"[object Map]"==t||"[object Set]"==t?e.size:nr(e).length};var wO=lt?lt.isConcatSpreadable:void 0;const bO=function(e){return yn(e)||Pn(e)||!!(wO&&e&&e[wO])};const _O=function e(t,n,r,i,o){var s=-1,a=t.length;for(r||(r=bO),o||(o=[]);++s<a;){var c=t[s];n>0&&r(c)?n>1?e(c,n-1,r,i,o):vn(o,c):i||(o[o.length]=c)}return o};var EO=RN((function(e,t){return JD(e)?QD(e,_O(t,1,JD,!0)):[]}));const IO=EO;const SO=RN((function(e){return ki(_O(e,1,JD,!0))}));const TO=function(e,t){return Nr(e,t)};const kO=function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=Yr(e,s);n(a,s)&&DD(o,Jr(s,e),a)}return o};const CO=function(e,t){return kO(e,t,(function(t,n){return ti(e,n)}))};const xO=function(e){return(null==e?0:e.length)?_O(e,1):[]};const NO=function(e){return PN(TN(e,void 0,xO),e+"")}((function(e,t){return null==e?{}:CO(e,t)}));var AO=function(e){function t(){return e.apply(this,arguments)||this}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.className,r=e.name,o=De(r,"flag",n),s=qe(t,this.props),a=Ke(t,this.props);return i.createElement(a,Pe({},s,{className:o}))},t}(i.PureComponent);AO.handledProps=["as","className","name"],AO.propTypes={},AO.defaultProps={as:"i"},AO.create=Vi(AO,(function(e){return{name:e}}));const PO=AO;function RO(e){var t=e.className,n=De("divider",t),r=qe(RO,e),o=Ke(RO,e);return i.createElement(o,Pe({},r,{className:n}))}RO.handledProps=["as","className"],RO.propTypes={};const DO=RO;var OO=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){DN(t.props,"onClick",e,t.props)},t}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,o=e.className,s=e.content,a=e.disabled,c=e.description,l=e.flag,u=e.icon,h=e.image,d=e.label,f=e.selected,p=e.text,m=De(Me(n,"active"),Me(a,"disabled"),Me(f,"selected"),"item",o),g=Ui(u)?function(e,t){return fi(i.Children.toArray(e),{type:t})}(r,"DropdownMenu")&&"dropdown":u,v=qe(t,this.props),y=Ke(t,this.props),w={role:"option","aria-disabled":a,"aria-checked":n,"aria-selected":f};if(!pi(r))return i.createElement(y,Pe({},v,w,{className:m,onClick:this.handleClick}),r);var b=PO.create(l,{autoGenerateKey:!1}),_=BA.create(g,{autoGenerateKey:!1}),E=eD.create(h,{autoGenerateKey:!1}),I=oD.create(d,{autoGenerateKey:!1}),S=ji("span",(function(e){return{children:e}}),c,{defaultProps:{className:"description"},autoGenerateKey:!1}),T=ji("span",(function(e){return{children:e}}),pi(s)?p:s,{defaultProps:{className:"text"},autoGenerateKey:!1});return i.createElement(y,Pe({},v,w,{className:m,onClick:this.handleClick}),E,_,b,I,S,T)},t}(i.Component);OO.handledProps=["active","as","children","className","content","description","disabled","flag","icon","image","label","onClick","selected","text","value"],OO.propTypes={},OO.create=Vi(OO,(function(e){return e}));const LO=OO;function MO(e){var t=e.children,n=e.className,r=e.content,o=e.icon,s=De("header",n),a=qe(MO,e),c=Ke(MO,e);return pi(t)?i.createElement(c,Pe({},a,{className:s}),BA.create(o,{autoGenerateKey:!1}),r):i.createElement(c,Pe({},a,{className:s}),t)}MO.handledProps=["as","children","className","content","icon"],MO.propTypes={},MO.create=Vi(MO,(function(e){return{content:e}}));const FO=MO;function UO(e){var t=e.children,n=e.className,r=e.content,o=e.direction,s=e.open,a=e.scrolling,c=De(o,Me(s,"visible"),Me(a,"scrolling"),"menu transition",n),l=qe(UO,e),u=Ke(UO,e);return i.createElement(u,Pe({},l,{className:c}),pi(t)?r:t)}UO.handledProps=["as","children","className","content","direction","open","scrolling"],UO.propTypes={};const jO=UO;var VO=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleChange=function(e){var n=Xr(e,"target.value");DN(t.props,"onChange",e,Pe({},t.props,{value:n}))},t}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.autoComplete,r=e.className,o=e.tabIndex,s=e.type,a=e.value,c=De("search",r),l=qe(t,this.props);return i.createElement("input",Pe({},l,{"aria-autocomplete":"list",autoComplete:n,className:c,onChange:this.handleChange,tabIndex:o,type:s,value:a}))},t}(i.Component);VO.handledProps=["as","autoComplete","className","tabIndex","type","value"],VO.propTypes={},VO.defaultProps={autoComplete:"off",type:"text"},VO.create=Vi(VO,(function(e){return{type:e}}));const zO=VO;function BO(e){var t=e.children,n=e.className,r=e.content,o=De("divider",n),s=qe(BO,e),a=Ke(BO,e);return i.createElement(a,Pe({"aria-atomic":!0,"aria-live":"polite",role:"alert"},s,{className:o}),pi(t)?r:t)}BO.handledProps=["as","children","className","content"],BO.propTypes={},BO.create=Vi(BO,(function(e){return{content:e}}));const qO=BO;var KO=/[\\^$.*+?()[\]{}|]/g,GO=RegExp(KO.source);const HO=function(e){return(e=Qr(e))&&GO.test(e)?e.replace(KO,"\\$&"):e};const WO=function(e,t){var n=[];return ui(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n};const QO=function(e,t){return(yn(e)?bn:WO)(e,ai(t,3))};function JO(e){var t=e.additionLabel,n=e.additionPosition,r=e.allowAdditions,o=e.deburr,s=e.multiple,a=e.options,c=e.search,l=e.searchQuery,u=e.value,h=a;if(s&&(h=QO(h,(function(e){return!CR(u,e.value)}))),c&&l)if(bt(c))h=c(h,l);else{var d=o?BN(l):l,f=new RegExp(HO(d),"i");h=QO(h,(function(e){return f.test(o?BN(e.text):e.text)}))}if(r&&c&&l&&!fi(h,{text:l})){var p={key:"addition",text:[i.isValidElement(t)?i.cloneElement(t,{key:"addition-label"}):t||"",i.createElement("b",{key:"addition-query"},l)],value:l,className:"addition","data-additional":!0};"top"===n?h.unshift(p):h.push(p)}return h}function $O(e){var t,n=e.additionLabel,r=e.additionPosition,i=e.allowAdditions,o=e.deburr,s=e.multiple,a=e.options,c=e.search,l=e.searchQuery,u=e.selectedIndex,h=e.value,d=JO({value:h,options:a,searchQuery:l,additionLabel:n,additionPosition:r,allowAdditions:i,deburr:o,multiple:s,search:c}),f=fR(d,(function(e,t,n){return t.disabled||e.push(n),e}),[]);if(!u||u<0){var p=f[0];t=s?p:eO(d,["value",h])||f[0]}else if(s)t=tO(f,(function(e){return e>=u})),u>=d.length-1&&(t=f[f.length-1]);else{var m=eO(d,["value",h]);t=CR(f,m)?m:void 0}return(!t||t<0)&&(t=f[0]),t}JO.handledProps=[];var YO=function(e,t){return Ui(e)?t:e},XO=function(e){return e?e.map((function(e){return NO(e,["key","value"])})):e};function ZO(e){var t=e.flag,n=e.image,r=e.text;return bt(r)?r:{content:i.createElement(i.Fragment,null,PO.create(t),eD.create(n),r)}}var eL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).searchRef=(0,i.createRef)(),t.sizerRef=(0,i.createRef)(),t.ref=(0,i.createRef)(),t.handleChange=function(e,n){DN(t.props,"onChange",e,Pe({},t.props,{value:n}))},t.closeOnChange=function(e){var n=t.props,r=n.closeOnChange,i=n.multiple;(ON(r)?!i:r)&&t.close(e,Ii)},t.closeOnEscape=function(e){t.props.closeOnEscape&&mR().getCode(e)===mR().Escape&&(e.preventDefault(),t.close(e))},t.moveSelectionOnKeyDown=function(e){var n,r=t.props,i=r.multiple,o=r.selectOnNavigation;if(t.state.open){var s=((n={})[mR().ArrowDown]=1,n[mR().ArrowUp]=-1,n)[mR().getCode(e)];if(void 0!==s){e.preventDefault();var a=t.getSelectedIndexAfterMove(s);!i&&o&&t.makeSelectedItemActive(e,a),t.setState({selectedIndex:a})}}},t.openOnSpace=function(e){var n,r,i,o=t.state.focus&&!t.state.open&&mR().getCode(e)===mR().Spacebar,s="INPUT"!==(null==(n=e.target)?void 0:n.tagName)&&"TEXTAREA"!==(null==(r=e.target)?void 0:r.tagName)&&!0!==(null==(i=e.target)?void 0:i.isContentEditable);o&&(s&&e.preventDefault(),t.open(e))},t.openOnArrow=function(e){var n=t.state,r=n.focus,i=n.open;if(r&&!i){var o=mR().getCode(e);o!==mR().ArrowDown&&o!==mR().ArrowUp||(e.preventDefault(),t.open(e))}},t.makeSelectedItemActive=function(e,n){var r=t.state,i=r.open,o=r.value,s=t.props.multiple,a=t.getSelectedItem(n),c=Xr(a,"value"),l=Xr(a,"disabled");if(Ui(c)||!i||l)return o;var u=s?SO(o,[c]):c;return(s?!!IO(u,o).length:u!==o)&&(t.setState({value:u}),t.handleChange(e,u),a["data-additional"]&&DN(t.props,"onAddItem",e,Pe({},t.props,{value:c}))),o},t.selectItemOnEnter=function(e){var n=t.props.search,r=t.state,i=r.open,o=r.selectedIndex;if(i&&(mR().getCode(e)===mR().Enter||!n&&mR().getCode(e)===mR().Spacebar)){e.preventDefault();var s=yO(JO({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search}));if(!n||0!==s){var a=t.makeSelectedItemActive(e,o);t.setState({selectedIndex:$O({additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search,selectedIndex:o,value:a,options:t.props.options,searchQuery:""})}),t.closeOnChange(e),t.clearSearchQuery(),n&&DN(t.searchRef.current,"focus")}}},t.removeItemOnBackspace=function(e){var n=t.props,r=n.multiple,i=n.search,o=t.state,s=o.searchQuery,a=o.value;if(mR().getCode(e)===mR().Backspace&&!s&&i&&r&&!$A(a)){e.preventDefault();var c=nO(a);t.setState({value:c}),t.handleChange(e,c)}},t.closeOnDocumentClick=function(e){t.props.closeOnBlur&&(t.ref.current&&BR(t.ref.current,e)||t.close())},t.handleMouseDown=function(e){t.isMouseDown=!0,DN(t.props,"onMouseDown",e,t.props),document.addEventListener("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,document.removeEventListener("mouseup",t.handleDocumentMouseUp)},t.handleClick=function(e){var n=t.props,r=n.minCharacters,i=n.search,o=t.state,s=o.open,a=o.searchQuery;if(DN(t.props,"onClick",e,t.props),e.stopPropagation(),!i)return t.toggle(e);s?DN(t.searchRef.current,"focus"):a.length>=r||1===r?t.open(e):DN(t.searchRef.current,"focus")},t.handleIconClick=function(e){var n=t.props.clearable,r=t.hasValue();DN(t.props,"onClick",e,t.props),e.stopPropagation(),n&&r?t.clearValue(e):t.toggle(e)},t.handleItemClick=function(e,n){var r=t.props,i=r.multiple,o=r.search,s=t.state.value,a=n.value;if(e.stopPropagation(),(i||n.disabled)&&e.nativeEvent.stopImmediatePropagation(),!n.disabled){var c=n["data-additional"],l=i?SO(t.state.value,[a]):a;(i?!!IO(l,s).length:l!==s)&&(t.setState({value:l}),t.handleChange(e,l)),t.clearSearchQuery(),DN(o?t.searchRef.current:t.ref.current,"focus"),t.closeOnChange(e),c&&DN(t.props,"onAddItem",e,Pe({},t.props,{value:a}))}},t.handleFocus=function(e){t.state.focus||(DN(t.props,"onFocus",e,t.props),t.setState({focus:!0}))},t.handleBlur=function(e){var n=Xr(e,"currentTarget");if(!n||!n.contains(document.activeElement)){var r=t.props,i=r.closeOnBlur,o=r.multiple,s=r.selectOnBlur;t.isMouseDown||(DN(t.props,"onBlur",e,t.props),s&&!o&&(t.makeSelectedItemActive(e,t.state.selectedIndex),i&&t.close()),t.setState({focus:!1}),t.clearSearchQuery())}},t.handleSearchChange=function(e,n){var r=n.value;e.stopPropagation();var i=t.props.minCharacters,o=t.state.open,s=r;DN(t.props,"onSearchChange",e,Pe({},t.props,{searchQuery:s})),t.setState({searchQuery:s,selectedIndex:0}),!o&&s.length>=i?t.open():o&&1!==i&&s.length<i&&t.close()},t.handleKeyDown=function(e){t.moveSelectionOnKeyDown(e),t.openOnArrow(e),t.openOnSpace(e),t.selectItemOnEnter(e),DN(t.props,"onKeyDown",e)},t.getSelectedItem=function(e){var n=JO({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});return Xr(n,"["+e+"]")},t.getItemByValue=function(e){var n=t.props.options;return tO(n,{value:e})},t.getDropdownAriaOptions=function(){var e=t.props,n=e.loading,r=e.disabled,i=e.search,o=e.multiple,s={role:i?"combobox":"listbox","aria-busy":n,"aria-disabled":r,"aria-expanded":!!t.state.open};return"listbox"===s.role&&(s["aria-multiselectable"]=o),s},t.clearSearchQuery=function(){var e=t.state.searchQuery;void 0!==e&&""!==e&&t.setState({searchQuery:""})},t.handleLabelClick=function(e,n){e.stopPropagation(),t.setState({selectedLabel:n.value}),DN(t.props,"onLabelClick",e,n)},t.handleLabelRemove=function(e,n){e.stopPropagation();var r=t.state.value,i=YD(r,n.value);t.setState({value:i}),t.handleChange(e,i)},t.getSelectedIndexAfterMove=function(e,n){void 0===n&&(n=t.state.selectedIndex);var r=JO({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(void 0!==r&&!WD(r,"disabled")){var i=r.length-1,o=n+e;return!t.props.wrapSelection&&(o>i||o<0)?o=n:o>i?o=0:o<0&&(o=i),r[o].disabled?t.getSelectedIndexAfterMove(e,o):o}},t.handleIconOverrides=function(e){var n=t.props.clearable;return{className:De(n&&t.hasValue()&&"clear",e.className),onClick:function(n){DN(e,"onClick",n,e),t.handleIconClick(n)}}},t.clearValue=function(e){var n=t.props.multiple?[]:"";t.setState({value:n}),t.handleChange(e,n)},t.computeSearchInputTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return Ui(r)?n?-1:0:r},t.computeSearchInputWidth=function(){var e=t.state.searchQuery;if(t.sizerRef.current&&e){t.sizerRef.current.style.display="inline",t.sizerRef.current.textContent=e;var n=Math.ceil(t.sizerRef.current.getBoundingClientRect().width);return t.sizerRef.current.style.removeProperty("display"),n}},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.search,i=e.tabIndex;if(!r)return n?-1:Ui(i)?0:i},t.handleSearchInputOverrides=function(e){return{onChange:function(n,r){DN(e,"onChange",n,r),t.handleSearchChange(n,r)}}},t.hasValue=function(){var e=t.props.multiple,n=t.state.value;return e?!$A(n):!Ui(n)&&""!==n},t.scrollSelectedItemIntoView=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=e.querySelector(".item.selected");if(n){var r=n.offsetTop<e.scrollTop,i=n.offsetTop+n.clientHeight>e.scrollTop+e.clientHeight;r?e.scrollTop=n.offsetTop:i&&(e.scrollTop=n.offsetTop+n.clientHeight-e.clientHeight)}}}},t.setOpenDirection=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=t.ref.current.getBoundingClientRect(),r=e.clientHeight,i=document.documentElement.clientHeight-n.top-n.height-r,o=n.top-r,s=i<0&&o>i;!s!==!t.state.upward&&t.setState({upward:s})}}},t.open=function(e,n){void 0===e&&(e=null),void 0===n&&(n=!0);var r=t.props,i=r.disabled,o=r.search;i||(o&&DN(t.searchRef.current,"focus"),DN(t.props,"onOpen",e,t.props),n&&t.setState({open:!0}),t.scrollSelectedItemIntoView())},t.close=function(e,n){void 0===n&&(n=t.handleClose),t.state.open&&(DN(t.props,"onClose",e,t.props),t.setState({open:!1},n))},t.handleClose=function(){var e=document.activeElement===t.searchRef.current;!e&&t.ref.current&&t.ref.current.blur();var n=document.activeElement===t.ref.current,r=e||n;t.setState({focus:r})},t.toggle=function(e){return t.state.open?t.close(e):t.open(e)},t.renderText=function(){var e,n=t.props,r=n.multiple,i=n.placeholder,o=n.search,s=n.text,a=t.state,c=a.searchQuery,l=a.selectedIndex,u=a.value,h=a.open,d=t.hasValue(),f=De(i&&!d&&"default","text",o&&c&&"filtered"),p=i;return s?p=s:h&&!r?e=t.getSelectedItem(l):d&&(e=t.getItemByValue(u)),qO.create(e?ZO(e):p,{defaultProps:{className:f}})},t.renderSearchInput=function(){var e=t.props,n=e.search,r=e.searchInput,o=t.state.searchQuery;return n&&i.createElement(VR,{innerRef:t.searchRef},zO.create(r,{defaultProps:{style:{width:t.computeSearchInputWidth()},tabIndex:t.computeSearchInputTabIndex(),value:o},overrideProps:t.handleSearchInputOverrides}))},t.renderSearchSizer=function(){var e=t.props,n=e.search,r=e.multiple;return n&&r&&i.createElement("span",{className:"sizer",ref:t.sizerRef})},t.renderLabels=function(){var e=t.props,n=e.multiple,r=e.renderLabel,i=t.state,o=i.selectedLabel,s=i.value;if(n&&!$A(s)){var a=yN(s,t.getItemByValue);return yN(KD(a),(function(e,n){var i={active:e.value===o,as:"a",key:YO(e.key,e.value),onClick:t.handleLabelClick,onRemove:t.handleLabelRemove,value:e.value};return oD.create(r(e,n,i),{defaultProps:i})}))}},t.renderOptions=function(){var e=t.props,n=e.lazyLoad,r=e.multiple,o=e.search,s=e.noResultsMessage,a=t.state,c=a.open,l=a.selectedIndex,u=a.value;if(n&&!c)return null;var h=JO({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(null!==s&&o&&$A(h))return i.createElement("div",{className:"message"},s);var d=r?function(e){return CR(u,e)}:function(e){return e===u};return yN(h,(function(e,n){return LO.create(Pe({active:d(e.value),selected:l===n},e,{key:YO(e.key,e.value),style:Pe({},e.style,{pointerEvents:"all"})}),{generateKey:!1,overrideProps:function(e){return{onClick:function(n,r){null==e.onClick||e.onClick(n,r),t.handleItemClick(n,r)}}}})}))},t.renderMenu=function(){var e=t.props,n=e.children,r=e.direction,o=e.header,s=t.state.open,a=t.getDropdownMenuAriaOptions();if(!pi(n)){var c=i.Children.only(n),l=De(r,Me(s,"visible"),c.props.className);return(0,i.cloneElement)(c,Pe({className:l},a))}return i.createElement(jO,Pe({},a,{direction:r,open:s}),FO.create(o,{autoGenerateKey:!1}),t.renderOptions())},t}gN(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(){return{focus:!1,searchQuery:""}},t.getAutoControlledStateFromProps=function(e,t,n){var r={__options:e.options,__value:t.value};return(!vR()(n.__value,t.value)||!TO(XO(e.options),XO(n.__options)))&&(r.selectedIndex=$O({additionLabel:e.additionLabel,additionPosition:e.additionPosition,allowAdditions:e.allowAdditions,deburr:e.deburr,multiple:e.multiple,search:e.search,selectedIndex:t.selectedIndex,value:t.value,options:e.options,searchQuery:t.searchQuery})),r},n.componentDidMount=function(){this.state.open&&this.open(null,!1)},n.shouldComponentUpdate=function(e,t){return!vR()(e,this.props)||!vR()(t,this.state)},n.componentDidUpdate=function(e,t){var n=this.props,r=n.closeOnBlur,i=n.minCharacters,o=n.openOnFocus,s=n.search;if(!t.focus&&this.state.focus){if(!this.isMouseDown){var a=!s||s&&1===i&&!this.state.open;o&&a&&this.open()}}else t.focus&&!this.state.focus&&!this.isMouseDown&&r&&this.close();!t.open&&this.state.open?(this.setOpenDirection(),this.scrollSelectedItemIntoView()):t.open&&this.state.open,t.selectedIndex!==this.state.selectedIndex&&this.scrollSelectedItemIntoView()},n.getDropdownMenuAriaOptions=function(){var e=this.props,t=e.search,n=e.multiple,r={};return t&&(r["aria-multiselectable"]=n,r.role="listbox"),r},n.render=function(){var e=this.props,n=e.basic,r=e.button,o=e.className,s=e.compact,a=e.disabled,c=e.error,l=e.fluid,u=e.floating,h=e.icon,d=e.inline,f=e.item,p=e.labeled,m=e.loading,g=e.multiple,v=e.pointing,y=e.search,w=e.selection,b=e.scrolling,_=e.simple,E=e.trigger,I=this.state,S=I.focus,T=I.open,k=I.upward,C=De("ui",Me(T,"active visible"),Me(a,"disabled"),Me(c,"error"),Me(m,"loading"),Me(n,"basic"),Me(r,"button"),Me(s,"compact"),Me(l,"fluid"),Me(u,"floating"),Me(d,"inline"),Me(p,"labeled"),Me(f,"item"),Me(g,"multiple"),Me(y,"search"),Me(w,"selection"),Me(_,"simple"),Me(b,"scrolling"),Me(k,"upward"),Ue(v,"pointing"),"dropdown",o),x=qe(t,this.props),N=Ke(t,this.props),A=this.getDropdownAriaOptions(N,this.props);return i.createElement(VR,{innerRef:this.ref},i.createElement(N,Pe({},x,A,{className:C,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onChange:this.handleChange,tabIndex:this.computeTabIndex()}),this.renderLabels(),this.renderSearchInput(),this.renderSearchSizer(),E||this.renderText(),BA.create(h,{overrideProps:this.handleIconOverrides,autoGenerateKey:!1}),this.renderMenu(),T&&i.createElement(wR(),{name:"keydown",on:this.closeOnEscape}),T&&i.createElement(wR(),{name:"click",on:this.closeOnDocumentClick}),S&&i.createElement(wR(),{name:"keydown",on:this.removeItemOnBackspace})))},t}(LN);function tL(e){var t=e.control,n=qe(tL,e),r=Ke(tL,e);return i.createElement(r,Pe({},n,{control:t}))}eL.handledProps=["additionLabel","additionPosition","allowAdditions","as","basic","button","children","className","clearable","closeOnBlur","closeOnChange","closeOnEscape","compact","deburr","defaultOpen","defaultSearchQuery","defaultSelectedLabel","defaultUpward","defaultValue","direction","disabled","error","floating","fluid","header","icon","inline","item","labeled","lazyLoad","loading","minCharacters","multiple","noResultsMessage","onAddItem","onBlur","onChange","onClick","onClose","onFocus","onLabelClick","onMouseDown","onOpen","onSearchChange","open","openOnFocus","options","placeholder","pointing","renderLabel","scrolling","search","searchInput","searchQuery","selectOnBlur","selectOnNavigation","selectedLabel","selection","simple","tabIndex","text","trigger","upward","value","wrapSelection"],eL.propTypes={},eL.defaultProps={additionLabel:"Add ",additionPosition:"top",closeOnBlur:!0,closeOnEscape:!0,deburr:!1,icon:"dropdown",minCharacters:1,noResultsMessage:"No results found.",openOnFocus:!0,renderLabel:ZO,searchInput:"text",selectOnBlur:!0,selectOnNavigation:!0,wrapSelection:!0},eL.autoControlledProps=["open","searchQuery","selectedLabel","value","upward"],eL.Divider=DO,eL.Header=FO,eL.Item=LO,eL.Menu=jO,eL.SearchInput=zO,eL.Text=qO,tL.handledProps=["as","control"],tL.propTypes={},tL.defaultProps={as:jD,control:eL};const nL=tL;function rL(e){var t=e.children,n=e.className,r=e.grouped,o=e.inline,s=e.unstackable,a=e.widths,c=De(Me(r,"grouped"),Me(o,"inline"),Me(s,"unstackable"),Be(a,null,!0),"fields",n),l=qe(rL,e),u=Ke(rL,e);return i.createElement(u,Pe({},l,{className:c}),t)}rL.handledProps=["as","children","className","grouped","inline","unstackable","widths"],rL.propTypes={};const iL=rL;function oL(e){var t=e.control,n=qe(oL,e),r=Ke(oL,e);return i.createElement(r,Pe({},n,{control:t}))}oL.handledProps=["as","control"],oL.propTypes={},oL.defaultProps={as:jD,control:mD};const sL=oL;function aL(e){var t=e.control,n=qe(aL,e),r=Ke(aL,e);return i.createElement(r,Pe({},n,{control:t}))}aL.handledProps=["as","control"],aL.propTypes={},aL.defaultProps={as:jD,control:FD};const cL=aL;function lL(e){return i.createElement(eL,Pe({},e,{selection:!0}))}lL.handledProps=["options"],lL.propTypes={},lL.Divider=eL.Divider,lL.Header=eL.Header,lL.Item=eL.Item,lL.Menu=eL.Menu;const uL=lL;function hL(e){var t=e.control,n=e.options,r=qe(hL,e),o=Ke(hL,e);return i.createElement(o,Pe({},r,{control:t,options:n}))}hL.handledProps=["as","control","options"],hL.propTypes={},hL.defaultProps={as:jD,control:uL};const dL=hL;var fL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).ref=(0,i.createRef)(),t.focus=function(){return t.ref.current.focus()},t.handleChange=function(e){var n=Xr(e,"target.value");DN(t.props,"onChange",e,Pe({},t.props,{value:n}))},t.handleInput=function(e){var n=Xr(e,"target.value");DN(t.props,"onInput",e,Pe({},t.props,{value:n}))},t}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.rows,r=e.value,o=qe(t,this.props),s=Ke(t,this.props);return i.createElement(VR,{innerRef:this.ref},i.createElement(s,Pe({},o,{onChange:this.handleChange,onInput:this.handleInput,rows:n,value:r})))},t}(i.Component);fL.handledProps=["as","onChange","onInput","rows","value"],fL.propTypes={},fL.defaultProps={as:"textarea",rows:3};const pL=fL;function mL(e){var t=e.control,n=qe(mL,e),r=Ke(mL,e);return i.createElement(r,Pe({},n,{control:t}))}mL.handledProps=["as","control"],mL.propTypes={},mL.defaultProps={as:jD,control:pL};const gL=mL;var vL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleSubmit=function(e){"string"!==typeof t.props.action&&DN(e,"preventDefault");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];DN.apply(void 0,[t.props,"onSubmit",e,t.props].concat(r))},t}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.action,r=e.children,o=e.className,s=e.error,a=e.inverted,c=e.loading,l=e.reply,u=e.size,h=e.success,d=e.unstackable,f=e.warning,p=e.widths,m=De("ui",u,Me(s,"error"),Me(a,"inverted"),Me(c,"loading"),Me(l,"reply"),Me(h,"success"),Me(d,"unstackable"),Me(f,"warning"),Be(p,null,!0),"form",o),g=qe(t,this.props),v=Ke(t,this.props);return i.createElement(v,Pe({},g,{action:n,className:m,onSubmit:this.handleSubmit}),r)},t}(i.Component);vL.handledProps=["action","as","children","className","error","inverted","loading","onSubmit","reply","size","success","unstackable","warning","widths"],vL.propTypes={},vL.defaultProps={as:"form"},vL.Field=jD,vL.Button=zD,vL.Checkbox=qD,vL.Dropdown=nL,vL.Group=iL,vL.Input=sL,vL.Radio=cL,vL.Select=dL,vL.TextArea=gL;const yL=vL;function wL(e){var t=e.children,n=e.className,r=e.content,o=De("content",n),s=qe(wL,e),a=Ke(wL,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}wL.handledProps=["as","children","className","content"],wL.propTypes={};const bL=wL;function _L(e){var t=e.children,n=e.className,r=e.content,o=De("header",n),s=qe(_L,e),a=Ke(_L,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}_L.handledProps=["as","children","className","content"],_L.propTypes={},_L.create=Vi(_L,(function(e){return{content:e}}));const EL=_L;function IL(e){var t=e.children,n=e.className,r=e.content,o=De("content",n),s=qe(IL,e),a=Ke(IL,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}IL.handledProps=["as","children","className","content"],IL.propTypes={},IL.defaultProps={as:"li"},IL.create=Vi(IL,(function(e){return{content:e}}));const SL=IL;function TL(e){var t=e.children,n=e.className,r=e.items,o=De("list",n),s=qe(TL,e),a=Ke(TL,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?yN(r,SL.create):t)}TL.handledProps=["as","children","className","items"],TL.propTypes={},TL.defaultProps={as:"ul"},TL.create=Vi(TL,(function(e){return{items:e}}));const kL=TL;var CL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleDismiss=function(e){var n=t.props.onDismiss;n&&n(e,t.props)},t}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.attached,r=e.children,o=e.className,s=e.color,a=e.compact,c=e.content,l=e.error,u=e.floating,h=e.header,d=e.hidden,f=e.icon,p=e.info,m=e.list,g=e.negative,v=e.onDismiss,y=e.positive,w=e.size,b=e.success,_=e.visible,E=e.warning,I=De("ui",s,w,Me(a,"compact"),Me(l,"error"),Me(u,"floating"),Me(d,"hidden"),Me(f,"icon"),Me(p,"info"),Me(g,"negative"),Me(y,"positive"),Me(b,"success"),Me(_,"visible"),Me(E,"warning"),Ue(n,"attached"),"message",o),S=v&&i.createElement(BA,{name:"close",onClick:this.handleDismiss}),T=qe(t,this.props),k=Ke(t,this.props);return pi(r)?i.createElement(k,Pe({},T,{className:I}),S,BA.create(f,{autoGenerateKey:!1}),(!Ui(h)||!Ui(c)||!Ui(m))&&i.createElement(bL,null,EL.create(h,{autoGenerateKey:!1}),kL.create(m,{autoGenerateKey:!1}),Ki(c,{autoGenerateKey:!1}))):i.createElement(k,Pe({},T,{className:I}),S,r)},t}(i.Component);CL.handledProps=["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"],CL.propTypes={},CL.Content=bL,CL.Header=EL,CL.List=kL,CL.Item=SL;const xL=function(){const e=ee(),[t,n]=(0,i.useState)("register"),[r,o]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[c,l]=(0,i.useState)(""),[u,h]=(0,i.useState)(!1);return(0,xD.jsxs)(gi,{children:[(0,xD.jsxs)(WA,{widths:"2",children:[(0,xD.jsx)(WA.Item,{active:"register"===t,onClick:()=>{l(""),n("register")},children:"\u8a3b\u518a"}),(0,xD.jsx)(WA.Item,{active:"signin"===t,onClick:()=>{l(""),n("signin")},children:"\u767b\u5165"})]}),(0,xD.jsxs)(yL,{onSubmit:function(n){n.preventDefault(),h(!0),"register"===t?pN.auth().createUserWithEmailAndPassword(r,s).then((()=>{o(""),a(""),l(""),h(!1),e("/")})).catch((e=>{switch(e.code){case"auth/email-already-in-use":l("\u4fe1\u7bb1\u5df2\u5b58\u5728");break;case"auth/invalid-email":l("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/weak-password":l("\u5bc6\u78bc\u5f37\u5ea6\u4e0d\u8db3");break;default:l("\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66")}h(!1)})):"signin"===t&&pN.auth().signInWithEmailAndPassword(r,s).then((()=>{o(""),a(""),l(""),h(!1),e("/")})).catch((e=>{"auth/invalid-email"===e.code?l("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba"):l("\u4fe1\u7bb1\u4e0d\u5b58\u5728\u6216\u5bc6\u78bc\u932f\u8aa4"),h(!1)}))},children:[(0,xD.jsx)(yL.Input,{label:"\u4fe1\u7bb1",value:r,onChange:e=>o(e.target.value),placeholder:"\u8acb\u8f38\u5165\u4fe1\u7bb1"}),(0,xD.jsx)(yL.Input,{label:"\u5bc6\u78bc",value:s,onChange:e=>a(e.target.value),placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc",type:"password"}),c&&(0,xD.jsx)(CL,{negative:!0,children:c}),(0,xD.jsxs)(yL.Button,{loading:u,children:["register"===t&&"\u8a3b\u518a","signin"===t&&"\u767b\u5165"]})]})]})};function NL(e){var t=e.children,n=e.className,r=e.content,o=De(n,"description"),s=qe(NL,e),a=Ke(NL,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}NL.handledProps=["as","children","className","content"],NL.propTypes={},NL.create=Vi(NL,(function(e){return{content:e}}));const AL=NL;function PL(e){var t=e.children,n=e.className,r=e.content,o=De("header",n),s=qe(PL,e),a=Ke(PL,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}PL.handledProps=["as","children","className","content"],PL.propTypes={},PL.create=Vi(PL,(function(e){return{content:e}}));const RL=PL;function DL(e){var t=e.children,n=e.className,r=e.content,o=e.description,s=e.floated,a=e.header,c=e.verticalAlign,l=De(Fe(s,"floated"),ze(c),"content",n),u=qe(DL,e),h=Ke(DL,e);return pi(t)?i.createElement(h,Pe({},u,{className:l}),RL.create(a),AL.create(o),r):i.createElement(h,Pe({},u,{className:l}),t)}DL.handledProps=["as","children","className","content","description","floated","header","verticalAlign"],DL.propTypes={},DL.create=Vi(DL,(function(e){return{content:e}}));const OL=DL;function LL(e){var t=e.className,n=e.verticalAlign,r=De(ze(n),t),o=qe(LL,e);return i.createElement(BA,Pe({},o,{className:r}))}LL.handledProps=["className","verticalAlign"],LL.propTypes={},LL.create=Vi(LL,(function(e){return{name:e}}));const ML=LL;var FL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||DN(t.props,"onClick",e,t.props)},t}return gN(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,o=e.className,s=e.content,a=e.description,c=e.disabled,l=e.header,u=e.icon,h=e.image,d=e.value,f=Ke(t,this.props),p=De(Me(n,"active"),Me(c,"disabled"),Me("li"!==f,"item"),o),m=qe(t,this.props),g="li"===f?{value:d}:{"data-value":d};if(!pi(r))return i.createElement(f,Pe({},g,{role:"listitem",className:p,onClick:this.handleClick},m),r);var v=ML.create(u,{autoGenerateKey:!1}),y=eD.create(h,{autoGenerateKey:!1});if(!(0,i.isValidElement)(s)&&Oi(s))return i.createElement(f,Pe({},g,{role:"listitem",className:p,onClick:this.handleClick},m),v||y,OL.create(s,{autoGenerateKey:!1,defaultProps:{header:l,description:a}}));var w=RL.create(l,{autoGenerateKey:!1}),b=AL.create(a,{autoGenerateKey:!1});return v||y?i.createElement(f,Pe({},g,{role:"listitem",className:p,onClick:this.handleClick},m),v||y,(s||w||b)&&i.createElement(OL,null,w,b,s)):i.createElement(f,Pe({},g,{role:"listitem",className:p,onClick:this.handleClick},m),w,b,s)},t}(i.Component);FL.handledProps=["active","as","children","className","content","description","disabled","header","icon","image","onClick","value"],FL.propTypes={},FL.create=Vi(FL,(function(e){return{content:e}}));const UL=FL;function jL(e){var t=e.children,n=e.className,r=e.content,o=qe(jL,e),s=Ke(jL,e),a=De(Me("ul"!==s&&"ol"!==s,"list"),n);return i.createElement(s,Pe({},o,{className:a}),pi(t)?r:t)}jL.handledProps=["as","children","className","content"],jL.propTypes={};const VL=jL;var zL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){DN(e,"onClick",n,r),DN(t.props,"onItemClick",n,r)}}},t}return gN(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.animated,o=n.bulleted,s=n.celled,a=n.children,c=n.className,l=n.content,u=n.divided,h=n.floated,d=n.horizontal,f=n.inverted,p=n.items,m=n.link,g=n.ordered,v=n.relaxed,y=n.selection,w=n.size,b=n.verticalAlign,_=De("ui",w,Me(r,"animated"),Me(o,"bulleted"),Me(s,"celled"),Me(u,"divided"),Me(d,"horizontal"),Me(f,"inverted"),Me(m,"link"),Me(g,"ordered"),Me(y,"selection"),Ue(v,"relaxed"),Fe(h,"floated"),ze(b),"list",c),E=qe(t,this.props),I=Ke(t,this.props);return pi(a)?pi(l)?i.createElement(I,Pe({role:"list",className:_},E),yN(p,(function(t){return UL.create(t,{overrideProps:e.handleItemOverrides})}))):i.createElement(I,Pe({role:"list",className:_},E),l):i.createElement(I,Pe({role:"list",className:_},E),a)},t}(i.Component);zL.handledProps=["animated","as","bulleted","celled","children","className","content","divided","floated","horizontal","inverted","items","link","onItemClick","ordered","relaxed","selection","size","verticalAlign"],zL.propTypes={},zL.Content=OL,zL.Description=AL,zL.Header=RL,zL.Icon=ML,zL.Item=UL,zL.List=VL;const BL=zL;const qL=function(){const e=X(),t=new URLSearchParams(e.search).get("topic"),[n,r]=(0,i.useState)([]);return(0,i.useEffect)((()=>{pN.firestore().collection("topics").get().then((e=>{const t=e.docs.map((e=>e.data()));r(t)}))}),[]),(0,xD.jsx)(BL,{animated:!0,selection:!0,children:n.map((e=>(0,xD.jsx)(BL.Item,{as:xe,to:"/posts?topic=".concat(e.name),active:t===e.name,children:e.name},e.name)))})};const KL=function(){return(0,xD.jsx)(gi,{children:(0,xD.jsx)($i,{children:(0,xD.jsxs)($i.Row,{children:[(0,xD.jsxs)($i.Column,{width:3,children:[" ",(0,xD.jsx)(qL,{})," "]}),(0,xD.jsx)($i.Column,{width:10}),(0,xD.jsx)($i.Column,{width:3,children:"789"})]})})})};function GL(e){var t=e.children,n=e.className,r=e.content,o=De("header",n),s=qe(GL,e),a=Ke(GL,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}GL.handledProps=["as","children","className","content"],GL.propTypes={},GL.create=Vi(GL,(function(e){return{content:e}}));const HL=GL;function WL(e){var t=e.children,n=e.className,r=e.content,o=De("description",n),s=qe(WL,e),a=Ke(WL,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}WL.handledProps=["as","children","className","content"],WL.propTypes={},WL.create=Vi(WL,(function(e){return{content:e}}));const QL=WL;function JL(e){var t=e.children,n=e.className,r=e.content,o=De("extra",n),s=qe(JL,e),a=Ke(JL,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}JL.handledProps=["as","children","className","content"],JL.propTypes={},JL.create=Vi(JL,(function(e){return{content:e}}));const $L=JL;function YL(e){var t=e.children,n=e.className,r=e.content,o=De("meta",n),s=qe(YL,e),a=Ke(YL,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}YL.handledProps=["as","children","className","content"],YL.propTypes={},YL.create=Vi(YL,(function(e){return{content:e}}));const XL=YL;function ZL(e){var t=e.children,n=e.className,r=e.content,o=e.description,s=e.extra,a=e.header,c=e.meta,l=e.verticalAlign,u=De(ze(l),"content",n),h=qe(ZL,e),d=Ke(ZL,e);return pi(t)?i.createElement(d,Pe({},h,{className:u}),HL.create(a,{autoGenerateKey:!1}),XL.create(c,{autoGenerateKey:!1}),QL.create(o,{autoGenerateKey:!1}),$L.create(s,{autoGenerateKey:!1}),r):i.createElement(d,Pe({},h,{className:u}),t)}ZL.handledProps=["as","children","className","content","description","extra","header","meta","verticalAlign"],ZL.propTypes={};const eM=ZL;function tM(e){var t=e.children,n=e.className,r=e.content,o=e.divided,s=e.items,a=e.link,c=e.relaxed,l=e.unstackable,u=De("ui",Me(o,"divided"),Me(a,"link"),Me(l,"unstackable"),Ue(c,"relaxed"),"items",n),h=qe(tM,e),d=Ke(tM,e);if(!pi(t))return i.createElement(d,Pe({},h,{className:u}),t);if(!pi(r))return i.createElement(d,Pe({},h,{className:u}),r);var f=yN(s,(function(e){var t=e.childKey,n=QA(e,["childKey"]),r=null!=t?t:[n.content,n.description,n.header,n.meta].join("-");return i.createElement(sM,Pe({},n,{key:r}))}));return i.createElement(d,Pe({},h,{className:u}),f)}tM.handledProps=["as","children","className","content","divided","items","link","relaxed","unstackable"],tM.propTypes={};const nM=tM;function rM(e){var t=e.size,n=qe(rM,e);return i.createElement(eD,Pe({},n,{size:t,ui:!!t,wrapped:!0}))}rM.handledProps=["size"],rM.propTypes={},rM.create=Vi(rM,(function(e){return{src:e}}));const iM=rM;function oM(e){var t=e.children,n=e.className,r=e.content,o=e.description,s=e.extra,a=e.header,c=e.image,l=e.meta,u=De("item",n),h=qe(oM,e),d=Ke(oM,e);return pi(t)?i.createElement(d,Pe({},h,{className:u}),iM.create(c,{autoGenerateKey:!1}),i.createElement(eM,{content:r,description:o,extra:s,header:a,meta:l})):i.createElement(d,Pe({},h,{className:u}),t)}oM.handledProps=["as","children","className","content","description","extra","header","image","meta"],oM.Content=eM,oM.Description=QL,oM.Extra=$L,oM.Group=nM,oM.Header=HL,oM.Image=iM,oM.Meta=XL,oM.propTypes={};const sM=oM;var aM=!("undefined"===typeof window||!window.document||!window.document.createElement);var cM=void 0;function lM(){return void 0===cM&&(cM=function(){if(!aM)return!1;if(!window.addEventListener||!window.removeEventListener||!Object.defineProperty)return!1;var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t)}catch(Sj){}return e}()),cM}function uM(e){e.handlers===e.nextHandlers&&(e.nextHandlers=e.handlers.slice())}function hM(e){this.target=e,this.events={}}hM.prototype.getEventHandlers=function(e,t){var n,r=String(e)+" "+String((n=t)?!0===n?100:(0|n.capture)+(n.passive<<1)+(n.once<<2):0);return this.events[r]||(this.events[r]={handlers:[],handleEvent:void 0},this.events[r].nextHandlers=this.events[r].handlers),this.events[r]},hM.prototype.handleEvent=function(e,t,n){var r=this.getEventHandlers(e,t);r.handlers=r.nextHandlers,r.handlers.forEach((function(e){e&&e(n)}))},hM.prototype.add=function(e,t,n){var r=this,i=this.getEventHandlers(e,n);uM(i),0===i.nextHandlers.length&&(i.handleEvent=this.handleEvent.bind(this,e,n),this.target.addEventListener(e,i.handleEvent,n)),i.nextHandlers.push(t);var o=!0;return function(){if(o){o=!1,uM(i);var s=i.nextHandlers.indexOf(t);i.nextHandlers.splice(s,1),0===i.nextHandlers.length&&(r.target&&r.target.removeEventListener(e,i.handleEvent,n),i.handleEvent=void 0)}}};var dM="__consolidated_events_handlers__";function fM(e,t,n,r){e[dM]||(e[dM]=new hM(e));var i=function(e){if(e)return lM()?e:!!e.capture}(r);return e[dM].add(t,n,i)}var pM=n(86);function mM(e,t){var n,r=(n=e,!isNaN(parseFloat(n))&&isFinite(n)?parseFloat(n):"px"===n.slice(-2)?parseFloat(n.slice(0,-2)):void 0);if("number"===typeof r)return r;var i=function(e){if("%"===e.slice(-1))return parseFloat(e.slice(0,-1))/100}(e);return"number"===typeof i?i*t:void 0}var gM="above",vM="inside",yM="below",wM="invisible";function bM(e){return"string"===typeof e.type}var _M;var EM=[];function IM(e){EM.push(e),_M||(_M=setTimeout((function(){var e;for(_M=null;e=EM.shift();)e()}),0));var t=!0;return function(){if(t){t=!1;var n=EM.indexOf(e);-1!==n&&(EM.splice(n,1),!EM.length&&_M&&(clearTimeout(_M),_M=null))}}}var SM="undefined"!==typeof window,TM={debug:!1,scrollableAncestor:void 0,children:void 0,topOffset:"0px",bottomOffset:"0px",horizontal:!1,onEnter:function(){},onLeave:function(){},onPositionChange:function(){},fireOnRapidScroll:!0},kM=function(e){function t(t){var n;return(n=e.call(this,t)||this).refElement=function(e){n._ref=e},n}gN(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this;SM&&(this.cancelOnNextTick=IM((function(){e.cancelOnNextTick=null;var t=e.props,n=t.children;t.debug;!function(e,t){if(e&&!bM(e)&&!t)throw new Error("<Waypoint> needs a DOM element to compute boundaries. The child you passed is neither a DOM element (e.g. <div>) nor does it use the innerRef prop.\n\nSee https://goo.gl/LrBNgw for more info.")}(n,e._ref),e._handleScroll=e._handleScroll.bind(e),e.scrollableAncestor=e._findScrollableAncestor(),e.scrollEventListenerUnsubscribe=fM(e.scrollableAncestor,"scroll",e._handleScroll,{passive:!0}),e.resizeEventListenerUnsubscribe=fM(window,"resize",e._handleScroll,{passive:!0}),e._handleScroll(null)})))},r.componentDidUpdate=function(){var e=this;SM&&this.scrollableAncestor&&(this.cancelOnNextTick||(this.cancelOnNextTick=IM((function(){e.cancelOnNextTick=null,e._handleScroll(null)}))))},r.componentWillUnmount=function(){SM&&(this.scrollEventListenerUnsubscribe&&this.scrollEventListenerUnsubscribe(),this.resizeEventListenerUnsubscribe&&this.resizeEventListenerUnsubscribe(),this.cancelOnNextTick&&this.cancelOnNextTick())},r._findScrollableAncestor=function(){var e=this.props,t=e.horizontal,r=e.scrollableAncestor;if(r)return function(e){return"window"===e?n.g.window:e}(r);for(var i=this._ref;i.parentNode;){if((i=i.parentNode)===document.body)return window;var o=window.getComputedStyle(i),s=(t?o.getPropertyValue("overflow-x"):o.getPropertyValue("overflow-y"))||o.getPropertyValue("overflow");if("auto"===s||"scroll"===s||"overlay"===s)return i}return window},r._handleScroll=function(e){if(this._ref){var t=this._getBounds(),n=function(e){return e.viewportBottom-e.viewportTop===0?wM:e.viewportTop<=e.waypointTop&&e.waypointTop<=e.viewportBottom||e.viewportTop<=e.waypointBottom&&e.waypointBottom<=e.viewportBottom||e.waypointTop<=e.viewportTop&&e.viewportBottom<=e.waypointBottom?vM:e.viewportBottom<e.waypointTop?yM:e.waypointTop<e.viewportTop?gM:wM}(t),r=this._previousPosition,i=this.props,o=(i.debug,i.onPositionChange),s=i.onEnter,a=i.onLeave,c=i.fireOnRapidScroll;if(this._previousPosition=n,r!==n){var l={currentPosition:n,previousPosition:r,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom};o.call(this,l),n===vM?s.call(this,l):r===vM&&a.call(this,l),c&&(r===yM&&n===gM||r===gM&&n===yM)&&(s.call(this,{currentPosition:vM,previousPosition:r,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}),a.call(this,{currentPosition:n,previousPosition:vM,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}))}}},r._getBounds=function(){var e,t,n=this.props,r=n.horizontal,i=(n.debug,this._ref.getBoundingClientRect()),o=i.left,s=i.top,a=i.right,c=i.bottom,l=r?o:s,u=r?a:c;this.scrollableAncestor===window?(e=r?window.innerWidth:window.innerHeight,t=0):(e=r?this.scrollableAncestor.offsetWidth:this.scrollableAncestor.offsetHeight,t=r?this.scrollableAncestor.getBoundingClientRect().left:this.scrollableAncestor.getBoundingClientRect().top);var h=this.props,d=h.bottomOffset;return{waypointTop:l,waypointBottom:u,viewportTop:t+mM(h.topOffset,e),viewportBottom:t+e-mM(d,e)}},r.render=function(){var e=this,t=this.props.children;if(!t)return i.createElement("span",{ref:this.refElement,style:{fontSize:0}});if(bM(t)||(0,pM.isForwardRef)(t)){return i.cloneElement(t,{ref:function(n){e.refElement(n),t.ref&&("function"===typeof t.ref?t.ref(n):t.ref.current=n)}})}return i.cloneElement(t,{innerRef:this.refElement})},t}(i.PureComponent);kM.above=gM,kM.below=yM,kM.inside=vM,kM.invisible=wM,kM.defaultProps=TM,kM.displayName="Waypoint";const CM=function(e){var t;let{post:n}=e;return(0,xD.jsxs)(sM,{as:xe,to:"/posts/".concat(n.id),children:[(0,xD.jsx)(sM.Image,{src:n.imageUrl||"https://upload.wikimedia.org/wikipedia/commons/7/78/Image.jpg",size:"small"}),(0,xD.jsxs)(sM.Content,{children:[(0,xD.jsxs)(sM.Meta,{children:[n.author.photoURL?(0,xD.jsx)(eD,{src:n.author.photoURL,avatar:!0}):(0,xD.jsx)(BA,{name:"user circle"})," ",n.author.displayName||"\u4f7f\u7528\u8005","\u3002",n.topic]}),(0,xD.jsxs)(sM.Header,{children:[" ",n.title," "]}),(0,xD.jsxs)(sM.Description,{children:[" ",n.content," "]}),(0,xD.jsxs)(sM.Extra,{children:["\u7559\u8a00 ",n.commentsCount||0,"\u3002\u8b9a ",(null===(t=n.likedBy)||void 0===t?void 0:t.length)||0]})]})]})};const xM=function(){const e=X(),t=new URLSearchParams(e.search).get("topic"),[n,r]=(0,i.useState)([]),[o,s]=(0,i.useState)(!0),a=(0,i.useRef)();return(0,i.useEffect)((()=>{let e=!0;return t?pN.firestore().collection("posts").where("topic","==",t).orderBy("createdAt","desc").limit(4).get().then((e=>{const t=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));a.current=e.docs[e.docs.length-1],r(t),s(!1)})):pN.firestore().collection("posts").orderBy("createdAt","desc").limit(6).get().then((e=>{const t=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));a.current=e.docs[e.docs.length-1],r(t),s(!1)})),()=>{e=!1}}),[t]),o?(0,xD.jsx)("div",{children:"Loading..."}):(0,xD.jsxs)(xD.Fragment,{children:[(0,xD.jsx)(sM.Group,{children:n.map((e=>(0,xD.jsx)(CM,{post:e},e.id)))}),(0,xD.jsx)(kM,{onEnter:()=>{a.current&&(t?pN.firestore().collection("posts").where("topic","==",t).orderBy("createdAt","desc").startAfter(a.current).limit(4).get().then((e=>{const t=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));a.current=e.docs[e.docs.length-1],r([...n,...t]),s(!1)})):pN.firestore().collection("posts").orderBy("createdAt","desc").startAfter(a.current).limit(4).get().then((e=>{const t=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));a.current=e.docs[e.docs.length-1],r([...n,...t]),s(!1)})))}})]})};function NM(e){var t=e.children,n=e.className,r=e.content,o=De("sub header",n),s=qe(NM,e),a=Ke(NM,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}NM.handledProps=["as","children","className","content"],NM.propTypes={},NM.create=Vi(NM,(function(e){return{content:e}}));const AM=NM;function PM(e){var t=e.children,n=e.className,r=e.content,o=De("content",n),s=qe(PM,e),a=Ke(PM,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}PM.handledProps=["as","children","className","content"],PM.propTypes={};const RM=PM;function DM(e){var t=e.attached,n=e.block,r=e.children,o=e.className,s=e.color,a=e.content,c=e.disabled,l=e.dividing,u=e.floated,h=e.icon,d=e.image,f=e.inverted,p=e.size,m=e.sub,g=e.subheader,v=e.textAlign,y=De("ui",s,p,Me(n,"block"),Me(c,"disabled"),Me(l,"dividing"),Fe(u,"floated"),Me(!0===h,"icon"),Me(!0===d,"image"),Me(f,"inverted"),Me(m,"sub"),Ue(t,"attached"),Ve(v),"header",o),w=qe(DM,e),b=Ke(DM,e);if(!pi(r))return i.createElement(b,Pe({},w,{className:y}),r);var _=BA.create(h,{autoGenerateKey:!1}),E=eD.create(d,{autoGenerateKey:!1}),I=AM.create(g,{autoGenerateKey:!1});return _||E?i.createElement(b,Pe({},w,{className:y}),_||E,(a||I)&&i.createElement(RM,null,a,I)):i.createElement(b,Pe({},w,{className:y}),a,I)}DM.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],DM.propTypes={},DM.Content=RM,DM.Subheader=AM;const OM=DM,LM="firebasestorage.googleapis.com",MM="storageBucket";class FM extends vo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(VM(e),"Firebase Storage: ".concat(t," (").concat(VM(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,FM.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return VM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var UM,jM;function VM(e){return"storage/"+e}function zM(){return new FM(UM.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function BM(){return new FM(UM.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qM(){return new FM(UM.CANCELED,"User canceled the upload/download.")}function KM(){return new FM(UM.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function GM(e){return new FM(UM.INVALID_ARGUMENT,e)}function HM(){return new FM(UM.APP_DELETED,"The Firebase app was deleted.")}function WM(e){return new FM(UM.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function QM(e,t){return new FM(UM.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function JM(e){throw new FM(UM.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(UM||(UM={}));class $M{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=$M.makeFromUrl(e,t)}catch(Sj){return new $M(e,"")}if(""===n.path)return n;throw r=e,new FM(UM.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===LM?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let c=0;c<a.length;c++){const t=a[c],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new $M(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new FM(UM.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class YM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function XM(e){return"string"===typeof e||e instanceof String}function ZM(e){return eF()&&e instanceof Blob}function eF(){return"undefined"!==typeof Blob}function tF(e,t,n,r){if(r<t)throw GM("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw GM("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function nF(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function rF(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function iF(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(jM||(jM={}));class oF{constructor(e,t,n,r,i,o,s,a,c,l,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new sF(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===jM.NO_ERROR,i=n.getStatus();if(!t||iF(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===jM.ABORT;return void e(!1,new sF(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new sF(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Sj){r(Sj)}else if(null!==i){const e=zM();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?HM():qM())}else{r(BM())}};this.canceled_?t(0,new sF(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function c(){return 2===a}let l=!1;function u(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){o&&clearTimeout(o)}function f(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(c()||s)return d(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),h(o)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class sF{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function aF(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function cF(){const e=aF();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(eF())return new Blob(n);throw new FM(UM.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function lF(e){if("undefined"===typeof atob)throw t="base-64",new FM(UM.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const uF={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hF{constructor(e,t){this.data=e,this.contentType=t||null}}function dF(e,t){switch(e){case uF.RAW:return new hF(fF(t));case uF.BASE64:case uF.BASE64URL:return new hF(pF(e,t));case uF.DATA_URL:return new hF(function(e){const t=new mF(e);return t.base64?pF(uF.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Sj){throw QM(uF.DATA_URL,"Malformed data URL.")}return fF(t)}(t.rest)}(t),new mF(t).contentType)}throw zM()}function fF(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function pF(e,t){switch(e){case uF.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw QM(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case uF.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw QM(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=lF(t)}catch(Sj){if(Sj.message.includes("polyfill"))throw Sj;throw QM(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class mF{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw QM(uF.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class gF{constructor(e,t){let n=0,r="";ZM(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(ZM(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new gF(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new gF(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(eF()){const e=t.map((e=>e instanceof gF?e.data_:e));return new gF(cF.apply(null,e))}{const e=t.map((e=>XM(e)?dF(uF.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new gF(r,!0)}}uploadData(){return this.data_}}function vF(e){let t;try{t=JSON.parse(e)}catch(Sj){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function yF(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function wF(e,t){return t}class bF{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||wF}}let _F=null;function EF(){if(_F)return _F;const e=[];e.push(new bF("bucket")),e.push(new bF("generation")),e.push(new bF("metageneration")),e.push(new bF("name","fullPath",!0));const t=new bF("name");t.xform=function(e,t){return function(e){return!XM(e)||e.length<2?e:yF(e)}(t)},e.push(t);const n=new bF("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new bF("timeCreated")),e.push(new bF("updated")),e.push(new bF("md5Hash",null,!0)),e.push(new bF("cacheControl",null,!0)),e.push(new bF("contentDisposition",null,!0)),e.push(new bF("contentEncoding",null,!0)),e.push(new bF("contentLanguage",null,!0)),e.push(new bF("contentType",null,!0)),e.push(new bF("metadata","customMetadata",!0)),_F=e,_F}function IF(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new $M(n,r);return t._makeStorageReference(i)}})}(r,e),r}function SF(e,t,n){const r=vF(t);if(null===r)return null;return IF(e,r,n)}function TF(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const kF="prefixes",CF="items";function xF(e,t,n){const r=vF(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[kF])for(const i of n[kF]){const n=i.replace(/\/$/,""),o=e._makeStorageReference(new $M(t,n));r.prefixes.push(o)}if(n[CF])for(const i of n[CF]){const n=e._makeStorageReference(new $M(t,i.name));r.items.push(n)}return r}(e,t,r)}class NF{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function AF(e){if(!e)throw zM()}function PF(e,t){return function(n,r){const i=SF(e,r,t);return AF(null!==i),i}}function RF(e,t){return function(n,r){const i=SF(e,r,t);return AF(null!==i),function(e,t,n,r){const i=vF(t);if(null===i)return null;if(!XM(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return nF("/b/"+s(i)+"/o/"+s(o),n,r)+rF({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function DF(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new FM(UM.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new FM(UM.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new FM(UM.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new FM(UM.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function OF(e){const t=DF(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new FM(UM.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function LF(e,t,n){const r=nF(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new NF(r,"GET",PF(e,n),i);return o.errorHandler=OF(t),o}function MF(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=nF(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,c=new NF(s,"GET",function(e,t){return function(n,r){const i=xF(e,t,r);return AF(null!==i),i}}(e,t.bucket),a);return c.urlParams=o,c.errorHandler=DF(t),c}function FF(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function UF(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const c=FF(t,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+TF(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=gF.getBlob(l,r,u);if(null===h)throw KM();const d={name:c.fullPath},f=nF(o,e.host,e._protocol),p=e.maxUploadRetryTime,m=new NF(f,"POST",PF(e,n),p);return m.urlParams=d,m.headers=s,m.body=h.uploadData(),m.errorHandler=DF(t),m}class jF{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function VF(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(Sj){AF(!1)}return AF(!!n&&-1!==(t||["active"]).indexOf(n)),n}const zF=262144;function BF(e,t,n,r,i,o,s,a){const c=new jF(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new FM(UM.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const l=c.total-c.current;let u=l;i>0&&(u=Math.min(u,i));const h=c.current,d=h+u;let f="";f=0===u?"finalize":l===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(c.current)},m=r.slice(h,d);if(null===m)throw KM();const g=t.maxUploadRetryTime,v=new NF(n,"POST",(function(e,n){const i=VF(e,["active","final"]),s=c.current+u,a=r.size();let l;return l="final"===i?PF(t,o)(e,n):null,new jF(s,a,"final"===i,l)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=DF(e),v}const qF={STATE_CHANGED:"state_changed"},KF={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function GF(e){switch(e){case"running":case"pausing":case"canceling":return KF.RUNNING;case"paused":return KF.PAUSED;case"success":return KF.SUCCESS;case"canceled":return KF.CANCELED;default:return KF.ERROR}}class HF{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function WF(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let QF=null;class JF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jM.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=jM.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=jM.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw JM("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw JM("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw JM("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Sj){return-1}}getResponse(){if(!this.sent_)throw JM("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw JM("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class $F extends JF{initXhr(){this.xhr_.responseType="text"}}function YF(){return QF?QF():new $F}class XF{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=EF(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(UM.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(iF(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=BM()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(UM.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s=FF(t,r,i),a={name:s.fullPath},c=nF(o,e.host,e._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},u=TF(s,n),h=e.maxUploadRetryTime,d=new NF(c,"POST",(function(e){let t;VF(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(Sj){AF(!1)}return AF(XM(t)),t}),h);return d.urlParams=a,d.headers=l,d.body=u,d.errorHandler=DF(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,YF,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new NF(n,"POST",(function(e){const t=VF(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Sj){AF(!1)}n||AF(!1);const i=Number(n);return AF(!isNaN(i)),new jF(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=DF(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,YF,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=zF*this._chunkMultiplier,t=new jF(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=BF(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(Sj){return this._error=Sj,void this._transition("error")}const s=this._ref.storage._makeRequest(o,YF,r,i,!1);this._request=s,s.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(zF*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=LF(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,YF,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=UF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,YF,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=qM(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=GF(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new HF(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(GF(this._state)){case KF.SUCCESS:WF(this._resolve.bind(null,this.snapshot))();break;case KF.CANCELED:case KF.ERROR:WF(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(GF(this._state)){case KF.RUNNING:case KF.PAUSED:e.next&&WF(e.next.bind(e,this.snapshot))();break;case KF.SUCCESS:e.complete&&WF(e.complete.bind(e))();break;default:e.error&&WF(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ZF{constructor(e,t){this._service=e,this._location=t instanceof $M?t:$M.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ZF(e,t)}get root(){const e=new $M(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yF(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new $M(this._location.bucket,e);return new ZF(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw WM(e)}}function eU(e){const t={prefixes:[],items:[]};return tU(e,t).then((()=>t))}async function tU(e,t,n){const r={pageToken:n},i=await nU(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await tU(e,t,i.nextPageToken)}function nU(e,t){null!=t&&"number"===typeof t.maxResults&&tF("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=MF(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,YF)}function rU(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=nF(t.fullServerUrl(),e.host,e._protocol),o=TF(n,r),s=e.maxOperationRetryTime,a=new NF(i,"PATCH",PF(e,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=OF(t),a}(e.storage,e._location,t,EF());return e.storage.makeRequestWithTokens(n,YF)}function iU(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=nF(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new NF(r,"GET",RF(e,n),i);return o.errorHandler=OF(t),o}(e.storage,e._location,EF());return e.storage.makeRequestWithTokens(t,YF).then((e=>{if(null===e)throw new FM(UM.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function oU(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=nF(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new NF(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=OF(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,YF)}function sU(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new $M(e._location.bucket,n);return new ZF(e.storage,r)}function aU(e,t){if(e instanceof uU){const n=e;if(null==n._bucket)throw new FM(UM.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MM+"' property when initializing the app?");const r=new ZF(n,n._bucket);return null!=t?aU(r,t):r}return void 0!==t?sU(e,t):e}function cU(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof uU)return new ZF(e,t);throw GM("To use ref(service, url), the first argument must be a Storage instance.")}return aU(e,t)}function lU(e,t){const n=null===t||void 0===t?void 0:t[MM];return null==n?null:$M.makeFromBucketSpec(n,e)}class uU{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=LM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?$M.makeFromBucketSpec(r,this._host):lU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=$M.makeFromBucketSpec(this._url,e):this._bucket=lU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ZF(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new YM(HM());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=rF(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new oF(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const hU="@firebase/storage",dU="0.12.4",fU="storage";function pU(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new XF(e,new gF(t),n)}(e=No(e),t,n)}function mU(e){return function(e){e._throwIfRoot("getMetadata");const t=LF(e.storage,e._location,EF());return e.storage.makeRequestWithTokens(t,YF)}(e=No(e))}function gU(e,t){return cU(e=No(e),t)}function vU(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:ao(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function yU(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new uU(r,i,o,n,Qs)}js(new Ao(fU,yU,"PUBLIC").setMultipleInstances(!0)),ea(hU,dU,""),ea(hU,dU,"esm2017");class wU{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class bU{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wU(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new wU(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new wU(e,this,this._ref)):{next:t.next?e=>t.next(new wU(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class _U{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new EU(e,this._service)))}get items(){return this._delegate.items.map((e=>new EU(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class EU{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return sU(e,t)}(this._delegate,e);return new EU(t,this.storage)}get root(){return new EU(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new EU(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new bU(pU(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uF.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=dF(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new bU(new XF(this._delegate,new gF(r.data,!0),i),this)}listAll(){return function(e){return eU(e=No(e))}(this._delegate).then((e=>new _U(e,this.storage)))}list(e){return function(e,t){return nU(e=No(e),t)}(this._delegate,e||void 0).then((e=>new _U(e,this.storage)))}getMetadata(){return mU(this._delegate)}updateMetadata(e){return function(e,t){return rU(e=No(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return iU(e=No(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return oU(e=No(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw WM(e)}}class IU{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(SU(e))throw GM("ref() expected a child path but got a URL, use refFromURL instead.");return new EU(gU(this._delegate,e),this)}refFromURL(e){if(!SU(e))throw GM("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$M.makeFromUrl(e,this._delegate.host)}catch(Sj){throw GM("refFromUrl() expected a valid full URL but got an invalid one.")}return new EU(gU(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};vU(this._delegate,e,t,n)}}function SU(e){return/^[A-Za-z]+:\/\//.test(e)}function TU(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new IU(r,i)}!function(e){const t={TaskState:KF,TaskEvent:qF,StringFormat:uF,Storage:IU,Reference:EU};e.INTERNAL.registerComponent(new Ao("storage-compat",TU,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.7")}(wa);const kU=function(){const e=ee(),[t,n]=(0,i.useState)(""),[r,o]=(0,i.useState)(""),[s,a]=(0,i.useState)([]),[c,l]=(0,i.useState)(""),[u,h]=(0,i.useState)(null),[d,f]=(0,i.useState)(!1);(0,i.useEffect)((()=>{pN.firestore().collection("topics").get().then((e=>{const t=e.docs.map((e=>e.data()));a(t)}))}),[]);const p=s.map((e=>({text:e.name,value:e.name}))),m=u?URL.createObjectURL(u):"https://upload.wikimedia.org/wikipedia/commons/7/78/Image.jpg";return(0,xD.jsxs)(gi,{children:[(0,xD.jsx)(OM,{children:"\u767c\u8868\u6587\u7ae0"}),(0,xD.jsxs)(yL,{onSubmit:function(){f(!0);const n=pN.firestore().collection("posts").doc(),i=pN.storage().ref("post-image/"+n.id),o={contentType:u.type};i.put(u,o).then((()=>{i.getDownloadURL().then((i=>{n.set({title:t,content:r,topic:c,createdAt:pN.firestore.Timestamp.now(),author:{displayName:pN.auth().currentUser.displayName||"",photoURL:pN.auth().currentUser.photoURL||"",uid:pN.auth().currentUser.uid,email:pN.auth().currentUser.email},imageUrl:i}).then((()=>{f(!1),e("/posts")}))}))}))},children:[(0,xD.jsx)(eD,{src:m,size:"small",floated:"left"}),(0,xD.jsx)(fD,{basic:!0,as:"label",htmlFor:"post-image",children:"\u4e0a\u50b3\u6587\u7ae0\u5716\u7247"}),(0,xD.jsx)(yL.Input,{type:"file",id:"post-image",style:{display:"none"},onChange:e=>h(e.target.files[0])}),(0,xD.jsx)(yL.Input,{placeholder:"\u8f38\u5165\u6587\u7ae0\u6a19\u984c",value:t,onChange:e=>n(e.target.value)}),(0,xD.jsx)(yL.TextArea,{placeholder:"\u8f38\u5165\u6587\u7ae0\u5167\u5bb9",value:r,onChange:e=>o(e.target.value)}),(0,xD.jsx)(yL.Dropdown,{placeholder:"\u9078\u64c7\u6587\u7ae0\u4e3b\u984c",options:p,selection:!0,value:c,onChange:(e,t)=>{let{value:n}=t;return l(n)}}),(0,xD.jsx)(yL.Button,{loading:d,children:"\u9001\u51fa"})]})]})};function CU(e){var t=e.children,n=e.className,r=e.compact,o=e.content,s=e.horizontal,a=e.piled,c=e.raised,l=e.size,u=e.stacked,h=De("ui",l,Me(r,"compact"),Me(s,"horizontal"),Me(a,"piled"),Me(c,"raised"),Me(u,"stacked"),"segments",n),d=qe(CU,e),f=Ke(CU,e);return i.createElement(f,Pe({},d,{className:h}),pi(t)?o:t)}CU.handledProps=["as","children","className","compact","content","horizontal","piled","raised","size","stacked"],CU.propTypes={};const xU=CU;function NU(e){var t=e.children,n=e.className,r=e.content,o=De("inline",n),s=qe(NU,e),a=Ke(NU,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}NU.handledProps=["as","children","className","content"],NU.propTypes={};const AU=NU;function PU(e){var t=e.attached,n=e.basic,r=e.children,o=e.circular,s=e.className,a=e.clearing,c=e.color,l=e.compact,u=e.content,h=e.disabled,d=e.floated,f=e.inverted,p=e.loading,m=e.placeholder,g=e.padded,v=e.piled,y=e.raised,w=e.secondary,b=e.size,_=e.stacked,E=e.tertiary,I=e.textAlign,S=e.vertical,T=De("ui",c,b,Me(n,"basic"),Me(o,"circular"),Me(a,"clearing"),Me(l,"compact"),Me(h,"disabled"),Me(f,"inverted"),Me(p,"loading"),Me(m,"placeholder"),Me(v,"piled"),Me(y,"raised"),Me(w,"secondary"),Me(_,"stacked"),Me(E,"tertiary"),Me(S,"vertical"),Ue(t,"attached"),Ue(g,"padded"),Ve(I),Fe(d,"floated"),"segment",s),k=qe(PU,e),C=Ke(PU,e);return i.createElement(C,Pe({},k,{className:T}),pi(r)?u:r)}PU.handledProps=["as","attached","basic","children","circular","className","clearing","color","compact","content","disabled","floated","inverted","loading","padded","piled","placeholder","raised","secondary","size","stacked","tertiary","textAlign","vertical"],PU.Group=xU,PU.Inline=AU,PU.propTypes={};const RU=PU;function DU(e){var t=e.active,n=e.className,r=e.children,o=e.content,s=De(Me(t,"active"),n),a=qe(DU,e),c=Ke(DU,e);return i.createElement(c,Pe({},a,{className:s}),pi(r)?o:r)}DU.handledProps=["active","as","children","className","content"],DU.defaultProps={as:"a"},DU.propTypes={};const OU=DU;function LU(e){var t=e.className,n=e.children,r=e.content,o=De("actions",t),s=qe(LU,e),a=Ke(LU,e);return i.createElement(a,Pe({},s,{className:o}),pi(n)?r:n)}LU.handledProps=["as","children","className","content"],LU.propTypes={};const MU=LU;function FU(e){var t=e.className,n=e.children,r=e.content,o=De("author",t),s=qe(FU,e),a=Ke(FU,e);return i.createElement(a,Pe({},s,{className:o}),pi(n)?r:n)}FU.handledProps=["as","children","className","content"],FU.propTypes={};const UU=FU;function jU(e){var t=e.className,n=e.src,r=De("avatar",t),o=qe(jU,e),s=DR(o,{htmlProps:RR}),a=s[0],c=s[1],l=Ke(jU,e);return i.createElement(l,Pe({},c,{className:r}),zi(n,{autoGenerateKey:!1,defaultProps:a}))}jU.handledProps=["as","className","src"],jU.propTypes={};const VU=jU;function zU(e){var t=e.className,n=e.children,r=e.content,o=De(t,"content"),s=qe(zU,e),a=Ke(zU,e);return i.createElement(a,Pe({},s,{className:o}),pi(n)?r:n)}zU.handledProps=["as","children","className","content"],zU.propTypes={};const BU=zU;function qU(e){var t=e.className,n=e.children,r=e.collapsed,o=e.content,s=e.minimal,a=e.size,c=e.threaded,l=De("ui",a,Me(r,"collapsed"),Me(s,"minimal"),Me(c,"threaded"),"comments",t),u=qe(qU,e),h=Ke(qU,e);return i.createElement(h,Pe({},u,{className:l}),pi(n)?o:n)}qU.handledProps=["as","children","className","collapsed","content","minimal","size","threaded"],qU.propTypes={};const KU=qU;function GU(e){var t=e.className,n=e.children,r=e.content,o=De("metadata",t),s=qe(GU,e),a=Ke(GU,e);return i.createElement(a,Pe({},s,{className:o}),pi(n)?r:n)}GU.handledProps=["as","children","className","content"],GU.propTypes={};const HU=GU;function WU(e){var t=e.className,n=e.children,r=e.content,o=De(t,"text"),s=qe(WU,e),a=Ke(WU,e);return i.createElement(a,Pe({},s,{className:o}),pi(n)?r:n)}WU.handledProps=["as","children","className","content"],WU.propTypes={};const QU=WU;function JU(e){var t=e.className,n=e.children,r=e.collapsed,o=e.content,s=De(Me(r,"collapsed"),"comment",t),a=qe(JU,e),c=Ke(JU,e);return i.createElement(c,Pe({},a,{className:s}),pi(n)?o:n)}JU.handledProps=["as","children","className","collapsed","content"],JU.propTypes={},JU.Author=UU,JU.Action=OU,JU.Actions=MU,JU.Avatar=VU,JU.Content=BU,JU.Group=KU,JU.Metadata=HU,JU.Text=QU;const $U=JU;const YU=function(){var e,t,n,r;const{postId:o}=function(){let{matches:e}=i.useContext(J),t=e[e.length-1];return t?t.params:{}}(),[s,a]=(0,i.useState)({author:{}}),[c,l]=(0,i.useState)(""),[u,h]=(0,i.useState)(!1),[d,f]=(0,i.useState)([]);(0,i.useEffect)((()=>{pN.firestore().collection("posts").doc(o).onSnapshot((e=>{const t=e.data();a(t)}))}),[o]),(0,i.useEffect)((()=>{pN.firestore().collection("posts").doc(o).collection("comments").orderBy("createdAt").onSnapshot((e=>{const t=e.docs.map((e=>e.data()));f(t)}))}),[o]);const p=pN.auth().currentUser;function m(e,t){if(!p)return;const n=p.uid;pN.firestore().collection("posts").doc(o).update({[t]:e?pN.firestore.FieldValue.arrayRemove(n):pN.firestore.FieldValue.arrayUnion(n)})}const g=p&&(null===(e=s.collectedBy)||void 0===e?void 0:e.includes(p.uid)),v=p&&(null===(t=s.likedBy)||void 0===t?void 0:t.includes(p.uid));return(0,xD.jsxs)(xD.Fragment,{children:[s.author.photoURL?(0,xD.jsx)(eD,{src:s.author.photoURL,avatar:!0}):(0,xD.jsx)(BA,{name:"user circle"}),s.author.displayName||"\u4f7f\u7528\u8005",(0,xD.jsxs)(OM,{children:[s.title,(0,xD.jsxs)(OM.Subheader,{children:[s.topic,"\u3002",null===(n=s.createdAt)||void 0===n?void 0:n.toDate().toLocaleDateString()]})]}),(0,xD.jsx)(eD,{src:s.imageUrl}),(0,xD.jsx)(RU,{basic:!0,vertical:!0,children:s.content}),(0,xD.jsxs)(RU,{basic:!0,vertical:!0,children:["\u7559\u8a00 ",s.commentsCount||0,"\u3002\u8b9a ",(null===(r=s.likedBy)||void 0===r?void 0:r.length)||0," \u3002",(0,xD.jsx)(BA,{name:"thumbs up".concat(v?"":" outline"," "),color:v?"blue":"grey",link:!0,onClick:()=>m(v,"likedBy")}),"\u3002",(0,xD.jsx)(BA,{name:"bookmark".concat(g?"":" outline"," "),color:g?"blue":"grey",link:!0,onClick:()=>m(g,"collectedBy")})]}),(0,xD.jsxs)($U.Group,{children:[(0,xD.jsxs)(yL,{children:[(0,xD.jsx)(yL.TextArea,{value:c,onChange:e=>l(e.target.value)}),(0,xD.jsx)(yL.Button,{onClick:function(){if(!p)return;h(!0);const e=pN.firestore(),t=e.batch(),n=e.collection("posts").doc(o);t.update(n,{commentsCount:pN.firestore.FieldValue.increment(1)});const r=n.collection("comments").doc();t.set(r,{content:c,createdAt:pN.firestore.Timestamp.now(),author:{uid:pN.auth().currentUser.uid,displayName:pN.auth().currentUser.displayName||"",photoURL:pN.auth().currentUser.photoURL||""}}),t.commit().then((()=>{l(""),h(!1)}))},loading:u,children:"\u7559\u8a00"})]}),(0,xD.jsxs)(OM,{children:["\u5171 ",s.commentsCount||0," \u5247\u7559\u8a00 "]}),d.map((e=>{var t;return(0,xD.jsxs)($U,{children:[(0,xD.jsx)($U.Avatar,{src:e.author.photoURL}),(0,xD.jsxs)($U.Content,{children:[(0,xD.jsx)($U.Author,{as:"span",children:e.author.displayName||"\u4f7f\u7528\u8005"}),(0,xD.jsxs)($U.Metadata,{children:[" ",e.createdAt.toDate().toLocaleString()," "]}),(0,xD.jsx)($U.Text,{children:e.content})]})]},null===(t=e.createdAt)||void 0===t?void 0:t.seconds)}))]})]})};const XU=function(){const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{let e=!0;return pN.firestore().collection("posts").where("author.uid","==",pN.auth().currentUser.uid).get().then((e=>{const n=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));t(n),r(!1)})),()=>{e=!1}}),[]),n?(0,xD.jsx)("div",{children:"Loading..."}):(0,xD.jsxs)(xD.Fragment,{children:[(0,xD.jsx)(OM,{children:"\u6211\u7684\u6587\u7ae0"}),(0,xD.jsx)(sM.Group,{children:e.map((e=>(0,xD.jsx)(CM,{post:e},e.id)))})]})};const ZU=function(){const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{let e=!0;return pN.firestore().collection("posts").where("collectedBy","array-contains",pN.auth().currentUser.uid).get().then((e=>{const n=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));t(n),r(!1)})),()=>{e=!1}}),[]),n?(0,xD.jsx)("div",{children:"Loading..."}):(0,xD.jsxs)(xD.Fragment,{children:[(0,xD.jsx)(OM,{children:"\u6211\u7684\u6536\u85cf"}),(0,xD.jsx)(sM.Group,{children:e.map((e=>(0,xD.jsx)(CM,{post:e},e.id)))})]})};var ej=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleButtonOverrides=function(e){return{onClick:function(n,r){DN(e,"onClick",n,r),DN(t.props,"onActionClick",n,r)}}},t}return gN(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.actions,o=n.children,s=n.className,a=n.content,c=De("actions",s),l=qe(t,this.props),u=Ke(t,this.props);return pi(o)?pi(a)?i.createElement(u,Pe({},l,{className:c}),yN(r,(function(t){return fD.create(t,{overrideProps:e.handleButtonOverrides})}))):i.createElement(u,Pe({},l,{className:c}),a):i.createElement(u,Pe({},l,{className:c}),o)},t}(i.Component);function tj(e){var t=e.children,n=e.className,r=e.content,o=e.image,s=e.scrolling,a=De(n,Me(o,"image"),Me(s,"scrolling"),"content"),c=qe(tj,e),l=Ke(tj,e);return i.createElement(l,Pe({},c,{className:a}),pi(t)?r:t)}ej.handledProps=["actions","as","children","className","content","onActionClick"],ej.propTypes={},ej.create=Vi(ej,(function(e){return{actions:e}})),tj.handledProps=["as","children","className","content","image","scrolling"],tj.propTypes={},tj.create=Vi(tj,(function(e){return{content:e}}));const nj=tj;function rj(e){var t=e.children,n=e.className,r=e.content,o=De("description",n),s=qe(rj,e),a=Ke(rj,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}rj.handledProps=["as","children","className","content"],rj.propTypes={};const ij=rj;const oj=IR()?i.useLayoutEffect:i.useEffect;var sj=/\s+/;var aj=new Map,cj=function(e,t){var n=function(e){var t=[];return e?(e.forEach((function(e){"string"===typeof e.current&&e.current.split(sj).forEach((function(e){t.push(e)}))})),t.filter((function(e,t,n){return e.length>0&&n.indexOf(e)===t}))):[]}(t),r=function(e,t){return[t.filter((function(t){return-1===e.indexOf(t)})),e.filter((function(e){return-1===t.indexOf(e)}))]}(aj.get(e)||[],n),i=r[0],o=r[1];e&&(i.forEach((function(t){return e.classList.add(t)})),o.forEach((function(t){return e.classList.remove(t)}))),aj.set(e,n)},lj=new function(){var e=this;this.add=function(t,n){if(e.nodes.has(t)){e.nodes.get(t).add(n)}else{var r=new Set;r.add(n),e.nodes.set(t,r)}},this.del=function(t,n){if(e.nodes.has(t)){var r=e.nodes.get(t);1!==r.size?r.delete(n):e.nodes.delete(t)}},this.emit=function(t,n){n(t,e.nodes.get(t))},this.nodes=new Map};function uj(e){var t=e.blurring,n=e.children,r=e.className,o=e.centered,s=e.content,a=e.inverted,c=e.mountNode,l=e.scrolling,u=i.useRef(),h=De("ui",Me(a,"inverted"),Me(!o,"top aligned"),"page modals dimmer transition visible active",r),d=De("dimmable dimmed",Me(t,"blurring"),Me(l,"scrolling")),f=qe(uj,e),p=Ke(uj,e);return function(e,t){var n=i.useRef(),r=i.useRef(!1);oj((function(){if(n.current=t,r.current){var i=LR(e)?e.current:e;lj.emit(i,cj)}r.current=!0}),[t]),oj((function(){var t=LR(e)?e.current:e;return lj.add(t,n),lj.emit(t,cj),function(){lj.del(t,n),lj.emit(t,cj)}}),[e])}(c,d),i.useEffect((function(){u.current&&u.current.style&&u.current.style.setProperty("display","flex","important")}),[]),i.createElement(VR,{innerRef:u},i.createElement(p,Pe({},f,{className:h}),pi(n)?s:n))}uj.handledProps=["as","blurring","centered","children","className","content","inverted","mountNode","scrolling"],uj.propTypes={},uj.create=Vi(uj,(function(e){return{content:e}}));const hj=uj;function dj(e){var t=e.children,n=e.className,r=e.content,o=De("header",n),s=qe(dj,e),a=Ke(dj,e);return i.createElement(a,Pe({},s,{className:o}),pi(t)?r:t)}dj.handledProps=["as","children","className","content"],dj.propTypes={},dj.create=Vi(dj,(function(e){return{content:e}}));const fj=dj;var pj=function(e){function t(){for(var n,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=e.call.apply(e,[this].concat(o))||this).legacy=IR()&&!window.ActiveXObject&&"ActiveXObject"in window,n.ref=(0,i.createRef)(),n.dimmerRef=(0,i.createRef)(),n.latestDocumentMouseDownEvent=null,n.getMountNode=function(){return IR()?n.props.mountNode||document.body:null},n.handleActionsOverrides=function(e){return{onActionClick:function(t,r){DN(e,"onActionClick",t,r),DN(n.props,"onActionClick",t,n.props),n.handleClose(t)}}},n.handleClose=function(e){n.setState({open:!1}),DN(n.props,"onClose",e,Pe({},n.props,{open:!1}))},n.handleDocumentMouseDown=function(e){n.latestDocumentMouseDownEvent=e},n.handleDocumentClick=function(e){var t=n.props.closeOnDimmerClick,r=n.latestDocumentMouseDownEvent;n.latestDocumentMouseDownEvent=null,!t||BR(n.ref.current,r)||BR(n.ref.current,e)||(n.setState({open:!1}),DN(n.props,"onClose",e,Pe({},n.props,{open:!1})))},n.handleIconOverrides=function(e){return{onClick:function(t){DN(e,"onClick",t),n.handleClose(t)}}},n.handleOpen=function(e){DN(n.props,"onOpen",e,Pe({},n.props,{open:!0})),n.setState({open:!0})},n.handlePortalMount=function(e){var t=n.props.eventPool;n.setState({scrolling:!1}),n.setPositionAndClassNames(),bR.sub("mousedown",n.handleDocumentMouseDown,{pool:t,target:n.dimmerRef.current}),bR.sub("click",n.handleDocumentClick,{pool:t,target:n.dimmerRef.current}),DN(n.props,"onMount",e,n.props)},n.handlePortalUnmount=function(e){var t=n.props.eventPool;cancelAnimationFrame(n.animationRequestId),bR.unsub("mousedown",n.handleDocumentMouseDown,{pool:t,target:n.dimmerRef.current}),bR.unsub("click",n.handleDocumentClick,{pool:t,target:n.dimmerRef.current}),DN(n.props,"onUnmount",e,n.props)},n.setPositionAndClassNames=function(){var e,t=n.props.centered,r={};if(n.ref.current){var i=n.ref.current.getBoundingClientRect(),o=function(e){var t=e.height+0,n=e.height+0,r=window.innerHeight;return r/2+-n/2+t+50<r}(i);e=!o;var s=n.legacy?function(e,t,n){var r=t&&e?-n.height/2:0;return{marginLeft:-n.width/2,marginTop:r}}(o,t,i):{};vR()(n.state.legacyStyles,s)||(r.legacyStyles=s),n.state.scrolling!==e&&(r.scrolling=e)}$A(r)||n.setState(r),n.animationRequestId=requestAnimationFrame(n.setPositionAndClassNames)},n.renderContent=function(e){var r=n.props,o=r.actions,s=r.basic,a=r.children,c=r.className,l=r.closeIcon,u=r.content,h=r.header,d=r.size,f=r.style,p=n.state,m=p.legacyStyles,g=p.scrolling,v=De("ui",d,Me(s,"basic"),Me(n.legacy,"legacy"),Me(g,"scrolling"),"modal transition visible active",c),y=Ke(t,n.props),w=!0===l?"close":l,b=BA.create(w,{overrideProps:n.handleIconOverrides});return i.createElement(VR,{innerRef:n.ref},i.createElement(y,Pe({},e,{className:v,style:Pe({},m,f)}),b,pi(a)?i.createElement(i.Fragment,null,fj.create(h,{autoGenerateKey:!1}),nj.create(u,{autoGenerateKey:!1}),ej.create(o,{overrideProps:n.handleActionsOverrides})):a))},n}gN(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.handlePortalUnmount()},n.render=function(){var e=this.props,n=e.centered,r=e.closeOnDocumentClick,o=e.dimmer,s=e.eventPool,a=e.trigger,c=this.state,l=c.open,u=c.scrolling,h=this.getMountNode();if(!IR())return(0,i.isValidElement)(a)?a:null;var d=qe(t,this.props),f=HR.handledProps,p=fR(d,(function(e,t,n){return CR(f,n)||(e[n]=t),e}),{}),m=NO(d,f);return i.createElement(HR,Pe({closeOnDocumentClick:r},m,{trigger:a,eventPool:s,mountNode:h,open:l,onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount}),i.createElement(VR,{innerRef:this.dimmerRef},hj.create(Oi(o)?o:{},{autoGenerateKey:!1,defaultProps:{blurring:"blurring"===o,inverted:"inverted"===o},overrideProps:{children:this.renderContent(p),centered:n,mountNode:h,scrolling:u}})))},t}(LN);pj.handledProps=["actions","as","basic","centered","children","className","closeIcon","closeOnDimmerClick","closeOnDocumentClick","content","defaultOpen","dimmer","eventPool","header","mountNode","onActionClick","onClose","onMount","onOpen","onUnmount","open","size","style","trigger"],pj.propTypes={},pj.defaultProps={centered:!0,dimmer:!0,closeOnDimmerClick:!0,closeOnDocumentClick:!1,eventPool:"Modal"},pj.autoControlledProps=["open"],pj.Actions=ej,pj.Content=nj,pj.Description=ij,pj.Dimmer=hj,pj.Header=fj;const mj=pj;function gj(e){let{user:t}=e;const[n,r]=(0,i.useState)(!1),[o,s]=(0,i.useState)(""),[a,c]=(0,i.useState)(!1);return(0,xD.jsxs)(xD.Fragment,{children:[(0,xD.jsxs)(OM,{size:"small",children:["\u6703\u54e1\u540d\u7a31",(0,xD.jsx)(fD,{floated:"right",onClick:()=>r(!0),children:"\u4fee\u6539"})]}),(0,xD.jsx)(RU,{vertical:!0,children:t.displayName}),(0,xD.jsxs)(mj,{open:n,size:"mini",children:[(0,xD.jsx)(mj.Header,{children:"\u4fee\u6539\u6703\u54e1\u540d\u7a31"}),(0,xD.jsx)(mj.Content,{children:(0,xD.jsx)(mD,{placeholder:"\u8f38\u5165\u65b0\u7684\u6703\u54e1\u540d\u7a31",value:o,onChange:e=>s(e.target.value),fluid:!0})}),(0,xD.jsxs)(mj.Actions,{children:[(0,xD.jsx)(fD,{onClick:()=>r(!1),children:"\u53d6\u6d88"}),(0,xD.jsx)(fD,{onClick:function(){c(!0),t.updateProfile({displayName:o}).then((()=>{c(!1),s(""),r(!1)}))},loading:a,children:"\u4fee\u6539"})]})]})]})}function vj(e){let{user:t}=e;const[n,r]=(0,i.useState)(!1),[o,s]=(0,i.useState)(!1),[a,c]=(0,i.useState)(null),l=a?URL.createObjectURL(a):t.photoURL;return(0,xD.jsxs)(xD.Fragment,{children:[(0,xD.jsxs)(OM,{size:"small",children:["\u6703\u54e1\u7167\u7247",(0,xD.jsx)(fD,{floated:"right",onClick:()=>r(!0),children:"\u4fee\u6539"})]}),(0,xD.jsx)(RU,{vertical:!0,children:(0,xD.jsx)(eD,{src:t.photoURL,avatar:!0,style:{transform:"scale(1.5)"}})}),(0,xD.jsxs)(mj,{open:n,size:"mini",children:[(0,xD.jsx)(mj.Header,{children:"\u4fee\u6539\u6703\u54e1\u7167\u7247"}),(0,xD.jsxs)(mj.Content,{image:!0,children:[(0,xD.jsx)("span",{style:{marginRight:"30px"}}),(0,xD.jsx)(eD,{src:l,avatar:!0,wrapped:!0,style:{transform:"scale(2.3)"}}),(0,xD.jsxs)(mj.Description,{children:[(0,xD.jsx)(fD,{as:"label",htmlFor:"post-image",children:"\u4e0a\u50b3"}),(0,xD.jsx)(mD,{type:"file",id:"post-image",style:{display:"none"},onChange:e=>c(e.target.files[0])})]})]}),(0,xD.jsxs)(mj.Actions,{children:[(0,xD.jsx)(fD,{onClick:()=>r(!1),children:"\u53d6\u6d88"}),(0,xD.jsx)(fD,{onClick:function(){s(!0);const e=pN.storage().ref("user-photos/"+t.uid),n={contentType:a.type};e.put(a,n).then((()=>{e.getDownloadURL().then((e=>{t.updateProfile({photoURL:e}).then((()=>{s(!1),c(""),r(!1)}))}))}))},loading:o,children:"\u4fee\u6539"})]})]})]})}function yj(e){let{user:t}=e;const[n,r]=(0,i.useState)(!1),[o,s]=(0,i.useState)(!1),[a,c]=(0,i.useState)(""),[l,u]=(0,i.useState)("");return(0,xD.jsxs)(xD.Fragment,{children:[(0,xD.jsxs)(OM,{size:"small",children:["\u6703\u54e1\u5bc6\u78bc",(0,xD.jsx)(fD,{floated:"right",onClick:()=>s(!0),children:"\u4fee\u6539"})]}),(0,xD.jsx)(RU,{vertical:!0,children:"******"}),(0,xD.jsxs)(mj,{open:o,size:"mini",children:[(0,xD.jsx)(mj.Header,{children:"\u4fee\u6539\u6703\u54e1\u5bc6\u78bc"}),(0,xD.jsxs)(mj.Content,{children:[(0,xD.jsx)(OM,{size:"small",children:"\u76ee\u524d\u5bc6\u78bc"}),(0,xD.jsx)(mD,{placeholder:"\u8f38\u5165\u820a\u5bc6\u78bc",value:a,onChange:e=>c(e.target.value),fluid:!0}),(0,xD.jsx)(OM,{size:"small",children:"\u65b0\u5bc6\u78bc"}),(0,xD.jsx)(mD,{placeholder:"\u8f38\u5165\u65b0\u5bc6\u78bc",value:l,onChange:e=>u(e.target.value),fluid:!0})]}),(0,xD.jsxs)(mj.Actions,{children:[(0,xD.jsx)(fD,{onClick:()=>s(!1),children:"\u53d6\u6d88"}),(0,xD.jsx)(fD,{onClick:function(){r(!0);const e=pN.auth.EmailAuthProvider.credential(t.email,a);t.reauthenticateWithCredential(e).then((()=>{t.updatePassword(l).then((()=>{s(!1),c(""),u(""),r(!1)}))})),t.updatePassword(l)},loading:n,children:"\u4fee\u6539"})]})]})]})}const wj=function(){const[e,t]=(0,i.useState)({});return(0,i.useEffect)((()=>{pN.auth().onAuthStateChanged((e=>{t(e)}))}),[]),(0,xD.jsxs)(xD.Fragment,{children:[(0,xD.jsx)(OM,{children:"\u6703\u54e1\u8cc7\u6599"}),(0,xD.jsx)(gj,{user:e}),(0,xD.jsx)(vj,{user:e}),(0,xD.jsx)(yj,{user:e})]})};const bj=function(){const e=X();return(0,xD.jsx)(BL,{animated:!0,selection:!0,children:[{name:"\u6211\u7684\u6587\u7ae0",path:"posts"},{name:"\u6211\u7684\u6536\u85cf",path:"collections"},{name:"\u6703\u54e1\u8cc7\u6599",path:"settings"}].map((t=>(0,xD.jsx)(BL.Item,{as:xe,to:t.path,active:"/my/"+t.path===e.pathname,children:t.name},t.name)))})};const _j=()=>(0,xD.jsx)(gi,{children:(0,xD.jsx)($i,{children:(0,xD.jsxs)($i.Row,{children:[(0,xD.jsx)($i.Column,{width:3,children:(0,xD.jsx)(qL,{})}),(0,xD.jsx)($i.Column,{width:10,children:(0,xD.jsx)(ge,{})}),(0,xD.jsx)($i.Column,{width:3})]})})}),Ej=e=>{let{user:t}=e;return(0,xD.jsx)(xD.Fragment,{children:t?(0,xD.jsx)(gi,{children:(0,xD.jsx)($i,{children:(0,xD.jsxs)($i.Row,{children:[(0,xD.jsx)($i.Column,{width:3,children:(0,xD.jsx)(bj,{})}),(0,xD.jsx)($i.Column,{width:10,children:(0,xD.jsx)(ge,{})}),(0,xD.jsx)($i.Column,{width:3})]})})}):(0,xD.jsx)(me,{to:"/"})})},Ij=function(){const[e,t]=(0,i.useState)(null);return(0,i.useEffect)((()=>{pN.auth().onAuthStateChanged((e=>{t(e)}))}),[]),(0,xD.jsxs)(Te,{basename:"/gameforum",children:[(0,xD.jsx)(ND,{user:e}),(0,xD.jsxs)(we,{children:[(0,xD.jsx)(ve,{path:"/",element:"\u9996\u9801"}),(0,xD.jsxs)(ve,{path:"/posts",element:(0,xD.jsx)(_j,{}),children:[(0,xD.jsx)(ve,{index:!0,element:(0,xD.jsx)(xM,{})}),(0,xD.jsx)(ve,{path:":postId",element:(0,xD.jsx)(YU,{})})]}),(0,xD.jsxs)(ve,{path:"/my",element:(0,xD.jsx)(Ej,{user:e}),children:[(0,xD.jsx)(ve,{index:!0,element:""}),(0,xD.jsx)(ve,{path:"posts",element:(0,xD.jsx)(XU,{})}),(0,xD.jsx)(ve,{path:"collections",element:(0,xD.jsx)(ZU,{})}),(0,xD.jsx)(ve,{path:"settings",element:(0,xD.jsx)(wj,{})})]}),(0,xD.jsx)(ve,{path:"/signin",element:e?(0,xD.jsx)(me,{to:"/"}):(0,xD.jsx)(xL,{})}),(0,xD.jsx)(ve,{path:"/new-post",element:e?(0,xD.jsx)(kU,{}):(0,xD.jsx)(me,{to:"/"})}),(0,xD.jsx)(ve,{path:"/gamenews",element:(0,xD.jsx)(KL,{})})]})]})};r.createRoot(document.getElementById("root")).render((0,xD.jsx)(Ij,{}))})()})();
//# sourceMappingURL=main.5afaea2f.js.map