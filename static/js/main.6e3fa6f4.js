/*! For license information please see main.6e3fa6f4.js.LICENSE.txt */
(()=>{var e={540:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.isForwardRef=function(e){return _(e)===d}},904:(e,t,n)=>{"use strict";e.exports=n(540)},172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(396);n(554);var i=n(43);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var p=function(){function e(t){o(this,e),l(this,"handlers",void 0),this.handlers=t.slice(0)}return c(e,[{key:"addHandlers",value:function(t){for(var n=this.handlers.slice(0),r=t.length,i=0;i<r;i+=1)n.push(t[i]);return new e(n)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlers.length-1;if(t){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](e));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(e)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(t){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var s=this.handlers[i];-1===t.indexOf(s)&&n.push(s)}return new e(n)}}]),e}();function m(e){var t=new Map;return e.forEach((function(e,n){t.set(n,e)})),t}function g(e){return Array.isArray(e)?e:[e]}function v(e){return"document"===e?document:"window"===e?window:function(e){return null!==e&&"object"===s(e)&&e.hasOwnProperty("current")}(e)?e.current||document:e||document}var y=function(){function e(t,n){o(this,e),l(this,"handlerSets",void 0),l(this,"poolName",void 0),this.handlerSets=n,this.poolName=t}return c(e,[{key:"addHandlers",value:function(t,n){var r=m(this.handlerSets);if(r.has(t)){var i=r.get(t);r.set(t,i.addHandlers(n))}else r.set(t,new p(n));return new e(this.poolName,r)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlerSets.get(e),r="default"===this.poolName;n&&n.dispatchEvent(t,r)}},{key:"hasHandlers",value:function(e){if(!e)return this.handlerSets.size>0;var t=this.handlerSets.get(e);return!!t&&t.hasHandlers()}},{key:"removeHandlers",value:function(t,n){var r=m(this.handlerSets);if(!r.has(t))return new e(this.poolName,r);var i=r.get(t).removeHandlers(n);return i.hasHandlers()?r.set(t,i):r.delete(t),new e(this.poolName,r)}}]),e}();l(y,"createByType",(function(e,t,n){var r=new Map;return r.set(t,new p(n)),new y(e,r)}));var w=function(){function e(t){var n=this;o(this,e),l(this,"handlers",new Map),l(this,"pools",new Map),l(this,"target",void 0),l(this,"createEmitter",(function(e){return function(t){n.pools.forEach((function(n){n.dispatchEvent(e,t)}))}})),this.target=t}return c(e,[{key:"addHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e);this.pools.set(e,r.addHandlers(t,n))}else this.pools.set(e,y.createByType(e,t,n));this.handlers.has(t)||this.addTargetHandler(t)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e).removeHandlers(t,n);r.hasHandlers()?this.pools.set(e,r):this.pools.delete(e);var i=!1;this.pools.forEach((function(e){return i=i||e.hasHandlers(t)})),i||this.removeTargetHandler(t)}}},{key:"addTargetHandler",value:function(e){var t=this.createEmitter(e);this.handlers.set(e,t),this.target.addEventListener(e,t,!0)}},{key:"removeTargetHandler",value:function(e){this.handlers.has(e)&&(this.target.removeEventListener(e,this.handlers.get(e),!0),this.handlers.delete(e))}}]),e}(),b=new(function(){function e(){var t=this;o(this,e),l(this,"targets",new Map),l(this,"getTarget",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=v(e);if(t.targets.has(r))return t.targets.get(r);if(!n)return null;var i=new w(r);return t.targets.set(r,i),i})),l(this,"removeTarget",(function(e){t.targets.delete(v(e))}))}return c(e,[{key:"sub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,s=void 0===i?document:i,o=n.pool,a=void 0===o?"default":o;this.getTarget(s).addHandlers(a,e,g(t))}}},{key:"unsub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,s=void 0===i?document:i,o=n.pool,a=void 0===o?"default":o,c=this.getTarget(s,!1);c&&(c.removeHandlers(a,e,g(t)),c.hasHandlers()||this.removeTarget(s))}}}]),e}()),_=function(e){function t(){return o(this,t),f(this,h(t).apply(this,arguments))}return u(t,i.PureComponent),c(t,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(e){this.unsubscribe(e),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;b.sub(t,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;b.unsub(t,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),t}();l(_,"defaultProps",{pool:"default",target:"document"}),_.propTypes={},t.instance=b,t.default=_},173:(e,t,n)=>{"use strict";var r;r=n(172),e.exports=r.default,e.exports.instance=r.instance},396:(e,t,n)=>{var r;!function(){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),s={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},90:e=>{"use strict";for(var t=function(e){return null!==e&&!Array.isArray(e)&&"object"===typeof e},n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},r=0;r<24;r+=1)n[112+r]="F"+(r+1);for(var i=0;i<26;i+=1){var s=i+65;n[s]=[String.fromCharCode(s+32),String.fromCharCode(s)]}var o={codes:n,getCode:function(e){return t(e)?e.keyCode||e.which||this[e.key]:this[e]},getKey:function(e){var r=t(e);if(r&&e.key)return e.key;var i=n[r?e.keyCode||e.which:e];return Array.isArray(i)&&(i=r?i[e.shiftKey?1:0]:i[0]),i},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};o.Spacebar=o[" "],o.Digit0=o[0],o.Digit1=o[1],o.Digit2=o[2],o.Digit3=o[3],o.Digit4=o[4],o.Digit5=o[5],o.Digit6=o[6],o.Digit7=o[7],o.Digit8=o[8],o.Digit9=o[9],o.Tilde=o["~"],o.GraveAccent=o["`"],o.ExclamationPoint=o["!"],o.AtSign=o["@"],o.PoundSign=o["#"],o.PercentSign=o["%"],o.Caret=o["^"],o.Ampersand=o["&"],o.PlusSign=o["+"],o.MinusSign=o["-"],o.EqualsSign=o["="],o.DivisionSign=o["/"],o.MultiplicationSign=o["*"],o.Comma=o[","],o.Decimal=o["."],o.Colon=o[":"],o.Semicolon=o[";"],o.Pipe=o["|"],o.BackSlash=o["\\"],o.QuestionMark=o["?"],o.SingleQuote=o["'"],o.DoubleQuote=o['"'],o.LeftCurlyBrace=o["{"],o.RightCurlyBrace=o["}"],o.LeftParenthesis=o["("],o.RightParenthesis=o[")"],o.LeftAngleBracket=o["<"],o.RightAngleBracket=o[">"],o.LeftSquareBracket=o["["],o.RightSquareBracket=o["]"],e.exports=o},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},554:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case S:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Te=null;function Se(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Ie?Te?Te.push(e):Te=[e]:Ie=e}function Ce(){if(Ie){var e=Ie,t=Te;if(Te=Ie=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Ie||null!==Te)&&(Ne(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,c){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,It,Tt,St,kt=!1,Ct=[],xt=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(jt),Pt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){if(Kt){var i=Jt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Jt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Sn(){return Tn}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Jn(e){if(W(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Jn(Wn)){var t=[];Gn(t,Wn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Wn)}function sr(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Tr={};function Sr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Ir[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Sr("animationend"),Cr=Sr("animationiteration"),xr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),c(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(kr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(xr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case kr:case Cr:case xr:c=vn;break;case Nr:c=An;break;case"scroll":c=dn;break;case"wheel":c=Pn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push(Gr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==l?a:bi(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==c&&Qr(o,a,c,u,!1),null!==l&&null!==h&&Qr(o,h,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=$n;else if(Kn(a))if(Yn)g=or;else{g=ir;var v=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Bn=!0)),0<(v=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Pe(n,s))&&o.unshift(Gr(n,c,a)):i||null!=(c=Pe(n,s))&&o.push(Gr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Ii=-1;function Ti(e){return{current:e}}function Si(e){0>Ii||(e.current=Ei[Ii],Ei[Ii]=null,Ii--)}function ki(e,t){Ii++,Ei[Ii]=e.current,e.current=t}var Ci={},xi=Ti(Ci),Ni=Ti(!1),Ai=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Si(Ni),Si(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,ki(xi,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(xi),ki(xi,e)):Si(Ni),ki(Ni,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Ji=null,$i=1,Yi="";function Xi(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=$i,Wi[Qi++]=Yi,Wi[Qi++]=Ji,Ji=e;var r=$i;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Yi=s+e}else $i=1<<s|n<<i|r,Yi=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Ji;)Ji=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:$i,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Ol(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ol(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case E:return(t=Ul(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,a,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(s=o(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&Xi(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,c){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var l=o.key,u=s;null!==u;){if(u.key===l){if((l=o.type)===I){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===P&&ys(l)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===I?((s=Ll(o.props.children,r.mode,c,o.key)).return=r,r=s):((c=Ol(o.type,o.key,o.props,null,r.mode,c)).ref=gs(r,s,o),c.return=r,r=c)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Ul(o,r.mode,c)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),c)}if(te(o))return m(r,s,o,c);if(L(o))return g(r,s,o,c);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fl(o,r.mode,c)).return=r,r=s),a(r)):n(r,s)}}var bs=ws(!0),_s=ws(!1),Es=Ti(null),Is=null,Ts=null,Ss=null;function ks(){Ss=Ts=Is=null}function Cs(e){var t=Es.current;Si(Es),e._currentValue=t}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){Is=e,Ss=Ts=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===Ts){if(null===Is)throw Error(s(308));Ts=e,Is.dependencies={lanes:0,firstContext:e}}else Ts=Ts.next=e;return t}var Rs=null;function Ps(e){null===Rs?Rs=[e]:Rs.push(e)}function Ds(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function js(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,u=l=c=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Mc|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ks={},Gs=Ti(Ks),Hs=Ti(Ks),Ws=Ti(Ks);function Qs(e){if(e===Ks)throw Error(s(174));return e}function Js(e,t){switch(ki(Ws,t),ki(Hs,e),ki(Gs,Ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Gs),ki(Gs,t)}function $s(){Si(Gs),Si(Hs),Si(Ws)}function Ys(e){Qs(Ws.current);var t=Qs(Gs.current),n=ce(t,e.type);t!==n&&(ki(Hs,e),ki(Gs,n))}function Xs(e){Hs.current===e&&(Si(Gs),Si(Hs))}var Zs=Ti(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,co=null,lo=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,co=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,co=ao=oo=null,lo=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?oo.memoizedState=co=e:co=co.next=e,co}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===co?oo.memoizedState:co.next;if(null!==t)co=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===co?oo.memoizedState=co=e:co=co.next=e}return co}function bo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((so&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,oo.lanes|=h,Mc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Mc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function To(e,t){var n=oo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Ro(9,ko.bind(null,n,r,i,t),void 0,null),null===Nc)throw Error(s(349));0!==(30&so)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,xo(t)&&No(e)}function Co(e,t,n){return n((function(){xo(t)&&No(e)}))}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=Os(e,1);null!==t&&nl(t,e,1,-1)}function Ao(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return wo().memoizedState}function Do(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ro(t,n,s,r))}oo.flags|=e,i.memoizedState=Ro(1|t,n,s,r)}function Lo(e,t){return Do(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function Uo(e,t){return Oo(4,4,e,t)}function jo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,jo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Mc|=n,e.baseState=!0),t)}function Go(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wt=n,io.transition=r}}function Ho(){return wo().memoizedState}function Wo(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e))$o(t,n);else if(null!==(n=Ds(e,t,n,r))){nl(n,e,r,el()),Yo(n,t,r)}}function Qo(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))$o(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(i.next=i,Ps(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ds(e,t,i,r))&&(nl(n,e,r,i=el()),Yo(n,t,r))}}function Jo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function $o(e,t){uo=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xo={readContext:As,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:As,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Ao,useDebugValue:zo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Ao(!1),t=e[0];return e=Go.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nc)throw Error(s(349));0!==(30&so)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Nc.identifierPrefix;if(is){var n=Yi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:As,useCallback:Bo,useContext:As,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:qo,useReducer:_o,useRef:Po,useState:function(){return _o(bo)},useDebugValue:zo,useDeferredValue:function(e){return Ko(wo(),ao.memoizedState,e)},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:Io,useSyncExternalStore:To,useId:Ho,unstable_isNewReconciler:!1},ta={readContext:As,useCallback:Bo,useContext:As,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:qo,useReducer:Eo,useRef:Po,useState:function(){return Eo(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:Ko(t,ao.memoizedState,e)},useTransition:function(){return[Eo(bo)[0],wo().memoizedState]},useMutableSource:Io,useSyncExternalStore:To,useId:Ho,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,i))&&(nl(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,i))&&(nl(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=js(e,i,r))&&(nl(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function oa(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Pi(t)?Ai:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Pi(t)?Ai:xi.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function la(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kc||(Kc=!0,Gc=r),ha(0,t)},n}function pa(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sl.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,js(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?_s(t,null,n,r):bs(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=go(e,t,n,r,s,i),n=vo(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ol(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Dl(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return ka(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dc,Pc),Pc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dc,Pc),Pc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Dc,Pc),Pc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Dc,Pc),Pc|=r;return ba(e,t,i,n),t.child}function Sa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Pi(n)?Ai:xi.current;return s=Ri(t,s),Ns(t,i),n=go(e,t,n,r,s,i),r=vo(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ca(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(Ns(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),ca(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=As(l):l=Ri(t,l=Pi(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&aa(t,o,r,l),Ls=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Ni.current||Ls?("function"===typeof u&&(ra(t,n,u,r),c=t.memoizedState),(a=Ls||sa(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:na(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=As(c):c=Ri(t,c=Pi(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&aa(t,o,r,c),Ls=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(l=Ls||sa(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xa(e,t,n,r,s,i)}function xa(e,t,n,r,i,s){Sa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ka(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Js(e,t.containerInfo)}function Aa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Ra,Pa,Da,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(Zs,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Ml(c,i,0,null),e=Ll(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Ua(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(o=Ll(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,ja(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),wa||c){if(null!==(r=Nc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Os(e,i),nl(r,e,i,-1))}return ml(),ja(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Qi++]=$i,Wi[Qi++]=Yi,Wi[Qi++]=Ji,$i=e.id,Yi=e.overflow,Ji=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Dl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dl(r,a):(a=Ll(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Ma(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Dl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Pi(t.type)&&Di(),Ha(t),null;case 3:return r=t.stateNode,$s(),Si(Ni),Si(xi),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ol(ss),ss=null))),Pa(e,t),Ha(t),null;case 5:Xs(t);var i=Qs(Ws.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=Qs(Gs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var c in ye(n,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=J(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ye(n,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&w(e,o,u,c))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ws.current),Qs(Gs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Si(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(ol(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Oc&&(Oc=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return $s(),Pa(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return Cs(t.type._context),Ha(t),null;case 19:if(Si(Zs),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)Ga(o,!1);else{if(0!==Oc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=eo(e))){for(t.flags|=128,Ga(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Bc&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Ha(t),null}else 2*Ye()-o.renderingStartTime>Bc&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=Zs.current,ki(Zs,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pc)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $s(),Si(Ni),Si(xi),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Si(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(Zs),null;case 4:return $s(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Gs.current);var s,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&jr("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,$a=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&ec(t,n,s)}i=i.next}while(i!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sc(e){var t=e.alternate;null!==t&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||oc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,hc=!1;function dc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:$a||Za(n,t);case 6:var r=uc,i=hc;uc=null,dc(e,t,n),hc=i,null!==(uc=r)&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(uc,n.stateNode));break;case 4:r=uc,i=hc,uc=n.stateNode.containerInfo,hc=!0,dc(e,t,n),uc=r,hc=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&ec(n,t,o),i=i.next}while(i!==r)}dc(e,t,n);break;case 1:if(!$a&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tl(n,t,a)}dc(e,t,n);break;case 21:dc(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,dc(e,t,n),$a=r):dc(e,t,n);break;default:dc(e,t,n)}}function pc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach((function(t){var r=xl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,hc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===uc)throw Error(s(160));fc(o,a,i),uc=null,hc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Tl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),vc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(g){Tl(e,e.return,g)}try{nc(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:mc(t,e),vc(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(mc(t,e),vc(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&Y(i,o),we(c,a);var u=we(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tl(e,e.return,g)}}break;case 6:if(mc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tl(e,e.return,g)}}break;case 3:if(mc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:mc(t,e),vc(e);break;case 13:mc(t,e),vc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=Ye())),4&r&&pc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,mc(t,e),$a=u):mc(t,e),vc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nc(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tl(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){_c(d);continue}}null!==p?(p.return=f,Xa=p):_c(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Tl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mc(t,e),vc(e),4&r&&pc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(oc(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),lc(e,ac(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cc(e,ac(e),o);break;default:throw Error(s(161))}}catch(a){Tl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Xa=e,wc(e,t,n)}function wc(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ja;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||$a;a=Ja;var l=$a;if(Ja=o,($a=c)&&!l)for(Xa=i;null!==Xa;)c=(o=Xa).child,22===o.tag&&null!==o.memoizedState?Ec(i):null!==c?(c.return=o,Xa=c):Ec(i);for(;null!==s;)Xa=s,wc(s,t,n),s=s.sibling;Xa=i,Ja=a,$a=l}bc(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):bc(e)}}function bc(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&ic(t)}catch(f){Tl(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function _c(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Ec(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Tl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Tl(t,i,c)}}var s=t.return;try{ic(t)}catch(c){Tl(t,s,c)}break;case 5:var o=t.return;try{ic(t)}catch(c){Tl(t,o,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Ic,Tc=Math.ceil,Sc=b.ReactCurrentDispatcher,kc=b.ReactCurrentOwner,Cc=b.ReactCurrentBatchConfig,xc=0,Nc=null,Ac=null,Rc=0,Pc=0,Dc=Ti(0),Oc=0,Lc=null,Mc=0,Fc=0,Uc=0,jc=null,Vc=null,zc=0,Bc=1/0,qc=null,Kc=!1,Gc=null,Hc=null,Wc=!1,Qc=null,Jc=0,$c=0,Yc=null,Xc=-1,Zc=0;function el(){return 0!==(6&xc)?Ye():-1!==Xc?Xc:Xc=Ye()}function tl(e){return 0===(1&e.mode)?1:0!==(2&xc)&&0!==Rc?Rc&-Rc:null!==ms.transition?(0===Zc&&(Zc=mt()),Zc):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nl(e,t,n,r){if(50<$c)throw $c=0,Yc=null,Error(s(185));vt(e,n,r),0!==(2&xc)&&e===Nc||(e===Nc&&(0===(2&xc)&&(Fc|=n),4===Oc&&al(e,Rc)),rl(e,r),1===n&&0===xc&&0===(1&t.mode)&&(Bc=Ye()+500,ji&&Bi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nc?Rc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cl.bind(null,e)):zi(cl.bind(null,e)),oi((function(){0===(6&xc)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Xc=-1,Zc=0,0!==(6&xc))throw Error(s(327));var n=e.callbackNode;if(El()&&e.callbackNode!==n)return null;var r=dt(e,e===Nc?Rc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var i=xc;xc|=2;var o=pl();for(Nc===e&&Rc===t||(qc=null,Bc=Ye()+500,dl(e,t));;)try{yl();break}catch(c){fl(e,c)}ks(),Sc.current=o,xc=i,null!==Ac?t=0:(Nc=null,Rc=0,t=Oc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sl(e,i))),1===t)throw n=Lc,dl(e,0),al(e,r),rl(e,Ye()),n;if(6===t)al(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gl(e,r))&&(0!==(o=pt(e))&&(r=o,t=sl(e,o))),1===t))throw n=Lc,dl(e,0),al(e,r),rl(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_l(e,Vc,qc);break;case 3:if(al(e,r),(130023424&r)===r&&10<(t=zc+500-Ye())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_l.bind(null,e,Vc,qc),t);break}_l(e,Vc,qc);break;case 4:if(al(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(_l.bind(null,e,Vc,qc),r);break}_l(e,Vc,qc);break;default:throw Error(s(329))}}}return rl(e,Ye()),e.callbackNode===n?il.bind(null,e):null}function sl(e,t){var n=jc;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=Vc,Vc=n,null!==t&&ol(t)),e}function ol(e){null===Vc?Vc=e:Vc.push.apply(Vc,e)}function al(e,t){for(t&=~Uc,t&=~Fc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&xc))throw Error(s(327));El();var t=dt(e,0);if(0===(1&t))return rl(e,Ye()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sl(e,r))}if(1===n)throw n=Lc,dl(e,0),al(e,t),rl(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_l(e,Vc,qc),rl(e,Ye()),null}function ll(e,t){var n=xc;xc|=1;try{return e(t)}finally{0===(xc=n)&&(Bc=Ye()+500,ji&&Bi())}}function ul(e){null!==Qc&&0===Qc.tag&&0===(6&xc)&&El();var t=xc;xc|=1;var n=Cc.transition,r=wt;try{if(Cc.transition=null,wt=1,e)return e()}finally{wt=r,Cc.transition=n,0===(6&(xc=t))&&Bi()}}function hl(){Pc=Dc.current,Si(Dc)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ac)for(n=Ac.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:$s(),Si(Ni),Si(xi),no();break;case 5:Xs(r);break;case 4:$s();break;case 13:case 19:Si(Zs);break;case 10:Cs(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Nc=e,Ac=e=Dl(e.current,null),Rc=Pc=t,Oc=0,Lc=null,Uc=Fc=Mc=0,Vc=jc=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Rs=null}return e}function fl(e,t){for(;;){var n=Ac;try{if(ks(),ro.current=Xo,lo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(so=0,co=ao=oo=null,uo=!1,ho=0,kc.current=null,null===n||null===n.return){Oc=1,Lc=t,Ac=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=Rc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,va(p,a,c,0,t),1&p.mode&&ma(o,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ma(o,u,t),ml();break e}l=Error(s(426))}else if(is&&1&c.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,c,0,t),ps(la(l,c));break e}}o=l=la(l,c),4!==Oc&&(Oc=2),null===jc?jc=[o]:jc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,l,t));break e;case 1:c=l;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hc||!Hc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,c,t));break e}}o=o.return}while(null!==o)}bl(n)}catch(b){t=b,Ac===n&&null!==n&&(Ac=n=n.return);continue}break}}function pl(){var e=Sc.current;return Sc.current=Xo,null===e?Xo:e}function ml(){0!==Oc&&3!==Oc&&2!==Oc||(Oc=4),null===Nc||0===(268435455&Mc)&&0===(268435455&Fc)||al(Nc,Rc)}function gl(e,t){var n=xc;xc|=2;var r=pl();for(Nc===e&&Rc===t||(qc=null,dl(e,t));;)try{vl();break}catch(i){fl(e,i)}if(ks(),xc=n,Sc.current=r,null!==Ac)throw Error(s(261));return Nc=null,Rc=0,Oc}function vl(){for(;null!==Ac;)wl(Ac)}function yl(){for(;null!==Ac&&!Je();)wl(Ac)}function wl(e){var t=Ic(e.alternate,e,Pc);e.memoizedProps=e.pendingProps,null===t?bl(e):Ac=t,kc.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Pc)))return void(Ac=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Ac=n);if(null===e)return Oc=6,void(Ac=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ac=t);Ac=t=e}while(null!==t);0===Oc&&(Oc=5)}function _l(e,t,n){var r=wt,i=Cc.transition;try{Cc.transition=null,wt=1,function(e,t,n,r){do{El()}while(null!==Qc);if(0!==(6&xc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nc&&(Ac=Nc=null,Rc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wc||(Wc=!0,Nl(tt,(function(){return El(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cc.transition,Cc.transition=null;var a=wt;wt=1;var c=xc;xc|=4,kc.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tl(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tc,tc=!1}(e,n),gc(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,yc(n,e,i),$e(),xc=c,wt=a,Cc.transition=o}else e.current=n;if(Wc&&(Wc=!1,Qc=e,Jc=i),o=e.pendingLanes,0===o&&(Hc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kc)throw Kc=!1,e=Gc,Gc=null,e;0!==(1&Jc)&&0!==e.tag&&El(),o=e.pendingLanes,0!==(1&o)?e===Yc?$c++:($c=0,Yc=e):$c=0,Bi()}(e,t,n,r)}finally{Cc.transition=i,wt=r}return null}function El(){if(null!==Qc){var e=bt(Jc),t=Cc.transition,n=wt;try{if(Cc.transition=null,wt=16>e?16:e,null===Qc)var r=!1;else{if(e=Qc,Qc=null,Jc=0,0!==(6&xc))throw Error(s(331));var i=xc;for(xc|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(sc(h),h===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nc(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Xa=y;break e}Xa=o.return}}var w=e.current;for(Xa=w;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=w;null!==Xa;){if(0!==(2048&(c=Xa).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(E){Tl(c,c.return,E)}if(c===a){Xa=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Xa=_;break e}Xa=c.return}}if(xc=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Cc.transition=t}}return!1}function Il(e,t,n){e=js(e,t=fa(0,t=la(n,t),1),1),t=el(),null!==e&&(vt(e,1,t),rl(e,t))}function Tl(e,t,n){if(3===e.tag)Il(e,e,n);else for(;null!==t;){if(3===t.tag){Il(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){t=js(t,e=pa(t,e=la(n,e),1),1),e=el(),null!==t&&(vt(t,1,e),rl(t,e));break}}t=t.return}}function Sl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Nc===e&&(Rc&n)===n&&(4===Oc||3===Oc&&(130023424&Rc)===Rc&&500>Ye()-zc?dl(e,0):Uc|=n),rl(e,t)}function kl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=el();null!==(e=Os(e,t))&&(vt(e,t,n),rl(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kl(e,n)}function xl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kl(e,n)}function Nl(e,t){return We(e,t)}function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Al(e,t,n,r)}function Pl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ol(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Ll(n.children,i,o,t);case T:a=8,i|=8;break;case S:return(e=Rl(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Rl(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rl(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Ml(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ll(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=Rl(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fl(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,i,s,o,a,c){return e=new jl(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function Bl(e,t,n,r,i,s,o,a,c){return(e=Vl(n,r,!0,e,0,s,0,a,c)).context=zl(null),n=e.current,(s=Us(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,js(n,s,i),e.current.lanes=i,vt(e,i,r),rl(e,r),e}function ql(e,t,n,r){var i=t.current,s=el(),o=tl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=js(i,t,o))&&(nl(e,i,o,s),Vs(e,i,o)),o}function Kl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Ic=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:Ys(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(ki(Zs,1&Zs.current),null!==(e=Ka(e,t,n))?e.sibling:null);ki(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ka(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ri(t,xi.current);Ns(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=xa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=la(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=la(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ka(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Ys(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Sa(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Fa(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Us(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xs(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),xs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=As(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ns(t,n),oa(t,r,i),ca(t,r,i,n),xa(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Wl="function"===typeof reportError?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}function Jl(e){this._internalRoot=e}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xl(){}function Zl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kl(o);a.call(e)}}ql(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kl(o);s.call(e)}}var o=Bl(t,r,e,0,null,!1,0,"",Xl);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),ul(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kl(c);a.call(e)}}var c=Vl(e,0,!1,null,0,!1,0,"",Xl);return e._reactRootContainer=c,e[pi]=c.current,Br(8===e.nodeType?e.parentNode:e),ul((function(){ql(t,c,n,r)})),c}(n,t,e,i,r);return Kl(o)}Jl.prototype.render=Ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));ql(e,t,null,null)},Jl.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){ql(null,e,null,null)})),t[pi]=null}},Jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Ye()),0===(6&xc)&&(Bc=Ye()+500,Bi()))}break;case 13:ul((function(){var t=Os(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Hl(e,1)}},Et=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nl(t,e,134217728,el());Hl(e,134217728)}},It=function(e){if(13===e.tag){var t=tl(e),n=Os(e,t);if(null!==n)nl(n,e,t,el());Hl(e,t)}},Tt=function(){return wt},St=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));W(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ll,Ne=ul;var eu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,ll]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$l(e))throw Error(s(299));var n=!1,r="",i=Wl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!Yl(t))throw Error(s(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$l(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Wl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jl(t)},t.render=function(e,t,n){if(!Yl(t))throw Error(s(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yl(e))throw Error(s(40));return!!e._reactRootContainer&&(ul((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!T.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===s?"."+x(c,0):s,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var u=s+x(a=e[l],l);c+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=N(a=a.value,t,i,u=s+x(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E.call(t,l)&&!T.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,D(E);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,T=!1,S=null,k=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==S){var e=t.unstable_now();x=e;var n=!0;try{n=S(!0,e)}finally{n?I():(T=!1,S=null)}}else T=!1}if("function"===typeof w)I=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,I=function(){P.postMessage(null)}}else I=function(){v(A,0)};function D(e){S=e,T||(T=!0,I())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(l,e),m||p||(m=!0,D(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var l=s[c];if(!a(l))return!1;var u=e[l],h=t[l];if(!1===(i=n?n.call(r,u,h,l):void 0)||void 0===i&&u!==h)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>gl,SDK_VERSION:()=>Wu,_DEFAULT_ENTRY_NAME:()=>Ru,_addComponent:()=>Mu,_addOrOverwriteComponent:()=>Fu,_apps:()=>Du,_clearComponents:()=>qu,_components:()=>Lu,_getProvider:()=>ju,_isFirebaseApp:()=>zu,_isFirebaseServerApp:()=>Bu,_registerComponent:()=>Uu,_removeServiceInstance:()=>Vu,_serverApps:()=>Ou,deleteApp:()=>Xu,getApp:()=>$u,getApps:()=>Yu,initializeApp:()=>Qu,initializeServerApp:()=>Ju,onLog:()=>eh,registerVersion:()=>Zu,setLogLevel:()=>th});var t,r=n(391),i=n(43),s=n.t(i,2),o=n(950),a=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const l="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=t.Pop,m=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){h=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:h,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(c({},a.state,{idx:g}),""));let b={get action(){return h},get location(){return e(s,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),m=e,()=>{s.removeEventListener(l,y),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(b.location,e,n);r&&r(i,e),g=v()+1;let c=d(i,g),l=b.createHref(i);try{a.pushState(c,"",l)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(l)}o&&m&&m({action:h,location:b.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(b.location,e,n);r&&r(i,e),g=v();let s=d(i,g),c=b.createHref(i);a.replaceState(s,"",c),o&&m&&m({action:h,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=P(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=R(r);s=N(i[o],e)}return s}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=F([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:x(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=b(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,E=3,I=2,T=1,S=10,k=-2,C=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=k),t&&(r+=I),n.filter((e=>!C(e))).reduce(((e,t)=>e+(_.test(t)?E:""===t?T:S)),r)}function N(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(r,l.params);let u=e.route;s.push({params:r,pathname:F([i,l.pathname]),pathnameBase:U(F([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=F([i,l.pathnameBase]))}return s}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function R(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=O(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=c({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:j(r),hash:V(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!d||(l.pathname+="/"),l}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const G=i.createContext(null);const H=i.createContext(null);const W=i.createContext(null);const Q=i.createContext(null);const J=i.createContext({outlet:null,matches:[],isDataRoute:!1});const $=i.createContext(null);function Y(){return null!=i.useContext(Q)}function X(){return Y()||u(!1),i.useContext(Q).location}function Z(e){i.useContext(W).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(J);return e?function(){let{router:e}=ue(ce.UseNavigateStable),t=de(le.UseNavigateStable),n=i.useRef(!1);Z((()=>{n.current=!0}));let r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},i)))}),[e,t]);return r}():function(){Y()||u(!1);let e=i.useContext(G),{basename:t,future:n,navigator:r}=i.useContext(W),{matches:s}=i.useContext(J),{pathname:o}=X(),a=JSON.stringify(L(s,n.v7_relativeSplatPath)),c=i.useRef(!1);return Z((()=>{c.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!c.current)return;if("number"===typeof n)return void r.go(n);let s=M(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[t,r,a,o,e])}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(W),{matches:s}=i.useContext(J),{pathname:o}=X(),a=JSON.stringify(L(s,r.v7_relativeSplatPath));return i.useMemo((()=>M(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function ne(e,n,r,s){Y()||u(!1);let{navigator:o}=i.useContext(W),{matches:a}=i.useContext(J),c=a[a.length-1],l=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let d,f=X();if(n){var p;let e="string"===typeof n?m(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",v=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=y(e,{pathname:v});let b=ae(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:F([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,r,s);return n&&b?i.createElement(Q.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},b):b}function re(){let e=function(){var e;let t=i.useContext($),n=he(le.UseRouteError),r=de(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const ie=i.createElement(re,null);class se extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(J.Provider,{value:this.props.routeContext},i.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(G);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(J.Provider,{value:t},r)}function ae(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,c=null==(s=n)?void 0:s.errors;if(null!=c){let e=a.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,r,s)=>{let o,u=!1,d=null,f=null;var p;n&&(o=c&&r.route.id?c[r.route.id]:void 0,d=r.route.errorElement||ie,l&&(h<0&&0===s?(p="route-fallback",!1||fe[p]||(fe[p]=!0),u=!0,f=null):h===s&&(u=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:u?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(oe,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(se,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ue(e){let t=i.useContext(G);return t||u(!1),t}function he(e){let t=i.useContext(H);return t||u(!1),t}function de(e){let t=function(e){let t=i.useContext(J);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const fe={};s.startTransition;function pe(e){u(!1)}function me(e){let{basename:n="/",children:r=null,location:s,navigationType:o=t.Pop,navigator:a,static:c=!1,future:l}=e;Y()&&u(!1);let h=n.replace(/^\/*/,"/"),d=i.useMemo((()=>({basename:h,navigator:a,static:c,future:K({v7_relativeSplatPath:!1},l)})),[h,l,a,c]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=s,w=i.useMemo((()=>{let e=P(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:o}}),[h,f,p,g,v,y,o]);return null==w?null:i.createElement(W.Provider,{value:d},i.createElement(Q.Provider,{children:r,value:w}))}function ge(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise((()=>{}));i.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==pe&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,s)),n.push(o)})),n}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}function we(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const be=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(kU){}new Map;const _e=s.startTransition;a.flushSync,s.useId;function Ee(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let c=o.current,[l,u]=i.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},d=i.useCallback((e=>{h&&_e?_e((()=>u(e))):u(e)}),[u,h]);return i.useLayoutEffect((()=>c.listen(d)),[c,d]),i.createElement(me,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c,future:r})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Se=i.forwardRef((function(e,t){let n,{onClick:r,relative:s,reloadDocument:o,replace:a,state:c,target:l,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=we(e,be),{basename:g}=i.useContext(W),v=!1;if("string"===typeof h&&Te.test(h)&&(n=h,Ie))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=P(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(kU){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;Y()||u(!1);let{basename:r,navigator:s}=i.useContext(W),{hash:o,pathname:a,search:c}=te(e,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:F([r,a])),s.createHref({pathname:l,search:c,hash:o})}(h,{relative:s}),w=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:c}=void 0===t?{}:t,l=ee(),u=X(),h=te(e,{relative:a});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:p(u)===p(h);l(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:c})}}),[u,l,h,r,s,n,e,o,a,c])}(h,{replace:a,state:c,target:l,preventScrollReset:d,relative:s,unstable_viewTransition:f});return i.createElement("a",ye({},m,{href:n||y,onClick:v||o?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:l}))}));var ke,Ce;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ce||(Ce={}));function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}function Ne(e,t){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ne(e,t)}function Ae(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ne(e,t)}const Re=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};const Pe=function(){this.__data__=[],this.size=0};const De=function(e,t){return e===t||e!==e&&t!==t};const Oe=function(e,t){for(var n=e.length;n--;)if(De(e[n][0],t))return n;return-1};var Le=Array.prototype.splice;const Me=function(e){var t=this.__data__,n=Oe(t,e);return!(n<0)&&(n==t.length-1?t.pop():Le.call(t,n,1),--this.size,!0)};const Fe=function(e){var t=this.__data__,n=Oe(t,e);return n<0?void 0:t[n][1]};const Ue=function(e){return Oe(this.__data__,e)>-1};const je=function(e,t){var n=this.__data__,r=Oe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ve.prototype.clear=Pe,Ve.prototype.delete=Me,Ve.prototype.get=Fe,Ve.prototype.has=Ue,Ve.prototype.set=je;const ze=Ve;const Be=function(){this.__data__=new ze,this.size=0};const qe=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const Ke=function(e){return this.__data__.get(e)};const Ge=function(e){return this.__data__.has(e)};const He="object"==typeof global&&global&&global.Object===Object&&global;var We="object"==typeof self&&self&&self.Object===Object&&self;const Qe=He||We||Function("return this")();const Je=Qe.Symbol;var $e=Object.prototype,Ye=$e.hasOwnProperty,Xe=$e.toString,Ze=Je?Je.toStringTag:void 0;const et=function(e){var t=Ye.call(e,Ze),n=e[Ze];try{e[Ze]=void 0;var r=!0}catch(kU){}var i=Xe.call(e);return r&&(t?e[Ze]=n:delete e[Ze]),i};var tt=Object.prototype.toString;const nt=function(e){return tt.call(e)};var rt=Je?Je.toStringTag:void 0;const it=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":rt&&rt in Object(e)?et(e):nt(e)};const st=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const ot=function(e){if(!st(e))return!1;var t=it(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const at=Qe["__core-js_shared__"];var ct=function(){var e=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const lt=function(e){return!!ct&&ct in e};var ut=Function.prototype.toString;const ht=function(e){if(null!=e){try{return ut.call(e)}catch(kU){}try{return e+""}catch(kU){}}return""};var dt=/^\[object .+?Constructor\]$/,ft=Function.prototype,pt=Object.prototype,mt=ft.toString,gt=pt.hasOwnProperty,vt=RegExp("^"+mt.call(gt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const yt=function(e){return!(!st(e)||lt(e))&&(ot(e)?vt:dt).test(ht(e))};const wt=function(e,t){return null==e?void 0:e[t]};const bt=function(e,t){var n=wt(e,t);return yt(n)?n:void 0};const _t=bt(Qe,"Map");const Et=bt(Object,"create");const It=function(){this.__data__=Et?Et(null):{},this.size=0};const Tt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var St=Object.prototype.hasOwnProperty;const kt=function(e){var t=this.__data__;if(Et){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return St.call(t,e)?t[e]:void 0};var Ct=Object.prototype.hasOwnProperty;const xt=function(e){var t=this.__data__;return Et?void 0!==t[e]:Ct.call(t,e)};const Nt=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Et&&void 0===t?"__lodash_hash_undefined__":t,this};function At(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}At.prototype.clear=It,At.prototype.delete=Tt,At.prototype.get=kt,At.prototype.has=xt,At.prototype.set=Nt;const Rt=At;const Pt=function(){this.size=0,this.__data__={hash:new Rt,map:new(_t||ze),string:new Rt}};const Dt=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const Ot=function(e,t){var n=e.__data__;return Dt(t)?n["string"==typeof t?"string":"hash"]:n.map};const Lt=function(e){var t=Ot(this,e).delete(e);return this.size-=t?1:0,t};const Mt=function(e){return Ot(this,e).get(e)};const Ft=function(e){return Ot(this,e).has(e)};const Ut=function(e,t){var n=Ot(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function jt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}jt.prototype.clear=Pt,jt.prototype.delete=Lt,jt.prototype.get=Mt,jt.prototype.has=Ft,jt.prototype.set=Ut;const Vt=jt;const zt=function(e,t){var n=this.__data__;if(n instanceof ze){var r=n.__data__;if(!_t||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Vt(r)}return n.set(e,t),this.size=n.size,this};function Bt(e){var t=this.__data__=new ze(e);this.size=t.size}Bt.prototype.clear=Be,Bt.prototype.delete=qe,Bt.prototype.get=Ke,Bt.prototype.has=Ge,Bt.prototype.set=zt;const qt=Bt;const Kt=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const Gt=function(e){return this.__data__.has(e)};function Ht(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Vt;++t<n;)this.add(e[t])}Ht.prototype.add=Ht.prototype.push=Kt,Ht.prototype.has=Gt;const Wt=Ht;const Qt=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};const Jt=function(e,t){return e.has(t)};const $t=function(e,t,n,r,i,s){var o=1&n,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var l=s.get(e),u=s.get(t);if(l&&u)return l==t&&u==e;var h=-1,d=!0,f=2&n?new Wt:void 0;for(s.set(e,t),s.set(t,e);++h<a;){var p=e[h],m=t[h];if(r)var g=o?r(m,p,h,t,e,s):r(p,m,h,e,t,s);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!Qt(t,(function(e,t){if(!Jt(f,t)&&(p===e||i(p,e,n,r,s)))return f.push(t)}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,s)){d=!1;break}}return s.delete(e),s.delete(t),d};const Yt=Qe.Uint8Array;const Xt=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};const Zt=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var en=Je?Je.prototype:void 0,tn=en?en.valueOf:void 0;const nn=function(e,t,n,r,i,s,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Yt(e),new Yt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return De(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=Xt;case"[object Set]":var c=1&r;if(a||(a=Zt),e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=2,o.set(e,t);var u=$t(a(e),a(t),r,i,s,o);return o.delete(e),u;case"[object Symbol]":if(tn)return tn.call(e)==tn.call(t)}return!1};const rn=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};const sn=Array.isArray;const on=function(e,t,n){var r=t(e);return sn(e)?r:rn(r,n(e))};const an=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[i++]=o)}return s};const cn=function(){return[]};var ln=Object.prototype.propertyIsEnumerable,un=Object.getOwnPropertySymbols;const hn=un?function(e){return null==e?[]:(e=Object(e),an(un(e),(function(t){return ln.call(e,t)})))}:cn;const dn=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};const fn=function(e){return null!=e&&"object"==typeof e};const pn=function(e){return fn(e)&&"[object Arguments]"==it(e)};var mn=Object.prototype,gn=mn.hasOwnProperty,vn=mn.propertyIsEnumerable;const yn=pn(function(){return arguments}())?pn:function(e){return fn(e)&&gn.call(e,"callee")&&!vn.call(e,"callee")};const wn=function(){return!1};var bn="object"==typeof exports&&exports&&!exports.nodeType&&exports,_n=bn&&"object"==typeof module&&module&&!module.nodeType&&module,En=_n&&_n.exports===bn?Qe.Buffer:void 0;const In=(En?En.isBuffer:void 0)||wn;var Tn=/^(?:0|[1-9]\d*)$/;const Sn=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Tn.test(e))&&e>-1&&e%1==0&&e<t};const kn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Cn={};Cn["[object Float32Array]"]=Cn["[object Float64Array]"]=Cn["[object Int8Array]"]=Cn["[object Int16Array]"]=Cn["[object Int32Array]"]=Cn["[object Uint8Array]"]=Cn["[object Uint8ClampedArray]"]=Cn["[object Uint16Array]"]=Cn["[object Uint32Array]"]=!0,Cn["[object Arguments]"]=Cn["[object Array]"]=Cn["[object ArrayBuffer]"]=Cn["[object Boolean]"]=Cn["[object DataView]"]=Cn["[object Date]"]=Cn["[object Error]"]=Cn["[object Function]"]=Cn["[object Map]"]=Cn["[object Number]"]=Cn["[object Object]"]=Cn["[object RegExp]"]=Cn["[object Set]"]=Cn["[object String]"]=Cn["[object WeakMap]"]=!1;const xn=function(e){return fn(e)&&kn(e.length)&&!!Cn[it(e)]};const Nn=function(e){return function(t){return e(t)}};var An="object"==typeof exports&&exports&&!exports.nodeType&&exports,Rn=An&&"object"==typeof module&&module&&!module.nodeType&&module,Pn=Rn&&Rn.exports===An&&He.process,Dn=function(){try{var e=Rn&&Rn.require&&Rn.require("util").types;return e||Pn&&Pn.binding&&Pn.binding("util")}catch(kU){}}();var On=Dn&&Dn.isTypedArray;const Ln=On?Nn(On):xn;var Mn=Object.prototype.hasOwnProperty;const Fn=function(e,t){var n=sn(e),r=!n&&yn(e),i=!n&&!r&&In(e),s=!n&&!r&&!i&&Ln(e),o=n||r||i||s,a=o?dn(e.length,String):[],c=a.length;for(var l in e)!t&&!Mn.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Sn(l,c))||a.push(l);return a};var Un=Object.prototype;const jn=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Un)};const Vn=function(e,t){return function(n){return e(t(n))}};const zn=Vn(Object.keys,Object);var Bn=Object.prototype.hasOwnProperty;const qn=function(e){if(!jn(e))return zn(e);var t=[];for(var n in Object(e))Bn.call(e,n)&&"constructor"!=n&&t.push(n);return t};const Kn=function(e){return null!=e&&kn(e.length)&&!ot(e)};const Gn=function(e){return Kn(e)?Fn(e):qn(e)};const Hn=function(e){return on(e,Gn,hn)};var Wn=Object.prototype.hasOwnProperty;const Qn=function(e,t,n,r,i,s){var o=1&n,a=Hn(e),c=a.length;if(c!=Hn(t).length&&!o)return!1;for(var l=c;l--;){var u=a[l];if(!(o?u in t:Wn.call(t,u)))return!1}var h=s.get(e),d=s.get(t);if(h&&d)return h==t&&d==e;var f=!0;s.set(e,t),s.set(t,e);for(var p=o;++l<c;){var m=e[u=a[l]],g=t[u];if(r)var v=o?r(g,m,u,t,e,s):r(m,g,u,e,t,s);if(!(void 0===v?m===g||i(m,g,n,r,s):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,w=t.constructor;y==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(f=!1)}return s.delete(e),s.delete(t),f};const Jn=bt(Qe,"DataView");const $n=bt(Qe,"Promise");const Yn=bt(Qe,"Set");const Xn=bt(Qe,"WeakMap");var Zn="[object Map]",er="[object Promise]",tr="[object Set]",nr="[object WeakMap]",rr="[object DataView]",ir=ht(Jn),sr=ht(_t),or=ht($n),ar=ht(Yn),cr=ht(Xn),lr=it;(Jn&&lr(new Jn(new ArrayBuffer(1)))!=rr||_t&&lr(new _t)!=Zn||$n&&lr($n.resolve())!=er||Yn&&lr(new Yn)!=tr||Xn&&lr(new Xn)!=nr)&&(lr=function(e){var t=it(e),n="[object Object]"==t?e.constructor:void 0,r=n?ht(n):"";if(r)switch(r){case ir:return rr;case sr:return Zn;case or:return er;case ar:return tr;case cr:return nr}return t});const ur=lr;var hr="[object Arguments]",dr="[object Array]",fr="[object Object]",pr=Object.prototype.hasOwnProperty;const mr=function(e,t,n,r,i,s){var o=sn(e),a=sn(t),c=o?dr:ur(e),l=a?dr:ur(t),u=(c=c==hr?fr:c)==fr,h=(l=l==hr?fr:l)==fr,d=c==l;if(d&&In(e)){if(!In(t))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new qt),o||Ln(e)?$t(e,t,n,r,i,s):nn(e,t,c,n,r,i,s);if(!(1&n)){var f=u&&pr.call(e,"__wrapped__"),p=h&&pr.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,g=p?t.value():t;return s||(s=new qt),i(m,g,n,r,s)}}return!!d&&(s||(s=new qt),Qn(e,t,n,r,i,s))};const gr=function e(t,n,r,i,s){return t===n||(null==t||null==n||!fn(t)&&!fn(n)?t!==t&&n!==n:mr(t,n,r,i,e,s))};const vr=function(e,t,n,r){var i=n.length,s=i,o=!r;if(null==e)return!s;for(e=Object(e);i--;){var a=n[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){var c=(a=n[i])[0],l=e[c],u=a[1];if(o&&a[2]){if(void 0===l&&!(c in e))return!1}else{var h=new qt;if(r)var d=r(l,u,c,e,t,h);if(!(void 0===d?gr(u,l,3,r,h):d))return!1}}return!0};const yr=function(e){return e===e&&!st(e)};const wr=function(e){for(var t=Gn(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,yr(i)]}return t};const br=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};const _r=function(e){var t=wr(e);return 1==t.length&&t[0][2]?br(t[0][0],t[0][1]):function(n){return n===e||vr(n,e,t)}};const Er=function(e){return"symbol"==typeof e||fn(e)&&"[object Symbol]"==it(e)};var Ir=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tr=/^\w*$/;const Sr=function(e,t){if(sn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Er(e))||(Tr.test(e)||!Ir.test(e)||null!=t&&e in Object(t))};function kr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(kr.Cache||Vt),n}kr.Cache=Vt;const Cr=kr;var xr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nr=/\\(\\)?/g;const Ar=function(e){var t=Cr(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(xr,(function(e,n,r,i){t.push(r?i.replace(Nr,"$1"):n||e)})),t}));var Rr=Je?Je.prototype:void 0,Pr=Rr?Rr.toString:void 0;const Dr=function e(t){if("string"==typeof t)return t;if(sn(t))return Re(t,e)+"";if(Er(t))return Pr?Pr.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const Or=function(e){return null==e?"":Dr(e)};const Lr=function(e,t){return sn(e)?e:Sr(e,t)?[e]:Ar(Or(e))};const Mr=function(e){if("string"==typeof e||Er(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};const Fr=function(e,t){for(var n=0,r=(t=Lr(t,e)).length;null!=e&&n<r;)e=e[Mr(t[n++])];return n&&n==r?e:void 0};const Ur=function(e,t,n){var r=null==e?void 0:Fr(e,t);return void 0===r?n:r};const jr=function(e,t){return null!=e&&t in Object(e)};const Vr=function(e,t,n){for(var r=-1,i=(t=Lr(t,e)).length,s=!1;++r<i;){var o=Mr(t[r]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&kn(i)&&Sn(o,i)&&(sn(e)||yn(e))};const zr=function(e,t){return null!=e&&Vr(e,t,jr)};const Br=function(e,t){return Sr(e)&&yr(t)?br(Mr(e),t):function(n){var r=Ur(n,e);return void 0===r&&r===t?zr(n,e):gr(t,r,3)}};const qr=function(e){return e};const Kr=function(e){return function(t){return null==t?void 0:t[e]}};const Gr=function(e){return function(t){return Fr(t,e)}};const Hr=function(e){return Sr(e)?Kr(Mr(e)):Gr(e)};const Wr=function(e){return"function"==typeof e?e:null==e?qr:"object"==typeof e?sn(e)?Br(e[0],e[1]):_r(e):Hr(e)};const Qr=function(e){return function(t,n,r){for(var i=-1,s=Object(t),o=r(t),a=o.length;a--;){var c=o[e?a:++i];if(!1===n(s[c],c,s))break}return t}}();const Jr=function(e,t){return function(n,r){if(null==n)return n;if(!Kn(n))return e(n,r);for(var i=n.length,s=t?i:-1,o=Object(n);(t?s--:++s<i)&&!1!==r(o[s],s,o););return n}};const $r=Jr((function(e,t){return e&&Qr(e,t,Gn)}));const Yr=function(e,t){var n=-1,r=Kn(e)?Array(e.length):[];return $r(e,(function(e,i,s){r[++n]=t(e,i,s)})),r};const Xr=function(e,t){return(sn(e)?Re:Yr)(e,Wr(t,3))};const Zr=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};const ei=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};const ti=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s};const ni=function(e,t){return t.length<2?e:Fr(e,ti(t,0,-1))};const ri=function(e,t,n){t=Lr(t,e);var r=null==(e=ni(e,t))?e:e[Mr(ei(t))];return null==r?void 0:Zr(r,e,n)};var ii=Math.max;const si=function(e,t,n){return t=ii(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=ii(r.length-t,0),o=Array(s);++i<s;)o[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(o),Zr(e,this,a)}};const oi=function(e){return function(){return e}};const ai=function(){try{var e=bt(Object,"defineProperty");return e({},"",{}),e}catch(kU){}}();const ci=ai?function(e,t){return ai(e,"toString",{configurable:!0,enumerable:!1,value:oi(t),writable:!0})}:qr;var li=Date.now;const ui=function(e){var t=0,n=0;return function(){var r=li(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};const hi=ui(ci);const di=function(e,t){return hi(si(e,t,qr),e+"")};const fi=di(ri);function pi(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=pi(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const mi=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=pi(e))&&(r&&(r+=" "),r+=t);return r};var gi={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"};function vi(e){var t=typeof e;return"string"===t||"number"===t?gi[e]||e:""}var yi=function(e,t){return e&&t},wi=function(e,t){return e&&!0!==e&&e+" "+t},bi=function(e,t){return e&&(!0===e?t:e+" "+t)},_i=function(e,t){return e&&!0!==e?e.replace("large screen","large-screen").replace(/ vertically/g,"-vertically").split(" ").map((function(e){return e.replace("-"," ")+" "+t})).join(" "):null},Ei=function(e){return"justified"===e?"justified":wi(e,"aligned")},Ii=function(e){return wi(e,"aligned")},Ti=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=!1),n&&"equal"===e)return"equal width";var r=typeof e;return"string"!==r&&"number"!==r||!t?vi(e):vi(e)+" "+t};const Si=function(e,t){var n=e.handledProps,r=void 0===n?[]:n;return Object.keys(t).reduce((function(e,n){return"childKey"===n||-1===r.indexOf(n)&&(e[n]=t[n]),e}),{})};const ki=function(e,t,n){var r=e.defaultProps,i=void 0===r?{}:r;if(t.as&&t.as!==i.as)return t.as;if(n){var s=n();if(s)return s}return t.href?"a":i.as||"div"};const Ci=function(e,t){var n;return $r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n};const xi=function(e,t,n){if(!st(n))return!1;var r=typeof t;return!!("number"==r?Kn(n)&&Sn(t,n.length):"string"==r&&t in n)&&De(n[t],e)};const Ni=function(e,t,n){var r=sn(e)?Qt:Ci;return n&&xi(e,t,n)&&(t=void 0),r(e,Wr(t,3))};var Ai=function(e){return null===e||void 0===e||Array.isArray(e)&&0===e.length};const Ri=function(e){return void 0===e};var Pi=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=(t=e.call.apply(e,[this].concat(r))||this).constructor,o=s.autoControlledProps,a=s.getAutoControlledStateFromProps,c=fi(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),"getInitialAutoControlledState",t.props)||{},l=o.reduce((function(e,n){return e[n]=function(e,t,n,r){void 0===r&&(r=!1);var i,s=t[e];if(void 0!==s)return s;if(r){var o=t[(i=e,"default"+(i[0].toUpperCase()+i.slice(1)))];if(void 0!==o)return o;if(n){var a=n[e];if(void 0!==a)return a}}return"checked"!==e&&("value"===e?t.multiple?[]:"":void 0)}(n,t.props,c,!0),e}),{});return t.state=xe({},c,l,{autoControlledProps:o,getAutoControlledStateFromProps:a}),t}return Ae(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.autoControlledProps,r=t.getAutoControlledStateFromProps,i=n.reduce((function(t,n){return!Ri(e[n])&&(t[n]=e[n]),t}),{});if(r){var s=r(e,xe({},t,i),t);return xe({},i,s)}return i},t.getAutoControlledStateFromProps=function(){return null},t}(i.Component);const Di=function(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1};const Oi=function(e){return e!==e};const Li=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};const Mi=function(e,t,n){return t===t?Li(e,t,n):Di(e,Oi,n)};const Fi=function(e,t){return!!(null==e?0:e.length)&&Mi(e,t,0)>-1};const Ui=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};const ji=function(){};var Vi=Yn&&1/Zt(new Yn([,-0]))[1]==1/0?function(e){return new Yn(e)}:ji;const zi=Vi;const Bi=function(e,t,n){var r=-1,i=Fi,s=e.length,o=!0,a=[],c=a;if(n)o=!1,i=Ui;else if(s>=200){var l=t?null:zi(e);if(l)return Zt(l);o=!1,i=Jt,c=new Wt}else c=t?[]:a;e:for(;++r<s;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,o&&h===h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),a.push(u)}else i(c,h,n)||(c!==a&&c.push(h),a.push(u))}return a};const qi=function(e){return e&&e.length?Bi(e):[]};const Ki=Vn(Object.getPrototypeOf,Object);var Gi=Function.prototype,Hi=Object.prototype,Wi=Gi.toString,Qi=Hi.hasOwnProperty,Ji=Wi.call(Object);const $i=function(e){if(!fn(e)||"[object Object]"!=it(e))return!1;var t=Ki(e);if(null===t)return!0;var n=Qi.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Wi.call(n)==Ji};const Yi=function(e){return"number"==typeof e||fn(e)&&"[object Number]"==it(e)};const Xi=function(e){return"string"==typeof e||!sn(e)&&fn(e)&&"[object String]"==it(e)};const Zi=function(e){return!0===e||!1===e||fn(e)&&"[object Boolean]"==it(e)};const es=function(e){return null==e};function ts(e,t,n,r){if(void 0===r&&(r={}),"function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthand() Component must be a string or function.");if(es(n)||Zi(n))return null;var s=Xi(n),o=Yi(n),a=ot(n),c=i.isValidElement(n),l=$i(n),u=s||o||sn(n);if(!a&&!c&&!l&&!u)return null;var h=r.defaultProps,d=void 0===h?{}:h,f=c&&n.props||l&&n||u&&t(n),p=r.overrideProps,m=void 0===p?{}:p;m=ot(m)?m(xe({},d,f)):m;var g=xe({},d,f,m);if(d.className||m.className||f.className){var v=mi(d.className,m.className,f.className);g.className=qi(v.split(" ")).join(" ")}if((d.style||m.style||f.style)&&(g.style=xe({},d.style,f.style,m.style)),es(g.key)){var y=g.childKey,w=r.autoGenerateKey,b=void 0===w||w;es(y)?b&&(s||o)&&(g.key=n):(g.key="function"===typeof y?y(g):y,delete g.childKey)}return c?i.cloneElement(n,g):"function"===typeof g.children?g.children(e,xe({},g,{children:void 0})):u||l?i.createElement(e,g):a?n(e,g,g.children):void 0}function ns(e,t){if("function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return ts(e,t,n,r)}}var rs=ns("img",(function(e){return{src:e}})),is=ns("input",(function(e){return{type:e}})),ss=ns("label",(function(e){return{children:e}})),os=ns("p",(function(e){return{children:e}}));function as(e){var t=e.children,n=e.className,r=e.content,s=mi("header",n),o=Si(as,e),a=ki(as,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}as.handledProps=["as","children","className","content"],as.propTypes={};const cs=as;const ls=function(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n};const us=function(e){return function(t){return null==e?void 0:e[t]}}({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"});var hs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ds=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");const fs=function(e){return(e=Or(e))&&e.replace(hs,us).replace(ds,"")};var ps=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;const ms=function(e){return e.match(ps)||[]};var gs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;const vs=function(e){return gs.test(e)};var ys="\\ud800-\\udfff",ws="\\u2700-\\u27bf",bs="a-z\\xdf-\\xf6\\xf8-\\xff",_s="A-Z\\xc0-\\xd6\\xd8-\\xde",Es="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Is="["+Es+"]",Ts="\\d+",Ss="["+ws+"]",ks="["+bs+"]",Cs="[^"+ys+Es+Ts+ws+bs+_s+"]",xs="(?:\\ud83c[\\udde6-\\uddff]){2}",Ns="[\\ud800-\\udbff][\\udc00-\\udfff]",As="["+_s+"]",Rs="(?:"+ks+"|"+Cs+")",Ps="(?:"+As+"|"+Cs+")",Ds="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Os="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ls="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Ms="[\\ufe0e\\ufe0f]?",Fs=Ms+Ls+("(?:\\u200d(?:"+["[^"+ys+"]",xs,Ns].join("|")+")"+Ms+Ls+")*"),Us="(?:"+[Ss,xs,Ns].join("|")+")"+Fs,js=RegExp([As+"?"+ks+"+"+Ds+"(?="+[Is,As,"$"].join("|")+")",Ps+"+"+Os+"(?="+[Is,As+Rs,"$"].join("|")+")",As+"?"+Rs+"+"+Ds,As+"+"+Os,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ts,Us].join("|"),"g");const Vs=function(e){return e.match(js)||[]};const zs=function(e,t,n){return e=Or(e),void 0===(t=n?void 0:t)?vs(e)?Vs(e):ms(e):e.match(t)||[]};var Bs=RegExp("['\u2019]","g");const qs=function(e){return function(t){return ls(zs(fs(t).replace(Bs,"")),e,"")}};const Ks=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:ti(e,t,n)};var Gs=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const Hs=function(e){return Gs.test(e)};const Ws=function(e){return e.split("")};var Qs="\\ud800-\\udfff",Js="["+Qs+"]",$s="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ys="\\ud83c[\\udffb-\\udfff]",Xs="[^"+Qs+"]",Zs="(?:\\ud83c[\\udde6-\\uddff]){2}",eo="[\\ud800-\\udbff][\\udc00-\\udfff]",to="(?:"+$s+"|"+Ys+")"+"?",no="[\\ufe0e\\ufe0f]?",ro=no+to+("(?:\\u200d(?:"+[Xs,Zs,eo].join("|")+")"+no+to+")*"),io="(?:"+[Xs+$s+"?",$s,Zs,eo,Js].join("|")+")",so=RegExp(Ys+"(?="+Ys+")|"+io+ro,"g");const oo=function(e){return e.match(so)||[]};const ao=function(e){return Hs(e)?oo(e):Ws(e)};const co=function(e){return function(t){t=Or(t);var n=Hs(t)?ao(t):void 0,r=n?n[0]:t.charAt(0),i=n?Ks(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase");const lo=qs((function(e,t,n){return e+(n?" ":"")+co(t)}));function uo(e){var t=e.children,n=e.className,r=e.content,s=e.size,o=mi(s,"icons",n),a=Si(uo,e),c=ki(uo,e);return i.createElement(c,xe({},a,{className:o}),Ai(t)?r:t)}uo.handledProps=["as","children","className","content","size"],uo.propTypes={},uo.defaultProps={as:"i"};const ho=uo;var fo=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled?e.preventDefault():fi(t.props,"onClick",e,t.props)},t}Ae(t,e);var n=t.prototype;return n.getIconAriaOptions=function(){var e={},t=this.props,n=t["aria-label"],r=t["aria-hidden"];return es(n)?e["aria-hidden"]="true":e["aria-label"]=n,es(r)||(e["aria-hidden"]=r),e},n.render=function(){var e=this.props,n=e.bordered,r=e.circular,s=e.className,o=e.color,a=e.corner,c=e.disabled,l=e.fitted,u=e.flipped,h=e.inverted,d=e.link,f=e.loading,p=e.name,m=e.rotated,g=e.size,v=mi(o,p,g,yi(n,"bordered"),yi(r,"circular"),yi(c,"disabled"),yi(l,"fitted"),yi(h,"inverted"),yi(d,"link"),yi(f,"loading"),bi(a,"corner"),wi(u,"flipped"),wi(m,"rotated"),"icon",s),y=Si(t,this.props),w=ki(t,this.props),b=this.getIconAriaOptions();return i.createElement(w,xe({},y,b,{className:v,onClick:this.handleClick}))},t}(i.PureComponent);fo.handledProps=["aria-hidden","aria-label","as","bordered","circular","className","color","corner","disabled","fitted","flipped","inverted","link","loading","name","rotated","size"],fo.propTypes={},fo.defaultProps={as:"i"},fo.Group=ho,fo.create=ns(fo,(function(e){return{name:e}}));const po=fo;var mo=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||fi(t.props,"onClick",e,t.props)},t}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,s=e.className,o=e.color,a=e.content,c=e.disabled,l=e.fitted,u=e.header,h=e.icon,d=e.link,f=e.name,p=e.onClick,m=e.position,g=mi(o,m,yi(n,"active"),yi(c,"disabled"),yi(!0===h||h&&!(f||a),"icon"),yi(u,"header"),yi(d,"link"),bi(l,"fitted"),"item",s),v=ki(t,this.props,(function(){if(p)return"a"})),y=Si(t,this.props);return Ai(r)?i.createElement(v,xe({},y,{className:g,onClick:this.handleClick}),po.create(h,{autoGenerateKey:!1}),Ai(a)?lo(f):a):i.createElement(v,xe({},y,{className:g,onClick:this.handleClick}),r)},t}(i.Component);function go(e){var t=e.children,n=e.className,r=e.content,s=e.position,o=mi(s,"menu",n),a=Si(go,e),c=ki(go,e);return i.createElement(c,xe({},a,{className:o}),Ai(t)?r:t)}mo.handledProps=["active","as","children","className","color","content","disabled","fitted","header","icon","index","link","name","onClick","position"],mo.propTypes={},mo.create=ns(mo,(function(e){return{content:e,name:e}})),go.handledProps=["as","children","className","content","position"],go.propTypes={};const vo=go;var yo=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){var i=r.index;t.setState({activeIndex:i}),fi(e,"onClick",n,r),fi(t.props,"onItemClick",n,r)}}},t}Ae(t,e);var n=t.prototype;return n.renderItems=function(){var e=this,t=this.props.items,n=this.state.activeIndex;return Xr(t,(function(t,r){return mo.create(t,{defaultProps:{active:parseInt(n,10)===r,index:r},overrideProps:e.handleItemOverrides})}))},n.render=function(){var e=this.props,n=e.attached,r=e.borderless,s=e.children,o=e.className,a=e.color,c=e.compact,l=e.fixed,u=e.floated,h=e.fluid,d=e.icon,f=e.inverted,p=e.pagination,m=e.pointing,g=e.secondary,v=e.size,y=e.stackable,w=e.tabular,b=e.text,_=e.vertical,E=e.widths,I=mi("ui",a,v,yi(r,"borderless"),yi(c,"compact"),yi(h,"fluid"),yi(f,"inverted"),yi(p,"pagination"),yi(m,"pointing"),yi(g,"secondary"),yi(y,"stackable"),yi(b,"text"),yi(_,"vertical"),bi(n,"attached"),bi(u,"floated"),bi(d,"icon"),bi(w,"tabular"),wi(l,"fixed"),Ti(E,"item"),o,"menu"),T=Si(t,this.props),S=ki(t,this.props);return i.createElement(S,xe({},T,{className:I}),Ai(s)?this.renderItems():s)},t}(Pi);yo.handledProps=["activeIndex","as","attached","borderless","children","className","color","compact","defaultActiveIndex","fixed","floated","fluid","icon","inverted","items","onItemClick","pagination","pointing","secondary","size","stackable","tabular","text","vertical","widths"],yo.propTypes={},yo.autoControlledProps=["activeIndex"],yo.Header=cs,yo.Item=mo,yo.Menu=vo,yo.create=ns(yo,(function(e){return{items:e}}));const wo=yo;function bo(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var _o=Object.prototype.hasOwnProperty;const Eo=function(e){if(null==e)return!0;if(Kn(e)&&(sn(e)||"string"==typeof e||"function"==typeof e.splice||In(e)||Ln(e)||yn(e)))return!e.length;var t=ur(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(jn(e))return!qn(e).length;for(var n in e)if(_o.call(e,n))return!1;return!0};const Io=Xn&&new Xn;const To=Io?function(e,t){return Io.set(e,t),e}:qr;var So=Object.create;const ko=function(){function e(){}return function(t){if(!st(t))return{};if(So)return So(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Co=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=ko(e.prototype),r=e.apply(n,t);return st(r)?r:n}};const xo=function(e,t,n){var r=1&t,i=Co(e);return function t(){return(this&&this!==Qe&&this instanceof t?i:e).apply(r?n:this,arguments)}};var No=Math.max;const Ao=function(e,t,n,r){for(var i=-1,s=e.length,o=n.length,a=-1,c=t.length,l=No(s-o,0),u=Array(c+l),h=!r;++a<c;)u[a]=t[a];for(;++i<o;)(h||i<s)&&(u[n[i]]=e[i]);for(;l--;)u[a++]=e[i++];return u};var Ro=Math.max;const Po=function(e,t,n,r){for(var i=-1,s=e.length,o=-1,a=n.length,c=-1,l=t.length,u=Ro(s-a,0),h=Array(u+l),d=!r;++i<u;)h[i]=e[i];for(var f=i;++c<l;)h[f+c]=t[c];for(;++o<a;)(d||i<s)&&(h[f+n[o]]=e[i++]);return h};const Do=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};const Oo=function(){};function Lo(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}Lo.prototype=ko(Oo.prototype),Lo.prototype.constructor=Lo;const Mo=Lo;const Fo=Io?function(e){return Io.get(e)}:ji;const Uo={};var jo=Object.prototype.hasOwnProperty;const Vo=function(e){for(var t=e.name+"",n=Uo[t],r=jo.call(Uo,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t};function zo(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}zo.prototype=ko(Oo.prototype),zo.prototype.constructor=zo;const Bo=zo;const qo=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};const Ko=function(e){if(e instanceof Mo)return e.clone();var t=new Bo(e.__wrapped__,e.__chain__);return t.__actions__=qo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t};var Go=Object.prototype.hasOwnProperty;function Ho(e){if(fn(e)&&!sn(e)&&!(e instanceof Mo)){if(e instanceof Bo)return e;if(Go.call(e,"__wrapped__"))return Ko(e)}return new Bo(e)}Ho.prototype=Oo.prototype,Ho.prototype.constructor=Ho;const Wo=Ho;const Qo=function(e){var t=Vo(e),n=Wo[t];if("function"!=typeof n||!(t in Mo.prototype))return!1;if(e===n)return!0;var r=Fo(n);return!!r&&e===r[0]};const Jo=ui(To);var $o=/\{\n\/\* \[wrapped with (.+)\] \*/,Yo=/,? & /;const Xo=function(e){var t=e.match($o);return t?t[1].split(Yo):[]};var Zo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;const ea=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Zo,"{\n/* [wrapped with "+t+"] */\n")};const ta=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var na=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];const ra=function(e,t){return ta(na,(function(n){var r="_."+n[0];t&n[1]&&!Fi(e,r)&&e.push(r)})),e.sort()};const ia=function(e,t,n){var r=t+"";return hi(e,ea(r,ra(Xo(r),n)))};const sa=function(e,t,n,r,i,s,o,a,c,l){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var h=[e,t,i,u?s:void 0,u?o:void 0,u?void 0:s,u?void 0:o,a,c,l],d=n.apply(void 0,h);return Qo(e)&&Jo(d,h),d.placeholder=r,ia(d,e,t)};const oa=function(e){return e.placeholder};var aa=Math.min;const ca=function(e,t){for(var n=e.length,r=aa(t.length,n),i=qo(e);r--;){var s=t[r];e[r]=Sn(s,n)?i[s]:void 0}return e};var la="__lodash_placeholder__";const ua=function(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var o=e[n];o!==t&&o!==la||(e[n]=la,s[i++]=n)}return s};const ha=function e(t,n,r,i,s,o,a,c,l,u){var h=128&n,d=1&n,f=2&n,p=24&n,m=512&n,g=f?void 0:Co(t);return function v(){for(var y=arguments.length,w=Array(y),b=y;b--;)w[b]=arguments[b];if(p)var _=oa(v),E=Do(w,_);if(i&&(w=Ao(w,i,s,p)),o&&(w=Po(w,o,a,p)),y-=E,p&&y<u){var I=ua(w,_);return sa(t,n,e,v.placeholder,r,w,I,c,l,u-y)}var T=d?r:this,S=f?T[t]:t;return y=w.length,c?w=ca(w,c):m&&y>1&&w.reverse(),h&&l<y&&(w.length=l),this&&this!==Qe&&this instanceof v&&(S=g||Co(S)),S.apply(T,w)}};const da=function(e,t,n){var r=Co(e);return function i(){for(var s=arguments.length,o=Array(s),a=s,c=oa(i);a--;)o[a]=arguments[a];var l=s<3&&o[0]!==c&&o[s-1]!==c?[]:ua(o,c);return(s-=l.length)<n?sa(e,t,ha,i.placeholder,void 0,o,l,void 0,void 0,n-s):Zr(this&&this!==Qe&&this instanceof i?r:e,this,o)}};const fa=function(e,t,n,r){var i=1&t,s=Co(e);return function t(){for(var o=-1,a=arguments.length,c=-1,l=r.length,u=Array(l+a),h=this&&this!==Qe&&this instanceof t?s:e;++c<l;)u[c]=r[c];for(;a--;)u[c++]=arguments[++o];return Zr(h,i?n:this,u)}};var pa="__lodash_placeholder__",ma=128,ga=Math.min;const va=function(e,t){var n=e[1],r=t[1],i=n|r,s=i<131,o=r==ma&&8==n||r==ma&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!s&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var a=t[3];if(a){var c=e[3];e[3]=c?Ao(c,a,t[4]):a,e[4]=c?ua(e[3],pa):t[4]}return(a=t[5])&&(c=e[5],e[5]=c?Po(c,a,t[6]):a,e[6]=c?ua(e[5],pa):t[6]),(a=t[7])&&(e[7]=a),r&ma&&(e[8]=null==e[8]?t[8]:ga(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e};var ya=/\s/;const wa=function(e){for(var t=e.length;t--&&ya.test(e.charAt(t)););return t};var ba=/^\s+/;const _a=function(e){return e?e.slice(0,wa(e)+1).replace(ba,""):e};var Ea=/^[-+]0x[0-9a-f]+$/i,Ia=/^0b[01]+$/i,Ta=/^0o[0-7]+$/i,Sa=parseInt;const ka=function(e){if("number"==typeof e)return e;if(Er(e))return NaN;if(st(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=st(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=_a(e);var n=Ia.test(e);return n||Ta.test(e)?Sa(e.slice(2),n?2:8):Ea.test(e)?NaN:+e};var Ca=1/0;const xa=function(e){return e?(e=ka(e))===Ca||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};const Na=function(e){var t=xa(e),n=t%1;return t===t?n?t-n:t:0};var Aa=Math.max;const Ra=function(e,t,n,r,i,s,o,a){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var l=r?r.length:0;if(l||(t&=-97,r=i=void 0),o=void 0===o?o:Aa(Na(o),0),a=void 0===a?a:Na(a),l-=i?i.length:0,64&t){var u=r,h=i;r=i=void 0}var d=c?void 0:Fo(e),f=[e,t,n,r,i,u,h,s,o,a];if(d&&va(f,d),e=f[0],t=f[1],n=f[2],r=f[3],i=f[4],!(a=f[9]=void 0===f[9]?c?0:e.length:Aa(f[9]-l,0))&&24&t&&(t&=-25),t&&1!=t)p=8==t||16==t?da(e,t,a):32!=t&&33!=t||i.length?ha.apply(void 0,f):fa(e,t,n,r);else var p=xo(e,t,n);return ia((d?To:Jo)(p,f),e,t)};var Pa=di((function(e,t){var n=ua(t,oa(Pa));return Ra(e,64,void 0,t,n)}));Pa.placeholder={};const Da=Pa;var Oa=Math.max,La=Math.min;const Ma=function(e,t,n){return e>=La(t,n)&&e<Oa(t,n)};const Fa=function(e,t,n){return t=xa(t),void 0===n?(n=t,t=0):n=xa(n),e=ka(e),Ma(e,t,n)};const Ua=function(e,t,n,r,i){return i(e,(function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)})),n};const ja=function(e,t,n){var r=sn(e)?ls:Ua,i=arguments.length<3;return r(e,Wr(t,4),n,i,$r)};var Va=n(90),za=n.n(Va),Ba=n(324),qa=n.n(Ba),Ka=n(173),Ga=n.n(Ka);const Ha=Ka.instance;var Wa="object"===typeof document&&null!==document,Qa="object"===typeof window&&null!==window&&window.self===window;const Ja=function e(){return es(e.override)?Wa&&Qa:e.override};const $a=function(e,t){return Re(t,(function(t){return e[t]}))};const Ya=function(e){return null==e?[]:$a(e,Gn(e))};var Xa=Math.max;const Za=function(e,t,n,r){e=Kn(e)?e:Ya(e),n=n&&!r?Na(n):0;var i=e.length;return n<0&&(n=Xa(i+n,0)),Xi(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Mi(e,t,n)>-1};const ec=function(e){return"function"==typeof e?e:qr};const tc=function(e,t){return(sn(e)?ta:$r)(e,ec(t))};var nc=["selected","defaultValue","defaultChecked","accept","autoCapitalize","autoComplete","autoCorrect","autoFocus","checked","disabled","enterKeyHint","form","id","inputMode","lang","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","readOnly","required","step","title","type","value"],rc=[].concat(nc,["onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onClick","onContextMenu","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"]),ic=["alt","height","src","srcSet","width","loading"],sc=function(e,t){void 0===t&&(t={});var n=t,r=n.htmlProps,i=void 0===r?rc:r,s=n.includeAria,o=void 0===s||s,a={},c={};return tc(e,(function(e,t){var n=o&&(/^aria-.*$/.test(t)||"role"===t);(Za(i,t)||n?a:c)[t]=e})),[a,c]},oc=function(e,t){"function"!==typeof e?null!==e&&"object"===typeof e&&(e.current=t):e(t)},ac=n(904);var cc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).prevNode=void 0,t}Ae(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=o.findDOMNode(this);this.prevNode=e,oc(this.props.innerRef,e)},n.componentDidUpdate=function(e){var t=o.findDOMNode(this);this.prevNode!==t&&(this.prevNode=t,oc(this.props.innerRef,t)),e.innerRef!==this.props.innerRef&&oc(this.props.innerRef,t)},n.componentWillUnmount=function(){oc(this.props.innerRef,null),delete this.prevNode},n.render=function(){return this.props.children},t}(i.Component),lc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).currentNode=void 0,t.handleRefOverride=function(e){var n=t.props,r=n.children,i=n.innerRef;oc(r.ref,e),oc(i,e),t.currentNode=e},t}Ae(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.innerRef!==this.props.innerRef&&oc(this.props.innerRef,this.currentNode)},n.componentWillUnmount=function(){delete this.currentNode},n.render=function(){var e=this.props.children;return i.cloneElement(e,{ref:this.handleRefOverride})},t}(i.Component),uc=["children","innerRef"],hc=function(e){var t=e.children,n=e.innerRef,r=bo(e,uc),s=i.Children.only(t),o=ac.isForwardRef(s)?lc:cc,a=s&&r&&Object.keys(r).length>0?i.cloneElement(s,r):s;return i.createElement(o,{innerRef:n},a)};const dc=function(e){return e&&e.length?e[0]:void 0};const fc=function(e,t){if(Ni([t,e],es))return!1;if(t.target&&(fi(t.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return fi(t.target,"removeAttribute","data-suir-click-target"),e.contains(t.target);var n=t.clientX,r=t.clientY;if(Ni([n,r],es))return!1;var i=e.getClientRects();if(!e.offsetWidth||!e.offsetHeight||!i||!i.length)return!1;var s=dc(i),o=s.top,a=s.bottom,c=s.left,l=s.right;return!Ni([o,a,c,l],es)&&(Fa(r,o,a+.001)&&Fa(n,c,l+.001))};var pc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRef=function(e){oc(t.props.innerRef,e)},t}Ae(t,e);var n=t.prototype;return n.componentDidMount=function(){fi(this.props,"onMount",null,this.props)},n.componentWillUnmount=function(){fi(this.props,"onUnmount",null,this.props)},n.render=function(){if(!Ja())return null;var e=this.props,t=e.children,n=e.mountNode,r=void 0===n?document.body:n;return(0,o.createPortal)(i.createElement(hc,{innerRef:this.handleRef},t),r)},t}(i.Component);pc.handledProps=["children","innerRef","mountNode","onMount","onUnmount"],pc.propTypes={};const mc=pc;var gc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).contentRef=i.createRef(),t.triggerRef=i.createRef(),t.latestDocumentMouseDownEvent=null,t.handleDocumentMouseDown=function(e){t.latestDocumentMouseDownEvent=e},t.handleDocumentClick=function(e){var n=t.props.closeOnDocumentClick,r=t.latestDocumentMouseDownEvent;t.latestDocumentMouseDownEvent=null,!t.contentRef.current||fc(t.triggerRef.current,e)||r&&fc(t.contentRef.current,r)||fc(t.contentRef.current,e)||n&&t.close(e)},t.handleEscape=function(e){t.props.closeOnEscape&&za().getCode(e)===za().Escape&&t.close(e)},t.handlePortalMouseLeave=function(e){var n=t.props,r=n.closeOnPortalMouseLeave,i=n.mouseLeaveDelay;r&&e.target===t.contentRef.current&&(t.mouseLeaveTimer=t.closeWithTimeout(e,i))},t.handlePortalMouseEnter=function(){t.props.closeOnPortalMouseLeave&&clearTimeout(t.mouseLeaveTimer)},t.handleTriggerBlur=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerBlur,s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];fi.apply(void 0,[r,"props.onBlur",e].concat(o));var c=e.relatedTarget||document.activeElement,l=fi(t.contentRef.current,"contains",c);i&&!l&&t.close(e)},t.handleTriggerClick=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerClick,s=n.openOnTriggerClick,o=t.state.open,a=arguments.length,c=new Array(a>1?a-1:0),l=1;l<a;l++)c[l-1]=arguments[l];fi.apply(void 0,[r,"props.onClick",e].concat(c)),o&&i?t.close(e):!o&&s&&t.open(e)},t.handleTriggerFocus=function(e){for(var n=t.props,r=n.trigger,i=n.openOnTriggerFocus,s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];fi.apply(void 0,[r,"props.onFocus",e].concat(o)),i&&t.open(e)},t.handleTriggerMouseLeave=function(e){clearTimeout(t.mouseEnterTimer);for(var n=t.props,r=n.trigger,i=n.closeOnTriggerMouseLeave,s=n.mouseLeaveDelay,o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];fi.apply(void 0,[r,"props.onMouseLeave",e].concat(a)),i&&(t.mouseLeaveTimer=t.closeWithTimeout(e,s))},t.handleTriggerMouseEnter=function(e){clearTimeout(t.mouseLeaveTimer);for(var n=t.props,r=n.trigger,i=n.mouseEnterDelay,s=n.openOnTriggerMouseEnter,o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];fi.apply(void 0,[r,"props.onMouseEnter",e].concat(a)),s&&(t.mouseEnterTimer=t.openWithTimeout(e,i))},t.open=function(e){fi(t.props,"onOpen",e,xe({},t.props,{open:!0})),t.setState({open:!0})},t.openWithTimeout=function(e,n){var r=xe({},e);return setTimeout((function(){return t.open(r)}),n||0)},t.close=function(e){t.setState({open:!1}),fi(t.props,"onClose",e,xe({},t.props,{open:!1}))},t.closeWithTimeout=function(e,n){var r=xe({},e);return setTimeout((function(){return t.close(r)}),n||0)},t.handleMount=function(){fi(t.props,"onMount",null,t.props)},t.handleUnmount=function(){fi(t.props,"onUnmount",null,t.props)},t.handleTriggerRef=function(e){t.triggerRef.current=e,oc(t.props.triggerRef,e)},t}Ae(t,e);var n=t.prototype;return n.componentWillUnmount=function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)},n.render=function(){var e=this.props,t=e.children,n=e.eventPool,r=e.mountNode,s=e.trigger,o=this.state.open;return i.createElement(i.Fragment,null,o&&i.createElement(i.Fragment,null,i.createElement(mc,{innerRef:this.contentRef,mountNode:r,onMount:this.handleMount,onUnmount:this.handleUnmount},t),i.createElement(Ga(),{name:"mouseleave",on:this.handlePortalMouseLeave,pool:n,target:this.contentRef}),i.createElement(Ga(),{name:"mouseenter",on:this.handlePortalMouseEnter,pool:n,target:this.contentRef}),i.createElement(Ga(),{name:"mousedown",on:this.handleDocumentMouseDown,pool:n}),i.createElement(Ga(),{name:"click",on:this.handleDocumentClick,pool:n}),i.createElement(Ga(),{name:"keydown",on:this.handleEscape,pool:n})),s&&i.createElement(hc,{innerRef:this.handleTriggerRef},i.cloneElement(s,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))},t}(Pi);gc.handledProps=["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"],gc.propTypes={},gc.defaultProps={closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0},gc.autoControlledProps=["open"],gc.Inner=mc;const vc=gc;function yc(e){var t=e.blurring,n=e.className,r=e.children,s=e.content,o=e.dimmed,a=mi(yi(t,"blurring"),yi(o,"dimmed"),"dimmable",n),c=Si(yc,e),l=ki(yc,e);return i.createElement(l,xe({},c,{className:a}),Ai(r)?s:r)}yc.handledProps=["as","blurring","children","className","content","dimmed"],yc.propTypes={};const wc=yc;var bc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).containerRef=(0,i.createRef)(),t.contentRef=(0,i.createRef)(),t.handleClick=function(e){var n=t.contentRef.current;fi(t.props,"onClick",e,t.props),n&&n!==e.target&&fc(n,e)||fi(t.props,"onClickOutside",e,t.props)},t}Ae(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.active;this.toggleStyles(e)},n.componentDidUpdate=function(e){var t=this.props.active;e.active!==t&&this.toggleStyles(t)},n.toggleStyles=function(e){var t=this.containerRef.current;t&&t.style&&(e?t.style.setProperty("display","flex","important"):t.style.removeProperty("display"))},n.render=function(){var e=this.props,n=e.active,r=e.children,s=e.className,o=e.content,a=e.disabled,c=e.inverted,l=e.page,u=e.simple,h=e.verticalAlign,d=mi("ui",yi(n,"active transition visible"),yi(a,"disabled"),yi(c,"inverted"),yi(l,"page"),yi(u,"simple"),Ii(h),"dimmer",s),f=Si(t,this.props),p=ki(t,this.props),m=Ai(r)?o:r;return i.createElement(hc,{innerRef:this.containerRef},i.createElement(p,xe({},f,{className:d,onClick:this.handleClick}),m&&i.createElement("div",{className:"content",ref:this.contentRef},m)))},t}(i.Component);bc.handledProps=["active","as","children","className","content","disabled","inverted","onClick","onClickOutside","page","simple","verticalAlign"],bc.propTypes={};var _c=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePortalMount=function(){Ja()&&(document.body.classList.add("dimmed"),document.body.classList.add("dimmable"))},t.handlePortalUnmount=function(){Ja()&&(document.body.classList.remove("dimmed"),document.body.classList.remove("dimmable"))},t}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.page,s=Si(t,this.props);return r?i.createElement(vc,{closeOnEscape:!1,closeOnDocumentClick:!1,onMount:this.handlePortalMount,onUnmount:this.handlePortalUnmount,open:n,openOnTriggerClick:!1},i.createElement(bc,xe({},s,{active:n,page:r}))):i.createElement(bc,xe({},s,{active:n,page:r}))},t}(i.Component);function Ec(e){var t=e.children,n=e.className,r=e.content,s=e.size,o=mi("ui",s,n,"images"),a=Si(Ec,e),c=ki(Ec,e);return i.createElement(c,xe({},a,{className:o}),Ai(t)?r:t)}_c.handledProps=["active","page"],_c.propTypes={},_c.Dimmable=wc,_c.Inner=bc,_c.create=ns(_c,(function(e){return{content:e}})),Ec.handledProps=["as","children","className","content","size"],Ec.propTypes={};const Ic=Ec;function Tc(e){var t=e.avatar,n=e.bordered,r=e.centered,s=e.children,o=e.circular,a=e.className,c=e.content,l=e.dimmer,u=e.disabled,h=e.floated,d=e.fluid,f=e.hidden,p=e.href,m=e.inline,g=e.label,v=e.rounded,y=e.size,w=e.spaced,b=e.verticalAlign,_=e.wrapped,E=e.ui,I=mi(yi(E,"ui"),y,yi(t,"avatar"),yi(n,"bordered"),yi(o,"circular"),yi(r,"centered"),yi(u,"disabled"),yi(d,"fluid"),yi(f,"hidden"),yi(m,"inline"),yi(v,"rounded"),bi(w,"spaced"),wi(h,"floated"),Ii(b),"image",a),T=Si(Tc,e),S=sc(T,{htmlProps:ic}),k=S[0],C=S[1],x=ki(Tc,e,(function(){if(!es(l)||!es(g)||!es(_)||!Ai(s))return"div"}));return Ai(s)?Ai(c)?"img"===x?i.createElement(x,xe({},C,k,{className:I})):i.createElement(x,xe({},C,{className:I,href:p}),_c.create(l,{autoGenerateKey:!1}),Ac.create(g,{autoGenerateKey:!1}),i.createElement("img",k)):i.createElement(x,xe({},T,{className:I}),c):i.createElement(x,xe({},T,{className:I}),s)}Tc.handledProps=["as","avatar","bordered","centered","children","circular","className","content","dimmer","disabled","floated","fluid","hidden","href","inline","label","rounded","size","spaced","ui","verticalAlign","wrapped"],Tc.Group=Ic,Tc.propTypes={},Tc.defaultProps={as:"img",ui:!0},Tc.create=ns(Tc,(function(e){return{src:e}}));const Sc=Tc;function kc(e){var t=e.children,n=e.className,r=e.content,s=mi("detail",n),o=Si(kc,e),a=ki(kc,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}kc.handledProps=["as","children","className","content"],kc.propTypes={},kc.create=ns(kc,(function(e){return{content:e}}));const Cc=kc;function xc(e){var t=e.children,n=e.circular,r=e.className,s=e.color,o=e.content,a=e.size,c=e.tag,l=mi("ui",s,a,yi(n,"circular"),yi(c,"tag"),"labels",r),u=Si(xc,e),h=ki(xc,e);return i.createElement(h,xe({},u,{className:l}),Ai(t)?o:t)}xc.handledProps=["as","children","circular","className","color","content","size","tag"],xc.propTypes={};const Nc=xc;var Ac=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t.handleIconOverrides=function(e){return{onClick:function(n){fi(e,"onClick",n),fi(t.props,"onRemove",n,t.props)}}},t}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.attached,s=e.basic,o=e.children,a=e.circular,c=e.className,l=e.color,u=e.content,h=e.corner,d=e.detail,f=e.empty,p=e.floating,m=e.horizontal,g=e.icon,v=e.image,y=e.onRemove,w=e.pointing,b=e.prompt,_=e.removeIcon,E=e.ribbon,I=e.size,T=e.tag,S=mi("ui",l,(!0===w?"pointing":("left"===w||"right"===w)&&w+" pointing")||("above"===w||"below"===w)&&"pointing "+w,I,yi(n,"active"),yi(s,"basic"),yi(a,"circular"),yi(f,"empty"),yi(p,"floating"),yi(m,"horizontal"),yi(!0===v,"image"),yi(b,"prompt"),yi(T,"tag"),bi(h,"corner"),bi(E,"ribbon"),wi(r,"attached"),"label",c),k=Si(t,this.props),C=ki(t,this.props);if(!Ai(o))return i.createElement(C,xe({},k,{className:S,onClick:this.handleClick}),o);var x=Ri(_)?"delete":_;return i.createElement(C,xe({className:S,onClick:this.handleClick},k),po.create(g,{autoGenerateKey:!1}),"boolean"!==typeof v&&Sc.create(v,{autoGenerateKey:!1}),u,Cc.create(d,{autoGenerateKey:!1}),y&&po.create(x,{autoGenerateKey:!1,overrideProps:this.handleIconOverrides}))},t}(i.Component);function Rc(e){var t=e.children,n=e.className,r=e.content,s=e.hidden,o=e.visible,a=mi(yi(o,"visible"),yi(s,"hidden"),"content",n),c=Si(Rc,e),l=ki(Rc,e);return i.createElement(l,xe({},c,{className:a}),Ai(t)?r:t)}Ac.handledProps=["active","as","attached","basic","children","circular","className","color","content","corner","detail","empty","floating","horizontal","icon","image","onClick","onRemove","pointing","prompt","removeIcon","ribbon","size","tag"],Ac.propTypes={},Ac.Detail=Cc,Ac.Group=Nc,Ac.create=ns(Ac,(function(e){return{content:e}})),Rc.handledProps=["as","children","className","content","hidden","visible"],Rc.propTypes={};const Pc=Rc;function Dc(e){var t=e.attached,n=e.basic,r=e.buttons,s=e.children,o=e.className,a=e.color,c=e.compact,l=e.content,u=e.floated,h=e.fluid,d=e.icon,f=e.inverted,p=e.labeled,m=e.negative,g=e.positive,v=e.primary,y=e.secondary,w=e.size,b=e.toggle,_=e.vertical,E=e.widths,I=mi("ui",a,w,yi(n,"basic"),yi(c,"compact"),yi(h,"fluid"),yi(d,"icon"),yi(f,"inverted"),yi(p,"labeled"),yi(m,"negative"),yi(g,"positive"),yi(v,"primary"),yi(y,"secondary"),yi(b,"toggle"),yi(_,"vertical"),bi(t,"attached"),wi(u,"floated"),Ti(E),"buttons",o),T=Si(Dc,e),S=ki(Dc,e);return es(r)?i.createElement(S,xe({},T,{className:I}),Ai(s)?l:s):i.createElement(S,xe({},T,{className:I}),Xr(r,(function(e){return Uc.create(e)})))}Dc.handledProps=["as","attached","basic","buttons","children","className","color","compact","content","floated","fluid","icon","inverted","labeled","negative","positive","primary","secondary","size","toggle","vertical","widths"],Dc.propTypes={};const Oc=Dc;function Lc(e){var t=e.className,n=e.text,r=mi("or",t),s=Si(Lc,e),o=ki(Lc,e);return i.createElement(o,xe({},s,{className:r,"data-text":n}))}Lc.handledProps=["as","className","text"],Lc.propTypes={};const Mc=Lc;var Fc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).ref=(0,i.createRef)(),t.computeElementType=function(){var e=t.props,n=e.attached,r=e.label;if(!es(n)||!es(r))return"div"},t.computeTabIndex=function(e){var n=t.props,r=n.disabled,i=n.tabIndex;return es(i)?r?-1:"div"===e?0:void 0:i},t.focus=function(e){return fi(t.ref.current,"focus",e)},t.handleClick=function(e){t.props.disabled?e.preventDefault():fi(t.props,"onClick",e,t.props)},t.hasIconClass=function(){var e=t.props,n=e.labelPosition,r=e.children,i=e.content,s=e.icon;return!0===s||s&&(n||Ai(r)&&es(i))},t}Ae(t,e);var n=t.prototype;return n.computeButtonAriaRole=function(e){var t=this.props.role;return es(t)?"button"!==e?"button":void 0:t},n.render=function(){var e=this.props,n=e.active,r=e.animated,s=e.attached,o=e.basic,a=e.children,c=e.circular,l=e.className,u=e.color,h=e.compact,d=e.content,f=e.disabled,p=e.floated,m=e.fluid,g=e.icon,v=e.inverted,y=e.label,w=e.labelPosition,b=e.loading,_=e.negative,E=e.positive,I=e.primary,T=e.secondary,S=e.size,k=e.toggle,C=e.type,x=mi(u,S,yi(n,"active"),yi(o,"basic"),yi(c,"circular"),yi(h,"compact"),yi(m,"fluid"),yi(this.hasIconClass(),"icon"),yi(v,"inverted"),yi(b,"loading"),yi(_,"negative"),yi(E,"positive"),yi(I,"primary"),yi(T,"secondary"),yi(k,"toggle"),bi(r,"animated"),bi(s,"attached")),N=mi(bi(w||!!y,"labeled")),A=mi(yi(f,"disabled"),wi(p,"floated")),R=Si(t,this.props),P=ki(t,this.props,this.computeElementType),D=this.computeTabIndex(P);if(!es(y)){var O=mi("ui",x,"button",l),L=mi("ui",N,"button",l,A),M=Ac.create(y,{defaultProps:{basic:!0,pointing:"left"===w?"right":"left"},autoGenerateKey:!1});return i.createElement(P,xe({},R,{className:L,onClick:this.handleClick}),"left"===w&&M,i.createElement(hc,{innerRef:this.ref},i.createElement("button",{className:O,"aria-pressed":k?!!n:void 0,disabled:f,type:C,tabIndex:D},po.create(g,{autoGenerateKey:!1})," ",d)),("right"===w||!w)&&M)}var F=mi("ui",x,A,N,"button",l),U=!Ai(a),j=this.computeButtonAriaRole(P);return i.createElement(hc,{innerRef:this.ref},i.createElement(P,xe({},R,{className:F,"aria-pressed":k?!!n:void 0,disabled:f&&"button"===P||void 0,onClick:this.handleClick,role:j,type:C,tabIndex:D}),U&&a,!U&&po.create(g,{autoGenerateKey:!1}),!U&&d))},t}(i.Component);Fc.handledProps=["active","animated","as","attached","basic","children","circular","className","color","compact","content","disabled","floated","fluid","icon","inverted","label","labelPosition","loading","negative","onClick","positive","primary","role","secondary","size","tabIndex","toggle","type"],Fc.propTypes={},Fc.defaultProps={as:"button"},Fc.Content=Pc,Fc.Group=Oc,Fc.Or=Mc,Fc.create=ns(Fc,(function(e){return{content:e}}));const Uc=Fc;var jc=function(e){function t(){for(var n,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=e.call.apply(e,[this].concat(s))||this).inputRef=(0,i.createRef)(),n.computeIcon=function(){var e=n.props,t=e.loading,r=e.icon;return es(r)?t?"spinner":void 0:r},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return es(r)?t?-1:void 0:r},n.focus=function(e){return n.inputRef.current.focus(e)},n.select=function(){return n.inputRef.current.select()},n.handleChange=function(e){var t=Ur(e,"target.value");fi(n.props,"onChange",e,xe({},n.props,{value:t}))},n.handleChildOverrides=function(e,t){return xe({},t,e.props,{ref:function(t){oc(e.ref,t),n.inputRef.current=t}})},n.partitionProps=function(){var e=n.props,r=e.disabled,i=e.type,s=n.computeTabIndex(),o=Si(t,n.props),a=sc(o),c=a[0],l=a[1];return[xe({},c,{disabled:r,type:i,tabIndex:s,onChange:n.handleChange,ref:n.inputRef}),l]},n}return Ae(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.action,s=n.actionPosition,o=n.children,a=n.className,c=n.disabled,l=n.error,u=n.fluid,h=n.focus,d=n.icon,f=n.iconPosition,p=n.input,m=n.inverted,g=n.label,v=n.labelPosition,y=n.loading,w=n.size,b=n.transparent,_=n.type,E=mi("ui",w,yi(c,"disabled"),yi(l,"error"),yi(u,"fluid"),yi(h,"focus"),yi(m,"inverted"),yi(y,"loading"),yi(b,"transparent"),wi(s,"action")||yi(r,"action"),wi(f,"icon")||yi(d||y,"icon"),wi(v,"labeled")||yi(g,"labeled"),"input",a),I=ki(t,this.props),T=this.partitionProps(),S=T[0],k=T[1];if(!Ai(o)){var C=Xr(i.Children.toArray(o),(function(t){return"input"!==t.type?t:(0,i.cloneElement)(t,e.handleChildOverrides(t,S))}));return i.createElement(I,xe({},k,{className:E}),C)}var x=Uc.create(r,{autoGenerateKey:!1}),N=Ac.create(g,{defaultProps:{className:mi("label",Za(v,"corner")&&v)},autoGenerateKey:!1});return i.createElement(I,xe({},k,{className:E}),"left"===s&&x,"right"!==v&&N,is(p||_,{defaultProps:S,autoGenerateKey:!1}),po.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==s&&x,"right"===v&&N)},t}(i.Component);jc.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],jc.propTypes={},jc.defaultProps={type:"text"},jc.create=ns(jc,(function(e){return{type:e}}));const Vc=jc;function zc(e){var t=e.categoryContent,n=e.resultsContent;return i.createElement(i.Fragment,null,i.createElement("div",{className:"name"},t),i.createElement("div",{className:"results"},n))}zc.handledProps=["categoryContent","resultsContent"],zc.propTypes={};const Bc=zc;function qc(e){var t=e.active,n=e.children,r=e.className,s=e.content,o=e.layoutRenderer,a=e.renderer,c=mi(yi(t,"active"),"category",r),l=Si(qc,e),u=ki(qc,e),h=a(e),d=Ai(n)?s:n;return i.createElement(u,xe({},l,{className:c}),o({categoryContent:h,resultsContent:d}))}qc.handledProps=["active","as","children","className","content","layoutRenderer","name","renderer","results"],qc.defaultProps={layoutRenderer:Bc,renderer:function(e){return e.name}},qc.propTypes={};const Kc=qc;var Gc=function(e){var t=e.image,n=e.price,r=e.title,s=e.description;return[t&&i.createElement("div",{key:"image",className:"image"},rs(t,{autoGenerateKey:!1})),i.createElement("div",{key:"content",className:"content"},n&&i.createElement("div",{className:"price"},n),r&&i.createElement("div",{className:"title"},r),s&&i.createElement("div",{className:"description"},s))]};Gc.handledProps=[];var Hc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.className,s=e.renderer,o=mi(yi(n,"active"),"result",r),a=Si(t,this.props),c=ki(t,this.props);return i.createElement(c,xe({},a,{className:o,onClick:this.handleClick}),s(this.props))},t}(i.Component);function Wc(e){var t=e.children,n=e.className,r=e.content,s=mi("results transition",n),o=Si(Wc,e),a=ki(Wc,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}Hc.handledProps=["active","as","className","content","description","id","image","onClick","price","renderer","title"],Hc.propTypes={},Hc.defaultProps={renderer:Gc},Wc.handledProps=["as","children","className","content"],Wc.propTypes={};const Qc=Wc;var Jc=function(e){var t=e.input;return Ri(t)?xe({},e,{input:{className:"prompt"}}):$i(t)?xe({},e,{input:xe({},t,{className:mi(t.className,"prompt")})}):e},$c=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).handleResultSelect=function(e,n){fi(t.props,"onResultSelect",e,xe({},t.props,{result:n}))},t.handleSelectionChange=function(e){var n=t.getSelectedResult();fi(t.props,"onSelectionChange",e,xe({},t.props,{result:n}))},t.closeOnEscape=function(e){za().getCode(e)===za().Escape&&(e.preventDefault(),t.close())},t.moveSelectionOnKeyDown=function(e){switch(za().getCode(e)){case za().ArrowDown:e.preventDefault(),t.moveSelectionBy(e,1);break;case za().ArrowUp:e.preventDefault(),t.moveSelectionBy(e,-1)}},t.selectItemOnEnter=function(e){if(za().getCode(e)===za().Enter){var n=t.getSelectedResult();n&&(e.preventDefault(),t.setValue(n.title),t.handleResultSelect(e,n),t.close())}},t.closeOnDocumentClick=function(e){t.close()},t.handleMouseDown=function(e){t.isMouseDown=!0,fi(t.props,"onMouseDown",e,t.props),Ha.sub("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,Ha.unsub("mouseup",t.handleDocumentMouseUp)},t.handleInputClick=function(e){e.nativeEvent.stopImmediatePropagation(),t.tryOpen()},t.handleItemClick=function(e,n){var r=n.id,i=t.getSelectedResult(r);e.nativeEvent.stopImmediatePropagation(),t.setValue(i.title),t.handleResultSelect(e,i),t.close()},t.handleItemMouseDown=function(e){e.preventDefault()},t.handleFocus=function(e){fi(t.props,"onFocus",e,t.props),t.setState({focus:!0})},t.handleBlur=function(e){fi(t.props,"onBlur",e,t.props),t.setState({focus:!1})},t.handleSearchChange=function(e){e.stopPropagation();var n=t.props.minCharacters,r=t.state.open,i=e.target.value;fi(t.props,"onSearchChange",e,xe({},t.props,{value:i})),i.length<n?t.close():r||t.tryOpen(i),t.setValue(i)},t.getFlattenedResults=function(){var e=t.props,n=e.category,r=e.results;return n?ja(r,(function(e,t){return e.concat(t.results)}),[]):r},t.getSelectedResult=function(e){void 0===e&&(e=t.state.selectedIndex);var n=t.getFlattenedResults();return Ur(n,e)},t.setValue=function(e){var n=t.props.selectFirstResult;t.setState({value:e,selectedIndex:n?0:-1})},t.moveSelectionBy=function(e,n){var r=t.state.selectedIndex,i=t.getFlattenedResults().length-1,s=r+n;s>i?s=0:s<0&&(s=i),t.setState({selectedIndex:s}),t.scrollSelectedItemIntoView(),t.handleSelectionChange(e)},t.scrollSelectedItemIntoView=function(){if(Ja()){var e=document.querySelector(".ui.search.active.visible .results.visible");if(e){var t=e.querySelector(".result.active");if(t){var n=t.offsetTop<e.scrollTop,r=t.offsetTop+t.clientHeight>e.scrollTop+e.clientHeight;n?e.scrollTop=t.offsetTop:r&&(e.scrollTop=t.offsetTop+t.clientHeight-e.clientHeight)}}}},t.tryOpen=function(e){void 0===e&&(e=t.state.value);var n=t.props.minCharacters;e.length<n||t.open()},t.open=function(){t.setState({open:!0})},t.close=function(){t.setState({open:!1})},t.renderSearchInput=function(e){var n=t.props,r=n.icon,i=n.input,s=n.placeholder,o=t.state.value;return Vc.create(i,{autoGenerateKey:!1,defaultProps:xe({},e,{autoComplete:"off",icon:r,onChange:t.handleSearchChange,onClick:t.handleInputClick,tabIndex:"0",value:o,placeholder:s}),overrideProps:Jc})},t.renderNoResults=function(){var e=t.props,n=e.noResultsDescription,r=e.noResultsMessage;return i.createElement("div",{className:"message empty"},i.createElement("div",{className:"header"},r),n&&i.createElement("div",{className:"description"},n))},t.renderResult=function(e,n,r,s){var o=e.childKey,a=bo(e,["childKey"]);void 0===s&&(s=0);var c=t.props.resultRenderer,l=t.state.selectedIndex,u=n+s;return i.createElement(Hc,xe({key:null!=o?o:a.id||a.title,active:l===u,onClick:t.handleItemClick,onMouseDown:t.handleItemMouseDown,renderer:c},a,{id:u}))},t.renderResults=function(){var e=t.props.results;return Xr(e,t.renderResult)},t.renderCategories=function(){var e=t.props,n=e.categoryLayoutRenderer,r=e.categoryRenderer,s=e.results,o=t.state.selectedIndex,a=0;return Xr(s,(function(e){var s=e.childKey,c=bo(e,["childKey"]),l=xe({key:null!=s?s:c.name,active:Fa(o,a,a+c.results.length),layoutRenderer:n,renderer:r},c),u=Da(t.renderResult,a);return a+=c.results.length,i.createElement(Kc,l,c.results.map(u))}))},t.renderMenuContent=function(){var e=t.props,n=e.category,r=e.showNoResults,i=e.results;return Eo(i)?r?t.renderNoResults():null:n?t.renderCategories():t.renderResults()},t.renderResultsMenu=function(){var e=t.state.open?"visible":"",n=t.renderMenuContent();if(n)return i.createElement(Qc,{className:e},n)},t}Ae(t,e),t.getAutoControlledStateFromProps=function(e,t){if("undefined"!==typeof t.prevValue&&qa()(t.prevValue,t.value))return{prevValue:t.value};var n=e.selectFirstResult?0:-1;return{prevValue:t.value,selectedIndex:n}};var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!qa()(e,this.props)||!qa()(t,this.state)},n.componentDidUpdate=function(e,t){!t.focus&&this.state.focus?(this.isMouseDown||this.tryOpen(),this.state.open&&Ha.sub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.focus&&!this.state.focus&&(this.isMouseDown||this.close(),Ha.unsub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])),!t.open&&this.state.open?(this.open(),Ha.sub("click",this.closeOnDocumentClick),Ha.sub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.open&&!this.state.open&&(this.close(),Ha.unsub("click",this.closeOnDocumentClick),Ha.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter]))},n.componentWillUnmount=function(){Ha.unsub("click",this.closeOnDocumentClick),Ha.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])},n.render=function(){var e=this.state,n=e.searchClasses,r=e.focus,s=e.open,o=this.props,a=o.aligned,c=o.category,l=o.className,u=o.fluid,h=o.loading,d=o.size,f=mi("ui",s&&"active visible",d,n,yi(c,"category"),yi(r,"focus"),yi(u,"fluid"),yi(h,"loading"),wi(a,"aligned"),"search",l),p=Si(t,this.props),m=ki(t,this.props),g=sc(p,{htmlProps:nc}),v=g[0],y=g[1];return i.createElement(m,xe({},y,{className:f,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown}),this.renderSearchInput(v),this.renderResultsMenu())},t}(Pi);$c.handledProps=["aligned","as","category","categoryLayoutRenderer","categoryRenderer","className","defaultOpen","defaultValue","fluid","icon","input","loading","minCharacters","noResultsDescription","noResultsMessage","onBlur","onFocus","onMouseDown","onResultSelect","onSearchChange","onSelectionChange","open","placeholder","resultRenderer","results","selectFirstResult","showNoResults","size","value"],$c.propTypes={},$c.defaultProps={icon:"search",input:"text",minCharacters:1,noResultsMessage:"No results found.",showNoResults:!0},$c.autoControlledProps=["open","value"],$c.Category=Kc,$c.Result=Hc,$c.Results=Qc;const Yc=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Xc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Yc(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Zc;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Zc extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const el=function(e){return function(e){const t=Yc(e);return Xc.encodeByteArray(t,!0)}(e).replace(/\./g,"")},tl=function(e){try{return Xc.decodeString(e,!0)}catch(kU){console.error("base64Decode failed: ",kU)}return null};function nl(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=nl(e[n],t[n]));return e}const rl=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,il=()=>{try{return rl()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/gameforum",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(kU){return}const t=e&&tl(e[1]);return t&&JSON.parse(t)})()}catch(kU){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(kU))}},sl=()=>{var e;return null===(e=il())||void 0===e?void 0:e.config};class ol{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function al(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[el(JSON.stringify({alg:"none",type:"JWT"})),el(JSON.stringify(s)),""].join(".")}function cl(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ll(){var e;const t=null===(e=il())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(kU){return!1}}function ul(){return"object"===typeof self&&self.self===self}function hl(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function dl(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function fl(){const e=cl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function pl(){return!ll()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ml(){try{return"object"===typeof indexedDB}catch(kU){return!1}}class gl extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,gl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(yl,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new gl(n,s,t)}}const yl=/\{\$([^}]+)}/g;function wl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function bl(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(_l(n)&&_l(s)){if(!bl(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _l(e){return null!==e&&"object"===typeof e}function El(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Il(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Tl(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Sl(e,t){const n=new kl(e,t);return n.subscribe.bind(n)}class kl{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Cl),void 0===r.error&&(r.error=Cl),void 0===r.complete&&(r.complete=Cl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(kU){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(kU){"undefined"!==typeof console&&console.error&&console.error(kU)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Cl(){}function xl(e){return e&&e._delegate?e._delegate:e}class Nl{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Al="[DEFAULT]";class Rl{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ol;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(kU){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(kU){if(r)return null;throw kU}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Al})}catch(kU){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(kU){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Al;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Al;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Al;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Al?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Al;return this.component?this.component.multipleInstances?e:Al:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pl{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Rl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Dl=[];var Ol;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ol||(Ol={}));const Ll={debug:Ol.DEBUG,verbose:Ol.VERBOSE,info:Ol.INFO,warn:Ol.WARN,error:Ol.ERROR,silent:Ol.SILENT},Ml=Ol.INFO,Fl={[Ol.DEBUG]:"log",[Ol.VERBOSE]:"log",[Ol.INFO]:"info",[Ol.WARN]:"warn",[Ol.ERROR]:"error"},Ul=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Fl[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class jl{constructor(e){this.name=e,this._logLevel=Ml,this._logHandler=Ul,this._userLogHandler=null,Dl.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ol))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ll[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ol.DEBUG,...t),this._logHandler(this,Ol.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ol.VERBOSE,...t),this._logHandler(this,Ol.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ol.INFO,...t),this._logHandler(this,Ol.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ol.WARN,...t),this._logHandler(this,Ol.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ol.ERROR,...t),this._logHandler(this,Ol.ERROR,...t)}}const Vl=(e,t)=>t.some((t=>e instanceof t));let zl,Bl;const ql=new WeakMap,Kl=new WeakMap,Gl=new WeakMap,Hl=new WeakMap,Wl=new WeakMap;let Ql={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Kl.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Gl.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yl(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Jl(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Bl||(Bl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Xl(this),n),Yl(ql.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Yl(e.apply(Xl(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Xl(this),t,...r);return Gl.set(s,t.sort?t.sort():[t]),Yl(s)}}function $l(e){return"function"===typeof e?Jl(e):(e instanceof IDBTransaction&&function(e){if(Kl.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Kl.set(e,t)}(e),Vl(e,zl||(zl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ql):e)}function Yl(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Yl(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ql.set(t,e)})).catch((()=>{})),Wl.set(t,e),t}(e);if(Hl.has(e))return Hl.get(e);const t=$l(e);return t!==e&&(Hl.set(e,t),Wl.set(t,e)),t}const Xl=e=>Wl.get(e);const Zl=["get","getKey","getAll","getAllKeys","count"],eu=["put","add","delete","clear"],tu=new Map;function nu(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(tu.get(t))return tu.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=eu.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Zl.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return tu.set(t,s),s}Ql=(e=>({...e,get:(t,n,r)=>nu(t,n)||e.get(t,n,r),has:(t,n)=>!!nu(t,n)||e.has(t,n)}))(Ql);class ru{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const iu="@firebase/app",su="0.10.2",ou=new jl("@firebase/app"),au="@firebase/app-compat",cu="@firebase/analytics-compat",lu="@firebase/analytics",uu="@firebase/app-check-compat",hu="@firebase/app-check",du="@firebase/auth",fu="@firebase/auth-compat",pu="@firebase/database",mu="@firebase/database-compat",gu="@firebase/functions",vu="@firebase/functions-compat",yu="@firebase/installations",wu="@firebase/installations-compat",bu="@firebase/messaging",_u="@firebase/messaging-compat",Eu="@firebase/performance",Iu="@firebase/performance-compat",Tu="@firebase/remote-config",Su="@firebase/remote-config-compat",ku="@firebase/storage",Cu="@firebase/storage-compat",xu="@firebase/firestore",Nu="@firebase/firestore-compat",Au="firebase",Ru="[DEFAULT]",Pu={[iu]:"fire-core",[au]:"fire-core-compat",[lu]:"fire-analytics",[cu]:"fire-analytics-compat",[hu]:"fire-app-check",[uu]:"fire-app-check-compat",[du]:"fire-auth",[fu]:"fire-auth-compat",[pu]:"fire-rtdb",[mu]:"fire-rtdb-compat",[gu]:"fire-fn",[vu]:"fire-fn-compat",[yu]:"fire-iid",[wu]:"fire-iid-compat",[bu]:"fire-fcm",[_u]:"fire-fcm-compat",[Eu]:"fire-perf",[Iu]:"fire-perf-compat",[Tu]:"fire-rc",[Su]:"fire-rc-compat",[ku]:"fire-gcs",[Cu]:"fire-gcs-compat",[xu]:"fire-fst",[Nu]:"fire-fst-compat","fire-js":"fire-js",[Au]:"fire-js-all"},Du=new Map,Ou=new Map,Lu=new Map;function Mu(e,t){try{e.container.addComponent(t)}catch(kU){ou.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),kU)}}function Fu(e,t){e.container.addOrOverwriteComponent(t)}function Uu(e){const t=e.name;if(Lu.has(t))return ou.debug("There were multiple attempts to register component ".concat(t,".")),!1;Lu.set(t,e);for(const n of Du.values())Mu(n,e);for(const n of Ou.values())Mu(n,e);return!0}function ju(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Vu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ru;ju(e,t).clearInstance(n)}function zu(e){return void 0!==e.options}function Bu(e){return void 0!==e.settings}function qu(){Lu.clear()}const Ku=new vl("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Gu{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Nl("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ku.create("app-deleted",{appName:this._name})}}class Hu extends Gu{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Zu(iu,su,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Xu(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ku.create("server-app-deleted")}}const Wu="10.11.1";function Qu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ru,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ku.create("bad-app-name",{appName:String(i)});if(n||(n=sl()),!n)throw Ku.create("no-options");const s=Du.get(i);if(s){if(bl(n,s.options)&&bl(r,s.config))return s;throw Ku.create("duplicate-app",{appName:i})}const o=new Pl(i);for(const c of Lu.values())o.addComponent(c);const a=new Gu(n,r,o);return Du.set(i,a),a}function Ju(e,t){if(ul())throw Ku.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=zu(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Ku.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=Ou.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new Pl(i);for(const l of Lu.values())a.addComponent(l);const c=new Hu(n,t,i,a);return Ou.set(i,c),c}function $u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ru;const t=Du.get(e);if(!t&&e===Ru&&sl())return Qu();if(!t)throw Ku.create("no-app",{appName:e});return t}function Yu(){return Array.from(Du.values())}async function Xu(e){let t=!1;const n=e.name;if(Du.has(n))t=!0,Du.delete(n);else if(Ou.has(n)){e.decRefCount()<=0&&(Ou.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Zu(e,t,n){var r;let i=null!==(r=Pu[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ou.warn(e.join(" "))}Uu(new Nl("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function eh(e,t){if(null!==e&&"function"!==typeof e)throw Ku.create("invalid-log-argument");!function(e,t){for(const n of Dl){let r=null;t&&t.level&&(r=Ll[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Ol[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function th(e){var t;t=e,Dl.forEach((e=>{e.setLogLevel(t)}))}const nh="firebase-heartbeat-database",rh=1,ih="firebase-heartbeat-store";let sh=null;function oh(){return sh||(sh=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Yl(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Yl(o.result),e.oldVersion,e.newVersion,Yl(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(nh,rh,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ih)}catch(kU){console.warn(kU)}}}).catch((e=>{throw Ku.create("idb-open",{originalErrorMessage:e.message})}))),sh}async function ah(e,t){try{const n=(await oh()).transaction(ih,"readwrite"),r=n.objectStore(ih);await r.put(t,ch(e)),await n.done}catch(kU){if(kU instanceof gl)ou.warn(kU.message);else{const t=Ku.create("idb-set",{originalErrorMessage:null===kU||void 0===kU?void 0:kU.message});ou.warn(t.message)}}}function ch(e){return"".concat(e.name,"!").concat(e.options.appId)}class lh{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hh(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=uh();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=uh(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),dh(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dh(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=el(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function uh(){return(new Date).toISOString().substring(0,10)}class hh{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ml()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await oh()).transaction(ih),n=await t.objectStore(ih).get(ch(e));return await t.done,n}catch(kU){if(kU instanceof gl)ou.warn(kU.message);else{const t=Ku.create("idb-get",{originalErrorMessage:null===kU||void 0===kU?void 0:kU.message});ou.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ah(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ah(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function dh(e){return el(JSON.stringify({version:2,heartbeats:e})).length}var fh;fh="",Uu(new Nl("platform-logger",(e=>new ru(e)),"PRIVATE")),Uu(new Nl("heartbeat",(e=>new lh(e)),"PRIVATE")),Zu(iu,su,fh),Zu(iu,su,"esm2017"),Zu("fire-js","");class ph{constructor(e,t){this._delegate=e,this.firebase=t,Mu(e,new Nl("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Xu(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ru;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ru;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Mu(this._delegate,e)}_addOrOverwriteComponent(e){Fu(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const mh=new vl("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const gh=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Qu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(wl(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Zu,setLogLevel:th,onLog:eh,apps:null,SDK_VERSION:Wu,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Uu(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw mh.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&nl(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!wl(n,e=e||Ru))throw mh.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(ph);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){nl(n,e)},createSubscribe:Sl,ErrorFactory:vl,deepExtend:nl}),n}(),vh=new jl("@firebase/app-compat");if(ul()&&void 0!==self.firebase){vh.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&vh.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const yh=gh;!function(e){Zu("@firebase/app-compat","0.2.32",e)}();function wh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const bh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},_h="EMAIL_SIGNIN",Eh="PASSWORD_RESET",Ih="RECOVER_EMAIL",Th="REVERT_SECOND_FACTOR_ADDITION",Sh="VERIFY_AND_CHANGE_EMAIL",kh="VERIFY_EMAIL";function Ch(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xh=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Nh=Ch,Ah=new vl("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rh=new jl("@firebase/auth");function Ph(e){if(Rh.logLevel<=Ol.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rh.error("Auth (".concat(Wu,"): ").concat(e),...n)}}function Dh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Uh(e,...n)}function Oh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Uh(e,...n)}function Lh(e,t,n){const r=Object.assign(Object.assign({},Nh()),{[t]:n});return new vl("auth","Firebase",r).create(t,{appName:e.name})}function Mh(e){return Lh(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fh(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Dh(e,"argument-error"),Lh(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Uh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Ah.create(e,...n)}function jh(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Uh(t,...r)}}function Vh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ph(t),new Error(t)}function zh(e,t){e||Vh(t)}function Bh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qh(){return"http:"===Kh()||"https:"===Kh()}function Kh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Gh{constructor(e,t){this.shortDelay=e,this.longDelay=t,zh(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cl())||dl()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qh()||hl()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Hh(e,t){zh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Wh{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Vh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Vh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Vh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Jh=new Gh(3e4,6e4);function $h(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Yh(e,t,n,r){return Xh(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=El(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Wh.fetch()(ed(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Xh(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Qh),t);try{const t=new nd(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw rd(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw rd(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw rd(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw rd(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Lh(e,a,o);Dh(e,a)}}catch(kU){if(kU instanceof gl)throw kU;Dh(e,"network-request-failed",{message:String(kU)})}}async function Zh(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Yh(e,t,n,r,i);return"mfaPendingCredential"in s&&Dh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ed(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Hh(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function td(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nd{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Oh(this.auth,"network-request-failed"))),Jh.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function rd(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Oh(e,t,r);return i.customData._tokenResponse=n,i}function id(e){return void 0!==e&&void 0!==e.getResponse}function sd(e){return void 0!==e&&void 0!==e.enterprise}class od{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return td(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ad(e,t){return Yh(e,"GET","/v2/recaptchaConfig",$h(e,t))}async function cd(e,t){return Yh(e,"POST","/v1/accounts:lookup",t)}function ld(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(kU){}}function ud(e){return 1e3*Number(e)}function hd(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ph("JWT malformed, contained fewer than 3 sections"),null;try{const e=tl(n);return e?JSON.parse(e):(Ph("Failed to decode base64 JWT payload"),null)}catch(kU){return Ph("Caught error parsing JWT payload as JSON",null===kU||void 0===kU?void 0:kU.toString()),null}}function dd(e){const t=hd(e);return jh(t,"internal-error"),jh("undefined"!==typeof t.exp,"internal-error"),jh("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function fd(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(kU){throw kU instanceof gl&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(kU)&&e.auth.currentUser===e&&await e.auth.signOut(),kU}}class pd{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(kU){return void((null===kU||void 0===kU?void 0:kU.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class md{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ld(this.lastLoginAt),this.creationTime=ld(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gd(e){var t;const n=e.auth,r=await e.getIdToken(),i=await fd(e,cd(n,{idToken:r}));jh(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?vd(s.providerUserInfo):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new md(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function vd(e){return e.map((e=>{var{providerId:t}=e,n=wh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class yd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){jh(e.idToken,"internal-error"),jh("undefined"!==typeof e.idToken,"internal-error"),jh("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):dd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){jh(0!==e.length,"internal-error");const t=dd(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(jh(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Xh(e,{},(async()=>{const n=El({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=ed(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Wh.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new yd;return n&&(jh("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(jh("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(jh("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yd,this.toJSON())}_performRefresh(){return Vh("not implemented")}}function wd(e,t){jh("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class bd{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=wh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new md(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await fd(this,this.stsTokenManager.getToken(this.auth,e));return jh(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=xl(e),r=await n.getIdToken(t),i=hd(r);jh(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ld(ud(i.auth_time)),issuedAtTime:ld(ud(i.iat)),expirationTime:ld(ud(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=xl(e);await gd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(jh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){jh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await gd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bu(this.auth.app))return Promise.reject(Mh(this.auth));const e=await this.getIdToken();return await fd(this,async function(e,t){return Yh(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;jh(y&&E,e,"internal-error");const I=yd.fromJSON(this.name,E);jh("string"===typeof y,e,"internal-error"),wd(u,e.name),wd(h,e.name),jh("boolean"===typeof w,e,"internal-error"),jh("boolean"===typeof b,e,"internal-error"),wd(d,e.name),wd(f,e.name),wd(p,e.name),wd(m,e.name),wd(g,e.name),wd(v,e.name);const T=new bd({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new yd;r.updateFromServerResponse(t);const i=new bd({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await gd(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];jh(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?vd(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new yd;o.updateFromIdToken(n);const a=new bd({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new md(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}const _d=new Map;function Ed(e){zh(e instanceof Function,"Expected a class definition");let t=_d.get(e);return t?(zh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,_d.set(e,t),t)}class Id{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Id.type="NONE";const Td=Id;function Sd(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class kd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Sd(this.userKey,r.apiKey,i),this.fullPersistenceKey=Sd("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bd._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new kd(Ed(Td),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ed(Td);const s=Sd(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=bd._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new kd(i,e,n)):new kd(i,e,n)}}function Cd(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Rd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xd(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Dd(t))return"Blackberry";if(Od(t))return"Webos";if(Nd(t))return"Safari";if((t.includes("chrome/")||Ad(t))&&!t.includes("edge/"))return"Chrome";if(Pd(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function xd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return/firefox\//i.test(e)}function Nd(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return/crios\//i.test(e)}function Rd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return/iemobile/i.test(e)}function Pd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return/android/i.test(e)}function Dd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return/blackberry/i.test(e)}function Od(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return/webos/i.test(e)}function Ld(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Md(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return Ld(e)||Pd(e)||Od(e)||Dd(e)||/windows phone/i.test(e)||Rd(e)}function Fd(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Cd(cl());break;case"Worker":t="".concat(Cd(cl()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Wu,"/").concat(r)}class Ud{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(kU){r(kU)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(kU){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===kU||void 0===kU?void 0:kU.message})}}}class jd{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Vd{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bd(this),this.idTokenSubscription=new Bd(this),this.beforeStateQueue=new Ud(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ah,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ed(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await kd.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(kU){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await cd(this,{idToken:e}),n=await bd._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Bu(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(kU){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(kU)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return jh(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(kU){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gd(e)}catch(kU){if((null===kU||void 0===kU?void 0:kU.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bu(this.app))return Promise.reject(Mh(this));const t=e?xl(e):null;return t&&jh(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&jh(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Bu(this.app)?Promise.reject(Mh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bu(this.app)?Promise.reject(Mh(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ed(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Yh(e,"GET","/v2/passwordPolicy",$h(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new jd(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vl("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Yh(e,"POST","/v2/accounts:revokeToken",$h(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ed(e)||this._popupRedirectResolver;jh(t,this,"argument-error"),this.redirectPersistenceManager=await kd.create(this,[Ed(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(jh(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return jh(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Rh.logLevel<=Ol.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rh.warn("Auth (".concat(Wu,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function zd(e){return xl(e)}class Bd{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sl((e=>this.observer=e))}get next(){return jh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kd(e){return qd.loadJS(e)}function Gd(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Hd{constructor(e){this.type="recaptcha-enterprise",this.auth=zd(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;sd(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ad(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new od(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&sd(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=qd.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Kd(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Wd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Hd(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Qd(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Wd(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Wd(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Jd(e,t,n){const r=zd(e);jh(r._canInitEmulator,r,"emulator-config-failed"),jh(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=$d(t),{host:o,port:a}=function(e){const t=$d(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Yd(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Yd(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function $d(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yd(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Xd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vh("not implemented")}_getIdTokenResponse(e){return Vh("not implemented")}_linkToIdToken(e,t){return Vh("not implemented")}_getReauthenticationResolver(e){return Vh("not implemented")}}async function Zd(e,t){return Yh(e,"POST","/v1/accounts:resetPassword",$h(e,t))}async function ef(e,t){return Yh(e,"POST","/v1/accounts:signUp",t)}async function tf(e,t){return Zh(e,"POST","/v1/accounts:signInWithPassword",$h(e,t))}async function nf(e,t){return Yh(e,"POST","/v1/accounts:sendOobCode",$h(e,t))}async function rf(e,t){return nf(e,t)}async function sf(e,t){return nf(e,t)}class of extends Xd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new of(e,t,"password")}static _fromEmailAndCode(e,t){return new of(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Qd(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",tf);case"emailLink":return async function(e,t){return Zh(e,"POST","/v1/accounts:signInWithEmailLink",$h(e,t))}(e,{email:this._email,oobCode:this._password});default:Dh(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Qd(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ef);case"emailLink":return async function(e,t){return Zh(e,"POST","/v1/accounts:signInWithEmailLink",$h(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Dh(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function af(e,t){return Zh(e,"POST","/v1/accounts:signInWithIdp",$h(e,t))}class cf extends Xd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new cf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dh("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=wh(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new cf(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return af(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,af(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,af(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=El(t)}return e}}const lf={USER_NOT_FOUND:"user-not-found"};class uf extends Xd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new uf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new uf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Zh(e,"POST","/v1/accounts:signInWithPhoneNumber",$h(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Zh(e,"POST","/v1/accounts:signInWithPhoneNumber",$h(e,t));if(n.temporaryProof)throw rd(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Zh(e,"POST","/v1/accounts:signInWithPhoneNumber",$h(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),lf)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new uf({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class hf{constructor(e){var t,n,r,i,s,o;const a=Il(Tl(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);jh(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Il(Tl(e)).link,n=t?Il(Tl(t)).deep_link_id:null,r=Il(Tl(e)).deep_link_id;return(r?Il(Tl(r)).link:null)||r||n||t||e}(e);try{return new hf(t)}catch(n){return null}}}class df{constructor(){this.providerId=df.PROVIDER_ID}static credential(e,t){return of._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=hf.parseLink(t);return jh(n,"argument-error"),of._fromEmailAndCode(e,n.code,n.tenantId)}}df.PROVIDER_ID="password",df.EMAIL_PASSWORD_SIGN_IN_METHOD="password",df.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ff{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pf extends ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class mf extends pf{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return jh("providerId"in t&&"signInMethod"in t,"argument-error"),cf._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return jh(e.idToken||e.accessToken,"argument-error"),cf._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return mf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return mf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new mf(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(kU){return null}}}class gf extends pf{constructor(){super("facebook.com")}static credential(e){return cf._fromParams({providerId:gf.PROVIDER_ID,signInMethod:gf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gf.credentialFromTaggedObject(e)}static credentialFromError(e){return gf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return gf.credential(t.oauthAccessToken)}catch(n){return null}}}gf.FACEBOOK_SIGN_IN_METHOD="facebook.com",gf.PROVIDER_ID="facebook.com";class vf extends pf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return cf._fromParams({providerId:vf.PROVIDER_ID,signInMethod:vf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vf.credentialFromTaggedObject(e)}static credentialFromError(e){return vf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return vf.credential(n,r)}catch(i){return null}}}vf.GOOGLE_SIGN_IN_METHOD="google.com",vf.PROVIDER_ID="google.com";class yf extends pf{constructor(){super("github.com")}static credential(e){return cf._fromParams({providerId:yf.PROVIDER_ID,signInMethod:yf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yf.credentialFromTaggedObject(e)}static credentialFromError(e){return yf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yf.credential(t.oauthAccessToken)}catch(n){return null}}}yf.GITHUB_SIGN_IN_METHOD="github.com",yf.PROVIDER_ID="github.com";class wf extends Xd{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return af(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,af(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,af(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new wf(n,i):null}static _create(e,t){return new wf(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bf extends ff{constructor(e){jh(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return bf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return bf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=wf.fromJSON(e);return jh(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return wf._create(r,n)}catch(kU){return null}}}class _f extends pf{constructor(){super("twitter.com")}static credential(e,t){return cf._fromParams({providerId:_f.PROVIDER_ID,signInMethod:_f.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _f.credentialFromTaggedObject(e)}static credentialFromError(e){return _f.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return _f.credential(n,r)}catch(i){return null}}}async function Ef(e,t){return Zh(e,"POST","/v1/accounts:signUp",$h(e,t))}_f.TWITTER_SIGN_IN_METHOD="twitter.com",_f.PROVIDER_ID="twitter.com";class If{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await bd._fromIdTokenResponse(e,n,r),s=Tf(n);return new If({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Tf(n);return new If({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Tf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Sf extends gl{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Sf.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Sf(e,t,n,r)}}function kf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Sf._fromErrorAndOperation(e,n,t,r);throw n}))}function Cf(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function xf(e,t){const n=xl(e);await Af(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Yh(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Cf(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Nf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await fd(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return If._forOperation(e,"link",r)}async function Af(e,t,n){await gd(t);const r=!1===e?"provider-already-linked":"no-such-provider";jh(Cf(t.providerData).has(n)===e,t.auth,r)}async function Rf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Bu(r.app))return Promise.reject(Mh(r));const i="reauthenticate";try{const s=await fd(e,kf(r,i,t,e),n);jh(s.idToken,r,"internal-error");const o=hd(s.idToken);jh(o,r,"internal-error");const{sub:a}=o;return jh(e.uid===a,r,"user-mismatch"),If._forOperation(e,i,s)}catch(kU){throw(null===kU||void 0===kU?void 0:kU.code)==="auth/".concat("user-not-found")&&Dh(r,"user-mismatch"),kU}}async function Pf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Bu(e.app))return Promise.reject(Mh(e));const r="signIn",i=await kf(e,r,t),s=await If._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Df(e,t){return Pf(zd(e),t)}async function Of(e,t){const n=xl(e);return await Af(!1,n,t.providerId),Nf(n,t)}async function Lf(e,t){return Rf(xl(e),t)}async function Mf(e,t){if(Bu(e.app))return Promise.reject(Mh(e));const n=zd(e),r=await async function(e,t){return Zh(e,"POST","/v1/accounts:signInWithCustomToken",$h(e,t))}(n,{token:t,returnSecureToken:!0}),i=await If._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Ff{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Uf._fromServerResponse(e,t):"totpInfo"in t?jf._fromServerResponse(e,t):Dh(e,"internal-error")}}class Uf extends Ff{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Uf(t)}}class jf extends Ff{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new jf(t)}}function Vf(e,t,n){var r;jh((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),jh("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(jh(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(jh(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function zf(e){const t=zd(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Bf(e,t){await async function(e,t){return Yh(e,"POST","/v1/accounts:update",$h(e,t))}(xl(e),{oobCode:t})}async function qf(e,t){const n=xl(e),r=await Zd(n,{oobCode:t}),i=r.requestType;switch(jh(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":jh(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":jh(r.mfaInfo,n,"internal-error");default:jh(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Ff._fromServerResponse(zd(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Kf(e,t){const n={identifier:t,continueUri:qh()?Bh():"http://localhost"},{signinMethods:r}=await async function(e,t){return Yh(e,"POST","/v1/accounts:createAuthUri",$h(e,t))}(xl(e),n);return r||[]}async function Gf(e,t){const n=xl(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Vf(n.auth,r,t);const{email:i}=await async function(e,t){return nf(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Hf(e,t,n){const r=xl(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Vf(r.auth,i,n);const{email:s}=await async function(e,t){return nf(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Wf(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=xl(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await fd(i,async function(e,t){return Yh(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function Qf(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await fd(e,async function(e,t){return Yh(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class Jf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class $f extends Jf{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Yf extends Jf{constructor(e,t){super(e,"facebook.com",t)}}class Xf extends $f{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Zf extends Jf{constructor(e,t){super(e,"google.com",t)}}class ep extends $f{constructor(e,t,n){super(e,"twitter.com",t,n)}}function tp(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=hd(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Jf(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Yf(s,i);case"github.com":return new Xf(s,i);case"google.com":return new Zf(s,i);case"twitter.com":return new ep(s,i,e.screenName||null);case"custom":case"anonymous":return new Jf(s,null);default:return new Jf(s,r,i)}}(n)}class np{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new np("enroll",e,t)}static _fromMfaPendingCredential(e){return new np("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return np._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return np._fromIdtoken(e.multiFactorSession.idToken)}return null}}class rp{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=zd(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Ff._fromServerResponse(n,e)));jh(r.mfaPendingCredential,n,"internal-error");const s=np._fromMfaPendingCredential(r.mfaPendingCredential);return new rp(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await If._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return jh(t.user,n,"internal-error"),If._forOperation(t.user,t.operationType,o);default:Dh(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class ip{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Ff._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new ip(e)}async getSession(){return np._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await fd(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await fd(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},Yh(r,"POST","/v2/accounts/mfaEnrollment:withdraw",$h(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(kU){throw kU}var r,i}}const sp=new WeakMap;const op="__sak";class ap{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(op,"1"),this.storage.removeItem(op),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class cp extends ap{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=cl();return Nd(e)||Ld(e)}()&&function(){try{return!(!window||window===window.top)}catch(kU){return!1}}(),this.fallbackToPolling=Md(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);fl()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cp.type="LOCAL";const lp=cp;class up extends ap{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}up.type="SESSION";const hp=up;class dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new dp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function fp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}dp.receivers=[];class pp{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=fp("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function mp(){return window}function gp(){return"undefined"!==typeof mp().WorkerGlobalScope&&"function"===typeof mp().importScripts}const vp="firebaseLocalStorageDb",yp="firebaseLocalStorage",wp="fbase_key";class bp{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function _p(e,t){return e.transaction([yp],t?"readwrite":"readonly").objectStore(yp)}function Ep(){const e=indexedDB.open(vp,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(yp,{keyPath:wp})}catch(kU){n(kU)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(yp)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(vp);return new bp(e).toPromise()}(),t(await Ep()))}))}))}async function Ip(e,t,n){const r=_p(e,!0).put({[wp]:t,value:n});return new bp(r).toPromise()}function Tp(e,t){const n=_p(e,!0).delete(t);return new bp(n).toPromise()}class Sp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ep()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(kU){if(t++>3)throw kU;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dp._getInstance(gp()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new pp(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ep();return await Ip(e,op,"1"),await Tp(e,op),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ip(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=_p(e,!1).get(t),r=await new bp(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Tp(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=_p(e,!1).getAll();return new bp(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Sp.type="LOCAL";const kp=Sp;const Cp=1e12;class xp{constructor(e){this.auth=e,this.counter=Cp,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Np(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Cp;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Cp;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Cp;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Np{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;jh(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(kU){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(kU){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ap=Gd("rcb"),Rp=new Gh(3e4,6e4);class Pp{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=mp().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return jh(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&id(mp().grecaptcha)?Promise.resolve(mp().grecaptcha):new Promise(((n,r)=>{const i=mp().setTimeout((()=>{r(Oh(e,"network-request-failed"))}),Rp.get());mp()[Ap]=()=>{mp().clearTimeout(i),delete mp()[Ap];const s=mp().grecaptcha;if(!s||!id(s))return void r(Oh(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Kd("".concat(qd.recaptchaV2Script,"?").concat(El({onload:Ap,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Oh(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=mp().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Dp{async load(e){return new xp(e)}clearedOneInstance(){}}const Op="recaptcha",Lp={theme:"light",type:"image"};class Mp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Lp);this.parameters=n,this.type=Op,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zd(e),this.isInvisible="invisible"===this.parameters.size,jh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;jh(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dp:new Pp,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(kU){return Promise.reject(kU)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){jh(!this.parameters.sitekey,this.auth,"argument-error"),jh(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),jh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=mp()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){jh(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){jh(qh()&&!gp(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Yh(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);jh(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return jh(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fp{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=uf._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Up(e,t,n){var r;const i=await n.verify();try{let s;if(jh("string"===typeof i,e,"argument-error"),jh(n.type===Op,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){jh("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Yh(e,"POST","/v2/accounts/mfaEnrollment:start",$h(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{jh("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;jh(n,e,"missing-multi-factor-info");const o=await function(e,t){return Yh(e,"POST","/v2/accounts/mfaSignIn:start",$h(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Yh(e,"POST","/v1/accounts:sendVerificationCode",$h(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class jp{constructor(e){this.providerId=jp.PROVIDER_ID,this.auth=zd(e)}verifyPhoneNumber(e,t){return Up(this.auth,e,xl(t))}static credential(e,t){return uf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return jp.credentialFromTaggedObject(t)}static credentialFromError(e){return jp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?uf._fromTokenResponse(n,r):null}}function Vp(e,t){return t?Ed(t):(jh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}jp.PROVIDER_ID="phone",jp.PHONE_SIGN_IN_METHOD="phone";class zp extends Xd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return af(e,this._buildIdpRequest())}_linkToIdToken(e,t){return af(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return af(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bp(e){return Pf(e.auth,new zp(e),e.bypassAuthState)}function qp(e){const{auth:t,user:n}=e;return jh(n,t,"internal-error"),Rf(n,new zp(e),e.bypassAuthState)}async function Kp(e){const{auth:t,user:n}=e;return jh(n,t,"internal-error"),Nf(n,new zp(e),e.bypassAuthState)}class Gp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(kU){this.reject(kU)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(kU){this.reject(kU)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bp;case"linkViaPopup":case"linkViaRedirect":return Kp;case"reauthViaPopup":case"reauthViaRedirect":return qp;default:Dh(this.auth,"internal-error")}}resolve(e){zh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hp=new Gh(2e3,1e4);class Wp extends Gp{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Wp.currentPopupAction&&Wp.currentPopupAction.cancel(),Wp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return jh(e,this.auth,"internal-error"),e}async onExecution(){zh(1===this.filter.length,"Popup operations only handle one event");const e=fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Oh(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Oh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Oh(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Hp.get())};e()}}Wp.currentPopupAction=null;const Qp="pendingRedirect",Jp=new Map;class $p extends Gp{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Jp.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=em(t),r=Zp(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(kU){e=()=>Promise.reject(kU)}Jp.set(this.auth._key(),e)}return this.bypassAuthState||Jp.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Yp(e,t){return Zp(e)._set(em(t),"true")}function Xp(e,t){Jp.set(e._key(),t)}function Zp(e){return Ed(e._redirectPersistence)}function em(e){return Sd(Qp,e.config.apiKey,e.name)}function tm(e,t,n){return async function(e,t,n){if(Bu(e.app))return Promise.reject(Mh(e));const r=zd(e);Fh(e,t,ff),await r._initializationPromise;const i=Vp(r,n);return await Yp(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function nm(e,t,n){return async function(e,t,n){const r=xl(e);if(Fh(r.auth,t,ff),Bu(r.auth.app))return Promise.reject(Mh(r.auth));await r.auth._initializationPromise;const i=Vp(r.auth,n);await Yp(i,r.auth);const s=await sm(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function rm(e,t,n){return async function(e,t,n){const r=xl(e);Fh(r.auth,t,ff),await r.auth._initializationPromise;const i=Vp(r.auth,n);await Af(!1,r,t.providerId),await Yp(i,r.auth);const s=await sm(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function im(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Bu(e.app))return Promise.reject(Mh(e));const r=zd(e),i=Vp(r,t),s=new $p(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function sm(e){const t=fp("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class om{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!cm(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Oh(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(am(e))}saveEventToCache(e){this.cachedEventUids.add(am(e)),this.lastProcessedEventTime=Date.now()}}function am(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function cm(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function lm(e){return Yh(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const um=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hm=/^https?/;function dm(e){const t=Bh(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!hm.test(n))return!1;if(um.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const fm=new Gh(3e4,6e4);function pm(){const e=mp().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function mm(e){return new Promise(((t,n)=>{var r,i,s;function o(){pm(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pm(),n(Oh(e,"network-request-failed"))},timeout:fm.get()})}if(null===(i=null===(r=mp().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=mp().gapi)||void 0===s?void 0:s.load)){const t=Gd("iframefcb");return mp()[t]=()=>{gapi.load?o():n(Oh(e,"network-request-failed"))},Kd("".concat(qd.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw gm=null,e}))}let gm=null;const vm=new Gh(5e3,15e3),ym="__/auth/iframe",wm="emulator/auth/iframe",bm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_m=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Em(e){const t=e.config;jh(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Hh(t,wm):"https://".concat(e.config.authDomain,"/").concat(ym),r={apiKey:t.apiKey,appName:e.name,v:Wu},i=_m.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(El(r).slice(1))}async function Im(e){const t=await function(e){return gm=gm||mm(e),gm}(e),n=mp().gapi;return jh(n,e,"internal-error"),t.open({where:document.body,url:Em(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bm,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Oh(e,"network-request-failed"),s=mp().setTimeout((()=>{r(i)}),vm.get());function o(){mp().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Tm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(kU){}}}function km(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Tm),{width:r.toString(),height:i.toString(),top:s,left:o}),l=cl().toLowerCase();n&&(a=Ad(l)?"_blank":n),xd(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Ld(arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Sm(null);const h=window.open(t||"",a,u);jh(h,e,"popup-blocked");try{h.focus()}catch(kU){}return new Sm(h)}const Cm="__/auth/handler",xm="emulator/auth/handler",Nm=encodeURIComponent("fac");async function Am(e,t,n,r,i,s){jh(e.config.authDomain,e,"auth-domain-config-required"),jh(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Wu,eventId:i};if(t instanceof ff){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof pf){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(Nm,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Cm);return Hh(t,xm)}(e),"?").concat(El(a).slice(1)).concat(l)}const Rm="webStorageSupport";const Pm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hp,this._completeRedirectFn=im,this._overrideRedirectResult=Xp}async _openPopup(e,t,n,r){var i;zh(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return km(e,await Am(e,t,n,Bh(),r),fp())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){mp().location.href=e}(await Am(e,t,n,Bh(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(zh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Im(e),n=new om(e);return t.register("authEvent",(t=>{jh(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rm,{type:Rm},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Rm];void 0!==i&&t(!!i),Dh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await lm(e);for(const r of t)try{if(dm(r))return}catch(n){}Dh(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Md()||Nd()||Ld()}};class Dm{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Vh("unexpected MultiFactorSessionType")}}}class Om extends Dm{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Om(e)}_finalizeEnroll(e,t,n){return function(e,t){return Yh(e,"POST","/v2/accounts/mfaEnrollment:finalize",$h(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Yh(e,"POST","/v2/accounts/mfaSignIn:finalize",$h(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Lm{constructor(){}static assertion(e){return Om._fromCredential(e)}}Lm.FACTOR_ID="phone";var Mm="@firebase/auth",Fm="1.7.2";class Um{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){jh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=il())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var jm;function Vm(){return window}!function(e){qd=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Oh("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),jm="Browser",Uu(new Nl("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;jh(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:jm,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fd(jm)},l=new Vd(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ed);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Uu(new Nl("auth-internal",(e=>(e=>new Um(e))(zd(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Zu(Mm,Fm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(jm)),Zu(Mm,Fm,"esm2017");async function zm(e,t,n){var r;const{BuildInfo:i}=Vm();zh(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(zh(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Ld()?o.ibi=i.packageName:Pd()?o.apn=i.packageName:Dh(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Am(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Bm(e){const{cordova:t}=Vm();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const qm=20;class Km extends om{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Gm(e){const t=await Qm()._get(Jm(e));return t&&await Qm()._remove(Jm(e)),t}function Hm(e,t){var n,r;const i=function(e){const t=$m(e),n=t.link?decodeURIComponent(t.link):void 0,r=$m(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return $m(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=$m(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(kU){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Oh(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Wm(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<qm;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Qm(){return Ed(lp)}function Jm(e){return Sd("authEvent",e.config.apiKey,e.name)}function $m(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Il(n.join("?"))}const Ym=class{constructor(){this._redirectPersistence=hp,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=im,this._overrideRedirectResult=Xp}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Km(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Dh(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=Vm();jh("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),jh("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),jh("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),jh("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),jh("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Jp.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Wm(),postBody:null,tenantId:e.tenantId,error:Oh(e,"no-auth-event")}}(e,n,r);await function(e,t){return Qm()._set(Jm(e),t)}(e,s);const o=await zm(e,s,t);return async function(e,t,n){const{cordova:r}=Vm();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(Oh(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),Pd()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Bm(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Vm(),n={};Ld()?n.iosBundleId=t.packageName:Pd()?n.androidPackageName=t.packageName:Dh(e,"operation-not-supported-in-this-environment"),await lm(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Vm(),s=setTimeout((async()=>{await Gm(e),t.onEvent(Xm())}),500),o=async n=>{clearTimeout(s);const r=await Gm(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Hm(r,n.url)),t.onEvent(i||Xm())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");Vm().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(kU){console.error(kU)}}}};function Xm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Oh("no-auth-event")}}function Zm(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function eg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return!("file:"!==Zm()&&"ionic:"!==Zm()&&"capacitor:"!==Zm()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function tg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return fl()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl();return/Edge\/\d+/.test(e)}(e)}function ng(){try{const e=self.localStorage,t=fp();if(e)return e.setItem(t,"1"),e.removeItem(t),!tg()||ml()}catch(kU){return rg()&&ml()}return!1}function rg(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ig(){return("http:"===Zm()||"https:"===Zm()||hl()||eg())&&!(dl()||ll())&&ng()&&!rg()}function sg(){return eg()&&"undefined"!==typeof document}const og={LOCAL:"local",NONE:"none",SESSION:"session"},ag=jh,cg="persistence";async function lg(e){await e._initializationPromise;const t=ug(),n=Sd(cg,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function ug(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(kU){return null}}const hg=jh;class dg{constructor(){this.browserResolver=Ed(Pm),this.cordovaResolver=Ed(Ym),this.underlyingResolver=null,this._redirectPersistence=hp,this._completeRedirectFn=im,this._overrideRedirectResult=Xp}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return sg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hg(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!sg()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function fg(e){return e.unwrap()}function pg(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new yg(e,function(e,t){var n;const r=xl(e),i=t;return jh(t.customData.operationType,r,"argument-error"),jh(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),rp._fromError(r,i)}(e,t))}else if(r){const e=mg(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function mg(e){const{_tokenResponse:t}=e instanceof gl?e.customData:e;if(!t)return null;if(!(e instanceof gl)&&"temporaryProof"in t&&"phoneNumber"in t)return jp.credentialFromResult(e);const n=t.providerId;if(!n||n===bh.PASSWORD)return null;let r;switch(n){case bh.GOOGLE:r=vf;break;case bh.FACEBOOK:r=gf;break;case bh.GITHUB:r=yf;break;case bh.TWITTER:r=_f;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?wf._create(n,o):cf._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new mf(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof gl?r.credentialFromError(e):r.credentialFromResult(e)}function gg(e,t){return t.catch((t=>{throw t instanceof gl&&pg(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,mg(r)),additionalUserInfo:tp(e),user:wg.getOrCreate(n)};var r}))}async function vg(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>gg(e,n.confirm(t))}}class yg{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return gg(fg(this.auth),this.resolver.resolveSignIn(e))}}class wg{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=xl(e);return sp.has(t)||sp.set(t,ip._fromUser(t)),sp.get(t)}(e)}static getOrCreate(e){return wg.USER_MAP.has(e)||wg.USER_MAP.set(e,new wg(e)),wg.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return gg(this.auth,Of(this._delegate,e))}async linkWithPhoneNumber(e,t){return vg(this.auth,async function(e,t,n){const r=xl(e);await Af(!1,r,"phone");const i=await Up(r.auth,t,xl(n));return new Fp(i,(e=>Of(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return gg(this.auth,async function(e,t,n){const r=xl(e);Fh(r.auth,t,ff);const i=Vp(r.auth,n);return new Wp(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,dg))}async linkWithRedirect(e){return await lg(zd(this.auth)),rm(this._delegate,e,dg)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return gg(this.auth,Lf(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return vg(this.auth,async function(e,t,n){const r=xl(e);if(Bu(r.auth.app))return Promise.reject(Mh(r.auth));const i=await Up(r.auth,t,xl(n));return new Fp(i,(e=>Lf(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return gg(this.auth,async function(e,t,n){const r=xl(e);if(Bu(r.auth.app))return Promise.reject(Oh(r.auth,"operation-not-supported-in-this-environment"));Fh(r.auth,t,ff);const i=Vp(r.auth,n);return new Wp(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,dg))}async reauthenticateWithRedirect(e){return await lg(zd(this.auth)),nm(this._delegate,e,dg)}sendEmailVerification(e){return Gf(this._delegate,e)}async unlink(e){return await xf(this._delegate,e),this}updateEmail(e){return function(e,t){const n=xl(e);return Bu(n.auth.app)?Promise.reject(Mh(n.auth)):Qf(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Qf(xl(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=xl(e);if(Bu(n.auth.app))return Promise.reject(Mh(n.auth));await Nf(n,t)}(this._delegate,e)}updateProfile(e){return Wf(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Hf(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wg.USER_MAP=new WeakMap;const bg=jh;class _g{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;bg(n,"invalid-api-key",{appName:e.name}),bg(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?dg:void 0;this._delegate=t.initialize({options:{persistence:Ig(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(xh),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wg.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Jd(this._delegate,e,t)}applyActionCode(e){return Bf(this._delegate,e)}checkActionCode(e){return qf(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Zd(xl(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&zf(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return gg(this._delegate,async function(e,t,n){if(Bu(e.app))return Promise.reject(Mh(e));const r=zd(e),i=Qd(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ef),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&zf(e),t})),o=await If._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Kf(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=hf.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){bg(ig(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await zd(e)._initializationPromise,im(e,t,!1)}(this._delegate,dg);return e?gg(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){zd(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Eg(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Eg(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=zd(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){jh(t.handleCodeInApp,r,"argument-error"),t&&Vf(r,e,t)}(i,n),await Qd(r,i,"getOobCode",sf)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=zd(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Vf(r,i,n),await Qd(r,i,"getOobCode",rf)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){ag(Object.values(og).includes(t),e,"invalid-persistence-type"),dl()?ag(t!==og.SESSION,e,"unsupported-persistence-type"):ll()?ag(t===og.NONE,e,"unsupported-persistence-type"):rg()?ag(t===og.NONE||t===og.LOCAL&&ml(),e,"unsupported-persistence-type"):ag(t===og.NONE||ng(),e,"unsupported-persistence-type")}(this._delegate,e),e){case og.SESSION:t=hp;break;case og.LOCAL:t=await Ed(kp)._isAvailable()?kp:lp;break;case og.NONE:t=Td;break;default:return Dh("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return gg(this._delegate,async function(e){var t;if(Bu(e.app))return Promise.reject(Mh(e));const n=zd(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new If({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Ef(n,{returnSecureToken:!0}),i=await If._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return gg(this._delegate,Df(this._delegate,e))}signInWithCustomToken(e){return gg(this._delegate,Mf(this._delegate,e))}signInWithEmailAndPassword(e,t){return gg(this._delegate,function(e,t,n){return Bu(e.app)?Promise.reject(Mh(e)):Df(xl(e),df.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&zf(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return gg(this._delegate,async function(e,t,n){if(Bu(e.app))return Promise.reject(Mh(e));const r=xl(e),i=df.credentialWithLink(t,n||Bh());return jh(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Df(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return vg(this._delegate,async function(e,t,n){if(Bu(e.app))return Promise.reject(Mh(e));const r=zd(e),i=await Up(r,t,xl(n));return new Fp(i,(e=>Df(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return bg(ig(),this._delegate,"operation-not-supported-in-this-environment"),gg(this._delegate,async function(e,t,n){if(Bu(e.app))return Promise.reject(Oh(e,"operation-not-supported-in-this-environment"));const r=zd(e);Fh(e,t,ff);const i=Vp(r,n);return new Wp(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,dg))}async signInWithRedirect(e){return bg(ig(),this._delegate,"operation-not-supported-in-this-environment"),await lg(this._delegate),tm(this._delegate,e,dg)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await qf(xl(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Eg(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&wg.getOrCreate(e)),error:t,complete:n}}function Ig(e,t){const n=function(e,t){const n=ug();if(!n)return[];const r=Sd(cg,e,t);switch(n.getItem(r)){case og.NONE:return[Td];case og.LOCAL:return[kp,hp];case og.SESSION:return[hp];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(kp)||n.push(kp),"undefined"!==typeof window)for(const r of[lp,hp])n.includes(r)||n.push(r);return n.includes(Td)||n.push(Td),n}_g.Persistence=og;class Tg{constructor(){this.providerId="phone",this._delegate=new jp(fg(yh.auth()))}static credential(e,t){return jp.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Tg.PHONE_SIGN_IN_METHOD=jp.PHONE_SIGN_IN_METHOD,Tg.PROVIDER_ID=jp.PROVIDER_ID;const Sg=jh;class kg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yh.app();var r;Sg(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Mp(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Cg;(Cg=yh).INTERNAL.registerComponent(new Nl("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new _g(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:_h,PASSWORD_RESET:Eh,RECOVER_EMAIL:Ih,REVERT_SECOND_FACTOR_ADDITION:Th,VERIFY_AND_CHANGE_EMAIL:Sh,VERIFY_EMAIL:kh}},EmailAuthProvider:df,FacebookAuthProvider:gf,GithubAuthProvider:yf,GoogleAuthProvider:vf,OAuthProvider:mf,SAMLAuthProvider:bf,PhoneAuthProvider:Tg,PhoneMultiFactorGenerator:Lm,RecaptchaVerifier:kg,TwitterAuthProvider:_f,Auth:_g,AuthCredential:Xd,Error:gl}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Cg.registerVersion("@firebase/auth-compat","0.5.7");yh.registerVersion("firebase","10.11.1","app-compat");var xg,Ng="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ag={},Rg=Rg||{},Pg=Ng||self;function Dg(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Og(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Lg="closure_uid_"+(1e9*Math.random()>>>0),Mg=0;function Fg(e,t,n){return e.call.apply(e.bind,arguments)}function Ug(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function jg(e,t,n){return(jg=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fg:Ug).apply(null,arguments)}function Vg(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function zg(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Bg(){this.s=this.s,this.o=this.o}Bg.prototype.s=!1,Bg.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Lg)&&e[Lg]||(e[Lg]=++Mg))},Bg.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qg=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Kg(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Gg(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Dg(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Hg(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Hg.prototype.h=function(){this.defaultPrevented=!0};var Wg=function(){if(!Pg.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Pg.addEventListener("test",e,t),Pg.removeEventListener("test",e,t)}catch(n){}return e}();function Qg(e){return/^[\s\xa0]*$/.test(e)}function Jg(){var e=Pg.navigator;return e&&(e=e.userAgent)?e:""}function $g(e){return-1!=Jg().indexOf(e)}function Yg(e){return Yg[" "](e),e}Yg[" "]=function(){};var Xg,Zg,ev=$g("Opera"),tv=$g("Trident")||$g("MSIE"),nv=$g("Edge"),rv=nv||tv,iv=$g("Gecko")&&!(-1!=Jg().toLowerCase().indexOf("webkit")&&!$g("Edge"))&&!($g("Trident")||$g("MSIE"))&&!$g("Edge"),sv=-1!=Jg().toLowerCase().indexOf("webkit")&&!$g("Edge");function ov(){var e=Pg.document;return e?e.documentMode:void 0}e:{var av="",cv=function(){var e=Jg();return iv?/rv:([^\);]+)(\)|;)/.exec(e):nv?/Edge\/([\d\.]+)/.exec(e):tv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):sv?/WebKit\/(\S+)/.exec(e):ev?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(cv&&(av=cv?cv[1]:""),tv){var lv=ov();if(null!=lv&&lv>parseFloat(av)){Xg=String(lv);break e}}Xg=av}if(Pg.document&&tv){var uv=ov();Zg=uv||(parseInt(Xg,10)||void 0)}else Zg=void 0;var hv=Zg;function dv(e,t){if(Hg.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(iv){e:{try{Yg(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:fv[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&dv.$.h.call(this)}}zg(dv,Hg);var fv={2:"touch",3:"pen",4:"mouse"};dv.prototype.h=function(){dv.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var pv="closure_listenable_"+(1e6*Math.random()|0),mv=0;function gv(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++mv,this.fa=this.ia=!1}function vv(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function yv(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function wv(e){const t={};for(const n in e)t[n]=e[n];return t}const bv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _v(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<bv.length;t++)n=bv[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ev(e){this.src=e,this.g={},this.h=0}function Iv(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=qg(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(vv(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Tv(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Ev.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Tv(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new gv(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Sv="closure_lm_"+(1e6*Math.random()|0),kv={};function Cv(e,t,n,r,i){if(r&&r.once)return Nv(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Cv(e,t[s],n,r,i);return null}return n=Mv(n),e&&e[pv]?e.O(t,n,Og(r)?!!r.capture:!!r,i):xv(e,t,n,!1,r,i)}function xv(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Og(i)?!!i.capture:!!i,a=Ov(e);if(a||(e[Sv]=a=new Ev(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Dv;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Wg||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Pv(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Nv(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Nv(e,t[s],n,r,i);return null}return n=Mv(n),e&&e[pv]?e.P(t,n,Og(r)?!!r.capture:!!r,i):xv(e,t,n,!0,r,i)}function Av(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Av(e,t[s],n,r,i);else r=Og(r)?!!r.capture:!!r,n=Mv(n),e&&e[pv]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Tv(s=e.g[t],n,r,i))&&(vv(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Ov(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Tv(t,n,r,i)),(n=-1<e?t[e]:null)&&Rv(n))}function Rv(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[pv])Iv(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Pv(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ov(t))?(Iv(n,e),0==n.h&&(n.src=null,t[Sv]=null)):vv(e)}}}function Pv(e){return e in kv?kv[e]:kv[e]="on"+e}function Dv(e,t){if(e.fa)e=!0;else{t=new dv(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Rv(e),e=n.call(r,t)}return e}function Ov(e){return(e=e[Sv])instanceof Ev?e:null}var Lv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mv(e){return"function"===typeof e?e:(e[Lv]||(e[Lv]=function(t){return e.handleEvent(t)}),e[Lv])}function Fv(){Bg.call(this),this.i=new Ev(this),this.S=this,this.J=null}function Uv(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Hg(t,e);else if(t instanceof Hg)t.target=t.target||e;else{var i=t;_v(t=new Hg(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=jv(o,r,!0,t)&&i}if(i=jv(o=t.g=e,r,!0,t)&&i,i=jv(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=jv(o=t.g=n[s],r,!1,t)&&i}function jv(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Iv(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}zg(Fv,Bg),Fv.prototype[pv]=!0,Fv.prototype.removeEventListener=function(e,t,n,r){Av(this,e,t,n,r)},Fv.prototype.N=function(){if(Fv.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)vv(n[r]);delete t.g[e],t.h--}}this.J=null},Fv.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Fv.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Vv=Pg.JSON.stringify;function zv(){var e=Qv;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Bv=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new qv),(e=>e.reset()));class qv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Kv(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Gv(e){Pg.setTimeout((()=>{throw e}),0)}let Hv,Wv=!1,Qv=new class{constructor(){this.h=this.g=null}add(e,t){const n=Bv.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Jv=()=>{const e=Pg.Promise.resolve(void 0);Hv=()=>{e.then($v)}};var $v=()=>{for(var e;e=zv();){try{e.h.call(e.g)}catch(n){Gv(n)}var t=Bv;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Wv=!1};function Yv(e,t){Fv.call(this),this.h=e||1,this.g=t||Pg,this.j=jg(this.qb,this),this.l=Date.now()}function Xv(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Zv(e,t,n){if("function"===typeof e)n&&(e=jg(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=jg(e.handleEvent,e)}return 2147483647<Number(t)?-1:Pg.setTimeout(e,t||0)}function ey(e){e.g=Zv((()=>{e.g=null,e.i&&(e.i=!1,ey(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}zg(Yv,Fv),(xg=Yv.prototype).ga=!1,xg.T=null,xg.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Uv(this,"tick"),this.ga&&(Xv(this),this.start()))}},xg.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},xg.N=function(){Yv.$.N.call(this),Xv(this),delete this.g};class ty extends Bg{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ey(this)}N(){super.N(),this.g&&(Pg.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ny(e){Bg.call(this),this.h=e,this.g={}}zg(ny,Bg);var ry=[];function iy(e,t,n,r){Array.isArray(n)||(n&&(ry[0]=n.toString()),n=ry);for(var i=0;i<n.length;i++){var s=Cv(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function sy(e){yv(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Rv(e)}),e),e.g={}}function oy(){this.g=!0}function ay(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Vv(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}ny.prototype.N=function(){ny.$.N.call(this),sy(this)},ny.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},oy.prototype.Ea=function(){this.g=!1},oy.prototype.info=function(){};var cy={},ly=null;function uy(){return ly=ly||new Fv}function hy(e){Hg.call(this,cy.Ta,e)}function dy(e){const t=uy();Uv(t,new hy(t))}function fy(e,t){Hg.call(this,cy.STAT_EVENT,e),this.stat=t}function py(e){const t=uy();Uv(t,new fy(t,e))}function my(e,t){Hg.call(this,cy.Ua,e),this.size=t}function gy(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Pg.setTimeout((function(){e()}),t)}cy.Ta="serverreachability",zg(hy,Hg),cy.STAT_EVENT="statevent",zg(fy,Hg),cy.Ua="timingevent",zg(my,Hg);var vy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},yy={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wy(){}function by(e){return e.h||(e.h=e.i())}function _y(){}wy.prototype.h=null;var Ey,Iy={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ty(){Hg.call(this,"d")}function Sy(){Hg.call(this,"c")}function ky(){}function Cy(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ny(this),this.P=Ny,e=rv?125:void 0,this.V=new Yv(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new xy}function xy(){this.i=null,this.g="",this.h=!1}zg(Ty,Hg),zg(Sy,Hg),zg(ky,wy),ky.prototype.g=function(){return new XMLHttpRequest},ky.prototype.i=function(){return{}},Ey=new ky;var Ny=45e3,Ay={},Ry={};function Py(e,t,n){e.L=1,e.A=Yy(Hy(t)),e.u=n,e.S=!0,Dy(e,null)}function Dy(e,t){e.G=Date.now(),Fy(e),e.B=Hy(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),uw(n.i,"t",r),e.o=0,n=e.l.J,e.h=new xy,e.g=hb(e.l,n?t:null,!e.u),0<e.O&&(e.M=new ty(jg(e.Pa,e,e.g),e.O)),iy(e.U,e.g,"readystatechange",e.nb),t=e.I?wv(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),dy(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Oy(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Ly(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=My(e,n),r==Ry){4==t&&(e.s=4,py(14),i=!1),ay(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ay){e.s=4,py(15),ay(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ay(e.j,e.m,r,null),By(e,r)}Oy(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,py(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),rb(t),t.M=!0,py(11))):(ay(e.j,e.m,n,"[Invalid Chunked Response]"),zy(e),Vy(e))}function My(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Ry:(n=Number(t.substring(n,r)),isNaN(n)?Ay:(r+=1)+n>t.length?Ry:(t=t.slice(r,r+n),e.o=r+n,t))}function Fy(e){e.Y=Date.now()+e.P,Uy(e,e.P)}function Uy(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=gy(jg(e.lb,e),t)}function jy(e){e.C&&(Pg.clearTimeout(e.C),e.C=null)}function Vy(e){0==e.l.H||e.J||ob(e.l,e)}function zy(e){jy(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Xv(e.V),sy(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function By(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||vw(n.i,e)))if(!e.K&&vw(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;sb(n),Jw(n)}nb(n),py(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=gy(jg(n.ib,n),6e3));if(1>=gw(n.i)&&n.oa){try{n.oa()}catch(l){}n.oa=void 0}}else cb(n,11)}else if((e.K||n.g==e)&&sb(n),!Qg(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(yw(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,$y(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=ub(r,r.J?r.pa:null,r.Y),o.K){ww(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(jy(a),Fy(a)),r.g=o}else tb(r);0<n.j.length&&Yw(n)}else"stop"!=l[0]&&"close"!=l[0]||cb(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?cb(n,7):Qw(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}dy()}catch(l){}}function qy(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Dg(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Dg(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Dg(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(xg=Cy.prototype).setTimeout=function(e){this.P=e},xg.nb=function(e){e=e.target;const t=this.M;t&&3==Bw(e)?t.l():this.Pa(e)},xg.Pa=function(e){try{if(e==this.g)e:{const u=Bw(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||rv||this.g&&(this.h.h||this.g.ja()||qw(this.g)))){this.J||4!=u||7==t||dy(),jy(this);var n=this.g.da();this.ca=n;t:if(Oy(this)){var r=qw(this.g);e="";var i=r.length,s=4==Bw(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){zy(this),Vy(this);var o="";break t}this.h.i=new Pg.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qg(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,py(12),zy(this),Vy(this);break e}ay(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,By(this,n)}this.S?(Ly(this,u,o),rv&&this.i&&3==u&&(iy(this.U,this.V,"tick",this.mb),this.V.start())):(ay(this.j,this.m,o,null),By(this,o)),4==u&&zy(this),this.i&&!this.J&&(4==u?ob(this.l,this):(this.i=!1,Fy(this)))}else(function(e){const t={};e=(e.g&&2<=Bw(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Qg(e[r]))continue;var n=Kv(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,py(12)):(this.s=0,py(13)),zy(this),Vy(this)}}}catch(u){}},xg.mb=function(){if(this.g){var e=Bw(this.g),t=this.g.ja();this.o<t.length&&(jy(this),Ly(this,e,t),this.i&&4!=e&&Fy(this))}},xg.cancel=function(){this.J=!0,zy(this)},xg.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(dy(),py(17)),zy(this),this.s=2,Vy(this)):Uy(this,this.Y-e)};var Ky=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gy(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Gy){this.h=e.h,Wy(this,e.j),this.s=e.s,this.g=e.g,Qy(this,e.m),this.l=e.l;var t=e.i,n=new ow;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Jy(this,n),this.o=e.o}else e&&(t=String(e).match(Ky))?(this.h=!1,Wy(this,t[1]||"",!0),this.s=Xy(t[2]||""),this.g=Xy(t[3]||"",!0),Qy(this,t[4]),this.l=Xy(t[5]||"",!0),Jy(this,t[6]||"",!0),this.o=Xy(t[7]||"")):(this.h=!1,this.i=new ow(null,this.h))}function Hy(e){return new Gy(e)}function Wy(e,t,n){e.j=n?Xy(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Qy(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Jy(e,t,n){t instanceof ow?(e.i=t,function(e,t){t&&!e.j&&(aw(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(cw(this,t),uw(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Zy(t,iw)),e.i=new ow(t,e.h))}function $y(e,t,n){e.i.set(t,n)}function Yy(e){return $y(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Xy(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Zy(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ew),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ew(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Gy.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Zy(t,tw,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Zy(t,tw,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Zy(n,"/"==n.charAt(0)?rw:nw,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Zy(n,sw)),e.join("")};var tw=/[#\/\?@]/g,nw=/[#\?:]/g,rw=/[#\?]/g,iw=/[#\?@]/g,sw=/#/g;function ow(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function aw(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function cw(e,t){aw(e),t=hw(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function lw(e,t){return aw(e),t=hw(e,t),e.g.has(t)}function uw(e,t,n){cw(e,t),0<n.length&&(e.i=null,e.g.set(hw(e,t),Kg(n)),e.h+=n.length)}function hw(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(xg=ow.prototype).add=function(e,t){aw(this),this.i=null,e=hw(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},xg.forEach=function(e,t){aw(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},xg.ta=function(){aw(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},xg.Z=function(e){aw(this);let t=[];if("string"===typeof e)lw(this,e)&&(t=t.concat(this.g.get(hw(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},xg.set=function(e,t){return aw(this),this.i=null,lw(this,e=hw(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},xg.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},xg.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var dw=class{constructor(e,t){this.g=e,this.map=t}};function fw(e){this.l=e||pw,Pg.PerformanceNavigationTiming?e=0<(e=Pg.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Pg.g&&Pg.g.Ka&&Pg.g.Ka()&&Pg.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pw=10;function mw(e){return!!e.h||!!e.g&&e.g.size>=e.j}function gw(e){return e.h?1:e.g?e.g.size:0}function vw(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function yw(e,t){e.g?e.g.add(t):e.h=t}function ww(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function bw(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Kg(e.i)}fw.prototype.cancel=function(){if(this.i=bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var _w,Ew=class{stringify(e){return Pg.JSON.stringify(e,void 0)}parse(e){return Pg.JSON.parse(e,void 0)}};function Iw(){this.g=new Ew}function Tw(e,t,n){const r=n||"";try{qy(e,(function(e,n){let i=e;Og(e)&&(i=Vv(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(kU){throw t.push(r+"type="+encodeURIComponent("_badmap")),kU}}function Sw(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function kw(e){this.l=e.ec||null,this.j=e.ob||!1}function Cw(e,t){Fv.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=xw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zg(kw,wy),kw.prototype.g=function(){return new Cw(this.l,this.j)},kw.prototype.i=(_w={},function(){return _w}),zg(Cw,Fv);var xw=0;function Nw(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Aw(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Rw(e)}function Rw(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(xg=Cw.prototype).open=function(e,t){if(this.readyState!=xw)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Rw(this)},xg.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Pg).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},xg.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Aw(this)),this.readyState=xw},xg.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rw(this)),this.g&&(this.readyState=3,Rw(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Pg.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Nw(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},xg.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Aw(this):Rw(this),3==this.readyState&&Nw(this)}},xg.Za=function(e){this.g&&(this.response=this.responseText=e,Aw(this))},xg.Ya=function(e){this.g&&(this.response=e,Aw(this))},xg.ka=function(){this.g&&Aw(this)},xg.setRequestHeader=function(e,t){this.v.append(e,t)},xg.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},xg.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Cw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Pw=Pg.JSON.parse;function Dw(e){Fv.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ow,this.L=this.M=!1}zg(Dw,Fv);var Ow="",Lw=/^https?$/i,Mw=["POST","PUT"];function Fw(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Uw(e),Vw(e)}function Uw(e){e.F||(e.F=!0,Uv(e,"complete"),Uv(e,"error"))}function jw(e){if(e.h&&"undefined"!=typeof Rg&&(!e.C[1]||4!=Bw(e)||2!=e.da()))if(e.v&&4==Bw(e))Zv(e.La,0,e);else if(Uv(e,"readystatechange"),4==Bw(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Ky)[1]||null;!i&&Pg.self&&Pg.self.location&&(i=Pg.self.location.protocol.slice(0,-1)),r=!Lw.test(i?i.toLowerCase():"")}n=r}if(n)Uv(e,"complete"),Uv(e,"success");else{e.m=6;try{var s=2<Bw(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Uw(e)}}finally{Vw(e)}}}function Vw(e,t){if(e.g){zw(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Uv(e,"ready");try{n.onreadystatechange=r}catch(kU){}}}function zw(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Pg.clearTimeout(e.A),e.A=null)}function Bw(e){return e.g?e.g.readyState:0}function qw(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ow:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch($b){return null}}function Kw(e){let t="";return yv(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Gw(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Kw(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):$y(e,t,n))}function Hw(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ww(e){this.Ga=0,this.j=[],this.l=new oy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Hw("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Hw("baseRetryDelayMs",5e3,e),this.hb=Hw("retryDelaySeedMs",1e4,e),this.eb=Hw("forwardChannelMaxRetries",2,e),this.xa=Hw("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new fw(e&&e.concurrentRequestLimit),this.Ja=new Iw,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Qw(e){if($w(e),3==e.H){var t=e.W++,n=Hy(e.I);if($y(n,"SID",e.K),$y(n,"RID",t),$y(n,"TYPE","terminate"),Zw(e,n),(t=new Cy(e,e.l,t)).L=2,t.A=Yy(Hy(n)),n=!1,Pg.navigator&&Pg.navigator.sendBeacon)try{n=Pg.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Pg.Image&&((new Image).src=t.A,n=!0),n||(t.g=hb(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Fy(t)}lb(e)}function Jw(e){e.g&&(rb(e),e.g.cancel(),e.g=null)}function $w(e){Jw(e),e.u&&(Pg.clearTimeout(e.u),e.u=null),sb(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Pg.clearTimeout(e.m),e.m=null)}function Yw(e){if(!mw(e.i)&&!e.m){e.m=!0;var t=e.Na;Hv||Jv(),Wv||(Hv(),Wv=!0),Qv.add(t,e),e.C=0}}function Xw(e,t){var n;n=t?t.m:e.W++;const r=Hy(e.I);$y(r,"SID",e.K),$y(r,"RID",n),$y(r,"AID",e.V),Zw(e,r),e.o&&e.s&&Gw(r,e.o,e.s),n=new Cy(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=eb(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),yw(e.i,n),Py(n,r,t)}function Zw(e,t){e.na&&yv(e.na,(function(e,n){$y(t,n,e)})),e.h&&qy({},(function(e,n){$y(t,n,e)}))}function eb(e,t,n){n=Math.min(e.j.length,n);var r=e.h?jg(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Tw(a,e,"req"+n+"_")}catch(fE){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function tb(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Hv||Jv(),Wv||(Hv(),Wv=!0),Qv.add(t,e),e.A=0}}function nb(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=gy(jg(e.Ma,e),ab(e,e.A)),e.A++,!0)}function rb(e){null!=e.B&&(Pg.clearTimeout(e.B),e.B=null)}function ib(e){e.g=new Cy(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Hy(e.wa);$y(t,"RID","rpc"),$y(t,"SID",e.K),$y(t,"AID",e.V),$y(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&$y(t,"TO",e.qa),$y(t,"TYPE","xmlhttp"),Zw(e,t),e.o&&e.s&&Gw(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Yy(Hy(t)),n.u=null,n.S=!0,Dy(n,e)}function sb(e){null!=e.v&&(Pg.clearTimeout(e.v),e.v=null)}function ob(e,t){var n=null;if(e.g==t){sb(e),rb(e),e.g=null;var r=2}else{if(!vw(e.i,t))return;n=t.F,ww(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Uv(r=uy(),new my(r,n)),Yw(e)}else tb(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(gw(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=gy(jg(e.Na,e,t),ab(e,e.C)),e.C++,!0))}(e,t)||2==r&&nb(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:cb(e,5);break;case 4:cb(e,10);break;case 3:cb(e,6);break;default:cb(e,2)}}function ab(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function cb(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=jg(e.pb,e);n||(n=new Gy("//www.google.com/images/cleardot.gif"),Pg.location&&"http"==Pg.location.protocol||Wy(n,"https"),Yy(n)),function(e,t){const n=new oy;if(Pg.Image){const r=new Image;r.onload=Vg(Sw,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Vg(Sw,n,r,"TestLoadImage: error",!1,t),r.onabort=Vg(Sw,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Vg(Sw,n,r,"TestLoadImage: timeout",!1,t),Pg.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else py(2);e.H=0,e.h&&e.h.za(t),lb(e),$w(e)}function lb(e){if(e.H=0,e.ma=[],e.h){const t=bw(e.i);0==t.length&&0==e.j.length||(Gg(e.ma,t),Gg(e.ma,e.j),e.i.i.length=0,Kg(e.j),e.j.length=0),e.h.ya()}}function ub(e,t,n){var r=n instanceof Gy?Hy(n):new Gy(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Qy(r,r.m);else{var i=Pg.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Gy(null);r&&Wy(s,r),t&&(s.g=t),i&&Qy(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&$y(r,n,t),$y(r,"VER",e.ra),Zw(e,r),r}function hb(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Dw(new kw({ob:n})):new Dw(e.va)).Oa(e.J),t}function db(){}function fb(){if(tv&&!(10<=Number(hv)))throw Error("Environmental error: no available transport.")}function pb(e,t){Fv.call(this),this.g=new Ww(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Qg(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Qg(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vb(this)}function mb(e){Ty.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gb(){Sy.call(this),this.status=1}function vb(e){this.g=e}function yb(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function wb(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function bb(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(xg=Dw.prototype).Oa=function(e){this.M=e},xg.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ey.g(),this.C=this.u?by(this.u):by(Ey),this.g.onreadystatechange=jg(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Fw(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Pg.FormData&&e instanceof Pg.FormData,!(0<=qg(Mw,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{zw(this),0<this.B&&((this.L=function(e){return tv&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jg(this.ua,this)):this.A=Zv(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Fw(this,s)}},xg.ua=function(){"undefined"!=typeof Rg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Uv(this,"timeout"),this.abort(8))},xg.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Uv(this,"complete"),Uv(this,"abort"),Vw(this))},xg.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vw(this,!0)),Dw.$.N.call(this)},xg.La=function(){this.s||(this.G||this.v||this.l?jw(this):this.kb())},xg.kb=function(){jw(this)},xg.isActive=function(){return!!this.g},xg.da=function(){try{return 2<Bw(this)?this.g.status:-1}catch(_w){return-1}},xg.ja=function(){try{return this.g?this.g.responseText:""}catch(_w){return""}},xg.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Pw(t)}},xg.Ia=function(){return this.m},xg.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(xg=Ww.prototype).ra=8,xg.H=1,xg.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Cy(this,this.l,e);let s=this.s;if(this.U&&(s?(s=wv(s),_v(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=eb(this,i,t),$y(n=Hy(this.I),"RID",e),$y(n,"CVER",22),this.F&&$y(n,"X-HTTP-Session-Id",this.F),Zw(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Kw(s)))+"&"+t:this.o&&Gw(n,this.o,s)),yw(this.i,i),this.bb&&$y(n,"TYPE","init"),this.P?($y(n,"$req",t),$y(n,"SID","null"),i.aa=!0,Py(i,n,null)):Py(i,n,t),this.H=2}}else 3==this.H&&(e?Xw(this,e):0==this.j.length||mw(this.i)||Xw(this))},xg.Ma=function(){if(this.u=null,ib(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=gy(jg(this.jb,this),e)}},xg.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,py(10),Jw(this),ib(this))},xg.ib=function(){null!=this.v&&(this.v=null,Jw(this),nb(this),py(19))},xg.pb=function(e){e?(this.l.info("Successfully pinged google.com"),py(2)):(this.l.info("Failed to ping google.com"),py(1))},xg.isActive=function(){return!!this.h&&this.h.isActive(this)},(xg=db.prototype).Ba=function(){},xg.Aa=function(){},xg.za=function(){},xg.ya=function(){},xg.isActive=function(){return!0},xg.Va=function(){},fb.prototype.g=function(e,t){return new pb(e,t)},zg(pb,Fv),pb.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;py(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ub(e,null,e.Y),Yw(e)},pb.prototype.close=function(){Qw(this.g)},pb.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Vv(e),e=n);t.j.push(new dw(t.fb++,e)),3==t.H&&Yw(t)},pb.prototype.N=function(){this.g.h=null,delete this.j,Qw(this.g),delete this.g,pb.$.N.call(this)},zg(mb,Ty),zg(gb,Sy),zg(vb,db),vb.prototype.Ba=function(){Uv(this.g,"a")},vb.prototype.Aa=function(e){Uv(this.g,new mb(e))},vb.prototype.za=function(e){Uv(this.g,new gb)},vb.prototype.ya=function(){Uv(this.g,"b")},zg(yb,(function(){this.blockSize=-1})),yb.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},yb.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)wb(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){wb(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){wb(this,r),i=0;break}}this.h=i,this.i+=t},yb.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var _b={};function Eb(e){return-128<=e&&128>e?function(e,t){var n=_b;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new bb([0|e],0>e?-1:0)})):new bb([0|e],0>e?-1:0)}function Ib(e){if(isNaN(e)||!isFinite(e))return Sb;if(0>e)return Ab(Ib(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Tb;return new bb(t,0)}var Tb=4294967296,Sb=Eb(0),kb=Eb(1),Cb=Eb(16777216);function xb(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Nb(e){return-1==e.h}function Ab(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new bb(n,~e.h).add(kb)}function Rb(e,t){return e.add(Ab(t))}function Pb(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Db(e,t){this.g=e,this.h=t}function Ob(e,t){if(xb(t))throw Error("division by zero");if(xb(e))return new Db(Sb,Sb);if(Nb(e))return t=Ob(Ab(e),t),new Db(Ab(t.g),Ab(t.h));if(Nb(t))return t=Ob(e,Ab(t)),new Db(Ab(t.g),t.h);if(30<e.g.length){if(Nb(e)||Nb(t))throw Error("slowDivide_ only works with positive integers.");for(var n=kb,r=t;0>=r.X(e);)n=Lb(n),r=Lb(r);var i=Mb(n,1),s=Mb(r,1);for(r=Mb(r,2),n=Mb(n,2);!xb(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Mb(r,1),n=Mb(n,1)}return t=Rb(e,i.R(t)),new Db(i,t)}for(i=Sb;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Ib(n)).R(t);Nb(o)||0<o.X(e);)o=(s=Ib(n-=r)).R(t);xb(s)&&(s=kb),i=i.add(s),e=Rb(e,o)}return new Db(i,e)}function Lb(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new bb(n,e.h)}function Mb(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new bb(i,e.h)}(xg=bb.prototype).ea=function(){if(Nb(this))return-Ab(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Tb+r)*t,t*=Tb}return e},xg.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(xb(this))return"0";if(Nb(this))return"-"+Ab(this).toString(e);for(var t=Ib(Math.pow(e,6)),n=this,r="";;){var i=Ob(n,t).g,s=((0<(n=Rb(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(xb(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},xg.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},xg.X=function(e){return Nb(e=Rb(this,e))?-1:xb(e)?0:1},xg.abs=function(){return Nb(this)?Ab(this):this},xg.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new bb(n,-2147483648&n[n.length-1]?-1:0)},xg.R=function(e){if(xb(this)||xb(e))return Sb;if(Nb(this))return Nb(e)?Ab(this).R(Ab(e)):Ab(Ab(this).R(e));if(Nb(e))return Ab(this.R(Ab(e)));if(0>this.X(Cb)&&0>e.X(Cb))return Ib(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,Pb(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Pb(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Pb(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Pb(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new bb(n,0)},xg.gb=function(e){return Ob(this,e).h},xg.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new bb(n,this.h&e.h)},xg.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new bb(n,this.h|e.h)},xg.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new bb(n,this.h^e.h)},fb.prototype.createWebChannel=fb.prototype.g,pb.prototype.send=pb.prototype.u,pb.prototype.open=pb.prototype.m,pb.prototype.close=pb.prototype.close,vy.NO_ERROR=0,vy.TIMEOUT=8,vy.HTTP_ERROR=6,yy.COMPLETE="complete",_y.EventType=Iy,Iy.OPEN="a",Iy.CLOSE="b",Iy.ERROR="c",Iy.MESSAGE="d",Fv.prototype.listen=Fv.prototype.O,Dw.prototype.listenOnce=Dw.prototype.P,Dw.prototype.getLastError=Dw.prototype.Sa,Dw.prototype.getLastErrorCode=Dw.prototype.Ia,Dw.prototype.getStatus=Dw.prototype.da,Dw.prototype.getResponseJson=Dw.prototype.Wa,Dw.prototype.getResponseText=Dw.prototype.ja,Dw.prototype.send=Dw.prototype.ha,Dw.prototype.setWithCredentials=Dw.prototype.Oa,yb.prototype.digest=yb.prototype.l,yb.prototype.reset=yb.prototype.reset,yb.prototype.update=yb.prototype.j,bb.prototype.add=bb.prototype.add,bb.prototype.multiply=bb.prototype.R,bb.prototype.modulo=bb.prototype.gb,bb.prototype.compare=bb.prototype.X,bb.prototype.toNumber=bb.prototype.ea,bb.prototype.toString=bb.prototype.toString,bb.prototype.getBits=bb.prototype.D,bb.fromNumber=Ib,bb.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ab(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ib(Math.pow(n,8)),i=Sb,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Ib(Math.pow(n,o)),i=i.R(o).add(Ib(a))):i=(i=i.R(r)).add(Ib(a))}return i};var Fb=Ag.createWebChannelTransport=function(){return new fb},Ub=Ag.getStatEventTarget=function(){return uy()},jb=Ag.ErrorCode=vy,Vb=Ag.EventType=yy,zb=Ag.Event=cy,Bb=Ag.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},qb=Ag.FetchXmlHttpFactory=kw,Kb=Ag.WebChannel=_y,Gb=Ag.XhrIo=Dw,Hb=Ag.Md5=yb,Wb=Ag.Integer=bb;const Qb="@firebase/firestore";class Jb{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jb.UNAUTHENTICATED=new Jb(null),Jb.GOOGLE_CREDENTIALS=new Jb("google-credentials-uid"),Jb.FIRST_PARTY=new Jb("first-party-uid"),Jb.MOCK_USER=new Jb("mock-user");let $b="10.11.1";const Yb=new jl("@firebase/firestore");function Xb(){return Yb.logLevel}function Zb(e){if(Yb.logLevel<=Ol.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(n_);Yb.debug("Firestore (".concat($b,"): ").concat(e),...i)}}function e_(e){if(Yb.logLevel<=Ol.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(n_);Yb.error("Firestore (".concat($b,"): ").concat(e),...i)}}function t_(e){if(Yb.logLevel<=Ol.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(n_);Yb.warn("Firestore (".concat($b,"): ").concat(e),...i)}}function n_(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function r_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat($b,") INTERNAL ASSERTION FAILED: ")+e;throw e_(t),new Error(t)}function i_(e,t){e||r_()}function s_(e,t){return e}const o_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class a_ extends gl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class c_{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class l_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class u_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Jb.UNAUTHENTICATED)))}shutdown(){}}class h_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class d_{constructor(e){this.t=e,this.currentUser=Jb.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new c_;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new c_,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Zb("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Zb("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new c_)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Zb("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(i_("string"==typeof t.accessToken),new l_(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return i_(null===e||"string"==typeof e),new Jb(e)}}class f_{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Jb.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class p_{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new f_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Jb.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class m_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g_{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Zb("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Zb("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Zb("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Zb("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(i_("string"==typeof e.token),this.R=e.token,new m_(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function v_(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class y_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=v_(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function w_(e,t){return e<t?-1:e>t?1:0}function b_(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function __(e){return e+"\0"}class E_{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new a_(o_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new a_(o_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new a_(o_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new a_(o_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return E_.fromMillis(Date.now())}static fromDate(e){return E_.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new E_(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?w_(this.nanoseconds,e.nanoseconds):w_(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class I_{constructor(e){this.timestamp=e}static fromTimestamp(e){return new I_(e)}static min(){return new I_(new E_(0,0))}static max(){return new I_(new E_(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class T_{constructor(e,t,n){void 0===t?t=0:t>e.length&&r_(),void 0===n?n=e.length-t:n>e.length-t&&r_(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===T_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof T_?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class S_ extends T_{construct(e,t,n){return new S_(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new a_(o_.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new S_(e)}static emptyPath(){return new S_([])}}const k_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class C_ extends T_{construct(e,t,n){return new C_(e,t,n)}static isValidIdentifier(e){return k_.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),C_.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new C_(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new a_(o_.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new a_(o_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new a_(o_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new a_(o_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new C_(t)}static emptyPath(){return new C_([])}}class x_{constructor(e){this.path=e}static fromPath(e){return new x_(S_.fromString(e))}static fromName(e){return new x_(S_.fromString(e).popFirst(5))}static empty(){return new x_(S_.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===S_.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return S_.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new x_(new S_(e.slice()))}}class N_{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function A_(e){return e.fields.find((e=>2===e.kind))}function R_(e){return e.fields.filter((e=>2!==e.kind))}N_.UNKNOWN_ID=-1;class P_{constructor(e,t){this.fieldPath=e,this.kind=t}}class D_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new D_(0,M_.min())}}function O_(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=I_.fromTimestamp(1e9===r?new E_(n+1,0):new E_(n,r));return new M_(i,x_.empty(),t)}function L_(e){return new M_(e.readTime,e.key,-1)}class M_{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new M_(I_.min(),x_.empty(),-1)}static max(){return new M_(I_.max(),x_.empty(),-1)}}function F_(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=x_.comparator(e.documentKey,t.documentKey),0!==n?n:w_(e.largestBatchId,t.largestBatchId))}const U_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function V_(e){if(e.code!==o_.FAILED_PRECONDITION||e.message!==U_)throw e;Zb("LocalStore","Unexpectedly lost primary lease")}class z_{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&r_(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z_(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z_?t:z_.resolve(t)}catch(e){return z_.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z_.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z_.reject(t)}static resolve(e){return new z_(((t,n)=>{t(e)}))}static reject(e){return new z_(((t,n)=>{n(e)}))}static waitFor(e){return new z_(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=z_.resolve(!1);for(const n of e)t=t.next((e=>e?z_.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new z_(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new z_(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class B_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new c_,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new H_(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Y_(t.target.error);this.V.reject(new H_(e,n))}}static open(e,t,n,r){try{return new B_(t,e.transaction(r,n))}catch(e){throw new H_(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Zb("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Q_(t)}}class q_{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===q_.S(cl())&&e_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Zb("SimpleDb","Removing database:",e),J_(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ml())return!1;if(q_.C())return!0;const e=cl(),t=q_.S(e),n=0<t&&t<10,r=K_(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Zb("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new H_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new a_(o_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new a_(o_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new H_(e,r))},r.onupgradeneeded=e=>{Zb("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Zb("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=B_.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),z_.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Zb("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function K_(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class G_{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return J_(this.B.delete())}}class H_ extends a_{constructor(e,t){super(o_.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function W_(e){return"IndexedDbTransactionError"===e.name}class Q_{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Zb("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Zb("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),J_(n)}add(e){return Zb("SimpleDb","ADD",this.store.name,e,e),J_(this.store.add(e))}get(e){return J_(this.store.get(e)).next((t=>(void 0===t&&(t=null),Zb("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Zb("SimpleDb","DELETE",this.store.name,e),J_(this.store.delete(e))}count(){return Zb("SimpleDb","COUNT",this.store.name),J_(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new z_(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new z_(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){Zb("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new z_(((n,r)=>{t.onerror=e=>{const t=Y_(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new z_(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new G_(i),o=t(i.primaryKey,i.value,s);if(o instanceof z_){const e=o.catch((e=>(s.done(),z_.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>z_.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function J_(e){return new z_(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Y_(e.target.error);n(t)}}))}let $_=!1;function Y_(e){const t=q_.S(cl());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new a_("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return $_||($_=!0,setTimeout((()=>{throw e}),0)),e}}return e}class X_{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){Zb("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Zb("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){W_(e)?Zb("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await V_(e)}await this.X(6e4)}))}}class Z_{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return z_.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Zb("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(Zb("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=L_(t);F_(r,n)>0&&(n=r)})),new M_(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class eE{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function tE(e){return null==e}function nE(e){return 0===e&&1/e==-1/0}function rE(e){return"number"==typeof e&&Number.isInteger(e)&&!nE(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function iE(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=oE(t)),t=sE(e.get(n),t);return oE(t)}function sE(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function oE(e){return e+"\x01\x01"}function aE(e){const t=e.length;if(i_(t>=2),2===t)return i_("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),S_.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&r_(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:r_()}s=t+2}return new S_(r)}eE.oe=-1;const cE=["userId","batchId"];function lE(e,t){return[e,iE(t)]}function uE(e,t,n){return[e,iE(t),n]}const hE={},dE=["prefixPath","collectionGroup","readTime","documentId"],fE=["prefixPath","collectionGroup","documentId"],pE=["collectionGroup","readTime","prefixPath","documentId"],mE=["canonicalId","targetId"],gE=["targetId","path"],vE=["path","targetId"],yE=["collectionId","parent"],wE=["indexId","uid"],bE=["uid","sequenceNumber"],_E=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EE=["indexId","uid","orderedDocumentKey"],IE=["userId","collectionPath","documentId"],TE=["userId","collectionPath","largestBatchId"],SE=["userId","collectionGroup","largestBatchId"],kE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CE=[...kE,"documentOverlays"],xE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],NE=xE,AE=[...NE,"indexConfiguration","indexState","indexEntries"],RE=AE;class PE extends j_{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function DE(e,t){const n=s_(e);return q_.F(n._e,t)}function OE(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function LE(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ME(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class FE{constructor(e,t){this.comparator=e,this.root=t||jE.EMPTY}insert(e,t){return new FE(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jE.BLACK,null,null))}remove(e){return new FE(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jE.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new UE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new UE(this.root,e,this.comparator,!1)}getReverseIterator(){return new UE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new UE(this.root,e,this.comparator,!0)}}class UE{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jE{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:jE.RED,this.left=null!=r?r:jE.EMPTY,this.right=null!=i?i:jE.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new jE(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jE.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return jE.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jE.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jE.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw r_();if(this.right.isRed())throw r_();const e=this.left.check();if(e!==this.right.check())throw r_();return e+(this.isRed()?0:1)}}jE.EMPTY=null,jE.RED=!0,jE.BLACK=!1,jE.EMPTY=new class{constructor(){this.size=0}get key(){throw r_()}get value(){throw r_()}get color(){throw r_()}get left(){throw r_()}get right(){throw r_()}copy(e,t,n,r,i){return this}insert(e,t,n){return new jE(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class VE{constructor(e){this.comparator=e,this.data=new FE(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zE(this.data.getIterator())}getIteratorFrom(e){return new zE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof VE))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new VE(this.comparator);return t.data=e,t}}class zE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function BE(e){return e.hasNext()?e.getNext():void 0}class qE{constructor(e){this.fields=e,e.sort(C_.comparator)}static empty(){return new qE([])}unionWith(e){let t=new VE(C_.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new qE(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return b_(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class KE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class GE{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new KE("Invalid base64 string: "+e):e}}(e);return new GE(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new GE(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return w_(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}GE.EMPTY_BYTE_STRING=new GE("");const HE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function WE(e){if(i_(!!e),"string"==typeof e){let t=0;const n=HE.exec(e);if(i_(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:QE(e.seconds),nanos:QE(e.nanos)}}function QE(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function JE(e){return"string"==typeof e?GE.fromBase64String(e):GE.fromUint8Array(e)}function $E(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function YE(e){const t=e.mapValue.fields.__previous_value__;return $E(t)?YE(t):t}function XE(e){const t=WE(e.mapValue.fields.__local_write_time__.timestampValue);return new E_(t.seconds,t.nanos)}class ZE{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class eI{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new eI("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof eI&&e.projectId===this.projectId&&e.database===this.database}}const tI={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nI={nullValue:"NULL_VALUE"};function rI(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?$E(e)?4:vI(e)?9007199254740991:10:r_()}function iI(e,t){if(e===t)return!0;const n=rI(e);if(n!==rI(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return XE(e).isEqual(XE(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=WE(e.timestampValue),r=WE(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return JE(e.bytesValue).isEqual(JE(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return QE(e.geoPointValue.latitude)===QE(t.geoPointValue.latitude)&&QE(e.geoPointValue.longitude)===QE(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return QE(e.integerValue)===QE(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=QE(e.doubleValue),r=QE(t.doubleValue);return n===r?nE(n)===nE(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return b_(e.arrayValue.values||[],t.arrayValue.values||[],iI);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(OE(n)!==OE(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!iI(n[i],r[i])))return!1;return!0}(e,t);default:return r_()}}function sI(e,t){return void 0!==(e.values||[]).find((e=>iI(e,t)))}function oI(e,t){if(e===t)return 0;const n=rI(e),r=rI(t);if(n!==r)return w_(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return w_(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=QE(e.integerValue||e.doubleValue),r=QE(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return aI(e.timestampValue,t.timestampValue);case 4:return aI(XE(e),XE(t));case 5:return w_(e.stringValue,t.stringValue);case 6:return function(e,t){const n=JE(e),r=JE(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=w_(n[i],r[i]);if(0!==e)return e}return w_(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=w_(QE(e.latitude),QE(t.latitude));return 0!==n?n:w_(QE(e.longitude),QE(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=oI(n[i],r[i]);if(e)return e}return w_(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===tI.mapValue&&t===tI.mapValue)return 0;if(e===tI.mapValue)return 1;if(t===tI.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=w_(r[o],s[o]);if(0!==e)return e;const t=oI(n[r[o]],i[s[o]]);if(0!==t)return t}return w_(r.length,s.length)}(e.mapValue,t.mapValue);default:throw r_()}}function aI(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return w_(e,t);const n=WE(e),r=WE(t),i=w_(n.seconds,r.seconds);return 0!==i?i:w_(n.nanos,r.nanos)}function cI(e){return lI(e)}function lI(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=WE(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return JE(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return x_.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=lI(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(lI(e.fields[i]));return n+"}"}(e.mapValue):r_()}function uI(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function hI(e){return!!e&&"integerValue"in e}function dI(e){return!!e&&"arrayValue"in e}function fI(e){return!!e&&"nullValue"in e}function pI(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function mI(e){return!!e&&"mapValue"in e}function gI(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return LE(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=gI(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gI(e.arrayValue.values[n]);return t}return Object.assign({},e)}function vI(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function yI(e){return"nullValue"in e?nI:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?uI(eI.empty(),x_.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:r_()}function wI(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?uI(eI.empty(),x_.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?tI:r_()}function bI(e,t){const n=oI(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function _I(e,t){const n=oI(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class EI{constructor(e){this.value=e}static empty(){return new EI({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!mI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gI(t)}setAll(e){let t=C_.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=gI(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());mI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return iI(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];mI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){LE(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new EI(gI(this.value))}}function II(e){const t=[];return LE(e.fields,((e,n)=>{const r=new C_([e]);if(mI(n)){const e=II(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new qE(t)}class TI{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new TI(e,0,I_.min(),I_.min(),I_.min(),EI.empty(),0)}static newFoundDocument(e,t,n,r){return new TI(e,1,t,I_.min(),n,r,0)}static newNoDocument(e,t){return new TI(e,2,t,I_.min(),I_.min(),EI.empty(),0)}static newUnknownDocument(e,t){return new TI(e,3,t,I_.min(),I_.min(),EI.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(I_.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=EI.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=EI.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=I_.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof TI&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new TI(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class SI{constructor(e,t){this.position=e,this.inclusive=t}}function kI(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?x_.comparator(x_.fromName(o.referenceValue),n.key):oI(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function CI(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!iI(e.position[n],t.position[n]))return!1;return!0}class xI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function NI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class AI{}class RI extends AI{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new zI(e,t,n):"array-contains"===t?new GI(e,n):"in"===t?new HI(e,n):"not-in"===t?new WI(e,n):"array-contains-any"===t?new QI(e,n):new RI(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new BI(e,n):new qI(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(oI(t,this.value)):null!==t&&rI(this.value)===rI(t)&&this.matchesComparison(oI(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return r_()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class PI extends AI{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new PI(e,t)}matches(e){return DI(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function DI(e){return"and"===e.op}function OI(e){return"or"===e.op}function LI(e){return MI(e)&&DI(e)}function MI(e){for(const t of e.filters)if(t instanceof PI)return!1;return!0}function FI(e){if(e instanceof RI)return e.field.canonicalString()+e.op.toString()+cI(e.value);if(LI(e))return e.filters.map((e=>FI(e))).join(",");{const t=e.filters.map((e=>FI(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function UI(e,t){return e instanceof RI?function(e,t){return t instanceof RI&&e.op===t.op&&e.field.isEqual(t.field)&&iI(e.value,t.value)}(e,t):e instanceof PI?function(e,t){return t instanceof PI&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&UI(n,t.filters[r])),!0)}(e,t):void r_()}function jI(e,t){const n=e.filters.concat(t);return PI.create(n,e.op)}function VI(e){return e instanceof RI?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(cI(e.value))}(e):e instanceof PI?function(e){return e.op.toString()+" {"+e.getFilters().map(VI).join(" ,")+"}"}(e):"Filter"}class zI extends RI{constructor(e,t,n){super(e,t,n),this.key=x_.fromName(n.referenceValue)}matches(e){const t=x_.comparator(e.key,this.key);return this.matchesComparison(t)}}class BI extends RI{constructor(e,t){super(e,"in",t),this.keys=KI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class qI extends RI{constructor(e,t){super(e,"not-in",t),this.keys=KI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function KI(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>x_.fromName(e.referenceValue)))}class GI extends RI{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dI(t)&&sI(t.arrayValue,this.value)}}class HI extends RI{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sI(this.value.arrayValue,t)}}class WI extends RI{constructor(e,t){super(e,"not-in",t)}matches(e){if(sI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sI(this.value.arrayValue,t)}}class QI extends RI{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dI(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>sI(this.value.arrayValue,e)))}}class JI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function $I(e){return new JI(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function YI(e){const t=s_(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>FI(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),tE(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>cI(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>cI(e))).join(",")),t.ue=e}return t.ue}function XI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!NI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!UI(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!CI(e.startAt,t.startAt)&&CI(e.endAt,t.endAt)}function ZI(e){return x_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function eT(e,t){return e.filters.filter((e=>e instanceof RI&&e.field.isEqual(t)))}function tT(e,t,n){let r=nI,i=!0;for(const s of eT(e,t)){let e=nI,t=!0;switch(s.op){case"<":case"<=":e=yI(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=nI}bI({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];bI({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function nT(e,t,n){let r=tI,i=!0;for(const s of eT(e,t)){let e=tI,t=!0;switch(s.op){case">=":case">":e=wI(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=tI}_I({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];_I({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class rT{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function iT(e,t,n,r,i,s,o,a){return new rT(e,t,n,r,i,s,o,a)}function sT(e){return new rT(e)}function oT(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function aT(e){return null!==e.collectionGroup}function cT(e){const t=s_(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new VE(C_.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new xI(r,n))})),e.has(C_.keyField().canonicalString())||t.ce.push(new xI(C_.keyField(),n))}return t.ce}function lT(e){const t=s_(e);return t.le||(t.le=uT(t,cT(e))),t.le}function uT(e,t){if("F"===e.limitType)return $I(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new xI(e.field,t)}));const n=e.endAt?new SI(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new SI(e.startAt.position,e.startAt.inclusive):null;return $I(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function hT(e,t){const n=e.filters.concat([t]);return new rT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function dT(e,t,n){return new rT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fT(e,t){return XI(lT(e),lT(t))&&e.limitType===t.limitType}function pT(e){return"".concat(YI(lT(e)),"|lt:").concat(e.limitType)}function mT(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>VI(e))).join(", "),"]")),tE(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>cI(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>cI(e))).join(",")),"Target(".concat(t,")")}(lT(e)),"; limitType=").concat(e.limitType,")")}function gT(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):x_.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of cT(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=kI(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cT(e),t))&&!(e.endAt&&!function(e,t,n){const r=kI(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cT(e),t))}(e,t)}function vT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function yT(e){return(t,n)=>{let r=!1;for(const i of cT(e)){const e=wT(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function wT(e,t,n){const r=e.field.isKeyField()?x_.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?oI(r,i):r_()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return r_()}}class bT{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){LE(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ME(this.inner)}size(){return this.innerSize}}const _T=new FE(x_.comparator);function ET(){return _T}const IT=new FE(x_.comparator);function TT(){let e=IT;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ST(e){let t=IT;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function kT(){return xT()}function CT(){return xT()}function xT(){return new bT((e=>e.toString()),((e,t)=>e.isEqual(t)))}const NT=new FE(x_.comparator),AT=new VE(x_.comparator);function RT(){let e=AT;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const PT=new VE(w_);function DT(){return PT}function OT(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nE(t)?"-0":t}}function LT(e){return{integerValue:""+e}}function MT(e,t){return rE(t)?LT(t):OT(e,t)}class FT{constructor(){this._=void 0}}function UT(e,t,n){return e instanceof zT?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&$E(t)&&(t=YE(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof BT?qT(e,t):e instanceof KT?GT(e,t):function(e,t){const n=VT(e,t),r=WT(n)+WT(e.Pe);return hI(n)&&hI(e.Pe)?LT(r):OT(e.serializer,r)}(e,t)}function jT(e,t,n){return e instanceof BT?qT(e,t):e instanceof KT?GT(e,t):n}function VT(e,t){return e instanceof HT?function(e){return hI(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class zT extends FT{}class BT extends FT{constructor(e){super(),this.elements=e}}function qT(e,t){const n=QT(t);for(const r of e.elements)n.some((e=>iI(e,r)))||n.push(r);return{arrayValue:{values:n}}}class KT extends FT{constructor(e){super(),this.elements=e}}function GT(e,t){let n=QT(t);for(const r of e.elements)n=n.filter((e=>!iI(e,r)));return{arrayValue:{values:n}}}class HT extends FT{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function WT(e){return QE(e.integerValue||e.doubleValue)}function QT(e){return dI(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class JT{constructor(e,t){this.field=e,this.transform=t}}class $T{constructor(e,t){this.version=e,this.transformResults=t}}class YT{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new YT}static exists(e){return new YT(void 0,e)}static updateTime(e){return new YT(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function XT(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ZT{}function eS(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new uS(e.key,YT.none()):new sS(e.key,e.data,YT.none());{const n=e.data,r=EI.empty();let i=new VE(C_.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new oS(e.key,r,new qE(i.toArray()),YT.none())}}function tS(e,t,n){e instanceof sS?function(e,t,n){const r=e.value.clone(),i=cS(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof oS?function(e,t,n){if(!XT(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=cS(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(aS(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function nS(e,t,n,r){return e instanceof sS?function(e,t,n,r){if(!XT(e.precondition,t))return n;const i=e.value.clone(),s=lS(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof oS?function(e,t,n,r){if(!XT(e.precondition,t))return n;const i=lS(e.fieldTransforms,r,t),s=t.data;return s.setAll(aS(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return XT(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function rS(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=VT(r.transform,e||null);null!=i&&(null===n&&(n=EI.empty()),n.set(r.field,i))}return n||null}function iS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&b_(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof BT&&t instanceof BT||e instanceof KT&&t instanceof KT?b_(e.elements,t.elements,iI):e instanceof HT&&t instanceof HT?iI(e.Pe,t.Pe):e instanceof zT&&t instanceof zT}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class sS extends ZT{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class oS extends ZT{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function aS(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function cS(e,t,n){const r=new Map;i_(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,jT(o,a,n[i]))}return r}function lS(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,UT(e,s,t))}return r}class uS extends ZT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hS extends ZT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dS{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&tS(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=nS(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=nS(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=CT();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=eS(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(I_.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),RT())}isEqual(e){return this.batchId===e.batchId&&b_(this.mutations,e.mutations,((e,t)=>iS(e,t)))&&b_(this.baseMutations,e.baseMutations,((e,t)=>iS(e,t)))}}class fS{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){i_(e.mutations.length===n.length);let r=NT;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new fS(e,t,n,r)}}class pS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class mS{constructor(e,t){this.count=e,this.unchangedNames=t}}var gS,vS;function yS(e){switch(e){default:return r_();case o_.CANCELLED:case o_.UNKNOWN:case o_.DEADLINE_EXCEEDED:case o_.RESOURCE_EXHAUSTED:case o_.INTERNAL:case o_.UNAVAILABLE:case o_.UNAUTHENTICATED:return!1;case o_.INVALID_ARGUMENT:case o_.NOT_FOUND:case o_.ALREADY_EXISTS:case o_.PERMISSION_DENIED:case o_.FAILED_PRECONDITION:case o_.ABORTED:case o_.OUT_OF_RANGE:case o_.UNIMPLEMENTED:case o_.DATA_LOSS:return!0}}function wS(e){if(void 0===e)return e_("GRPC error has no .code"),o_.UNKNOWN;switch(e){case gS.OK:return o_.OK;case gS.CANCELLED:return o_.CANCELLED;case gS.UNKNOWN:return o_.UNKNOWN;case gS.DEADLINE_EXCEEDED:return o_.DEADLINE_EXCEEDED;case gS.RESOURCE_EXHAUSTED:return o_.RESOURCE_EXHAUSTED;case gS.INTERNAL:return o_.INTERNAL;case gS.UNAVAILABLE:return o_.UNAVAILABLE;case gS.UNAUTHENTICATED:return o_.UNAUTHENTICATED;case gS.INVALID_ARGUMENT:return o_.INVALID_ARGUMENT;case gS.NOT_FOUND:return o_.NOT_FOUND;case gS.ALREADY_EXISTS:return o_.ALREADY_EXISTS;case gS.PERMISSION_DENIED:return o_.PERMISSION_DENIED;case gS.FAILED_PRECONDITION:return o_.FAILED_PRECONDITION;case gS.ABORTED:return o_.ABORTED;case gS.OUT_OF_RANGE:return o_.OUT_OF_RANGE;case gS.UNIMPLEMENTED:return o_.UNIMPLEMENTED;case gS.DATA_LOSS:return o_.DATA_LOSS;default:return r_()}}(vS=gS||(gS={}))[vS.OK=0]="OK",vS[vS.CANCELLED=1]="CANCELLED",vS[vS.UNKNOWN=2]="UNKNOWN",vS[vS.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vS[vS.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vS[vS.NOT_FOUND=5]="NOT_FOUND",vS[vS.ALREADY_EXISTS=6]="ALREADY_EXISTS",vS[vS.PERMISSION_DENIED=7]="PERMISSION_DENIED",vS[vS.UNAUTHENTICATED=16]="UNAUTHENTICATED",vS[vS.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vS[vS.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vS[vS.ABORTED=10]="ABORTED",vS[vS.OUT_OF_RANGE=11]="OUT_OF_RANGE",vS[vS.UNIMPLEMENTED=12]="UNIMPLEMENTED",vS[vS.INTERNAL=13]="INTERNAL",vS[vS.UNAVAILABLE=14]="UNAVAILABLE",vS[vS.DATA_LOSS=15]="DATA_LOSS";let bS=null;function _S(){return new TextEncoder}const ES=new Wb([4294967295,4294967295],0);function IS(e){const t=_S().encode(e),n=new Hb;return n.update(t),new Uint8Array(n.digest())}function TS(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Wb([n,r],0),new Wb([i,s],0)]}class SS{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new kS("Invalid padding: ".concat(t));if(n<0)throw new kS("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new kS("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new kS("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Wb.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Wb.fromNumber(n)));return 1===r.compare(ES)&&(r=new Wb([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=IS(e),[n,r]=TS(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new SS(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=IS(e),[n,r]=TS(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class kS extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class CS{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,xS.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new CS(I_.min(),r,new FE(w_),ET(),RT())}}class xS{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xS(n,t,RT(),RT(),RT())}}class NS{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class AS{constructor(e,t){this.targetId=e,this.me=t}}class RS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GE.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class PS{constructor(){this.fe=0,this.ge=LS(),this.pe=GE.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=RT(),t=RT(),n=RT();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:r_()}})),new xS(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=LS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,i_(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DS{constructor(e){this.Le=e,this.Be=new Map,this.ke=ET(),this.qe=OS(),this.Qe=new FE(w_)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:r_()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(ZI(i))if(0===n){const e=new x_(i.path);this.Ue(t,e,TI.newNoDocument(e,I_.min()))}else i_(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==bS||bS.et(function(e,t,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=JE(n).toUint8Array()}catch(e){if(e instanceof KE)return t_("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new SS(s,r,i)}catch(e){return t_(e instanceof kS?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&ZI(i.target)){const t=new x_(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,TI.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=RT();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new CS(e,t,this.Qe,this.ke,n);return this.ke=ET(),this.qe=OS(),this.Qe=new FE(w_),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new PS,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new VE(w_),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Zb("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new PS),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function OS(){return new FE(x_.comparator)}function LS(){return new FE(x_.comparator)}const MS={asc:"ASCENDING",desc:"DESCENDING"},FS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},US={and:"AND",or:"OR"};class jS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function VS(e,t){return e.useProto3Json||tE(t)?t:{value:t}}function zS(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function BS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function qS(e,t){return zS(e,t.toTimestamp())}function KS(e){return i_(!!e),I_.fromTimestamp(function(e){const t=WE(e);return new E_(t.seconds,t.nanos)}(e))}function GS(e,t){return HS(e,t).canonicalString()}function HS(e,t){const n=function(e){return new S_(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function WS(e){const t=S_.fromString(e);return i_(mk(t)),t}function QS(e,t){return GS(e.databaseId,t.path)}function JS(e,t){const n=WS(t);if(n.get(1)!==e.databaseId.projectId)throw new a_(o_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new a_(o_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new x_(ZS(n))}function $S(e,t){return GS(e.databaseId,t)}function YS(e){const t=WS(e);return 4===t.length?S_.emptyPath():ZS(t)}function XS(e){return new S_(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ZS(e){return i_(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ek(e,t,n){return{name:QS(e,t),fields:n.value.mapValue.fields}}function tk(e,t,n){const r=JS(e,t.name),i=KS(t.updateTime),s=t.createTime?KS(t.createTime):I_.min(),o=new EI({mapValue:{fields:t.fields}}),a=TI.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function nk(e,t){let n;if(t instanceof sS)n={update:ek(e,t.key,t.value)};else if(t instanceof uS)n={delete:QS(e,t.key)};else if(t instanceof oS)n={update:ek(e,t.key,t.data),updateMask:pk(t.fieldMask)};else{if(!(t instanceof hS))return r_();n={verify:QS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof zT)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof BT)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof KT)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof HT)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw r_()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:qS(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:r_()}(e,t.precondition)),n}function rk(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?YT.updateTime(KS(e.updateTime)):void 0!==e.exists?YT.exists(e.exists):YT.none()}(t.currentDocument):YT.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)i_("REQUEST_TIME"===t.setToServerValue),n=new zT;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new BT(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new KT(e)}else"increment"in t?n=new HT(e,t.increment):r_();const r=C_.fromServerFormat(t.fieldPath);return new JT(r,n)}(e,t))):[];if(t.update){t.update.name;const i=JS(e,t.update.name),s=new EI({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new qE(t.map((e=>C_.fromServerFormat(e))))}(t.updateMask);return new oS(i,s,e,n,r)}return new sS(i,s,n,r)}if(t.delete){const r=JS(e,t.delete);return new uS(r,n)}if(t.verify){const r=JS(e,t.verify);return new hS(r,n)}return r_()}function ik(e,t){return{documents:[$S(e,t.path)]}}function sk(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$S(e,i);const s=function(e){if(0!==e.length)return fk(PI.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:hk(e.field),direction:ck(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=VS(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function ok(e){let t=YS(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){i_(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ak(e);return t instanceof PI&&LI(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new xI(dk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,tE(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new SI(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new SI(n,t)}(n.endAt)),iT(t,i,o,s,a,"F",c,l)}function ak(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=dk(e.unaryFilter.field);return RI.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=dk(e.unaryFilter.field);return RI.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dk(e.unaryFilter.field);return RI.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=dk(e.unaryFilter.field);return RI.create(i,"!=",{nullValue:"NULL_VALUE"});default:return r_()}}(e):void 0!==e.fieldFilter?function(e){return RI.create(dk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return r_()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return PI.create(e.compositeFilter.filters.map((e=>ak(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return r_()}}(e.compositeFilter.op))}(e):r_()}function ck(e){return MS[e]}function lk(e){return FS[e]}function uk(e){return US[e]}function hk(e){return{fieldPath:e.canonicalString()}}function dk(e){return C_.fromServerFormat(e.fieldPath)}function fk(e){return e instanceof RI?function(e){if("=="===e.op){if(pI(e.value))return{unaryFilter:{field:hk(e.field),op:"IS_NAN"}};if(fI(e.value))return{unaryFilter:{field:hk(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pI(e.value))return{unaryFilter:{field:hk(e.field),op:"IS_NOT_NAN"}};if(fI(e.value))return{unaryFilter:{field:hk(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hk(e.field),op:lk(e.op),value:e.value}}}(e):e instanceof PI?function(e){const t=e.getFilters().map((e=>fk(e)));return 1===t.length?t[0]:{compositeFilter:{op:uk(e.op),filters:t}}}(e):r_()}function pk(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function mk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class gk{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:I_.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:I_.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:GE.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new gk(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gk(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gk(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gk(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vk{constructor(e){this.ut=e}}function yk(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:wk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:QS(e,t.key),fields:t.data.value.mapValue.fields,updateTime:zS(e,t.version.toTimestamp()),createTime:zS(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bk(t.version)};else{if(!t.isUnknownDocument())return r_();r.unknownDocument={path:n.path.toArray(),version:bk(t.version)}}return r}function wk(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function bk(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function _k(e){const t=new E_(e.seconds,e.nanoseconds);return I_.fromTimestamp(t)}function Ek(e,t){const n=(t.baseMutations||[]).map((t=>rk(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>rk(e.ut,t))),i=E_.fromMillis(t.localWriteTimeMs);return new dS(t.batchId,i,n,r)}function Ik(e){const t=_k(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?_k(e.lastLimboFreeSnapshotVersion):I_.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return i_(1===e.documents.length),lT(sT(YS(e.documents[0])))}(e.query):function(e){return lT(ok(e))}(e.query),new gk(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,GE.fromBase64String(e.resumeToken))}function Tk(e,t){const n=bk(t.snapshotVersion),r=bk(t.lastLimboFreeSnapshotVersion);let i;i=ZI(t.target)?ik(e.ut,t.target):sk(e.ut,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:YI(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Sk(e){const t=ok({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?dT(t,t.limit,"L"):t}function kk(e,t){return new pS(t.largestBatchId,rk(e.ut,t.overlayMutation))}function Ck(e,t){const n=t.path.lastSegment();return[e,iE(t.path.popLast()),n]}function xk(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:bk(r.readTime),documentKey:iE(r.documentKey.path),largestBatchId:r.largestBatchId}}class Nk{getBundleMetadata(e,t){return Ak(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:_k(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Ak(e).put(function(e){return{bundleId:e.id,createTime:bk(KS(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Rk(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Sk(e.bundledQuery),readTime:_k(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Rk(e).put(function(e){return{name:e.name,readTime:bk(KS(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Ak(e){return DE(e,"bundles")}function Rk(e){return DE(e,"namedQueries")}class Pk{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new Pk(e,n)}getOverlay(e,t){return Dk(e).get(Ck(this.userId,t)).next((e=>e?kk(this.serializer,e):null))}getOverlays(e,t){const n=kT();return z_.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new pS(t,i);r.push(this.lt(e,s))})),z_.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(iE(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Dk(e).j("collectionPathOverlayIndex",r))})),z_.waitFor(i)}getOverlaysForCollection(e,t,n){const r=kT(),i=iE(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Dk(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=kk(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=kT();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dk(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=kk(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return Dk(e).put(function(e,t,n){const[r,i,s]=Ck(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:nk(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function Dk(e){return DE(e,"documentOverlays")}class Ok{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(QE(e.integerValue));else if("doubleValue"in e){const n=QE(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),nE(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Tt(t,20),"string"==typeof n&&(n=WE(n)),t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(JE(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?vI(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):r_()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),x_.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function Lk(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Mk(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Lk(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ok.St=new Ok;class Fk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Lt(e),n=Mk(t);this.Bt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Lt(e),n=Mk(t);this.Bt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Bt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Bt(1),this.buffer[this.position++]=e}$t(e){this.Bt(1),this.buffer[this.position++]=~e}Bt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Uk{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class jk{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Vk{constructor(){this.Wt=new Fk,this.Gt=new Uk(this.Wt),this.zt=new jk(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class zk{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new zk(this.indexId,this.documentKey,this.arrayValue,n)}}function Bk(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=qk(e.arrayValue,t.arrayValue),0!==n?n:(n=qk(e.directionalValue,t.directionalValue),0!==n?n:x_.comparator(e.documentKey,t.documentKey)))}function qk(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Kk{constructor(e){this.Jt=new VE(((e,t)=>C_.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(i_(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=A_(e);if(void 0!==t&&!this.tn(t))return!1;const n=R_(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new VE(C_.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new P_(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new P_(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new P_(n.field,"asc"===n.dir?0:1)));return new N_(N_.UNKNOWN_ID,this.collectionId,t,D_.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Gk(e){var t,n;if(i_(e instanceof RI||e instanceof PI),e instanceof RI){if(e instanceof HI){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>RI.create(e.field,"==",t))))||[];return PI.create(r,"or")}return e}const r=e.filters.map((e=>Gk(e)));return PI.create(r,e.op)}function Hk(e){if(0===e.getFilters().length)return[];const t=$k(Gk(e));return i_(Jk(t)),Wk(t)||Qk(t)?[t]:t.getFilters()}function Wk(e){return e instanceof RI}function Qk(e){return e instanceof PI&&LI(e)}function Jk(e){return Wk(e)||Qk(e)||function(e){if(e instanceof PI&&OI(e)){for(const t of e.getFilters())if(!Wk(t)&&!Qk(t))return!1;return!0}return!1}(e)}function $k(e){if(i_(e instanceof RI||e instanceof PI),e instanceof RI)return e;if(1===e.filters.length)return $k(e.filters[0]);const t=e.filters.map((e=>$k(e)));let n=PI.create(t,e.op);return n=Zk(n),Jk(n)?n:(i_(n instanceof PI),i_(DI(n)),i_(n.filters.length>1),n.filters.reduce(((e,t)=>Yk(e,t))))}function Yk(e,t){let n;return i_(e instanceof RI||e instanceof PI),i_(t instanceof RI||t instanceof PI),n=e instanceof RI?t instanceof RI?function(e,t){return PI.create([e,t],"and")}(e,t):Xk(e,t):t instanceof RI?Xk(t,e):function(e,t){if(i_(e.filters.length>0&&t.filters.length>0),DI(e)&&DI(t))return jI(e,t.getFilters());const n=OI(e)?e:t,r=OI(e)?t:e,i=n.filters.map((e=>Yk(e,r)));return PI.create(i,"or")}(e,t),Zk(n)}function Xk(e,t){if(DI(t))return jI(t,e.getFilters());{const n=t.filters.map((t=>Yk(e,t)));return PI.create(n,"or")}}function Zk(e){if(i_(e instanceof RI||e instanceof PI),e instanceof RI)return e;const t=e.getFilters();if(1===t.length)return Zk(t[0]);if(MI(e))return e;const n=t.map((e=>Zk(e))),r=[];return n.forEach((t=>{t instanceof RI?r.push(t):t instanceof PI&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:PI.create(r,e.op)}class eC{constructor(){this.on=new tC}addToCollectionParentIndex(e,t){return this.on.add(t),z_.resolve()}getCollectionParents(e,t){return z_.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return z_.resolve()}deleteFieldIndex(e,t){return z_.resolve()}deleteAllFieldIndexes(e){return z_.resolve()}createTargetIndexes(e,t){return z_.resolve()}getDocumentsMatchingTarget(e,t){return z_.resolve(null)}getIndexType(e,t){return z_.resolve(0)}getFieldIndexes(e,t){return z_.resolve([])}getNextCollectionGroupToUpdate(e){return z_.resolve(null)}getMinOffset(e,t){return z_.resolve(M_.min())}getMinOffsetFromCollectionGroup(e,t){return z_.resolve(M_.min())}updateCollectionGroup(e,t,n){return z_.resolve()}updateIndexEntries(e,t){return z_.resolve()}}class tC{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new VE(S_.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new VE(S_.comparator)).toArray()}}const nC=new Uint8Array(0);class rC{constructor(e,t){this.databaseId=t,this._n=new tC,this.an=new bT((e=>YI(e)),((e,t)=>XI(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:iE(r)};return iC(e).put(i)}return z_.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[__(t),""],!1,!0);return iC(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(aE(r.parent))}return n}))}addFieldIndex(e,t){const n=oC(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=aC(e);return i.next((e=>{n.put(xk(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=oC(e),r=aC(e),i=sC(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=oC(e),n=sC(e),r=aC(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return z_.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Kk(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=sC(e);let r=!0;const i=new Map;return z_.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=RT();const r=[];return z_.forEach(i,((i,s)=>{Zb("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(YI(t)));const o=function(e,t){const n=A_(t);if(void 0===n)return null;for(const r of eT(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of R_(t))for(const t of eT(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of R_(t)){const t=0===i.kind?tT(e,i.fieldPath,e.startAt):nT(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new SI(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of R_(t)){const t=0===i.kind?nT(e,i.fieldPath,e.endAt):tT(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new SI(n,r)}(s,i),u=this.ln(i,s,c),h=this.ln(i,s,l),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return z_.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=x_.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return z_.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Hk(PI.create(e.filters,"and")).map((t=>$I(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/c]):nC,h=this.Tn(e,a,n[u%c],r),d=this.En(e,a,i[u%c],s),f=o.map((t=>this.Tn(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}Tn(e,t,n,r){const i=new zk(e,x_.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new zk(e,x_.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new Kk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return z_.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new VE(C_.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new Vk;for(const r of R_(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);Ok.St.ht(e,i)}return n.Ut()}In(e){const t=new Vk;return Ok.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new Vk;return Ok.St.ht(uI(this.databaseId,t),n.jt(function(e){const t=R_(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new Vk);let i=0;for(const s of R_(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&dI(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);Ok.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Vk;n.seed(e.Ut()),Ok.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof RI&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=oC(e),r=aC(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return z_.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new D_(t.sequenceNumber,new M_(_k(t.readTime),new x_(aE(t.documentKey)),t.largestBatchId)):D_.empty(),r=e.fields.map((e=>{let[t,n]=e;return new P_(C_.fromServerFormat(t),n)}));return new N_(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:w_(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=oC(e),i=aC(e);return this.fn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>z_.forEach(t,(t=>i.put(xk(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return z_.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?z_.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),z_.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?z_.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return sC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return sC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=sC(e);let i=new VE(Bk);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new zk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new VE(Bk);const r=this.dn(t,e);if(null==r)return n;const i=A_(t);if(null!=i){const s=e.data.field(i.fieldPath);if(dI(s))for(const i of s.arrayValue.values||[])n=n.add(new zk(t.indexId,e.key,this.In(i),r))}else n=n.add(new zk(t.indexId,e.key,nC,r));return n}yn(e,t,n,r,i){Zb("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=BE(s),c=BE(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=BE(o)):t?(i(a),a=BE(s)):(a=BE(s),c=BE(o))}}(r,i,Bk,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),z_.waitFor(s)}fn(e){let t=1;return aC(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Bk(e,t))).filter(((e,t,n)=>!t||0!==Bk(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Bk(s,e),i=Bk(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,nC,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,nC,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return Bk(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cC)}getMinOffset(e,t){return z_.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||r_())))).next(cC)}}function iC(e){return DE(e,"collectionParents")}function sC(e){return DE(e,"indexEntries")}function oC(e){return DE(e,"indexConfiguration")}function aC(e){return DE(e,"indexState")}function cC(e){i_(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;F_(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new M_(t.readTime,t.documentKey,n)}const lC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class uC{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new uC(e,uC.DEFAULT_COLLECTION_PERCENTILE,uC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hC(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{i_(1===a)})));const l=[];for(const u of n.mutations){const e=uE(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return z_.waitFor(s).next((()=>l))}function dC(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw r_();t=e.noDocument}return JSON.stringify(t).length}uC.DEFAULT_COLLECTION_PERCENTILE=10,uC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uC.DEFAULT=new uC(41943040,uC.DEFAULT_COLLECTION_PERCENTILE,uC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uC.DISABLED=new uC(-1,0,0);class fC{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){i_(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new fC(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mC(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=gC(e),s=mC(e);return s.add({}).next((o=>{i_("number"==typeof o);const a=new dS(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>nk(e.ut,t))),i=n.mutations.map((t=>nk(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new VE(((e,t)=>w_(e.canonicalString(),t.canonicalString())));for(const e of r){const t=uE(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,hE))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),z_.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return mC(e).get(t).next((e=>e?(i_(e.userId===this.userId),Ek(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?z_.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return mC(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(i_(t.batchId>=n),i=Ek(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return mC(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mC(e).U("userMutationsIndex",t).next((e=>e.map((e=>Ek(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=lE(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return gC(e).J({range:r},((n,r,s)=>{const[o,a,c]=n,l=aE(a);if(o===this.userId&&t.path.isEqual(l))return mC(e).get(c).next((e=>{if(!e)throw r_();i_(e.userId===this.userId),i.push(Ek(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new VE(w_);const r=[];return t.forEach((t=>{const i=lE(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=gC(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,c=aE(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),z_.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=lE(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new VE(w_);return gC(e).J({range:s},((e,t,i)=>{const[s,a,c]=e,l=aE(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(mC(e).get(t).next((e=>{if(null===e)throw r_();i_(e.userId===this.userId),n.push(Ek(this.serializer,e))})))})),z_.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return hC(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),z_.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return z_.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return gC(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=aE(e[1]);r.push(t)}else n.done()})).next((()=>{i_(0===r.length)}))}))}containsKey(e,t){return pC(e,this.userId,t)}Mn(e){return vC(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function pC(e,t,n){const r=lE(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return gC(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function mC(e){return DE(e,"mutations")}function gC(e){return DE(e,"documentMutations")}function vC(e){return DE(e,"mutationQueues")}class yC{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new yC(0)}static Nn(){return new yC(-1)}}class wC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new yC(t.highestTargetId);return t.highestTargetId=n.next(),this.Bn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>I_.fromTimestamp(new E_(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Bn(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Bn(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>bC(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(i_(t.targetCount>0),t.targetCount-=1,this.Bn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return bC(e).J(((s,o)=>{const a=Ik(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>z_.waitFor(i))).next((()=>r))}forEachTarget(e,t){return bC(e).J(((e,n)=>{const r=Ik(n);t(r)}))}Ln(e){return _C(e).get("targetGlobalKey").next((e=>(i_(null!==e),e)))}Bn(e,t){return _C(e).put("targetGlobalKey",t)}kn(e,t){return bC(e).put(Tk(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=YI(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return bC(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Ik(n);XI(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=EC(e);return t.forEach((t=>{const s=iE(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),z_.waitFor(r)}removeMatchingKeys(e,t,n){const r=EC(e);return z_.forEach(t,(t=>{const i=iE(t.path);return z_.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=EC(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=EC(e);let i=RT();return r.J({range:n,H:!0},((e,t,n)=>{const r=aE(e[1]),s=new x_(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=iE(t.path),r=IDBKeyRange.bound([n],[__(n)],!1,!0);let i=0;return EC(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return bC(e).get(t).next((e=>e?Ik(e):null))}}function bC(e){return DE(e,"targets")}function _C(e){return DE(e,"targetGlobal")}function EC(e){return DE(e,"targetDocuments")}function IC(e,t){let[n,r]=e,[i,s]=t;const o=w_(n,i);return 0===o?w_(r,s):o}class TC{constructor(e){this.Qn=e,this.buffer=new VE(IC),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();IC(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SC{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){Zb("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){W_(e)?Zb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await V_(e)}await this.Gn(3e5)}))}}class kC{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return z_.resolve(eE.oe);const n=new TC(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Zb("LruGarbageCollector","Garbage collection skipped; disabled"),z_.resolve(lC)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Zb("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),lC):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Zb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Xb()<=Ol.DEBUG&&Zb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),z_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function CC(e,t){return new kC(e,t)}class xC{constructor(e,t){this.db=e,this.garbageCollector=CC(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return NC(e,n)}removeReference(e,t,n){return NC(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return NC(e,t)}Xn(e,t){return function(e,t){let n=!1;return vC(e).Y((r=>pC(e,r,t).next((e=>(e&&(n=!0),z_.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,I_.min()),EC(e).delete(function(e){return[0,iE(e.path)]}(s)))))}));r.push(t)}})).next((()=>z_.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return NC(e,t)}Zn(e,t){const n=EC(e);let r,i=eE.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==eE.oe&&t(new x_(aE(r)),i),i=c,r=a):i=eE.oe})).next((()=>{i!==eE.oe&&t(new x_(aE(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function NC(e,t){return EC(e).put(function(e,t){return{targetId:0,path:iE(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class AC{constructor(){this.changes=new bT((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,TI.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?z_.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return LC(e).put(n)}removeEntry(e,t,n){return LC(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],wk(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=TI.newInvalidDocument(t);return LC(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(MC(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:TI.newInvalidDocument(t)};return LC(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(MC(t))},((e,r)=>{n={document:this.tr(t,r),size:dC(r)}})).next((()=>n))}getEntries(e,t){let n=ET();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=ET(),r=new FE(x_.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,dC(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return z_.resolve();let r=new VE(UC);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(MC(r.first()),MC(r.last())),s=r.getIterator();let o=s.getNext();return LC(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=x_.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&UC(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(MC(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),wk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return LC(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=ET();for(const i of e){const e=this.tr(x_.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(gT(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=ET();const s=FC(t,n),o=FC(t,M_.max());return LC(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(x_.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new DC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return OC(e).get("remoteDocumentGlobalKey").next((e=>(i_(!!e),e)))}er(e,t){return OC(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=tk(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=x_.fromSegments(t.noDocument.path),r=_k(t.noDocument.readTime);n=TI.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return r_();{const e=x_.fromSegments(t.unknownDocument.path),r=_k(t.unknownDocument.version);n=TI.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new E_(e[0],e[1]);return I_.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(I_.min()))return e}return TI.newInvalidDocument(e)}}function PC(e){return new RC(e)}class DC extends AC{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new bT((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new VE(((e,t)=>w_(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=yk(this._r.serializer,s);r=r.add(i.path.popLast());const c=dC(a);n+=c-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=yk(this._r.serializer,s.convertToNoDocument(I_.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),z_.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function OC(e){return DE(e,"remoteDocumentGlobal")}function LC(e){return DE(e,"remoteDocumentsV14")}function MC(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function FC(e,t){const n=t.documentKey.path.toArray();return[e,wk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function UC(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=w_(n[s],r[s]),i)return i;return i=w_(n.length,r.length),i||(i=w_(n[n.length-2],r[r.length-2]),i||w_(n[n.length-1],r[r.length-1]))}class jC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class VC{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&nS(n.mutation,e,qE.empty(),E_.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,RT()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RT();const r=kT();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=TT();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=kT();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,RT())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ET();const s=xT(),o=xT();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof oS)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),nS(o.mutation,t,o.mutation.getFieldMask(),E_.now())):s.set(t.key,qE.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new jC(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=xT();let r=new FE(((e,t)=>e-t)),i=RT();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||qE.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||RT()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=CT();c.forEach((e=>{if(!i.has(e)){const r=eS(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return z_.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return x_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):z_.resolve(kT());let o=-1,a=i;return s.next((t=>z_.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?z_.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,RT()))).next((e=>({batchId:o,changes:ST(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new x_(t)).next((e=>{let t=TT();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=TT();return this.indexManager.getCollectionParents(e,i).next((o=>z_.forEach(o,(o=>{const a=function(e,t){return new rT(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,TI.newInvalidDocument(r)))}));let n=TT();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&nS(s.mutation,r,qE.empty(),E_.now()),gT(t,r)&&(n=n.insert(e,r))})),n}))}}class zC{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return z_.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:KS(e.createTime)}}(t)),z_.resolve()}getNamedQuery(e,t){return z_.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Sk(e.bundledQuery),readTime:KS(e.readTime)}}(t)),z_.resolve()}}class BC{constructor(){this.overlays=new FE(x_.comparator),this.lr=new Map}getOverlay(e,t){return z_.resolve(this.overlays.get(t))}getOverlays(e,t){const n=kT();return z_.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),z_.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),z_.resolve()}getOverlaysForCollection(e,t,n){const r=kT(),i=t.length+1,s=new x_(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return z_.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new FE(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=kT(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=kT(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return z_.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new pS(t,n));let i=this.lr.get(t);void 0===i&&(i=RT(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class qC{constructor(){this.hr=new VE(KC.Pr),this.Ir=new VE(KC.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new KC(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new KC(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new x_(new S_([])),n=new KC(t,e),r=new KC(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new x_(new S_([])),n=new KC(t,e),r=new KC(t,e+1);let i=RT();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new KC(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class KC{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return x_.comparator(e.key,t.key)||w_(e.gr,t.gr)}static Tr(e,t){return w_(e.gr,t.gr)||x_.comparator(e.key,t.key)}}class GC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new VE(KC.Pr)}checkEmpty(e){return z_.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new dS(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new KC(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return z_.resolve(s)}lookupMutationBatch(e,t){return z_.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return z_.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z_.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return z_.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new KC(t,0),r=new KC(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),z_.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new VE(w_);return t.forEach((e=>{const t=new KC(e,0),r=new KC(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),z_.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;x_.isDocumentKey(i)||(i=i.child(""));const s=new KC(new x_(i),0);let o=new VE(w_);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),z_.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){i_(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return z_.forEach(t.mutations,(r=>{const i=new KC(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new KC(t,0),r=this.yr.firstAfterOrEqual(n);return z_.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,z_.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HC{constructor(e){this.Cr=e,this.docs=new FE(x_.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return z_.resolve(n?n.document.mutableCopy():TI.newInvalidDocument(t))}getEntries(e,t){let n=ET();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():TI.newInvalidDocument(e))})),z_.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ET();const s=t.path,o=new x_(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||F_(L_(o),n)<=0||(r.has(o.key)||gT(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return z_.resolve(i)}getAllFromCollectionGroup(e,t,n,r){r_()}vr(e,t){return z_.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new WC(this)}getSize(e){return z_.resolve(this.size)}}class WC extends AC{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),z_.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class QC{constructor(e){this.persistence=e,this.Fr=new bT((e=>YI(e)),XI),this.lastRemoteSnapshotVersion=I_.min(),this.highestTargetId=0,this.Mr=0,this.Or=new qC,this.targetCount=0,this.Nr=yC.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),z_.resolve()}getLastRemoteSnapshotVersion(e){return z_.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z_.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),z_.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),z_.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new yC(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,z_.resolve()}updateTargetData(e,t){return this.kn(t),z_.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,z_.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),z_.waitFor(i).next((()=>r))}getTargetCount(e){return z_.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return z_.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),z_.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),z_.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),z_.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return z_.resolve(n)}containsKey(e,t){return z_.resolve(this.Or.containsKey(t))}}class JC{constructor(e,t){this.Lr={},this.overlays={},this.Br=new eE(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new QC(this),this.indexManager=new eC,this.remoteDocumentCache=function(e){return new HC(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new vk(t),this.Kr=new zC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new GC(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Zb("MemoryPersistence","Starting transaction:",e);const r=new $C(this.Br.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return z_.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class $C extends j_{constructor(e){super(),this.currentSequenceNumber=e}}class YC{constructor(e){this.persistence=e,this.Gr=new qC,this.zr=null}static jr(e){return new YC(e)}get Hr(){if(this.zr)return this.zr;throw r_()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),z_.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),z_.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),z_.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z_.forEach(this.Hr,(n=>{const r=x_.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,I_.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return z_.or([()=>z_.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class XC{constructor(e){this.serializer=e}O(e,t,n,r){const i=new B_("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cE,{unique:!0}),e.createObjectStore("documentMutations")}(e),ZC(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=z_.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ZC(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:I_.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cE,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return z_.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:IE});t.createIndex("collectionPathOverlayIndex",TE,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",SE,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:dE});t.createIndex("documentKeyIndex",fE),t.createIndex("collectionGroupIndex",pE)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:wE}).createIndex("sequenceNumberIndex",bE,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:_E}).createIndex("documentKeyIndex",EE,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}Xr(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=dC(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>z_.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>z_.forEach(n,(n=>{i_(n.userId===t.userId);const r=Ek(this.serializer,n);return hC(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new S_(n),o=function(e){return[0,iE(e)]}(s);r.push(t.get(o).next((n=>n?z_.resolve():(n=>t.put({targetId:0,path:iE(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>z_.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:yE});const n=t.store("collectionParents"),r=new tC,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:iE(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new S_(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=aE(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.J(((e,n)=>{const r=Ik(n),i=Tk(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new x_(S_.fromString(e.document.name).popFirst(5)):e.noDocument?x_.fromSegments(e.noDocument.path):e.unknownDocument?x_.fromSegments(e.unknownDocument.path):r_()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>z_.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=PC(this.serializer),i=new JC(YC.jr,this.serializer.ut);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:RT();Ek(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),z_.forEach(n,((e,n)=>{const s=new Jb(n),o=Pk.ct(this.serializer,s),a=i.getIndexManager(s),c=fC.ct(s,this.serializer,a,i.referenceDelegate);return new VC(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new PE(t,eE.oe),e).next()}))}))}}function ZC(e){e.createObjectStore("targetDocuments",{keyPath:gE}).createIndex("documentTargetsIndex",vE,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mE,{unique:!0}),e.createObjectStore("targetGlobal")}const ex="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tx{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=c,this._i=l,this.ai=u,this.Br=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!tx.D())throw new a_(o_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xC(this,r),this.Ii=t+"main",this.serializer=new vk(a),this.Ti=new q_(this.Ii,this.ai,new XC(this.serializer)),this.qr=new wC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PC(this.serializer),this.Kr=new Nk,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===l&&e_("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new a_(o_.FAILED_PRECONDITION,ex);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Br=new eE(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>rx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(W_(e))return Zb("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Zb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return nx(e).get("owner").next((e=>z_.resolve(this.wi(e))))}Si(e){return rx(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=DE(e,"clientMetadata");return t.U().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return z_.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?z_.resolve(!0):nx(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new a_(o_.FAILED_PRECONDITION,ex);return!1}}return!(!this.networkEnabled||!this.inForeground)||rx(e).U().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Zb("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new PE(e,eE.oe);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>rx(e).U().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return fC.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rC(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Pk.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){Zb("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?RE:15===e?AE:14===e?NE:13===e?xE:12===e?CE:11===e?kE:void r_()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new PE(r,this.Br?this.Br.next():eE.oe),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw e_("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new a_(o_.FAILED_PRECONDITION,U_);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Bi(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Bi(e){return nx(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new a_(o_.FAILED_PRECONDITION,ex)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nx(e).put("owner",t)}static D(){return q_.D()}pi(e){const t=nx(e);return t.get("owner").next((e=>this.wi(e)?(Zb("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):z_.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(e_("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;pl()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Zb("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return e_("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(kU){e_("Failed to set zombie client id.",kU)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(kU){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function nx(e){return DE(e,"owner")}function rx(e){return DE(e,"clientMetadata")}function ix(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class sx{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=RT(),r=RT();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new sx(e,t.fromCache,n,r)}}class ox{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ax{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=pl()?8:K_(cl())>0?6:4}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new ox;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Xb()<=Ol.DEBUG&&Zb("QueryEngine","SDK will not create cache indexes for query:",mT(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),z_.resolve()):(Xb()<=Ol.DEBUG&&Zb("QueryEngine","Query:",mT(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Xb()<=Ol.DEBUG&&Zb("QueryEngine","The SDK decides to create cache indexes for query:",mT(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lT(t))):z_.resolve())}zi(e,t){if(oT(t))return z_.resolve(null);let n=lT(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=dT(t,null,"F"),n=lT(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=RT(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,dT(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return oT(t)||r.isEqual(I_.min())?z_.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?z_.resolve(null):(Xb()<=Ol.DEBUG&&Zb("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mT(t)),this.Xi(e,s,t,O_(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new VE(yT(e));return t.forEach(((t,r)=>{gT(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Xb()<=Ol.DEBUG&&Zb("QueryEngine","Using full collection scan to execute query:",mT(t)),this.Gi.getDocumentsMatchingQuery(e,t,M_.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class cx{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new FE(w_),this.ns=new bT((e=>YI(e)),XI),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VC(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function lx(e,t,n,r){return new cx(e,t,n,r)}async function ux(e,t){const n=s_(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=RT();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function hx(e){const t=s_(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function dx(e,t,n){let r=RT(),i=RT();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ET();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(I_.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Zb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function fx(e,t){const n=s_(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function px(e,t){const n=s_(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,z_.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new gk(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function mx(e,t,n){const r=s_(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!W_(e))throw e;Zb("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function gx(e,t,n){const r=s_(e);let i=I_.min(),s=RT();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=s_(e),i=r.ns.get(n);return void 0!==i?z_.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,lT(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:I_.min(),n?s:RT()))).next((e=>(wx(r,vT(t),e),{documents:e,ls:s})))))}function vx(e,t){const n=s_(e),r=s_(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function yx(e,t){const n=s_(e),r=n.rs.get(t)||I_.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,O_(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(wx(n,t,e),e)))}function wx(e,t,n){let r=e.rs.get(t)||I_.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function bx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RT();const r=await px(e,lT(Sk(t.bundledQuery))),i=s_(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=KS(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(GE.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function _x(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ex(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ix(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Tx{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new a_(r.error.code,r.error.message))),s?new Tx(e,t,r.state,i):(e_("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sx{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new a_(n.error.code,n.error.message))),i?new Sx(e,n.state,r):(e_("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kx{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=DT();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=rE(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new kx(e,i):(e_("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Cx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Cx(t.clientId,t.onlineState):(e_("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class xx{constructor(){this.activeTargetIds=DT()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nx{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new FE(w_),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=_x(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new xx),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(_x(this.persistenceKey,n));if(e){const t=kx.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Ix(this.persistenceKey,e));if(n){const r=Sx.Ts(e,n);r&&(t=r.state)}}return this.Bs.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Bs.As(e),this.Fs()}isLocalQueryTarget(e){return this.Bs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ix(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Zb("SharedClientState","READ",e,t),t}setItem(e,t){Zb("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Zb("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(Zb("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void e_("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=eE.oe;if(null!=e)try{const n=JSON.parse(e);i_("number"==typeof n),t=n}catch(e){e_("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==eE.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Bs(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Bs.Es())}Ns(e,t,n){const r=new Tx(this.currentUser,e,t,n),i=Ex(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Ls(e){const t=Ex(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=Ix(this.persistenceKey,e),i=new Sx(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return kx.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Tx.Ts(new Jb(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return Sx.Ts(r,t)}Ms(e){return Cx.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);Zb("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=DT();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Ax{constructor(){this.eo=new xx,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new xx,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rx{ro(e){}shutdown(){}}class Px{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Zb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Zb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Dx=null;function Ox(){return null===Dx?Dx=268435456+Math.round(2147483648*Math.random()):Dx++,"0x"+Dx.toString(16)}const Lx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Mx{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}}const Fx="WebChannelConnection";class Ux extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.yo=t+"://"+e.host,this.wo="projects/".concat(n,"/databases/").concat(r),this.So="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get bo(){return!1}Do(e,t,n,r,i){const s=Ox(),o=this.Co(e,t.toUriEncodedString());Zb("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(a,r,i),this.Fo(e,o,a,n).then((t=>(Zb("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw t_("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Mo(e,t,n,r,i,s){return this.Do(e,t,n,r,i)}vo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+$b,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Co(e,t){const n=Lx[e];return"".concat(this.yo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,t,n,r){const i=Ox();return new Promise(((s,o)=>{const a=new Gb;a.setWithCredentials(!0),a.listenOnce(Vb.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case jb.NO_ERROR:const t=a.getResponseJson();Zb(Fx,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case jb.TIMEOUT:Zb(Fx,"RPC '".concat(e,"' ").concat(i," timed out")),o(new a_(o_.DEADLINE_EXCEEDED,"Request time out"));break;case jb.HTTP_ERROR:const n=a.getStatus();if(Zb(Fx,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(o_).indexOf(t)>=0?t:o_.UNKNOWN}(t.status);o(new a_(e,t.message))}else o(new a_(o_.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new a_(o_.UNAVAILABLE,"Connection failed."));break;default:r_()}}finally{Zb(Fx,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Zb(Fx,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}xo(e,t,n){const r=Ox(),i=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Fb(),o=Ub(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new qb({})),this.vo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Zb(Fx,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Mx({co:t=>{d?Zb(Fx,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Zb(Fx,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Zb(Fx,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Kb.EventType.OPEN,(()=>{d||(Zb(Fx,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.Vo())})),p(u,Kb.EventType.CLOSE,(()=>{d||(d=!0,Zb(Fx,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.fo())})),p(u,Kb.EventType.ERROR,(t=>{d||(d=!0,t_(Fx,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.fo(new a_(o_.UNAVAILABLE,"The operation could not be completed")))})),p(u,Kb.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];i_(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Zb(Fx,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=gS[e];if(void 0!==t)return wS(t)}(t),i=o.message;void 0===n&&(n=o_.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.fo(new a_(n,i)),u.close()}else Zb(Fx,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.po(i)}})),p(o,zb.STAT_EVENT,(t=>{t.stat===Bb.PROXY?Zb(Fx,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Bb.NOPROXY&&Zb(Fx,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.mo()}),0),f}}function jx(){return"undefined"!=typeof window?window:null}function Vx(){return"undefined"!=typeof document?document:null}function zx(e){return new jS(e,!0)}class Bx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Oo=n,this.No=r,this.Lo=i,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();const t=Math.floor(this.Bo+this.$o()),n=Math.max(0,Date.now()-this.qo),r=Math.max(0,t-n);r>0&&Zb("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.ko=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.qo=Date.now(),e()))),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){null!==this.ko&&(this.ko.skipDelay(),this.ko=null)}cancel(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}class qx{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Wo=n,this.Go=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Bx(e,t)}Yo(){return 1===this.state||5===this.state||this.Zo()}Zo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&null===this.jo&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,(()=>this.n_())))}r_(e){this.i_(),this.stream.send(e)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(e,t){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,4!==e?this.Jo.reset():t&&t.code===o_.RESOURCE_EXHAUSTED?(e_(t.toString()),e_("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):t&&t.code===o_.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(t)}o_(){}auth(){this.state=1;const e=this.__(this.zo),t=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.zo===t&&this.a_(n,r)}),(t=>{e((()=>{const e=new a_(o_.UNKNOWN,"Fetching auth token failed: "+t.message);return this.u_(e)}))}))}a_(e,t){const n=this.__(this.zo);this.stream=this.c_(e,t),this.stream.ho((()=>{n((()=>this.listener.ho()))})),this.stream.Io((()=>{n((()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,(()=>(this.Zo()&&(this.state=3),Promise.resolve()))),this.listener.Io())))})),this.stream.Eo((e=>{n((()=>this.u_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Xo(){this.state=5,this.Jo.Ko((async()=>{this.state=0,this.start()}))}u_(e){return Zb("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}__(e){return t=>{this.si.enqueueAndForget((()=>this.zo===e?t():(Zb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Kx extends qx{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}c_(e,t){return this.connection.xo("Listen",e,t)}onMessage(e){this.Jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:r_()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(i_(void 0===t||"string"==typeof t),GE.fromBase64String(t||"")):(i_(void 0===t||t instanceof Buffer||t instanceof Uint8Array),GE.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?o_.UNKNOWN:wS(e.code);return new a_(t,e.message||"")}(o);n=new RS(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=JS(e,r.document.name),s=KS(r.document.updateTime),o=r.document.createTime?KS(r.document.createTime):I_.min(),a=new EI({mapValue:{fields:r.document.fields}}),c=TI.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new NS(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=JS(e,r.document),s=r.readTime?KS(r.readTime):I_.min(),o=TI.newNoDocument(i,s),a=r.removedTargetIds||[];n=new NS([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=JS(e,r.document),s=r.removedTargetIds||[];n=new NS([],s,i,null)}else{if(!("filter"in t))return r_();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new mS(r,i),o=e.targetId;n=new AS(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return I_.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?I_.min():t.readTime?KS(t.readTime):I_.min()}(e);return this.listener.l_(t,n)}h_(e){const t={};t.database=XS(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ZI(r)?{documents:ik(e,r)}:{query:sk(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=BS(e,t.resumeToken);const r=VS(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(I_.min())>0){n.readTime=zS(e,t.snapshotVersion.toTimestamp());const r=VS(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return r_()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.r_(t)}P_(e){const t={};t.database=XS(this.serializer),t.removeTarget=e,this.r_(t)}}class Gx extends qx{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,t){return this.connection.xo("Write",e,t)}onMessage(e){if(i_(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();const t=function(e,t){return e&&e.length>0?(i_(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?KS(e.updateTime):KS(t);return n.isEqual(I_.min())&&(n=KS(t)),new $T(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=KS(e.commitTime);return this.listener.d_(n,t)}return i_(!e.writeResults||0===e.writeResults.length),this.I_=!0,this.listener.A_()}R_(){const e={};e.database=XS(this.serializer),this.r_(e)}E_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>nk(this.serializer,e)))};this.r_(t)}}class Hx extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new a_(o_.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,t,n,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Do(e,HS(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===o_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new a_(o_.UNKNOWN,e.toString())}))}Mo(e,t,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Mo(e,HS(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===o_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new a_(o_.UNKNOWN,e.toString())}))}terminate(){this.V_=!0,this.connection.terminate()}}class Wx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(e_(t),this.y_=!1):Zb("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Qx{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.ro((e=>{n.enqueueAndForget((async()=>{rN(this)&&(Zb("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=s_(e);t.M_.add(4),await $x(t),t.N_.set("Unknown"),t.M_.delete(4),await Jx(t)}(this))}))})),this.N_=new Wx(n,r)}}async function Jx(e){if(rN(e))for(const t of e.x_)await t(!0)}async function $x(e){for(const t of e.x_)await t(!1)}function Yx(e,t){const n=s_(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),nN(n)?tN(n):EN(n).Zo()&&Zx(n,t))}function Xx(e,t){const n=s_(e),r=EN(n);n.F_.delete(t),r.Zo()&&eN(n,t),0===n.F_.size&&(r.Zo()?r.t_():rN(n)&&n.N_.set("Unknown"))}function Zx(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(I_.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}EN(e).h_(t)}function eN(e,t){e.L_.xe(t),EN(e).P_(t)}function tN(e){e.L_=new DS({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),EN(e).start(),e.N_.w_()}function nN(e){return rN(e)&&!EN(e).Yo()&&e.F_.size>0}function rN(e){return 0===s_(e).M_.size}function iN(e){e.L_=void 0}async function sN(e){e.N_.set("Online")}async function oN(e){e.F_.forEach(((t,n)=>{Zx(e,t)}))}async function aN(e,t){iN(e),nN(e)?(e.N_.D_(t),tN(e)):e.N_.set("Unknown")}async function cN(e,t,n){if(e.N_.set("Online"),t instanceof RS&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Zb("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await lN(e,n)}else if(t instanceof NS?e.L_.Ke(t):t instanceof AS?e.L_.He(t):e.L_.We(t),!n.isEqual(I_.min()))try{const t=await hx(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(GE.EMPTY_BYTE_STRING,r.snapshotVersion)),eN(e,t);const i=new gk(r.target,t,n,r.sequenceNumber);Zx(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Zb("RemoteStore","Failed to raise snapshot:",t),await lN(e,t)}}async function lN(e,t,n){if(!W_(t))throw t;e.M_.add(1),await $x(e),e.N_.set("Offline"),n||(n=()=>hx(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Zb("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Jx(e)}))}function uN(e,t){return t().catch((n=>lN(e,n,t)))}async function hN(e){const t=s_(e),n=IN(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;dN(t);)try{const e=await fx(t.localStore,r);if(null===e){0===t.v_.length&&n.t_();break}r=e.batchId,fN(t,e)}catch(e){await lN(t,e)}pN(t)&&mN(t)}function dN(e){return rN(e)&&e.v_.length<10}function fN(e,t){e.v_.push(t);const n=IN(e);n.Zo()&&n.T_&&n.E_(t.mutations)}function pN(e){return rN(e)&&!IN(e).Yo()&&e.v_.length>0}function mN(e){IN(e).start()}async function gN(e){IN(e).R_()}async function vN(e){const t=IN(e);for(const n of e.v_)t.E_(n.mutations)}async function yN(e,t,n){const r=e.v_.shift(),i=fS.from(r,t,n);await uN(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await hN(e)}async function wN(e,t){t&&IN(e).T_&&await async function(e,t){if(function(e){return yS(e)&&e!==o_.ABORTED}(t.code)){const n=e.v_.shift();IN(e).e_(),await uN(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await hN(e)}}(e,t),pN(e)&&mN(e)}async function bN(e,t){const n=s_(e);n.asyncQueue.verifyOperationInProgress(),Zb("RemoteStore","RemoteStore received new credentials");const r=rN(n);n.M_.add(3),await $x(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Jx(n)}async function _N(e,t){const n=s_(e);t?(n.M_.delete(2),await Jx(n)):t||(n.M_.add(2),await $x(n),n.N_.set("Unknown"))}function EN(e){return e.B_||(e.B_=function(e,t,n){const r=s_(e);return r.m_(),new Kx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:sN.bind(null,e),Io:oN.bind(null,e),Eo:aN.bind(null,e),l_:cN.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.e_(),nN(e)?tN(e):e.N_.set("Unknown")):(await e.B_.stop(),iN(e))}))),e.B_}function IN(e){return e.k_||(e.k_=function(e,t,n){const r=s_(e);return r.m_(),new Gx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:()=>Promise.resolve(),Io:gN.bind(null,e),Eo:wN.bind(null,e),A_:vN.bind(null,e),d_:yN.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.e_(),await hN(e)):(await e.k_.stop(),e.v_.length>0&&(Zb("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class TN{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new c_,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new TN(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new a_(o_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function SN(e,t){if(e_("AsyncQueue","".concat(t,": ").concat(e)),W_(e))return new a_(o_.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class kN{constructor(e){this.comparator=e?(t,n)=>e(t,n)||x_.comparator(t.key,n.key):(e,t)=>x_.comparator(e.key,t.key),this.keyedMap=TT(),this.sortedSet=new FE(this.comparator)}static emptySet(e){return new kN(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kN))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new kN;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class CN{constructor(){this.q_=new FE(x_.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):r_():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class xN{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new xN(e,t,kN.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fT(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class NN{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class AN{constructor(){this.queries=new bT((e=>pT(e)),fT),this.onlineState="Unknown",this.z_=new Set}}async function RN(e,t){const n=s_(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new NN,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=SN(e,"Initialization of query '".concat(mT(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&LN(n)}async function PN(e,t){const n=s_(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function DN(e,t){const n=s_(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&LN(n)}function ON(e,t,n){const r=s_(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function LN(e){e.z_.forEach((e=>{e.next()}))}var MN,FN;(FN=MN||(MN={})).J_="default",FN.Cache="cache";class UN{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new xN(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=xN.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==MN.Cache}}class jN{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class VN{constructor(e){this.serializer=e}hs(e){return JS(this.serializer,e)}Ps(e){return e.metadata.exists?tk(this.serializer,e.document,!1):TI.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return KS(e)}}class zN{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BN(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=S_.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new VN(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||RT()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=s_(e);let s=RT(),o=ET();for(const l of n){const e=t.hs(l.metadata.name);l.document&&(s=s.add(e));const n=t.Ps(l);n.setReadTime(t.Is(l.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),c=await px(i,function(e){return lT(sT(S_.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>dx(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new VN(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await bx(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function BN(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class qN{constructor(e){this.key=e}}class KN{constructor(e){this.key=e}}class GN{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=RT(),this.mutatedKeys=RT(),this.Ia=yT(e),this.Ta=new kN(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new CN,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=gT(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||c&&this.Ia(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Zi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return r_()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,c=a!==this.ha;return this.ha=a,0!==s.length||c?{snapshot:new xN(this.query,e.Ta,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new CN,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=RT(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new KN(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new qN(n))})),t}pa(e){this.la=e.ls,this.Pa=RT();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return xN.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class HN{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class WN{constructor(e){this.key=e,this.wa=!1}}class QN{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new bT((e=>pT(e)),fT),this.Da=new Map,this.Ca=new Set,this.va=new FE(x_.comparator),this.Fa=new Map,this.Ma=new qC,this.xa={},this.Oa=new Map,this.Na=yC.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function JN(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=TA(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await YN(r,t,n,!0),i}async function $N(e,t){const n=TA(e);await YN(n,t,!0,!1)}async function YN(e,t,n,r){const i=await px(e.localStore,lT(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await XN(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Yx(e.remoteStore,i),a}async function XN(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Zi&&(i=await gx(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return uA(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await gx(e.localStore,t,!0),o=new GN(t,s.ls),a=o.da(s.documents),c=xS.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);uA(e,n,l.fa);const u=new HN(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function ZN(e,t,n){const r=s_(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!fT(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mx(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Xx(r.remoteStore,i.targetId),cA(r,i.targetId)})).catch(V_)):(cA(r,i.targetId),await mx(r.localStore,i.targetId,!0))}async function eA(e,t){const n=s_(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xx(n.remoteStore,r.targetId))}async function tA(e,t){const n=s_(e);try{const e=await function(e,t){const n=s_(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(GE.EMPTY_BYTE_STRING,I_.min()).withLastLimboFreeSnapshotVersion(I_.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.qr.updateTargetData(e,l))}));let a=ET(),c=RT();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(dx(e,s,t.documentUpdates).next((e=>{a=e.us,c=e.cs}))),!r.isEqual(I_.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return z_.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(i_(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?i_(r.wa):e.removedDocuments.size>0&&(i_(r.wa),r.wa=!1))})),await fA(n,e,t)}catch(e){await V_(e)}}function nA(e,t,n){const r=s_(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=s_(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&LN(n)}(r.eventManager,t),e.length&&r.Sa.l_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function rA(e,t,n){const r=s_(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new FE(x_.comparator);e=e.insert(s,TI.newNoDocument(s,I_.min()));const n=RT().add(s),i=new CS(I_.min(),new Map,new FE(w_),e,n);await tA(r,i),r.va=r.va.remove(s),r.Fa.delete(t),dA(r)}else await mx(r.localStore,t,!1).then((()=>cA(r,t,n))).catch(V_)}async function iA(e,t){const n=s_(e),r=t.batch.batchId;try{const e=await function(e,t){const n=s_(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=z_.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);i_(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=RT();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);aA(n,r,null),oA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fA(n,e)}catch(e){await V_(e)}}async function sA(e,t,n){const r=s_(e);try{const e=await function(e,t){const n=s_(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(i_(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);aA(r,t,n),oA(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await fA(r,e)}catch(n){await V_(n)}}function oA(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function aA(e,t,n){const r=s_(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function cA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Rr(t).forEach((t=>{e.Ma.containsKey(t)||lA(e,t)}))}function lA(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(Xx(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),dA(e))}function uA(e,t,n){for(const r of n)r instanceof qN?(e.Ma.addReference(r.key,t),hA(e,r)):r instanceof KN?(Zb("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||lA(e,r.key)):r_()}function hA(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Zb("SyncEngine","New document in limbo: "+n),e.Ca.add(r),dA(e))}function dA(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new x_(S_.fromString(t)),r=e.Na.next();e.Fa.set(r,new WN(n)),e.va=e.va.insert(n,r),Yx(e.remoteStore,new gk(lT(sT(n.path)),r,"TargetPurposeLimboResolution",eE.oe))}}async function fA(e,t,n){const r=s_(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=sx.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.l_(i),await async function(e,t){const n=s_(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>z_.forEach(t,(t=>z_.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>z_.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!W_(e))throw e;Zb("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function pA(e,t){const n=s_(e);if(!n.currentUser.isEqual(t)){Zb("SyncEngine","User change. New user:",t.toKey());const e=await ux(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new a_(o_.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await fA(n,e._s)}}function mA(e,t){const n=s_(e),r=n.Fa.get(t);if(r&&r.wa)return RT().add(r.key);{let e=RT();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function gA(e,t){const n=s_(e),r=await gx(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&uA(n,t.targetId,i.fa),i}async function vA(e,t){const n=s_(e);return yx(n.localStore,t).then((e=>fA(n,e)))}async function yA(e,t,n,r){const i=s_(e),s=await function(e,t){const n=s_(e),r=s_(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):z_.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await hN(i.remoteStore):"acknowledged"===n||"rejected"===n?(aA(i,t,r||null),oA(i,t),function(e,t){s_(s_(e).mutationQueue).Fn(t)}(i.localStore,t)):r_(),await fA(i,s)):Zb("SyncEngine","Cannot apply mutation batch with id: "+t)}async function wA(e,t,n){const r=s_(e),i=[],s=[];for(const o of t){let e;const t=r.Da.get(o);if(t&&0!==t.length){e=await px(r.localStore,lT(t[0]));for(const e of t){const t=r.ba.get(e),n=await gA(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await vx(r.localStore,o);e=await px(r.localStore,t),await XN(r,bA(t),o,!1,e.resumeToken)}i.push(e)}return r.Sa.l_(s),i}function bA(e){return iT(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function _A(e){return function(e){return s_(s_(e).persistence).Li()}(s_(e).localStore)}async function EA(e,t,n,r){const i=s_(e);if(i.La)return void Zb("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await yx(i.localStore,vT(s[0])),r=CS.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,GE.EMPTY_BYTE_STRING);await fA(i,e,r);break}case"rejected":await mx(i.localStore,t,!0),cA(i,t,r);break;default:r_()}}async function IA(e,t,n){const r=TA(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Zb("SyncEngine","Adding an already active target "+e);continue}const t=await vx(r.localStore,e),n=await px(r.localStore,t);await XN(r,bA(t),n.targetId,!1,n.resumeToken),Yx(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await mx(r.localStore,e,!1).then((()=>{Xx(r.remoteStore,e),cA(r,e)})).catch(V_)}}function TA(e){const t=s_(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=tA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rA.bind(null,t),t.Sa.l_=DN.bind(null,t.eventManager),t.Sa.ka=ON.bind(null,t.eventManager),t}function SA(e){const t=s_(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sA.bind(null,t),t}class kA{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=zx(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return lx(this.persistence,new ax,e.initialUser,this.serializer)}createPersistence(e){return new JC(YC.jr,this.serializer)}createSharedClientState(e){return new Ax}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class CA extends kA{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await SA(this.Qa.syncEngine),await hN(this.Qa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return lx(this.persistence,new ax,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new SC(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Z_(t,this.persistence);return new X_(e.asyncQueue,n)}createPersistence(e){const t=ix(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?uC.withCacheSize(this.cacheSizeBytes):uC.DEFAULT;return new tx(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,jx(),Vx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ax}}class xA extends CA{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof Nx&&(this.sharedClientState.syncEngine={Ys:yA.bind(null,t),Zs:EA.bind(null,t),Xs:IA.bind(null,t),Li:_A.bind(null,t),Js:vA.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=s_(e);if(TA(n),SA(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await wA(n,e.toArray());n.La=!0,await _N(n.remoteStore,!0);for(const r of t)Yx(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(cA(n,i),mx(n.localStore,i,!0)))),Xx(n.remoteStore,i)})),await t,await wA(n,e),function(e){const t=s_(e);t.Fa.forEach(((e,n)=>{Xx(t.remoteStore,n)})),t.Ma.Vr(),t.Fa=new Map,t.va=new FE(x_.comparator)}(n),n.La=!1,await _N(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=jx();if(!Nx.D(t))throw new a_(o_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=ix(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class NA{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>nA(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pA.bind(null,this.syncEngine),await _N(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new AN}createDatastore(e){const t=zx(e.databaseInfo.databaseId),n=function(e){return new Ux(e)}(e.databaseInfo);return function(e,t,n,r){return new Hx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Qx(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>nA(this.syncEngine,e,0)),Px.D()?new Px:new Rx)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new QN(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=s_(e);Zb("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await $x(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function AA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class RA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):e_("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class PA{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new c_,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new jN(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class DA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new a_(o_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=s_(e),r={documents:t.map((e=>QS(n.serializer,e)))},i=await n.Mo("BatchGetDocuments",n.serializer.databaseId,S_.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){i_(!!t.found),t.found.name,t.found.updateTime;const n=JS(e,t.found.name),r=KS(t.found.updateTime),i=t.found.createTime?KS(t.found.createTime):I_.min(),s=new EI({mapValue:{fields:t.found.fields}});return TI.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){i_(!!t.missing),i_(!!t.readTime);const n=JS(e,t.missing),r=KS(t.readTime);return TI.newNoDocument(n,r)}(e,t):r_()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());i_(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new uS(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=x_.fromPath(t);this.mutations.push(new hS(n,this.precondition(n)))})),await async function(e,t){const n=s_(e),r={writes:t.map((e=>nk(n.serializer,e)))};await n.Do("Commit",n.serializer.databaseId,S_.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw r_();t=I_.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new a_(o_.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(I_.min())?YT.exists(!1):YT.updateTime(t):YT.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(I_.min()))throw new a_(o_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return YT.updateTime(t)}return YT.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class OA{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Jo=new Bx(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Jo.Ko((async()=>{const e=new DA(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!tE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yS(t)}return!1}}class LA{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Jb.UNAUTHENTICATED,this.clientId=y_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Zb("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Zb("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new a_(o_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new c_;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=SN(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function MA(e,t){e.asyncQueue.verifyOperationInProgress(),Zb("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await ux(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function FA(e,t){e.asyncQueue.verifyOperationInProgress();const n=await jA(e);Zb("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>bN(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>bN(t.remoteStore,n))),e._onlineComponents=t}function UA(e){return"FirebaseError"===e.name?e.code===o_.FAILED_PRECONDITION||e.code===o_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function jA(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Zb("FirestoreClient","Using user provided OfflineComponentProvider");try{await MA(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!UA(n))throw n;t_("Error using user provided cache. Falling back to memory cache: "+n),await MA(e,new kA)}}else Zb("FirestoreClient","Using default OfflineComponentProvider"),await MA(e,new kA);return e._offlineComponents}async function VA(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Zb("FirestoreClient","Using user provided OnlineComponentProvider"),await FA(e,e._uninitializedComponentsProvider._online)):(Zb("FirestoreClient","Using default OnlineComponentProvider"),await FA(e,new NA))),e._onlineComponents}function zA(e){return jA(e).then((e=>e.persistence))}function BA(e){return jA(e).then((e=>e.localStore))}function qA(e){return VA(e).then((e=>e.remoteStore))}function KA(e){return VA(e).then((e=>e.syncEngine))}function GA(e){return VA(e).then((e=>e.datastore))}async function HA(e){const t=await VA(e),n=t.eventManager;return n.onListen=JN.bind(null,t.syncEngine),n.onUnlisten=ZN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=$N.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=eA.bind(null,t.syncEngine),n}function WA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new c_;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new RA({next:s=>{t.enqueueAndForget((()=>PN(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new a_(o_.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new a_(o_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new UN(sT(n.path),s,{includeMetadataChanges:!0,ra:!0});return RN(e,o)}(await HA(e),e.asyncQueue,t,n,r))),r.promise}function QA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new c_;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new RA({next:n=>{t.enqueueAndForget((()=>PN(e,o))),n.fromCache&&"server"===r.source?i.reject(new a_(o_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new UN(n,s,{includeMetadataChanges:!0,ra:!0});return RN(e,o)}(await HA(e),e.asyncQueue,t,n,r))),r.promise}function JA(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?_S().encode(e):e,function(e,t){return new PA(e,t)}(function(e,t){if(e instanceof Uint8Array)return AA(e,t);if(e instanceof ArrayBuffer)return AA(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,zx(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=s_(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=s_(e),r=KS(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(BN(r));const i=new zN(r,e.localStore,t.serializer);let s=await t.qa();for(;s;){const e=await i._a(s);e&&n._updateProgress(e),s=await t.qa()}const o=await i.complete();return await fA(e,o.ca,void 0),await function(e,t){const n=s_(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ua)}catch(e){return t_("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await KA(e),i,r)}))}function $A(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const YA=new Map;function XA(e,t,n){if(!n)throw new a_(o_.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ZA(e,t,n,r){if(!0===t&&!0===r)throw new a_(o_.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function eR(e){if(!x_.isDocumentKey(e))throw new a_(o_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function tR(e){if(x_.isDocumentKey(e))throw new a_(o_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function nR(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":r_()}function rR(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new a_(o_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nR(e);throw new a_(o_.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function iR(e,t){if(t<=0)throw new a_(o_.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class sR{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new a_(o_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new a_(o_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$A(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new a_(o_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new a_(o_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new a_(o_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oR{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new a_(o_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new a_(o_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sR(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new u_;switch(e.type){case"firstParty":return new p_(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new a_(o_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=YA.get(e);t&&(Zb("ComponentProvider","Removing Datastore"),YA.delete(e),t.terminate())}(this),Promise.resolve()}}function aR(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=rR(e,oR))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&t_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Jb.MOCK_USER;else{t=al(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new a_(o_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Jb(s)}e._authCredentials=new h_(new l_(t,n))}}class cR{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new cR(this.firestore,e,this._query)}}class lR{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uR(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lR(this.firestore,e,this._key)}}class uR extends cR{constructor(e,t,n){super(e,t,sT(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lR(this.firestore,null,new x_(e))}withConverter(e){return new uR(this.firestore,e,this._path)}}function hR(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xl(e),XA("collection","path",t),e instanceof oR){const n=S_.fromString(t,...r);return tR(n),new uR(e,null,n)}{if(!(e instanceof lR||e instanceof uR))throw new a_(o_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(S_.fromString(t,...r));return tR(n),new uR(e.firestore,null,n)}}function dR(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xl(e),1===arguments.length&&(t=y_.newId()),XA("doc","path",t),e instanceof oR){const n=S_.fromString(t,...r);return eR(n),new lR(e,null,new x_(n))}{if(!(e instanceof lR||e instanceof uR))throw new a_(o_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(S_.fromString(t,...r));return eR(n),new lR(e.firestore,e instanceof uR?e.converter:null,new x_(n))}}function fR(e,t){return e=xl(e),t=xl(t),(e instanceof lR||e instanceof uR)&&(t instanceof lR||t instanceof uR)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function pR(e,t){return e=xl(e),t=xl(t),e instanceof cR&&t instanceof cR&&e.firestore===t.firestore&&fT(e._query,t._query)&&e.converter===t.converter}class mR{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Bx(this,"async_queue_retry"),this.hu=()=>{const e=Vx();e&&Zb("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Jo.Uo()};const e=Vx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Vx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new c_;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(kU){if(!W_(kU))throw kU;Zb("AsyncQueue","Operation failed with retryable error: "+kU)}this.su.length>0&&this.Jo.Ko((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw e_("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=TN.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&r_()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function gR(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class vR{constructor(){this._progressObserver={},this._taskCompletionResolver=new c_,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class yR extends oR{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new mR,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||bR(this),this._firestoreClient.terminate()}}function wR(e){return e._firestoreClient||bR(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bR(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ZE(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,$A(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new LA(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function _R(e,t,n){const r=new c_;return e.asyncQueue.enqueue((async()=>{try{await MA(e,n),await FA(e,t),r.resolve()}catch(e){const n=e;if(!UA(n))throw n;t_("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function ER(e){return function(e){const t=new c_;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=s_(e);rN(n.remoteStore)||Zb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=s_(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=SN(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await KA(e),t))),t.promise}(wR(e=rR(e,yR)))}function IR(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await zA(e),n=await qA(e);return t.setNetworkEnabled(!0),function(e){const t=s_(e);return t.M_.delete(0),Jx(t)}(n)}))}(wR(e=rR(e,yR)))}function TR(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await zA(e),n=await qA(e);return t.setNetworkEnabled(!1),async function(e){const t=s_(e);t.M_.add(0),await $x(t),t.N_.set("Offline")}(n)}))}(wR(e=rR(e,yR)))}function SR(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=s_(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await BA(e),t)))}(wR(e=rR(e,yR)),t).then((t=>t?new cR(e,null,t.query):null))}function kR(e){if(e._initialized||e._terminated)throw new a_(o_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class CR{constructor(e){this._byteString=e}static fromBase64String(e){try{return new CR(GE.fromBase64String(e))}catch(e){throw new a_(o_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new CR(GE.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xR{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new a_(o_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new C_(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class NR{constructor(e){this._methodName=e}}class AR{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new a_(o_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new a_(o_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return w_(this._lat,e._lat)||w_(this._long,e._long)}}const RR=/^__.*__$/;class PR{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new oS(e,this.data,this.fieldMask,t,this.fieldTransforms):new sS(e,this.data,t,this.fieldTransforms)}}class DR{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new oS(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function OR(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw r_()}}class LR{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new LR(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return tP(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(OR(this.fu)&&RR.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class MR{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||zx(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new LR({fu:e,methodName:t,vu:n,path:C_.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FR(e){const t=e._freezeSettings(),n=zx(e._databaseId);return new MR(e._databaseId,!!t.ignoreUndefinedProperties,n)}function UR(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);YR("Data must be an object, but it was:",o,r);const a=JR(r,o);let c,l;if(s.merge)c=new qE(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=XR(t,r,n);if(!o.contains(i))throw new a_(o_.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));nP(e,i)||e.push(i)}c=new qE(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new PR(new EI(a),c,l)}class jR extends NR{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jR}}function VR(e,t,n){return new LR({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class zR extends NR{_toFieldTransform(e){return new JT(e.path,new zT)}isEqual(e){return e instanceof zR}}class BR extends NR{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=VR(this,e,!0),n=this.Mu.map((e=>QR(e,t))),r=new BT(n);return new JT(e.path,r)}isEqual(e){return e instanceof BR&&bl(this.Mu,e.Mu)}}class qR extends NR{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=VR(this,e,!0),n=this.Mu.map((e=>QR(e,t))),r=new KT(n);return new JT(e.path,r)}isEqual(e){return e instanceof qR&&bl(this.Mu,e.Mu)}}class KR extends NR{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new HT(e.serializer,MT(e.serializer,this.xu));return new JT(e.path,t)}isEqual(e){return e instanceof KR&&this.xu===e.xu}}function GR(e,t,n,r){const i=e.Fu(1,t,n);YR("Data must be an object, but it was:",i,r);const s=[],o=EI.empty();LE(r,((e,r)=>{const a=eP(t,e,n);r=xl(r);const c=i.Su(a);if(r instanceof jR)s.push(a);else{const e=QR(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new qE(s);return new DR(o,a,i.fieldTransforms)}function HR(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[XR(t,r,n)],c=[i];if(s.length%2!=0)throw new a_(o_.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(XR(t,s[d])),c.push(s[d+1]);const l=[],u=EI.empty();for(let d=a.length-1;d>=0;--d)if(!nP(l,a[d])){const e=a[d];let t=c[d];t=xl(t);const n=o.Su(e);if(t instanceof jR)l.push(e);else{const r=QR(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new qE(l);return new DR(u,h,o.fieldTransforms)}function WR(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return QR(n,e.Fu(r?4:3,t))}function QR(e,t){if($R(e=xl(e)))return YR("Unsupported field value:",t,e),JR(e,t);if(e instanceof NR)return function(e,t){if(!OR(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=QR(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=xl(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return MT(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=E_.fromDate(e);return{timestampValue:zS(t.serializer,n)}}if(e instanceof E_){const n=new E_(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:zS(t.serializer,n)}}if(e instanceof AR)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof CR)return{bytesValue:BS(t.serializer,e._byteString)};if(e instanceof lR){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:GS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(nR(e)))}(e,t)}function JR(e,t){const n={};return ME(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):LE(e,((e,r)=>{const i=QR(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function $R(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof E_||e instanceof AR||e instanceof CR||e instanceof lR||e instanceof NR)}function YR(e,t,n){if(!$R(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=nR(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function XR(e,t,n){if((t=xl(t))instanceof xR)return t._internalPath;if("string"==typeof t)return eP(e,t);throw tP("Field path arguments must be of type string or ",e,!1,void 0,n)}const ZR=new RegExp("[~\\*/\\[\\]]");function eP(e,t,n){if(t.search(ZR)>=0)throw tP("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new xR(...t.split("."))._internalPath}catch(pi){throw tP("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function tP(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new a_(o_.INVALID_ARGUMENT,a+e+c)}function nP(e,t){return e.some((e=>e.isEqual(t)))}class rP{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new lR(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sP("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class iP extends rP{data(){return super.data()}}function sP(e,t){return"string"==typeof t?eP(e,t):t instanceof xR?t._internalPath:t._delegate._internalPath}function oP(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new a_(o_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aP{}class cP extends aP{}function lP(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof aP&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof hP)).length,n=e.filter((e=>e instanceof uP)).length;if(t>1||t>0&&n>0)throw new a_(o_.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class uP extends cP{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new uP(e,t,n)}_apply(e){const t=this._parse(e);return wP(e._query,t),new cR(e.firestore,e.converter,hT(e._query,t))}_parse(e){const t=FR(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new a_(o_.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){yP(o,s);const t=[];for(const n of o)t.push(vP(r,e,n));a={arrayValue:{values:t}}}else a=vP(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||yP(o,s),a=WR(n,t,o,"in"===s||"not-in"===s);return RI.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class hP extends aP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hP(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:PI.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)wP(n,i),n=hT(n,i)}(e._query,t),new cR(e.firestore,e.converter,hT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dP extends cP{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dP(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new a_(o_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new a_(o_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xI(t,n)}(e._query,this._field,this._direction);return new cR(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new rT(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class fP extends cP{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new fP(e,t,n)}_apply(e){return new cR(e.firestore,e.converter,dT(e._query,this._limit,this._limitType))}}class pP extends cP{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new pP(e,t,n)}_apply(e){const t=gP(e,this.type,this._docOrFields,this._inclusive);return new cR(e.firestore,e.converter,function(e,t){return new rT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class mP extends cP{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new mP(e,t,n)}_apply(e){const t=gP(e,this.type,this._docOrFields,this._inclusive);return new cR(e.firestore,e.converter,function(e,t){return new rT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function gP(e,t,n,r){if(n[0]=xl(n[0]),n[0]instanceof rP)return function(e,t,n,r,i){if(!r)throw new a_(o_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of cT(e))if(o.field.isKeyField())s.push(uI(t,r.key));else{const e=r.data.field(o.field);if($E(e))throw new a_(o_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new a_(o_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new SI(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=FR(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new a_(o_.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new a_(o_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!aT(e)&&-1!==s.indexOf("/"))throw new a_(o_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(S_.fromString(s));if(!x_.isDocumentKey(n))throw new a_(o_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new x_(n);a.push(uI(t,i))}else{const e=WR(n,r,s);a.push(e)}}return new SI(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function vP(e,t,n){if("string"==typeof(n=xl(n))){if(""===n)throw new a_(o_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aT(t)&&-1!==n.indexOf("/"))throw new a_(o_.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(S_.fromString(n));if(!x_.isDocumentKey(r))throw new a_(o_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return uI(e,new x_(r))}if(n instanceof lR)return uI(e,n._key);throw new a_(o_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(nR(n),"."))}function yP(e,t){if(!Array.isArray(e)||0===e.length)throw new a_(o_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function wP(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new a_(o_.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new a_(o_.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class bP{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(rI(e)){case 0:return null;case 1:return e.booleanValue;case 2:return QE(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(JE(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw r_()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return LE(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new AR(QE(e.latitude),QE(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=YE(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(XE(e));default:return null}}convertTimestamp(e){const t=WE(e);return new E_(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=S_.fromString(e);i_(mk(n));const r=new eI(n.get(1),n.get(3)),i=new x_(n.popFirst(5));return r.isEqual(t)||e_("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function _P(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class EP extends bP{constructor(e){super(),this.firestore=e}convertBytes(e){return new CR(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lR(this.firestore,null,t)}}class IP{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class TP extends rP{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new SP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(sP("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class SP extends TP{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class kP{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new IP(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new SP(this._firestore,this._userDataWriter,n.key,n,new IP(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new a_(o_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new SP(e._firestore,e._userDataWriter,n.doc.key,n.doc,new IP(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new SP(e._firestore,e._userDataWriter,t.doc.key,t.doc,new IP(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:CP(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function CP(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return r_()}}function xP(e,t){return e instanceof TP&&t instanceof TP?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof kP&&t instanceof kP&&e._firestore===t._firestore&&pR(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class NP extends bP{constructor(e){super(),this.firestore=e}convertBytes(e){return new CR(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lR(this.firestore,null,t)}}function AP(e){e=rR(e,lR);const t=rR(e.firestore,yR),n=wR(t),r=new NP(t);return function(e,t){const n=new c_;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=s_(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new a_(o_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=SN(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await BA(e),t,n))),n.promise}(n,e._key).then((n=>new TP(t,r,e._key,n,new IP(null!==n&&n.hasLocalMutations,!0),e.converter)))}function RP(e){e=rR(e,cR);const t=rR(e.firestore,yR),n=wR(t),r=new NP(t);return function(e,t){const n=new c_;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await gx(e,t,!0),i=new GN(t,r.ls),s=i.da(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=SN(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await BA(e),t,n))),n.promise}(n,e._query).then((n=>new kP(t,r,e,n)))}function PP(e,t,n){e=rR(e,lR);const r=rR(e.firestore,yR),i=_P(e.converter,t,n);return MP(r,[UR(FR(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,YT.none())])}function DP(e,t,n){e=rR(e,lR);const r=rR(e.firestore,yR),i=FR(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=xl(t))||t instanceof xR?HR(i,"updateDoc",e._key,t,n,a):GR(i,"updateDoc",e._key,t),MP(r,[s.toMutation(e._key,YT.exists(!0))])}function OP(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=xl(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||gR(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(gR(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof lR)h=rR(e.firestore,yR),d=sT(e._key.path),u={next:t=>{n[c]&&n[c](FP(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=rR(e,cR);h=rR(t.firestore,yR),d=t._query;const r=new NP(h);u={next:e=>{n[c]&&n[c](new kP(h,r,t,e))},error:n[c+1],complete:n[c+2]},oP(e._query)}return function(e,t,n,r){const i=new RA(r),s=new UN(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>RN(await HA(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>PN(await HA(e),s)))}}(wR(h),d,l,u)}function LP(e,t){return function(e,t){const n=new RA(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){s_(e).z_.add(t),t.next()}(await HA(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){s_(e).z_.delete(t)}(await HA(e),n)))}}(wR(e=rR(e,yR)),gR(t)?t:{next:t})}function MP(e,t){return function(e,t){const n=new c_;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=SA(e);try{const e=await function(e,t){const n=s_(e),r=E_.now(),i=t.reduce(((e,t)=>e.add(t.key)),RT());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ET(),c=RT();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=rS(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new oS(e.key,t,II(t.value.mapValue),YT.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ST(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new FE(w_)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await fA(r,e.changes),await hN(r.remoteStore)}catch(e){const t=SN(e,"Failed to persist write");n.reject(t)}}(await KA(e),t,n))),n.promise}(wR(e),t)}function FP(e,t,n){const r=n.docs.get(t._key),i=new NP(e);return new TP(e,i,t._key,r,new IP(n.hasPendingWrites,n.fromCache),t.converter)}const UP={maxAttempts:5};class jP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=FR(e)}set(e,t,n){this._verifyNotCommitted();const r=VP(e,this._firestore),i=_P(r.converter,t,n),s=UR(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,YT.none())),this}update(e,t,n){this._verifyNotCommitted();const r=VP(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=xl(t))||t instanceof xR?HR(this._dataReader,"WriteBatch.update",r._key,t,n,o):GR(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,YT.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=VP(e,this._firestore);return this._mutations=this._mutations.concat(new uS(t._key,YT.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new a_(o_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function VP(e,t){if((e=xl(e)).firestore!==t)throw new a_(o_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class zP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=FR(e)}get(e){const t=VP(e,this._firestore),n=new EP(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return r_();const r=e[0];if(r.isFoundDocument())return new rP(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new rP(this._firestore,n,t._key,null,t.converter);throw r_()}))}set(e,t,n){const r=VP(e,this._firestore),i=_P(r.converter,t,n),s=UR(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=VP(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=xl(t))||t instanceof xR?HR(this._dataReader,"Transaction.update",r._key,t,n,o):GR(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=VP(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=VP(e,this._firestore),n=new NP(this._firestore);return super.get(e).then((e=>new TP(this._firestore,n,t._key,e._document,new IP(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){$b=e}(Wu),Uu(new Nl("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new yR(new d_(e.getProvider("auth-internal")),new g_(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new a_(o_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eI(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Zu(Qb,"4.6.1",e),Zu(Qb,"4.6.1","esm2017")}();function BP(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new a_("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function qP(){if("undefined"===typeof Uint8Array)throw new a_("unimplemented","Uint8Arrays are not available in this environment.")}function KP(){if("undefined"==typeof atob)throw new a_("unimplemented","Blobs are unavailable in Firestore in this environment.")}class GP{constructor(e){this._delegate=e}static fromBase64String(e){return KP(),new GP(CR.fromBase64String(e))}static fromUint8Array(e){return qP(),new GP(CR.fromUint8Array(e))}toBase64(){return KP(),this._delegate.toBase64()}toUint8Array(){return qP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function HP(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class WP{enableIndexedDbPersistence(e,t){return function(e,t){kR(e=rR(e,yR));const n=wR(e);if(n._uninitializedComponentsProvider)throw new a_(o_.FAILED_PRECONDITION,"SDK cache is already specified.");t_("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new NA;return _R(n,i,new CA(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){kR(e=rR(e,yR));const t=wR(e);if(t._uninitializedComponentsProvider)throw new a_(o_.FAILED_PRECONDITION,"SDK cache is already specified.");t_("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new NA;return _R(t,r,new xA(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new a_(o_.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new c_;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!q_.D())return Promise.resolve();const t=e+"main";await q_.delete(t)}(ix(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class QP{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof eI||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||t_("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};aR(this._delegate,e,t,n)}enableNetwork(){return IR(this._delegate)}disableNetwork(){return TR(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,ZA("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ER(this._delegate)}onSnapshotsInSync(e){return LP(this._delegate,e)}get app(){if(!this._appCompat)throw new a_("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cD(this,hR(this._delegate,e))}catch(kU){throw eD(kU,"collection()","Firestore.collection()")}}doc(e){try{return new ZP(this,dR(this._delegate,e))}catch(kU){throw eD(kU,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sD(this,function(e,t){if(e=rR(e,oR),XA("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new a_(o_.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cR(e,null,function(e){return new rT(S_.emptyPath(),e)}(t))}(this._delegate,e))}catch(kU){throw eD(kU,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=rR(e,yR);const r=Object.assign(Object.assign({},UP),n);return function(e){if(e.maxAttempts<1)throw new a_(o_.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new c_;return e.asyncQueue.enqueueAndForget((async()=>{const i=await GA(e);new OA(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(wR(e),(n=>t(new zP(e,n))),r)}(this._delegate,(t=>e(new $P(this,t))))}batch(){return wR(this._delegate),new YP(new jP(this._delegate,(e=>MP(this._delegate,e))))}loadBundle(e){return function(e,t){const n=wR(e=rR(e,yR)),r=new vR;return JA(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return SR(this._delegate,e).then((e=>e?new sD(this,e):null))}}class JP extends bP{constructor(e){super(),this.firestore=e}convertBytes(e){return new GP(new CR(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ZP.forKey(t,this.firestore,null)}}class $P{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new JP(e)}get(e){const t=lD(e);return this._delegate.get(t).then((e=>new rD(this._firestore,new TP(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=lD(e);return n?(BP("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=lD(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=lD(e);return this._delegate.delete(t),this}}class YP{constructor(e){this._delegate=e}set(e,t,n){const r=lD(e);return n?(BP("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=lD(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=lD(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class XP{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new SP(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new iD(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=XP.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new XP(e,new JP(e),t),r.set(t,i)),i}}XP.INSTANCES=new WeakMap;class ZP{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JP(e)}static forPath(e,t,n){if(e.length%2!==0)throw new a_("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new ZP(t,new lR(t._delegate,n,new x_(e)))}static forKey(e,t,n){return new ZP(t,new lR(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new cD(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cD(this.firestore,hR(this._delegate,e))}catch(kU){throw eD(kU,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=xl(e))instanceof lR&&fR(this._delegate,e)}set(e,t){t=BP("DocumentReference.set",t);try{return t?PP(this._delegate,e,t):PP(this._delegate,e)}catch(kU){throw eD(kU,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?DP(this._delegate,e):DP(this._delegate,e,t,...r)}catch(kU){throw eD(kU,"updateDoc()","DocumentReference.update()")}}delete(){return MP(rR((e=this._delegate).firestore,yR),[new uS(e._key,YT.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=tD(t),i=nD(t,(e=>new rD(this.firestore,new TP(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return OP(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?AP(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rR(e,lR);const t=rR(e.firestore,yR);return WA(wR(t),e._key,{source:"server"}).then((n=>FP(t,e,n)))}(this._delegate):function(e){e=rR(e,lR);const t=rR(e.firestore,yR);return WA(wR(t),e._key).then((n=>FP(t,e,n)))}(this._delegate),t.then((e=>new rD(this.firestore,new TP(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new ZP(this.firestore,e?this._delegate.withConverter(XP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function eD(e,t,n){return e.message=e.message.replace(t,n),e}function tD(e){for(const t of e)if("object"===typeof t&&!HP(t))return t;return{}}function nD(e,t){var n,r;let i;return i=HP(e[0])?e[0]:HP(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class rD{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ZP(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xP(this._delegate,e._delegate)}}class iD extends rD{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||r_(),t}}class sD{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JP(e)}where(e,t,n){try{return new sD(this.firestore,lP(this._delegate,function(e,t,n){const r=t,i=sP("where",e);return uP._create(i,r,n)}(e,t,n)))}catch(kU){throw eD(kU,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new sD(this.firestore,lP(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=sP("orderBy",e);return dP._create(n,t)}(e,t)))}catch(kU){throw eD(kU,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sD(this.firestore,lP(this._delegate,(iR("limit",t=e),fP._create("limit",t,"F"))))}catch(t){throw eD(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new sD(this.firestore,lP(this._delegate,(iR("limitToLast",t=e),fP._create("limitToLast",t,"L"))))}catch(t){throw eD(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new sD(this.firestore,lP(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pP._create("startAt",t,!0)}(...arguments)))}catch(kU){throw eD(kU,"startAt()","Query.startAt()")}}startAfter(){try{return new sD(this.firestore,lP(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pP._create("startAfter",t,!1)}(...arguments)))}catch(kU){throw eD(kU,"startAfter()","Query.startAfter()")}}endBefore(){try{return new sD(this.firestore,lP(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mP._create("endBefore",t,!1)}(...arguments)))}catch(kU){throw eD(kU,"endBefore()","Query.endBefore()")}}endAt(){try{return new sD(this.firestore,lP(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mP._create("endAt",t,!0)}(...arguments)))}catch(kU){throw eD(kU,"endAt()","Query.endAt()")}}isEqual(e){return pR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?RP(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rR(e,cR);const t=rR(e.firestore,yR),n=wR(t),r=new NP(t);return QA(n,e._query,{source:"server"}).then((n=>new kP(t,r,e,n)))}(this._delegate):function(e){e=rR(e,cR);const t=rR(e.firestore,yR),n=wR(t),r=new NP(t);return oP(e._query),QA(n,e._query).then((n=>new kP(t,r,e,n)))}(this._delegate),t.then((e=>new aD(this.firestore,new kP(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=tD(t),i=nD(t,(e=>new aD(this.firestore,new kP(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return OP(this._delegate,r,i)}withConverter(e){return new sD(this.firestore,e?this._delegate.withConverter(XP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class oD{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new iD(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new sD(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new iD(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new oD(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new iD(this._firestore,n))}))}isEqual(e){return xP(this._delegate,e._delegate)}}class cD extends sD{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ZP(this.firestore,e):null}doc(e){try{return new ZP(this.firestore,void 0===e?dR(this._delegate):dR(this._delegate,e))}catch(kU){throw eD(kU,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=rR(e.firestore,yR),r=dR(e),i=_P(e.converter,t);return MP(n,[UR(FR(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,YT.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new ZP(this.firestore,e)))}isEqual(e){return fR(this._delegate,e._delegate)}withConverter(e){return new cD(this.firestore,e?this._delegate.withConverter(XP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function lD(e){return rR(e,lR)}class uD{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new xR(...t)}static documentId(){return new uD(C_.keyField().canonicalString())}isEqual(e){return(e=xl(e))instanceof xR&&this._delegate._internalPath.isEqual(e._internalPath)}}class hD{constructor(e){this._delegate=e}static serverTimestamp(){const e=new zR("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new hD(e)}static delete(){const e=new jR("deleteField");return e._methodName="FieldValue.delete",new hD(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BR("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new hD(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qR("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new hD(e)}static increment(e){const t=new KR("increment",e);return t._methodName="FieldValue.increment",new hD(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const dD={Firestore:QP,GeoPoint:AR,Timestamp:E_,Blob:GP,Transaction:$P,WriteBatch:YP,DocumentReference:ZP,DocumentSnapshot:rD,Query:sD,QueryDocumentSnapshot:iD,QuerySnapshot:aD,CollectionReference:cD,FieldPath:uD,FieldValue:hD,setLogLevel:function(e){var t;t=e,Yb.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Nl("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},dD)))}(e,((e,t)=>new QP(e,t,new WP))),e.registerVersion("@firebase/firestore-compat","0.3.30")}(yh);yh.initializeApp({apiKey:"AIzaSyAd-zZc6ClG5NCVFua7AoxgVmfBHEG8LzY",authDomain:"gameforum-880eb.firebaseapp.com",projectId:"gameforum-880eb",storageBucket:"gameforum-880eb.appspot.com",messagingSenderId:"994604446436",appId:"1:994604446436:web:4a01fc9ef61ce1fdbb32f1"});const fD=yh;var pD=n(579);const mD=function(){const[e,t]=i.useState(null);return i.useEffect((()=>{fD.auth().onAuthStateChanged((e=>{t(e)}))}),[]),(0,pD.jsxs)(wo,{children:[(0,pD.jsx)(wo.Item,{as:Se,to:"/",children:"\u554a\u54c8\u59c6\u7279\u904a\u6232\u8ad6\u58c7"}),(0,pD.jsx)(wo.Item,{as:Se,to:"/gamenews",children:"\u904a\u6232"}),(0,pD.jsx)(wo.Item,{as:Se,to:"/posts",children:"\u8a0e\u8ad6"}),(0,pD.jsxs)(wo.Menu,{position:"right",children:[(0,pD.jsxs)(wo.Item,{children:[" ",(0,pD.jsx)($c,{})," "]}),e?(0,pD.jsxs)(pD.Fragment,{children:[(0,pD.jsx)(wo.Item,{as:Se,to:"/new-post",children:"\u767c\u8868\u6587\u7ae0"}),(0,pD.jsx)(wo.Item,{as:Se,to:"/my",children:"\u6703\u54e1"}),(0,pD.jsx)(wo.Item,{onClick:()=>fD.auth().signOut(),children:"\u767b\u51fa"})]}):(0,pD.jsx)(wo.Item,{as:Se,to:"/signin",children:"\u8a3b\u518a/\u767b\u5165"})]})]})};function gD(e){var t=e.children,n=e.className,r=e.content,s=e.fluid,o=e.text,a=e.textAlign,c=mi("ui",yi(o,"text"),yi(s,"fluid"),Ei(a),"container",n),l=Si(gD,e),u=ki(gD,e);return i.createElement(u,xe({},l,{className:c}),Ai(t)?r:t)}gD.handledProps=["as","children","className","content","fluid","text","textAlign"],gD.propTypes={};const vD=gD;const yD=function(e,t,n){"__proto__"==t&&ai?ai(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var wD=Object.prototype.hasOwnProperty;const bD=function(e,t,n){var r=e[t];wD.call(e,t)&&De(r,n)&&(void 0!==n||t in e)||yD(e,t,n)};const _D=function(e,t,n,r){if(!st(e))return e;for(var i=-1,s=(t=Lr(t,e)).length,o=s-1,a=e;null!=a&&++i<s;){var c=Mr(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=o){var u=a[c];void 0===(l=r?r(u,c,a):void 0)&&(l=st(u)?u:Sn(t[i+1])?[]:{})}bD(a,c,l),a=a[c]}return e};const ED=function(e,t,n){return null==e?e:_D(e,t,n)};var ID=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).inputRef=(0,i.createRef)(),t.labelRef=(0,i.createRef)(),t.canToggle=function(){var e=t.props,n=e.disabled,r=e.radio,i=e.readOnly,s=t.state.checked;return!n&&!i&&!(r&&s)},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return es(r)?n?-1:0:r},t.handleClick=function(e){var n=t.props.id,r=t.state,i=r.checked,s=r.indeterminate,o=fi(t.inputRef.current,"contains",e.target),a=fi(t.labelRef.current,"contains",e.target),c=!a&&!o,l=!es(n);a&&l||fi(t.props,"onClick",e,xe({},t.props,{checked:!i,indeterminate:!!s})),t.isClickFromMouse&&(t.isClickFromMouse=!1,a&&!l&&t.handleChange(e),c&&t.handleChange(e),a&&l&&e.stopPropagation())},t.handleChange=function(e){var n=t.state.checked;t.canToggle()&&(fi(t.props,"onChange",e,xe({},t.props,{checked:!n,indeterminate:!1})),t.setState({checked:!n,indeterminate:!1}))},t.handleMouseDown=function(e){var n=t.state,r=n.checked,i=n.indeterminate;fi(t.props,"onMouseDown",e,xe({},t.props,{checked:!!r,indeterminate:!!i})),e.defaultPrevented||fi(t.inputRef.current,"focus"),e.preventDefault()},t.handleMouseUp=function(e){var n=t.state,r=n.checked,i=n.indeterminate;t.isClickFromMouse=!0,fi(t.props,"onMouseUp",e,xe({},t.props,{checked:!!r,indeterminate:!!i}))},t.setIndeterminate=function(){var e=t.state.indeterminate;ED(t.inputRef,"current.indeterminate",!!e)},t}Ae(t,e);var n=t.prototype;return n.componentDidMount=function(){this.setIndeterminate()},n.componentDidUpdate=function(){this.setIndeterminate()},n.render=function(){var e=this.props,n=e.className,r=e.disabled,s=e.label,o=e.id,a=e.name,c=e.radio,l=e.readOnly,u=e.slider,h=e.toggle,d=e.type,f=e.value,p=this.state,m=p.checked,g=p.indeterminate,v=mi("ui",yi(m,"checked"),yi(r,"disabled"),yi(g,"indeterminate"),yi(es(s),"fitted"),yi(c,"radio"),yi(l,"read-only"),yi(u,"slider"),yi(h,"toggle"),"checkbox",n),y=Si(t,this.props),w=ki(t,this.props),b=sc(y,{htmlProps:nc}),_=b[0],E=b[1],I=ss(s,{defaultProps:{htmlFor:o},autoGenerateKey:!1})||i.createElement("label",{htmlFor:o});return i.createElement(w,xe({},E,{className:v,onClick:this.handleClick,onChange:this.handleChange,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),i.createElement(hc,{innerRef:this.inputRef},i.createElement("input",xe({},_,{checked:m,className:"hidden",disabled:r,id:o,name:a,readOnly:!0,tabIndex:this.computeTabIndex(),type:d,value:f}))),i.createElement(hc,{innerRef:this.labelRef},I))},t}(Pi);function TD(e){var t=e.slider,n=e.toggle,r=e.type,s=Si(TD,e),o=!(t||n)||void 0;return i.createElement(ID,xe({},s,{type:r,radio:o,slider:t,toggle:n}))}ID.handledProps=["as","checked","className","defaultChecked","defaultIndeterminate","disabled","fitted","id","indeterminate","label","name","onChange","onClick","onMouseDown","onMouseUp","radio","readOnly","slider","tabIndex","toggle","type","value"],ID.propTypes={},ID.defaultProps={type:"checkbox"},ID.autoControlledProps=["checked","indeterminate"],TD.handledProps=["slider","toggle","type"],TD.propTypes={},TD.defaultProps={type:"radio"};const SD=TD;function kD(e){var t=e.children,n=e.className,r=e.content,s=e.control,o=e.disabled,a=e.error,c=e.inline,l=e.label,u=e.required,h=e.type,d=e.width,f=e.id,p=mi(yi(o,"disabled"),yi(a,"error"),yi(c,"inline"),yi(u,"required"),Ti(d,"wide"),"field",n),m=Si(kD,e),g=ki(kD,e),v=Ur(a,"pointing","above"),y=Ac.create(a,{autoGenerateKey:!1,defaultProps:{prompt:!0,pointing:v,id:f?f+"-error-message":void 0,role:"alert","aria-atomic":!0}}),w=("below"===v||"right"===v)&&y,b=("above"===v||"left"===v)&&y;if(es(s))return es(l)?i.createElement(g,xe({},m,{className:p,id:f}),Ai(t)?r:t):i.createElement(g,xe({},m,{className:p,id:f}),w,ss(l,{autoGenerateKey:!1}),b);var _={"aria-describedby":f&&a?f+"-error-message":null,"aria-invalid":!!a||void 0},E=xe({},m,{content:r,children:t,disabled:o,required:u,type:h,id:f});return"input"!==s||"checkbox"!==h&&"radio"!==h?s===ID||s===SD?i.createElement(g,{className:p},w,(0,i.createElement)(s,xe({},_,E,{label:l})),b):i.createElement(g,{className:p},ss(l,{defaultProps:{htmlFor:f},autoGenerateKey:!1}),w,(0,i.createElement)(s,xe({},_,E)),b):i.createElement(g,{className:p},i.createElement("label",null,w,(0,i.createElement)(s,xe({},_,E))," ",l,b))}kD.handledProps=["as","children","className","content","control","disabled","error","id","inline","label","required","type","width"],kD.propTypes={};const CD=kD;function xD(e){var t=e.control,n=Si(xD,e),r=ki(xD,e);return i.createElement(r,xe({},n,{control:t}))}xD.handledProps=["as","control"],xD.propTypes={},xD.defaultProps={as:CD,control:Uc};const ND=xD;function AD(e){var t=e.control,n=Si(AD,e),r=ki(AD,e);return i.createElement(r,xe({},n,{control:t}))}AD.handledProps=["as","control"],AD.propTypes={},AD.defaultProps={as:CD,control:ID};const RD=AD;const PD=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i};const DD=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0};const OD=function(e,t){var n=!0;return $r(e,(function(e,r,i){return n=!!t(e,r,i)})),n};const LD=function(e,t,n){var r=sn(e)?DD:OD;return n&&xi(e,t,n)&&(t=void 0),r(e,Wr(t,3))};const MD=function(e,t,n,r){var i=-1,s=Fi,o=!0,a=e.length,c=[],l=t.length;if(!a)return c;n&&(t=Re(t,Nn(n))),r?(s=Ui,o=!1):t.length>=200&&(s=Jt,o=!1,t=new Wt(t));e:for(;++i<a;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,o&&h===h){for(var d=l;d--;)if(t[d]===h)continue e;c.push(u)}else s(t,h,r)||c.push(u)}return c};const FD=function(e){return fn(e)&&Kn(e)};var UD=di((function(e,t){return FD(e)?MD(e,t):[]}));const jD=UD;const VD=function(e){return function(t,n,r){var i=Object(t);if(!Kn(t)){var s=Wr(n,3);t=Gn(t),n=function(e){return s(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[s?t[o]:o]:void 0}};var zD=Math.max;const BD=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Na(n);return i<0&&(i=zD(r+i,0)),Di(e,Wr(t,3),i)};const qD=VD(BD);const KD=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:Na(t),ti(e,0,(t=r-t)<0?0:t)):[]};const GD=Kr("length");var HD="\\ud800-\\udfff",WD="["+HD+"]",QD="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",JD="\\ud83c[\\udffb-\\udfff]",$D="[^"+HD+"]",YD="(?:\\ud83c[\\udde6-\\uddff]){2}",XD="[\\ud800-\\udbff][\\udc00-\\udfff]",ZD="(?:"+QD+"|"+JD+")"+"?",eO="[\\ufe0e\\ufe0f]?",tO=eO+ZD+("(?:\\u200d(?:"+[$D,YD,XD].join("|")+")"+eO+ZD+")*"),nO="(?:"+[$D+QD+"?",QD,YD,XD,WD].join("|")+")",rO=RegExp(JD+"(?="+JD+")|"+nO+tO,"g");const iO=function(e){for(var t=rO.lastIndex=0;rO.test(e);)++t;return t};const sO=function(e){return Hs(e)?iO(e):GD(e)};const oO=function(e){if(null==e)return 0;if(Kn(e))return Xi(e)?sO(e):e.length;var t=ur(e);return"[object Map]"==t||"[object Set]"==t?e.size:qn(e).length};var aO=Je?Je.isConcatSpreadable:void 0;const cO=function(e){return sn(e)||yn(e)||!!(aO&&e&&e[aO])};const lO=function e(t,n,r,i,s){var o=-1,a=t.length;for(r||(r=cO),s||(s=[]);++o<a;){var c=t[o];n>0&&r(c)?n>1?e(c,n-1,r,i,s):rn(s,c):i||(s[s.length]=c)}return s};var uO=di((function(e,t){return FD(e)?MD(e,lO(t,1,FD,!0)):[]}));const hO=uO;const dO=di((function(e){return Bi(lO(e,1,FD,!0))}));const fO=function(e,t){return gr(e,t)};const pO=function(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var o=t[r],a=Fr(e,o);n(a,o)&&_D(s,Lr(o,e),a)}return s};const mO=function(e,t){return pO(e,t,(function(t,n){return zr(e,n)}))};const gO=function(e){return(null==e?0:e.length)?lO(e,1):[]};const vO=function(e){return hi(si(e,void 0,gO),e+"")}((function(e,t){return null==e?{}:mO(e,t)}));var yO=function(e){function t(){return e.apply(this,arguments)||this}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.className,r=e.name,s=mi(r,"flag",n),o=Si(t,this.props),a=ki(t,this.props);return i.createElement(a,xe({},o,{className:s}))},t}(i.PureComponent);yO.handledProps=["as","className","name"],yO.propTypes={},yO.defaultProps={as:"i"},yO.create=ns(yO,(function(e){return{name:e}}));const wO=yO;function bO(e){var t=e.className,n=mi("divider",t),r=Si(bO,e),s=ki(bO,e);return i.createElement(s,xe({},r,{className:n}))}bO.handledProps=["as","className"],bO.propTypes={};const _O=bO;var EO=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){fi(t.props,"onClick",e,t.props)},t}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,s=e.className,o=e.content,a=e.disabled,c=e.description,l=e.flag,u=e.icon,h=e.image,d=e.label,f=e.selected,p=e.text,m=mi(yi(n,"active"),yi(a,"disabled"),yi(f,"selected"),"item",s),g=es(u)?function(e,t){return Ni(i.Children.toArray(e),{type:t})}(r,"DropdownMenu")&&"dropdown":u,v=Si(t,this.props),y=ki(t,this.props),w={role:"option","aria-disabled":a,"aria-checked":n,"aria-selected":f};if(!Ai(r))return i.createElement(y,xe({},v,w,{className:m,onClick:this.handleClick}),r);var b=wO.create(l,{autoGenerateKey:!1}),_=po.create(g,{autoGenerateKey:!1}),E=Sc.create(h,{autoGenerateKey:!1}),I=Ac.create(d,{autoGenerateKey:!1}),T=ts("span",(function(e){return{children:e}}),c,{defaultProps:{className:"description"},autoGenerateKey:!1}),S=ts("span",(function(e){return{children:e}}),Ai(o)?p:o,{defaultProps:{className:"text"},autoGenerateKey:!1});return i.createElement(y,xe({},v,w,{className:m,onClick:this.handleClick}),E,_,b,I,T,S)},t}(i.Component);EO.handledProps=["active","as","children","className","content","description","disabled","flag","icon","image","label","onClick","selected","text","value"],EO.propTypes={},EO.create=ns(EO,(function(e){return e}));const IO=EO;function TO(e){var t=e.children,n=e.className,r=e.content,s=e.icon,o=mi("header",n),a=Si(TO,e),c=ki(TO,e);return Ai(t)?i.createElement(c,xe({},a,{className:o}),po.create(s,{autoGenerateKey:!1}),r):i.createElement(c,xe({},a,{className:o}),t)}TO.handledProps=["as","children","className","content","icon"],TO.propTypes={},TO.create=ns(TO,(function(e){return{content:e}}));const SO=TO;function kO(e){var t=e.children,n=e.className,r=e.content,s=e.direction,o=e.open,a=e.scrolling,c=mi(s,yi(o,"visible"),yi(a,"scrolling"),"menu transition",n),l=Si(kO,e),u=ki(kO,e);return i.createElement(u,xe({},l,{className:c}),Ai(t)?r:t)}kO.handledProps=["as","children","className","content","direction","open","scrolling"],kO.propTypes={};const CO=kO;var xO=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleChange=function(e){var n=Ur(e,"target.value");fi(t.props,"onChange",e,xe({},t.props,{value:n}))},t}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.autoComplete,r=e.className,s=e.tabIndex,o=e.type,a=e.value,c=mi("search",r),l=Si(t,this.props);return i.createElement("input",xe({},l,{"aria-autocomplete":"list",autoComplete:n,className:c,onChange:this.handleChange,tabIndex:s,type:o,value:a}))},t}(i.Component);xO.handledProps=["as","autoComplete","className","tabIndex","type","value"],xO.propTypes={},xO.defaultProps={autoComplete:"off",type:"text"},xO.create=ns(xO,(function(e){return{type:e}}));const NO=xO;function AO(e){var t=e.children,n=e.className,r=e.content,s=mi("divider",n),o=Si(AO,e),a=ki(AO,e);return i.createElement(a,xe({"aria-atomic":!0,"aria-live":"polite",role:"alert"},o,{className:s}),Ai(t)?r:t)}AO.handledProps=["as","children","className","content"],AO.propTypes={},AO.create=ns(AO,(function(e){return{content:e}}));const RO=AO;var PO=/[\\^$.*+?()[\]{}|]/g,DO=RegExp(PO.source);const OO=function(e){return(e=Or(e))&&DO.test(e)?e.replace(PO,"\\$&"):e};const LO=function(e,t){var n=[];return $r(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n};const MO=function(e,t){return(sn(e)?an:LO)(e,Wr(t,3))};function FO(e){var t=e.additionLabel,n=e.additionPosition,r=e.allowAdditions,s=e.deburr,o=e.multiple,a=e.options,c=e.search,l=e.searchQuery,u=e.value,h=a;if(o&&(h=MO(h,(function(e){return!Za(u,e.value)}))),c&&l)if(ot(c))h=c(h,l);else{var d=s?fs(l):l,f=new RegExp(OO(d),"i");h=MO(h,(function(e){return f.test(s?fs(e.text):e.text)}))}if(r&&c&&l&&!Ni(h,{text:l})){var p={key:"addition",text:[i.isValidElement(t)?i.cloneElement(t,{key:"addition-label"}):t||"",i.createElement("b",{key:"addition-query"},l)],value:l,className:"addition","data-additional":!0};"top"===n?h.unshift(p):h.push(p)}return h}function UO(e){var t,n=e.additionLabel,r=e.additionPosition,i=e.allowAdditions,s=e.deburr,o=e.multiple,a=e.options,c=e.search,l=e.searchQuery,u=e.selectedIndex,h=e.value,d=FO({value:h,options:a,searchQuery:l,additionLabel:n,additionPosition:r,allowAdditions:i,deburr:s,multiple:o,search:c}),f=ja(d,(function(e,t,n){return t.disabled||e.push(n),e}),[]);if(!u||u<0){var p=f[0];t=o?p:BD(d,["value",h])||f[0]}else if(o)t=qD(f,(function(e){return e>=u})),u>=d.length-1&&(t=f[f.length-1]);else{var m=BD(d,["value",h]);t=Za(f,m)?m:void 0}return(!t||t<0)&&(t=f[0]),t}FO.handledProps=[];var jO=function(e,t){return es(e)?t:e},VO=function(e){return e?e.map((function(e){return vO(e,["key","value"])})):e};function zO(e){var t=e.flag,n=e.image,r=e.text;return ot(r)?r:{content:i.createElement(i.Fragment,null,wO.create(t),Sc.create(n),r)}}var BO=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).searchRef=(0,i.createRef)(),t.sizerRef=(0,i.createRef)(),t.ref=(0,i.createRef)(),t.handleChange=function(e,n){fi(t.props,"onChange",e,xe({},t.props,{value:n}))},t.closeOnChange=function(e){var n=t.props,r=n.closeOnChange,i=n.multiple;(Ri(r)?!i:r)&&t.close(e,ji)},t.closeOnEscape=function(e){t.props.closeOnEscape&&za().getCode(e)===za().Escape&&(e.preventDefault(),t.close(e))},t.moveSelectionOnKeyDown=function(e){var n,r=t.props,i=r.multiple,s=r.selectOnNavigation;if(t.state.open){var o=((n={})[za().ArrowDown]=1,n[za().ArrowUp]=-1,n)[za().getCode(e)];if(void 0!==o){e.preventDefault();var a=t.getSelectedIndexAfterMove(o);!i&&s&&t.makeSelectedItemActive(e,a),t.setState({selectedIndex:a})}}},t.openOnSpace=function(e){var n,r,i,s=t.state.focus&&!t.state.open&&za().getCode(e)===za().Spacebar,o="INPUT"!==(null==(n=e.target)?void 0:n.tagName)&&"TEXTAREA"!==(null==(r=e.target)?void 0:r.tagName)&&!0!==(null==(i=e.target)?void 0:i.isContentEditable);s&&(o&&e.preventDefault(),t.open(e))},t.openOnArrow=function(e){var n=t.state,r=n.focus,i=n.open;if(r&&!i){var s=za().getCode(e);s!==za().ArrowDown&&s!==za().ArrowUp||(e.preventDefault(),t.open(e))}},t.makeSelectedItemActive=function(e,n){var r=t.state,i=r.open,s=r.value,o=t.props.multiple,a=t.getSelectedItem(n),c=Ur(a,"value"),l=Ur(a,"disabled");if(es(c)||!i||l)return s;var u=o?dO(s,[c]):c;return(o?!!hO(u,s).length:u!==s)&&(t.setState({value:u}),t.handleChange(e,u),a["data-additional"]&&fi(t.props,"onAddItem",e,xe({},t.props,{value:c}))),s},t.selectItemOnEnter=function(e){var n=t.props.search,r=t.state,i=r.open,s=r.selectedIndex;if(i&&(za().getCode(e)===za().Enter||!n&&za().getCode(e)===za().Spacebar)){e.preventDefault();var o=oO(FO({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search}));if(!n||0!==o){var a=t.makeSelectedItemActive(e,s);t.setState({selectedIndex:UO({additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search,selectedIndex:s,value:a,options:t.props.options,searchQuery:""})}),t.closeOnChange(e),t.clearSearchQuery(),n&&fi(t.searchRef.current,"focus")}}},t.removeItemOnBackspace=function(e){var n=t.props,r=n.multiple,i=n.search,s=t.state,o=s.searchQuery,a=s.value;if(za().getCode(e)===za().Backspace&&!o&&i&&r&&!Eo(a)){e.preventDefault();var c=KD(a);t.setState({value:c}),t.handleChange(e,c)}},t.closeOnDocumentClick=function(e){t.props.closeOnBlur&&(t.ref.current&&fc(t.ref.current,e)||t.close())},t.handleMouseDown=function(e){t.isMouseDown=!0,fi(t.props,"onMouseDown",e,t.props),document.addEventListener("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,document.removeEventListener("mouseup",t.handleDocumentMouseUp)},t.handleClick=function(e){var n=t.props,r=n.minCharacters,i=n.search,s=t.state,o=s.open,a=s.searchQuery;if(fi(t.props,"onClick",e,t.props),e.stopPropagation(),!i)return t.toggle(e);o?fi(t.searchRef.current,"focus"):a.length>=r||1===r?t.open(e):fi(t.searchRef.current,"focus")},t.handleIconClick=function(e){var n=t.props.clearable,r=t.hasValue();fi(t.props,"onClick",e,t.props),e.stopPropagation(),n&&r?t.clearValue(e):t.toggle(e)},t.handleItemClick=function(e,n){var r=t.props,i=r.multiple,s=r.search,o=t.state.value,a=n.value;if(e.stopPropagation(),(i||n.disabled)&&e.nativeEvent.stopImmediatePropagation(),!n.disabled){var c=n["data-additional"],l=i?dO(t.state.value,[a]):a;(i?!!hO(l,o).length:l!==o)&&(t.setState({value:l}),t.handleChange(e,l)),t.clearSearchQuery(),fi(s?t.searchRef.current:t.ref.current,"focus"),t.closeOnChange(e),c&&fi(t.props,"onAddItem",e,xe({},t.props,{value:a}))}},t.handleFocus=function(e){t.state.focus||(fi(t.props,"onFocus",e,t.props),t.setState({focus:!0}))},t.handleBlur=function(e){var n=Ur(e,"currentTarget");if(!n||!n.contains(document.activeElement)){var r=t.props,i=r.closeOnBlur,s=r.multiple,o=r.selectOnBlur;t.isMouseDown||(fi(t.props,"onBlur",e,t.props),o&&!s&&(t.makeSelectedItemActive(e,t.state.selectedIndex),i&&t.close()),t.setState({focus:!1}),t.clearSearchQuery())}},t.handleSearchChange=function(e,n){var r=n.value;e.stopPropagation();var i=t.props.minCharacters,s=t.state.open,o=r;fi(t.props,"onSearchChange",e,xe({},t.props,{searchQuery:o})),t.setState({searchQuery:o,selectedIndex:0}),!s&&o.length>=i?t.open():s&&1!==i&&o.length<i&&t.close()},t.handleKeyDown=function(e){t.moveSelectionOnKeyDown(e),t.openOnArrow(e),t.openOnSpace(e),t.selectItemOnEnter(e),fi(t.props,"onKeyDown",e)},t.getSelectedItem=function(e){var n=FO({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});return Ur(n,"["+e+"]")},t.getItemByValue=function(e){var n=t.props.options;return qD(n,{value:e})},t.getDropdownAriaOptions=function(){var e=t.props,n=e.loading,r=e.disabled,i=e.search,s=e.multiple,o={role:i?"combobox":"listbox","aria-busy":n,"aria-disabled":r,"aria-expanded":!!t.state.open};return"listbox"===o.role&&(o["aria-multiselectable"]=s),o},t.clearSearchQuery=function(){var e=t.state.searchQuery;void 0!==e&&""!==e&&t.setState({searchQuery:""})},t.handleLabelClick=function(e,n){e.stopPropagation(),t.setState({selectedLabel:n.value}),fi(t.props,"onLabelClick",e,n)},t.handleLabelRemove=function(e,n){e.stopPropagation();var r=t.state.value,i=jD(r,n.value);t.setState({value:i}),t.handleChange(e,i)},t.getSelectedIndexAfterMove=function(e,n){void 0===n&&(n=t.state.selectedIndex);var r=FO({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(void 0!==r&&!LD(r,"disabled")){var i=r.length-1,s=n+e;return!t.props.wrapSelection&&(s>i||s<0)?s=n:s>i?s=0:s<0&&(s=i),r[s].disabled?t.getSelectedIndexAfterMove(e,s):s}},t.handleIconOverrides=function(e){var n=t.props.clearable;return{className:mi(n&&t.hasValue()&&"clear",e.className),onClick:function(n){fi(e,"onClick",n,e),t.handleIconClick(n)}}},t.clearValue=function(e){var n=t.props.multiple?[]:"";t.setState({value:n}),t.handleChange(e,n)},t.computeSearchInputTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return es(r)?n?-1:0:r},t.computeSearchInputWidth=function(){var e=t.state.searchQuery;if(t.sizerRef.current&&e){t.sizerRef.current.style.display="inline",t.sizerRef.current.textContent=e;var n=Math.ceil(t.sizerRef.current.getBoundingClientRect().width);return t.sizerRef.current.style.removeProperty("display"),n}},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.search,i=e.tabIndex;if(!r)return n?-1:es(i)?0:i},t.handleSearchInputOverrides=function(e){return{onChange:function(n,r){fi(e,"onChange",n,r),t.handleSearchChange(n,r)}}},t.hasValue=function(){var e=t.props.multiple,n=t.state.value;return e?!Eo(n):!es(n)&&""!==n},t.scrollSelectedItemIntoView=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=e.querySelector(".item.selected");if(n){var r=n.offsetTop<e.scrollTop,i=n.offsetTop+n.clientHeight>e.scrollTop+e.clientHeight;r?e.scrollTop=n.offsetTop:i&&(e.scrollTop=n.offsetTop+n.clientHeight-e.clientHeight)}}}},t.setOpenDirection=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=t.ref.current.getBoundingClientRect(),r=e.clientHeight,i=document.documentElement.clientHeight-n.top-n.height-r,s=n.top-r,o=i<0&&s>i;!o!==!t.state.upward&&t.setState({upward:o})}}},t.open=function(e,n){void 0===e&&(e=null),void 0===n&&(n=!0);var r=t.props,i=r.disabled,s=r.search;i||(s&&fi(t.searchRef.current,"focus"),fi(t.props,"onOpen",e,t.props),n&&t.setState({open:!0}),t.scrollSelectedItemIntoView())},t.close=function(e,n){void 0===n&&(n=t.handleClose),t.state.open&&(fi(t.props,"onClose",e,t.props),t.setState({open:!1},n))},t.handleClose=function(){var e=document.activeElement===t.searchRef.current;!e&&t.ref.current&&t.ref.current.blur();var n=document.activeElement===t.ref.current,r=e||n;t.setState({focus:r})},t.toggle=function(e){return t.state.open?t.close(e):t.open(e)},t.renderText=function(){var e,n=t.props,r=n.multiple,i=n.placeholder,s=n.search,o=n.text,a=t.state,c=a.searchQuery,l=a.selectedIndex,u=a.value,h=a.open,d=t.hasValue(),f=mi(i&&!d&&"default","text",s&&c&&"filtered"),p=i;return o?p=o:h&&!r?e=t.getSelectedItem(l):d&&(e=t.getItemByValue(u)),RO.create(e?zO(e):p,{defaultProps:{className:f}})},t.renderSearchInput=function(){var e=t.props,n=e.search,r=e.searchInput,s=t.state.searchQuery;return n&&i.createElement(hc,{innerRef:t.searchRef},NO.create(r,{defaultProps:{style:{width:t.computeSearchInputWidth()},tabIndex:t.computeSearchInputTabIndex(),value:s},overrideProps:t.handleSearchInputOverrides}))},t.renderSearchSizer=function(){var e=t.props,n=e.search,r=e.multiple;return n&&r&&i.createElement("span",{className:"sizer",ref:t.sizerRef})},t.renderLabels=function(){var e=t.props,n=e.multiple,r=e.renderLabel,i=t.state,s=i.selectedLabel,o=i.value;if(n&&!Eo(o)){var a=Xr(o,t.getItemByValue);return Xr(PD(a),(function(e,n){var i={active:e.value===s,as:"a",key:jO(e.key,e.value),onClick:t.handleLabelClick,onRemove:t.handleLabelRemove,value:e.value};return Ac.create(r(e,n,i),{defaultProps:i})}))}},t.renderOptions=function(){var e=t.props,n=e.lazyLoad,r=e.multiple,s=e.search,o=e.noResultsMessage,a=t.state,c=a.open,l=a.selectedIndex,u=a.value;if(n&&!c)return null;var h=FO({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(null!==o&&s&&Eo(h))return i.createElement("div",{className:"message"},o);var d=r?function(e){return Za(u,e)}:function(e){return e===u};return Xr(h,(function(e,n){return IO.create(xe({active:d(e.value),selected:l===n},e,{key:jO(e.key,e.value),style:xe({},e.style,{pointerEvents:"all"})}),{generateKey:!1,overrideProps:function(e){return{onClick:function(n,r){null==e.onClick||e.onClick(n,r),t.handleItemClick(n,r)}}}})}))},t.renderMenu=function(){var e=t.props,n=e.children,r=e.direction,s=e.header,o=t.state.open,a=t.getDropdownMenuAriaOptions();if(!Ai(n)){var c=i.Children.only(n),l=mi(r,yi(o,"visible"),c.props.className);return(0,i.cloneElement)(c,xe({className:l},a))}return i.createElement(CO,xe({},a,{direction:r,open:o}),SO.create(s,{autoGenerateKey:!1}),t.renderOptions())},t}Ae(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(){return{focus:!1,searchQuery:""}},t.getAutoControlledStateFromProps=function(e,t,n){var r={__options:e.options,__value:t.value};return(!qa()(n.__value,t.value)||!fO(VO(e.options),VO(n.__options)))&&(r.selectedIndex=UO({additionLabel:e.additionLabel,additionPosition:e.additionPosition,allowAdditions:e.allowAdditions,deburr:e.deburr,multiple:e.multiple,search:e.search,selectedIndex:t.selectedIndex,value:t.value,options:e.options,searchQuery:t.searchQuery})),r},n.componentDidMount=function(){this.state.open&&this.open(null,!1)},n.shouldComponentUpdate=function(e,t){return!qa()(e,this.props)||!qa()(t,this.state)},n.componentDidUpdate=function(e,t){var n=this.props,r=n.closeOnBlur,i=n.minCharacters,s=n.openOnFocus,o=n.search;if(!t.focus&&this.state.focus){if(!this.isMouseDown){var a=!o||o&&1===i&&!this.state.open;s&&a&&this.open()}}else t.focus&&!this.state.focus&&!this.isMouseDown&&r&&this.close();!t.open&&this.state.open?(this.setOpenDirection(),this.scrollSelectedItemIntoView()):t.open&&this.state.open,t.selectedIndex!==this.state.selectedIndex&&this.scrollSelectedItemIntoView()},n.getDropdownMenuAriaOptions=function(){var e=this.props,t=e.search,n=e.multiple,r={};return t&&(r["aria-multiselectable"]=n,r.role="listbox"),r},n.render=function(){var e=this.props,n=e.basic,r=e.button,s=e.className,o=e.compact,a=e.disabled,c=e.error,l=e.fluid,u=e.floating,h=e.icon,d=e.inline,f=e.item,p=e.labeled,m=e.loading,g=e.multiple,v=e.pointing,y=e.search,w=e.selection,b=e.scrolling,_=e.simple,E=e.trigger,I=this.state,T=I.focus,S=I.open,k=I.upward,C=mi("ui",yi(S,"active visible"),yi(a,"disabled"),yi(c,"error"),yi(m,"loading"),yi(n,"basic"),yi(r,"button"),yi(o,"compact"),yi(l,"fluid"),yi(u,"floating"),yi(d,"inline"),yi(p,"labeled"),yi(f,"item"),yi(g,"multiple"),yi(y,"search"),yi(w,"selection"),yi(_,"simple"),yi(b,"scrolling"),yi(k,"upward"),bi(v,"pointing"),"dropdown",s),x=Si(t,this.props),N=ki(t,this.props),A=this.getDropdownAriaOptions(N,this.props);return i.createElement(hc,{innerRef:this.ref},i.createElement(N,xe({},x,A,{className:C,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onChange:this.handleChange,tabIndex:this.computeTabIndex()}),this.renderLabels(),this.renderSearchInput(),this.renderSearchSizer(),E||this.renderText(),po.create(h,{overrideProps:this.handleIconOverrides,autoGenerateKey:!1}),this.renderMenu(),S&&i.createElement(Ga(),{name:"keydown",on:this.closeOnEscape}),S&&i.createElement(Ga(),{name:"click",on:this.closeOnDocumentClick}),T&&i.createElement(Ga(),{name:"keydown",on:this.removeItemOnBackspace})))},t}(Pi);function qO(e){var t=e.control,n=Si(qO,e),r=ki(qO,e);return i.createElement(r,xe({},n,{control:t}))}BO.handledProps=["additionLabel","additionPosition","allowAdditions","as","basic","button","children","className","clearable","closeOnBlur","closeOnChange","closeOnEscape","compact","deburr","defaultOpen","defaultSearchQuery","defaultSelectedLabel","defaultUpward","defaultValue","direction","disabled","error","floating","fluid","header","icon","inline","item","labeled","lazyLoad","loading","minCharacters","multiple","noResultsMessage","onAddItem","onBlur","onChange","onClick","onClose","onFocus","onLabelClick","onMouseDown","onOpen","onSearchChange","open","openOnFocus","options","placeholder","pointing","renderLabel","scrolling","search","searchInput","searchQuery","selectOnBlur","selectOnNavigation","selectedLabel","selection","simple","tabIndex","text","trigger","upward","value","wrapSelection"],BO.propTypes={},BO.defaultProps={additionLabel:"Add ",additionPosition:"top",closeOnBlur:!0,closeOnEscape:!0,deburr:!1,icon:"dropdown",minCharacters:1,noResultsMessage:"No results found.",openOnFocus:!0,renderLabel:zO,searchInput:"text",selectOnBlur:!0,selectOnNavigation:!0,wrapSelection:!0},BO.autoControlledProps=["open","searchQuery","selectedLabel","value","upward"],BO.Divider=_O,BO.Header=SO,BO.Item=IO,BO.Menu=CO,BO.SearchInput=NO,BO.Text=RO,qO.handledProps=["as","control"],qO.propTypes={},qO.defaultProps={as:CD,control:BO};const KO=qO;function GO(e){var t=e.children,n=e.className,r=e.grouped,s=e.inline,o=e.unstackable,a=e.widths,c=mi(yi(r,"grouped"),yi(s,"inline"),yi(o,"unstackable"),Ti(a,null,!0),"fields",n),l=Si(GO,e),u=ki(GO,e);return i.createElement(u,xe({},l,{className:c}),t)}GO.handledProps=["as","children","className","grouped","inline","unstackable","widths"],GO.propTypes={};const HO=GO;function WO(e){var t=e.control,n=Si(WO,e),r=ki(WO,e);return i.createElement(r,xe({},n,{control:t}))}WO.handledProps=["as","control"],WO.propTypes={},WO.defaultProps={as:CD,control:Vc};const QO=WO;function JO(e){var t=e.control,n=Si(JO,e),r=ki(JO,e);return i.createElement(r,xe({},n,{control:t}))}JO.handledProps=["as","control"],JO.propTypes={},JO.defaultProps={as:CD,control:SD};const $O=JO;function YO(e){return i.createElement(BO,xe({},e,{selection:!0}))}YO.handledProps=["options"],YO.propTypes={},YO.Divider=BO.Divider,YO.Header=BO.Header,YO.Item=BO.Item,YO.Menu=BO.Menu;const XO=YO;function ZO(e){var t=e.control,n=e.options,r=Si(ZO,e),s=ki(ZO,e);return i.createElement(s,xe({},r,{control:t,options:n}))}ZO.handledProps=["as","control","options"],ZO.propTypes={},ZO.defaultProps={as:CD,control:XO};const eL=ZO;var tL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).ref=(0,i.createRef)(),t.focus=function(){return t.ref.current.focus()},t.handleChange=function(e){var n=Ur(e,"target.value");fi(t.props,"onChange",e,xe({},t.props,{value:n}))},t.handleInput=function(e){var n=Ur(e,"target.value");fi(t.props,"onInput",e,xe({},t.props,{value:n}))},t}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.rows,r=e.value,s=Si(t,this.props),o=ki(t,this.props);return i.createElement(hc,{innerRef:this.ref},i.createElement(o,xe({},s,{onChange:this.handleChange,onInput:this.handleInput,rows:n,value:r})))},t}(i.Component);tL.handledProps=["as","onChange","onInput","rows","value"],tL.propTypes={},tL.defaultProps={as:"textarea",rows:3};const nL=tL;function rL(e){var t=e.control,n=Si(rL,e),r=ki(rL,e);return i.createElement(r,xe({},n,{control:t}))}rL.handledProps=["as","control"],rL.propTypes={},rL.defaultProps={as:CD,control:nL};const iL=rL;var sL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleSubmit=function(e){"string"!==typeof t.props.action&&fi(e,"preventDefault");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];fi.apply(void 0,[t.props,"onSubmit",e,t.props].concat(r))},t}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.action,r=e.children,s=e.className,o=e.error,a=e.inverted,c=e.loading,l=e.reply,u=e.size,h=e.success,d=e.unstackable,f=e.warning,p=e.widths,m=mi("ui",u,yi(o,"error"),yi(a,"inverted"),yi(c,"loading"),yi(l,"reply"),yi(h,"success"),yi(d,"unstackable"),yi(f,"warning"),Ti(p,null,!0),"form",s),g=Si(t,this.props),v=ki(t,this.props);return i.createElement(v,xe({},g,{action:n,className:m,onSubmit:this.handleSubmit}),r)},t}(i.Component);sL.handledProps=["action","as","children","className","error","inverted","loading","onSubmit","reply","size","success","unstackable","warning","widths"],sL.propTypes={},sL.defaultProps={as:"form"},sL.Field=CD,sL.Button=ND,sL.Checkbox=RD,sL.Dropdown=KO,sL.Group=HO,sL.Input=QO,sL.Radio=$O,sL.Select=eL,sL.TextArea=iL;const oL=sL;function aL(e){var t=e.children,n=e.className,r=e.content,s=mi("content",n),o=Si(aL,e),a=ki(aL,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}aL.handledProps=["as","children","className","content"],aL.propTypes={};const cL=aL;function lL(e){var t=e.children,n=e.className,r=e.content,s=mi("header",n),o=Si(lL,e),a=ki(lL,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}lL.handledProps=["as","children","className","content"],lL.propTypes={},lL.create=ns(lL,(function(e){return{content:e}}));const uL=lL;function hL(e){var t=e.children,n=e.className,r=e.content,s=mi("content",n),o=Si(hL,e),a=ki(hL,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}hL.handledProps=["as","children","className","content"],hL.propTypes={},hL.defaultProps={as:"li"},hL.create=ns(hL,(function(e){return{content:e}}));const dL=hL;function fL(e){var t=e.children,n=e.className,r=e.items,s=mi("list",n),o=Si(fL,e),a=ki(fL,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?Xr(r,dL.create):t)}fL.handledProps=["as","children","className","items"],fL.propTypes={},fL.defaultProps={as:"ul"},fL.create=ns(fL,(function(e){return{items:e}}));const pL=fL;var mL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleDismiss=function(e){var n=t.props.onDismiss;n&&n(e,t.props)},t}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.attached,r=e.children,s=e.className,o=e.color,a=e.compact,c=e.content,l=e.error,u=e.floating,h=e.header,d=e.hidden,f=e.icon,p=e.info,m=e.list,g=e.negative,v=e.onDismiss,y=e.positive,w=e.size,b=e.success,_=e.visible,E=e.warning,I=mi("ui",o,w,yi(a,"compact"),yi(l,"error"),yi(u,"floating"),yi(d,"hidden"),yi(f,"icon"),yi(p,"info"),yi(g,"negative"),yi(y,"positive"),yi(b,"success"),yi(_,"visible"),yi(E,"warning"),bi(n,"attached"),"message",s),T=v&&i.createElement(po,{name:"close",onClick:this.handleDismiss}),S=Si(t,this.props),k=ki(t,this.props);return Ai(r)?i.createElement(k,xe({},S,{className:I}),T,po.create(f,{autoGenerateKey:!1}),(!es(h)||!es(c)||!es(m))&&i.createElement(cL,null,uL.create(h,{autoGenerateKey:!1}),pL.create(m,{autoGenerateKey:!1}),os(c,{autoGenerateKey:!1}))):i.createElement(k,xe({},S,{className:I}),T,r)},t}(i.Component);mL.handledProps=["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"],mL.propTypes={},mL.Content=cL,mL.Header=uL,mL.List=pL,mL.Item=dL;const gL=function(){const e=ee(),[t,n]=i.useState("register"),[r,s]=i.useState(""),[o,a]=i.useState(""),[c,l]=i.useState(""),[u,h]=i.useState(!1);return(0,pD.jsxs)(vD,{children:[(0,pD.jsxs)(wo,{widths:"2",children:[(0,pD.jsx)(wo.Item,{active:"register"===t,onClick:()=>{l(""),n("register")},children:"\u8a3b\u518a"}),(0,pD.jsx)(wo.Item,{active:"signin"===t,onClick:()=>{l(""),n("signin")},children:"\u767b\u5165"})]}),(0,pD.jsxs)(oL,{onSubmit:function(){h(!0),"register"===t?fD.auth().createUserWithEmailAndPassword(r,o).then((()=>{e("/"),h(!1)})).catch((e=>{switch(e.code){case"auth/email-already-in-use":l("\u4fe1\u7bb1\u5df2\u5b58\u5728");break;case"auth/invalid-email":l("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/weak-password":l("\u5bc6\u78bc\u5f37\u5ea6\u4e0d\u8db3")}h(!1)})):"signin"===t&&fD.auth().signInWithEmailAndPassword(r,o).then((()=>{e("/"),h(!1)})).catch((e=>{"auth/invalid-email"==e.code?l("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba"):l("\u4fe1\u7bb1\u4e0d\u5b58\u5728\u6216\u5bc6\u78bc\u932f\u8aa4"),h(!1)}))},children:[(0,pD.jsx)(oL.Input,{label:"\u4fe1\u7bb1",value:r,onChange:e=>s(e.target.value),placeholder:"\u8acb\u8f38\u5165\u4fe1\u7bb1"}),(0,pD.jsx)(oL.Input,{label:"\u5bc6\u78bc",value:o,onChange:e=>a(e.target.value),placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc",type:"password"}),c&&(0,pD.jsx)(mL,{negative:!0,children:c}),(0,pD.jsxs)(oL.Button,{loading:u,children:["register"===t&&"\u8a3b\u518a","signin"===t&&"\u767b\u5165"]})]})]})};function vL(e){var t=e.children,n=e.className,r=e.computer,s=e.color,o=e.floated,a=e.largeScreen,c=e.mobile,l=e.only,u=e.stretched,h=e.tablet,d=e.textAlign,f=e.verticalAlign,p=e.widescreen,m=e.width,g=mi(s,yi(u,"stretched"),_i(l,"only"),Ei(d),wi(o,"floated"),Ii(f),Ti(r,"wide computer"),Ti(a,"wide large screen"),Ti(c,"wide mobile"),Ti(h,"wide tablet"),Ti(p,"wide widescreen"),Ti(m,"wide"),"column",n),v=Si(vL,e),y=ki(vL,e);return i.createElement(y,xe({},v,{className:g}),t)}vL.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],vL.propTypes={},vL.create=ns(vL,(function(e){return{children:e}}));const yL=vL;function wL(e){var t=e.centered,n=e.children,r=e.className,s=e.color,o=e.columns,a=e.divided,c=e.only,l=e.reversed,u=e.stretched,h=e.textAlign,d=e.verticalAlign,f=mi(s,yi(t,"centered"),yi(a,"divided"),yi(u,"stretched"),_i(c,"only"),_i(l,"reversed"),Ei(h),Ii(d),Ti(o,"column",!0),"row",r),p=Si(wL,e),m=ki(wL,e);return i.createElement(m,xe({},p,{className:f}),n)}wL.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],wL.propTypes={};const bL=wL;function _L(e){var t=e.celled,n=e.centered,r=e.children,s=e.className,o=e.columns,a=e.container,c=e.divided,l=e.doubling,u=e.inverted,h=e.padded,d=e.relaxed,f=e.reversed,p=e.stackable,m=e.stretched,g=e.textAlign,v=e.verticalAlign,y=mi("ui",yi(n,"centered"),yi(a,"container"),yi(l,"doubling"),yi(u,"inverted"),yi(p,"stackable"),yi(m,"stretched"),bi(t,"celled"),bi(c,"divided"),bi(h,"padded"),bi(d,"relaxed"),_i(f,"reversed"),Ei(g),Ii(v),Ti(o,"column",!0),"grid",s),w=Si(_L,e),b=ki(_L,e);return i.createElement(b,xe({},w,{className:y}),r)}_L.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],_L.Column=yL,_L.Row=bL,_L.propTypes={};const EL=_L;function IL(e){var t=e.children,n=e.className,r=e.content,s=mi("header",n),o=Si(IL,e),a=ki(IL,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}IL.handledProps=["as","children","className","content"],IL.propTypes={},IL.create=ns(IL,(function(e){return{content:e}}));const TL=IL;function SL(e){var t=e.children,n=e.className,r=e.content,s=mi("description",n),o=Si(SL,e),a=ki(SL,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}SL.handledProps=["as","children","className","content"],SL.propTypes={},SL.create=ns(SL,(function(e){return{content:e}}));const kL=SL;function CL(e){var t=e.children,n=e.className,r=e.content,s=mi("extra",n),o=Si(CL,e),a=ki(CL,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}CL.handledProps=["as","children","className","content"],CL.propTypes={},CL.create=ns(CL,(function(e){return{content:e}}));const xL=CL;function NL(e){var t=e.children,n=e.className,r=e.content,s=mi("meta",n),o=Si(NL,e),a=ki(NL,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}NL.handledProps=["as","children","className","content"],NL.propTypes={},NL.create=ns(NL,(function(e){return{content:e}}));const AL=NL;function RL(e){var t=e.children,n=e.className,r=e.content,s=e.description,o=e.extra,a=e.header,c=e.meta,l=e.verticalAlign,u=mi(Ii(l),"content",n),h=Si(RL,e),d=ki(RL,e);return Ai(t)?i.createElement(d,xe({},h,{className:u}),TL.create(a,{autoGenerateKey:!1}),AL.create(c,{autoGenerateKey:!1}),kL.create(s,{autoGenerateKey:!1}),xL.create(o,{autoGenerateKey:!1}),r):i.createElement(d,xe({},h,{className:u}),t)}RL.handledProps=["as","children","className","content","description","extra","header","meta","verticalAlign"],RL.propTypes={};const PL=RL;function DL(e){var t=e.children,n=e.className,r=e.content,s=e.divided,o=e.items,a=e.link,c=e.relaxed,l=e.unstackable,u=mi("ui",yi(s,"divided"),yi(a,"link"),yi(l,"unstackable"),bi(c,"relaxed"),"items",n),h=Si(DL,e),d=ki(DL,e);if(!Ai(t))return i.createElement(d,xe({},h,{className:u}),t);if(!Ai(r))return i.createElement(d,xe({},h,{className:u}),r);var f=Xr(o,(function(e){var t=e.childKey,n=bo(e,["childKey"]),r=null!=t?t:[n.content,n.description,n.header,n.meta].join("-");return i.createElement(UL,xe({},n,{key:r}))}));return i.createElement(d,xe({},h,{className:u}),f)}DL.handledProps=["as","children","className","content","divided","items","link","relaxed","unstackable"],DL.propTypes={};const OL=DL;function LL(e){var t=e.size,n=Si(LL,e);return i.createElement(Sc,xe({},n,{size:t,ui:!!t,wrapped:!0}))}LL.handledProps=["size"],LL.propTypes={},LL.create=ns(LL,(function(e){return{src:e}}));const ML=LL;function FL(e){var t=e.children,n=e.className,r=e.content,s=e.description,o=e.extra,a=e.header,c=e.image,l=e.meta,u=mi("item",n),h=Si(FL,e),d=ki(FL,e);return Ai(t)?i.createElement(d,xe({},h,{className:u}),ML.create(c,{autoGenerateKey:!1}),i.createElement(PL,{content:r,description:s,extra:o,header:a,meta:l})):i.createElement(d,xe({},h,{className:u}),t)}FL.handledProps=["as","children","className","content","description","extra","header","image","meta"],FL.Content=PL,FL.Description=kL,FL.Extra=xL,FL.Group=OL,FL.Header=TL,FL.Image=ML,FL.Meta=AL,FL.propTypes={};const UL=FL;function jL(e){var t=e.children,n=e.className,r=e.content,s=mi(n,"description"),o=Si(jL,e),a=ki(jL,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}jL.handledProps=["as","children","className","content"],jL.propTypes={},jL.create=ns(jL,(function(e){return{content:e}}));const VL=jL;function zL(e){var t=e.children,n=e.className,r=e.content,s=mi("header",n),o=Si(zL,e),a=ki(zL,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}zL.handledProps=["as","children","className","content"],zL.propTypes={},zL.create=ns(zL,(function(e){return{content:e}}));const BL=zL;function qL(e){var t=e.children,n=e.className,r=e.content,s=e.description,o=e.floated,a=e.header,c=e.verticalAlign,l=mi(wi(o,"floated"),Ii(c),"content",n),u=Si(qL,e),h=ki(qL,e);return Ai(t)?i.createElement(h,xe({},u,{className:l}),BL.create(a),VL.create(s),r):i.createElement(h,xe({},u,{className:l}),t)}qL.handledProps=["as","children","className","content","description","floated","header","verticalAlign"],qL.propTypes={},qL.create=ns(qL,(function(e){return{content:e}}));const KL=qL;function GL(e){var t=e.className,n=e.verticalAlign,r=mi(Ii(n),t),s=Si(GL,e);return i.createElement(po,xe({},s,{className:r}))}GL.handledProps=["className","verticalAlign"],GL.propTypes={},GL.create=ns(GL,(function(e){return{name:e}}));const HL=GL;var WL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||fi(t.props,"onClick",e,t.props)},t}return Ae(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,s=e.className,o=e.content,a=e.description,c=e.disabled,l=e.header,u=e.icon,h=e.image,d=e.value,f=ki(t,this.props),p=mi(yi(n,"active"),yi(c,"disabled"),yi("li"!==f,"item"),s),m=Si(t,this.props),g="li"===f?{value:d}:{"data-value":d};if(!Ai(r))return i.createElement(f,xe({},g,{role:"listitem",className:p,onClick:this.handleClick},m),r);var v=HL.create(u,{autoGenerateKey:!1}),y=Sc.create(h,{autoGenerateKey:!1});if(!(0,i.isValidElement)(o)&&$i(o))return i.createElement(f,xe({},g,{role:"listitem",className:p,onClick:this.handleClick},m),v||y,KL.create(o,{autoGenerateKey:!1,defaultProps:{header:l,description:a}}));var w=BL.create(l,{autoGenerateKey:!1}),b=VL.create(a,{autoGenerateKey:!1});return v||y?i.createElement(f,xe({},g,{role:"listitem",className:p,onClick:this.handleClick},m),v||y,(o||w||b)&&i.createElement(KL,null,w,b,o)):i.createElement(f,xe({},g,{role:"listitem",className:p,onClick:this.handleClick},m),w,b,o)},t}(i.Component);WL.handledProps=["active","as","children","className","content","description","disabled","header","icon","image","onClick","value"],WL.propTypes={},WL.create=ns(WL,(function(e){return{content:e}}));const QL=WL;function JL(e){var t=e.children,n=e.className,r=e.content,s=Si(JL,e),o=ki(JL,e),a=mi(yi("ul"!==o&&"ol"!==o,"list"),n);return i.createElement(o,xe({},s,{className:a}),Ai(t)?r:t)}JL.handledProps=["as","children","className","content"],JL.propTypes={};const $L=JL;var YL=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){fi(e,"onClick",n,r),fi(t.props,"onItemClick",n,r)}}},t}return Ae(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.animated,s=n.bulleted,o=n.celled,a=n.children,c=n.className,l=n.content,u=n.divided,h=n.floated,d=n.horizontal,f=n.inverted,p=n.items,m=n.link,g=n.ordered,v=n.relaxed,y=n.selection,w=n.size,b=n.verticalAlign,_=mi("ui",w,yi(r,"animated"),yi(s,"bulleted"),yi(o,"celled"),yi(u,"divided"),yi(d,"horizontal"),yi(f,"inverted"),yi(m,"link"),yi(g,"ordered"),yi(y,"selection"),bi(v,"relaxed"),wi(h,"floated"),Ii(b),"list",c),E=Si(t,this.props),I=ki(t,this.props);return Ai(a)?Ai(l)?i.createElement(I,xe({role:"list",className:_},E),Xr(p,(function(t){return QL.create(t,{overrideProps:e.handleItemOverrides})}))):i.createElement(I,xe({role:"list",className:_},E),l):i.createElement(I,xe({role:"list",className:_},E),a)},t}(i.Component);YL.handledProps=["animated","as","bulleted","celled","children","className","content","divided","floated","horizontal","inverted","items","link","onItemClick","ordered","relaxed","selection","size","verticalAlign"],YL.propTypes={},YL.Content=KL,YL.Description=VL,YL.Header=BL,YL.Icon=HL,YL.Item=QL,YL.List=$L;const XL=YL;const ZL=function(){const[e,t]=i.useState([]);return i.useEffect((()=>{fD.firestore().collection("topics").get().then((e=>{const n=e.docs.map((e=>e.data()));t(n)}))}),[]),(0,pD.jsx)(XL,{animated:!0,selection:!0,children:e.map((e=>(0,pD.jsxs)(XL.Item,{children:[e.name," "]},e.name)))})};const eM=function(){const[e,t]=i.useState([]);return i.useEffect((()=>{fD.firestore().collection("posts").get().then((e=>{const n=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));t(n)}))}),[]),(0,pD.jsx)(vD,{children:(0,pD.jsx)(EL,{children:(0,pD.jsxs)(EL.Row,{children:[(0,pD.jsxs)(EL.Column,{width:3,children:[" ",(0,pD.jsx)(ZL,{})," "]}),(0,pD.jsx)(EL.Column,{width:10,children:(0,pD.jsx)(UL.Group,{children:e.map((e=>{var t;return(0,pD.jsxs)(UL,{as:Se,to:"/posts/".concat(e.id),children:[(0,pD.jsx)(UL.Image,{src:e.imageUrl||"https://upload.wikimedia.org/wikipedia/commons/7/78/Image.jpg",size:"small"}),(0,pD.jsxs)(UL.Content,{children:[(0,pD.jsxs)(UL.Meta,{children:[e.author.photoURL?(0,pD.jsx)(Sc,{src:e.author.photoURL}):(0,pD.jsx)(po,{name:"user circle"}),e.topic,"\u3002",e.author.displayName||"\u4f7f\u7528\u8005"]}),(0,pD.jsxs)(UL.Header,{children:[" ",e.title," "]}),(0,pD.jsxs)(UL.Description,{children:[" ",e.content," "]}),(0,pD.jsxs)(UL.Extra,{children:["\u7559\u8a00 ",e.commentsCount||0,"\u3002\u8b9a ",(null===(t=e.likedBy)||void 0===t?void 0:t.length)||0]})]})]},e.id)}))})}),(0,pD.jsx)(EL.Column,{width:3,children:"789"})]})})})};function tM(e){var t=e.children,n=e.className,r=e.content,s=mi("sub header",n),o=Si(tM,e),a=ki(tM,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}tM.handledProps=["as","children","className","content"],tM.propTypes={},tM.create=ns(tM,(function(e){return{content:e}}));const nM=tM;function rM(e){var t=e.children,n=e.className,r=e.content,s=mi("content",n),o=Si(rM,e),a=ki(rM,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}rM.handledProps=["as","children","className","content"],rM.propTypes={};const iM=rM;function sM(e){var t=e.attached,n=e.block,r=e.children,s=e.className,o=e.color,a=e.content,c=e.disabled,l=e.dividing,u=e.floated,h=e.icon,d=e.image,f=e.inverted,p=e.size,m=e.sub,g=e.subheader,v=e.textAlign,y=mi("ui",o,p,yi(n,"block"),yi(c,"disabled"),yi(l,"dividing"),wi(u,"floated"),yi(!0===h,"icon"),yi(!0===d,"image"),yi(f,"inverted"),yi(m,"sub"),bi(t,"attached"),Ei(v),"header",s),w=Si(sM,e),b=ki(sM,e);if(!Ai(r))return i.createElement(b,xe({},w,{className:y}),r);var _=po.create(h,{autoGenerateKey:!1}),E=Sc.create(d,{autoGenerateKey:!1}),I=nM.create(g,{autoGenerateKey:!1});return _||E?i.createElement(b,xe({},w,{className:y}),_||E,(a||I)&&i.createElement(iM,null,a,I)):i.createElement(b,xe({},w,{className:y}),a,I)}sM.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],sM.propTypes={},sM.Content=iM,sM.Subheader=nM;const oM=sM,aM="firebasestorage.googleapis.com",cM="storageBucket";class lM extends gl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(dM(e),"Firebase Storage: ".concat(t," (").concat(dM(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lM.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var uM,hM;function dM(e){return"storage/"+e}function fM(){return new lM(uM.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function pM(){return new lM(uM.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mM(){return new lM(uM.CANCELED,"User canceled the upload/download.")}function gM(){return new lM(uM.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vM(e){return new lM(uM.INVALID_ARGUMENT,e)}function yM(){return new lM(uM.APP_DELETED,"The Firebase app was deleted.")}function wM(e){return new lM(uM.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bM(e,t){return new lM(uM.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function _M(e){throw new lM(uM.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(uM||(uM={}));class EM{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=EM.makeFromUrl(e,t)}catch(kU){return new EM(e,"")}if(""===n.path)return n;throw r=e,new lM(uM.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===aM?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let c=0;c<a.length;c++){const t=a[c],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new EM(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new lM(uM.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class IM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function TM(e){return"string"===typeof e||e instanceof String}function SM(e){return kM()&&e instanceof Blob}function kM(){return"undefined"!==typeof Blob}function CM(e,t,n,r){if(r<t)throw vM("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw vM("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function xM(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function NM(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function AM(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(hM||(hM={}));class RM{constructor(e,t,n,r,i,s,o,a,c,l,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new PM(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===hM.NO_ERROR,i=n.getStatus();if(!t||AM(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===hM.ABORT;return void e(!1,new PM(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new PM(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(kU){r(kU)}else if(null!==i){const e=fM();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?yM():mM())}else{r(pM())}};this.canceled_?t(0,new PM(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(c()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class PM{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function DM(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function OM(){const e=DM();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(kM())return new Blob(n);throw new lM(uM.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function LM(e){if("undefined"===typeof atob)throw t="base-64",new lM(uM.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const MM={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class FM{constructor(e,t){this.data=e,this.contentType=t||null}}function UM(e,t){switch(e){case MM.RAW:return new FM(jM(t));case MM.BASE64:case MM.BASE64URL:return new FM(VM(e,t));case MM.DATA_URL:return new FM(function(e){const t=new zM(e);return t.base64?VM(MM.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(kU){throw bM(MM.DATA_URL,"Malformed data URL.")}return jM(t)}(t.rest)}(t),new zM(t).contentType)}throw fM()}function jM(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function VM(e,t){switch(e){case MM.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw bM(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case MM.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw bM(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=LM(t)}catch(kU){if(kU.message.includes("polyfill"))throw kU;throw bM(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class zM{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw bM(MM.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class BM{constructor(e,t){let n=0,r="";SM(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(SM(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new BM(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new BM(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(kM()){const e=t.map((e=>e instanceof BM?e.data_:e));return new BM(OM.apply(null,e))}{const e=t.map((e=>TM(e)?UM(MM.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new BM(r,!0)}}uploadData(){return this.data_}}function qM(e){let t;try{t=JSON.parse(e)}catch(kU){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function KM(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function GM(e,t){return t}class HM{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||GM}}let WM=null;function QM(){if(WM)return WM;const e=[];e.push(new HM("bucket")),e.push(new HM("generation")),e.push(new HM("metageneration")),e.push(new HM("name","fullPath",!0));const t=new HM("name");t.xform=function(e,t){return function(e){return!TM(e)||e.length<2?e:KM(e)}(t)},e.push(t);const n=new HM("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new HM("timeCreated")),e.push(new HM("updated")),e.push(new HM("md5Hash",null,!0)),e.push(new HM("cacheControl",null,!0)),e.push(new HM("contentDisposition",null,!0)),e.push(new HM("contentEncoding",null,!0)),e.push(new HM("contentLanguage",null,!0)),e.push(new HM("contentType",null,!0)),e.push(new HM("metadata","customMetadata",!0)),WM=e,WM}function JM(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new EM(n,r);return t._makeStorageReference(i)}})}(r,e),r}function $M(e,t,n){const r=qM(t);if(null===r)return null;return JM(e,r,n)}function YM(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const XM="prefixes",ZM="items";function eF(e,t,n){const r=qM(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[XM])for(const i of n[XM]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new EM(t,n));r.prefixes.push(s)}if(n[ZM])for(const i of n[ZM]){const n=e._makeStorageReference(new EM(t,i.name));r.items.push(n)}return r}(e,t,r)}class tF{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function nF(e){if(!e)throw fM()}function rF(e,t){return function(n,r){const i=$M(e,r,t);return nF(null!==i),i}}function iF(e,t){return function(n,r){const i=$M(e,r,t);return nF(null!==i),function(e,t,n,r){const i=qM(t);if(null===i)return null;if(!TM(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return xM("/b/"+o(i)+"/o/"+o(s),n,r)+NM({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function sF(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new lM(uM.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new lM(uM.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new lM(uM.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new lM(uM.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function oF(e){const t=sF(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new lM(uM.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function aF(e,t,n){const r=xM(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new tF(r,"GET",rF(e,n),i);return s.errorHandler=oF(t),s}function cF(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=xM(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,c=new tF(o,"GET",function(e,t){return function(n,r){const i=eF(e,t,r);return nF(null!==i),i}}(e,t.bucket),a);return c.urlParams=s,c.errorHandler=sF(t),c}function lF(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function uF(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const c=lF(t,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+YM(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=BM.getBlob(l,r,u);if(null===h)throw gM();const d={name:c.fullPath},f=xM(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new tF(f,"POST",rF(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=sF(t),m}class hF{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function dF(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(kU){nF(!1)}return nF(!!n&&-1!==(t||["active"]).indexOf(n)),n}const fF=262144;function pF(e,t,n,r,i,s,o,a){const c=new hF(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new lM(uM.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const l=c.total-c.current;let u=l;i>0&&(u=Math.min(u,i));const h=c.current,d=h+u;let f="";f=0===u?"finalize":l===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(c.current)},m=r.slice(h,d);if(null===m)throw gM();const g=t.maxUploadRetryTime,v=new tF(n,"POST",(function(e,n){const i=dF(e,["active","final"]),o=c.current+u,a=r.size();let l;return l="final"===i?rF(t,s)(e,n):null,new hF(o,a,"final"===i,l)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=sF(e),v}const mF={STATE_CHANGED:"state_changed"},gF={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vF(e){switch(e){case"running":case"pausing":case"canceling":return gF.RUNNING;case"paused":return gF.PAUSED;case"success":return gF.SUCCESS;case"canceled":return gF.CANCELED;default:return gF.ERROR}}class yF{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function wF(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let bF=null;class _F{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hM.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=hM.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=hM.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw _M("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _M("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _M("cannot .getStatus() before sending");try{return this.xhr_.status}catch(kU){return-1}}getResponse(){if(!this.sent_)throw _M("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _M("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class EF extends _F{initXhr(){this.xhr_.responseType="text"}}function IF(){return bF?bF():new EF}class TF{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=QM(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(uM.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(AM(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=pM()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(uM.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=lF(t,r,i),a={name:o.fullPath},c=xM(s,e.host,e._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=YM(o,n),h=e.maxUploadRetryTime,d=new tF(c,"POST",(function(e){let t;dF(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(kU){nF(!1)}return nF(TM(t)),t}),h);return d.urlParams=a,d.headers=l,d.body=u,d.errorHandler=sF(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,IF,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new tF(n,"POST",(function(e){const t=dF(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(kU){nF(!1)}n||nF(!1);const i=Number(n);return nF(!isNaN(i)),new hF(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=sF(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,IF,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=fF*this._chunkMultiplier,t=new hF(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=pF(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(kU){return this._error=kU,void this._transition("error")}const o=this._ref.storage._makeRequest(s,IF,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(fF*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=aF(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,IF,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=uF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,IF,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=mM(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=vF(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new yF(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(vF(this._state)){case gF.SUCCESS:wF(this._resolve.bind(null,this.snapshot))();break;case gF.CANCELED:case gF.ERROR:wF(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(vF(this._state)){case gF.RUNNING:case gF.PAUSED:e.next&&wF(e.next.bind(e,this.snapshot))();break;case gF.SUCCESS:e.complete&&wF(e.complete.bind(e))();break;default:e.error&&wF(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class SF{constructor(e,t){this._service=e,this._location=t instanceof EM?t:EM.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new SF(e,t)}get root(){const e=new EM(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KM(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new EM(this._location.bucket,e);return new SF(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw wM(e)}}function kF(e){const t={prefixes:[],items:[]};return CF(e,t).then((()=>t))}async function CF(e,t,n){const r={pageToken:n},i=await xF(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await CF(e,t,i.nextPageToken)}function xF(e,t){null!=t&&"number"===typeof t.maxResults&&CM("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=cF(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,IF)}function NF(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=xM(t.fullServerUrl(),e.host,e._protocol),s=YM(n,r),o=e.maxOperationRetryTime,a=new tF(i,"PATCH",rF(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=oF(t),a}(e.storage,e._location,t,QM());return e.storage.makeRequestWithTokens(n,IF)}function AF(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=xM(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new tF(r,"GET",iF(e,n),i);return s.errorHandler=oF(t),s}(e.storage,e._location,QM());return e.storage.makeRequestWithTokens(t,IF).then((e=>{if(null===e)throw new lM(uM.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function RF(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=xM(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new tF(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=oF(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,IF)}function PF(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new EM(e._location.bucket,n);return new SF(e.storage,r)}function DF(e,t){if(e instanceof MF){const n=e;if(null==n._bucket)throw new lM(uM.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cM+"' property when initializing the app?");const r=new SF(n,n._bucket);return null!=t?DF(r,t):r}return void 0!==t?PF(e,t):e}function OF(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof MF)return new SF(e,t);throw vM("To use ref(service, url), the first argument must be a Storage instance.")}return DF(e,t)}function LF(e,t){const n=null===t||void 0===t?void 0:t[cM];return null==n?null:EM.makeFromBucketSpec(n,e)}class MF{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=aM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?EM.makeFromBucketSpec(r,this._host):LF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=EM.makeFromBucketSpec(this._url,e):this._bucket=LF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new SF(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new IM(yM());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=NM(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new RM(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const FF="@firebase/storage",UF="0.12.4",jF="storage";function VF(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new TF(e,new BM(t),n)}(e=xl(e),t,n)}function zF(e){return function(e){e._throwIfRoot("getMetadata");const t=aF(e.storage,e._location,QM());return e.storage.makeRequestWithTokens(t,IF)}(e=xl(e))}function BF(e,t){return OF(e=xl(e),t)}function qF(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:al(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function KF(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new MF(r,i,s,n,Wu)}Uu(new Nl(jF,KF,"PUBLIC").setMultipleInstances(!0)),Zu(FF,UF,""),Zu(FF,UF,"esm2017");class GF{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class HF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new GF(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new GF(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new GF(e,this,this._ref)):{next:t.next?e=>t.next(new GF(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class WF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new QF(e,this._service)))}get items(){return this._delegate.items.map((e=>new QF(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class QF{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return PF(e,t)}(this._delegate,e);return new QF(t,this.storage)}get root(){return new QF(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new QF(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new HF(VF(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MM.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=UM(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new HF(new TF(this._delegate,new BM(r.data,!0),i),this)}listAll(){return function(e){return kF(e=xl(e))}(this._delegate).then((e=>new WF(e,this.storage)))}list(e){return function(e,t){return xF(e=xl(e),t)}(this._delegate,e||void 0).then((e=>new WF(e,this.storage)))}getMetadata(){return zF(this._delegate)}updateMetadata(e){return function(e,t){return NF(e=xl(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return AF(e=xl(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return RF(e=xl(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw wM(e)}}class JF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if($F(e))throw vM("ref() expected a child path but got a URL, use refFromURL instead.");return new QF(BF(this._delegate,e),this)}refFromURL(e){if(!$F(e))throw vM("refFromURL() expected a full URL but got a child path, use ref() instead.");try{EM.makeFromUrl(e,this._delegate.host)}catch(kU){throw vM("refFromUrl() expected a valid full URL but got an invalid one.")}return new QF(BF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qF(this._delegate,e,t,n)}}function $F(e){return/^[A-Za-z]+:\/\//.test(e)}function YF(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new JF(r,i)}!function(e){const t={TaskState:gF,TaskEvent:mF,StringFormat:MM,Storage:JF,Reference:QF};e.INTERNAL.registerComponent(new Nl("storage-compat",YF,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.7")}(yh);const XF=function(){const e=ee(),[t,n]=i.useState(""),[r,s]=i.useState(""),[o,a]=i.useState([]),[c,l]=i.useState(""),[u,h]=i.useState(null),[d,f]=i.useState(!1);(0,i.useEffect)((()=>{fD.firestore().collection("topics").get().then((e=>{const t=e.docs.map((e=>e.data()));a(t)}))}),[]);const p=o.map((e=>({text:e.name,value:e.name}))),m=u?URL.createObjectURL(u):"https://upload.wikimedia.org/wikipedia/commons/7/78/Image.jpg";return(0,pD.jsxs)(vD,{children:[(0,pD.jsx)(oM,{children:"\u767c\u8868\u6587\u7ae0"}),(0,pD.jsxs)(oL,{onSubmit:function(){f(!0);const n=fD.firestore().collection("posts").doc(),i=fD.storage().ref("post-image/"+n.id),s={contentType:u.type};i.put(u,s).then((()=>{i.getDownloadURL().then((i=>{n.set({title:t,content:r,topic:c,createdAt:fD.firestore.Timestamp.now(),author:{displayName:fD.auth().currentUser.displayName||"",photoURL:fD.auth().currentUser.photoURL||"",uid:fD.auth().currentUser.uid,email:fD.auth().currentUser.email},imageUrl:i}).then((()=>{f(!1),e("/posts")}))}))}))},children:[(0,pD.jsx)(Sc,{src:m,size:"small",floated:"left"}),(0,pD.jsx)(Uc,{basic:!0,as:"label",htmlFor:"post-image",children:"\u4e0a\u50b3\u6587\u7ae0\u5716\u7247"}),(0,pD.jsx)(oL.Input,{type:"file",id:"post-image",style:{display:"none"},onChange:e=>h(e.target.files[0])}),(0,pD.jsx)(oL.Input,{placeholder:"\u8f38\u5165\u6587\u7ae0\u6a19\u984c",value:t,onChange:e=>n(e.target.value)}),(0,pD.jsx)(oL.TextArea,{placeholder:"\u8f38\u5165\u6587\u7ae0\u5167\u5bb9",value:r,onChange:e=>s(e.target.value)}),(0,pD.jsx)(oL.Dropdown,{placeholder:"\u9078\u64c7\u6587\u7ae0\u4e3b\u984c",options:p,selection:!0,value:c,onChange:(e,t)=>{let{value:n}=t;return l(n)}}),(0,pD.jsx)(oL.Button,{loading:d,children:"\u9001\u51fa"})]})]})};function ZF(e){var t=e.children,n=e.className,r=e.compact,s=e.content,o=e.horizontal,a=e.piled,c=e.raised,l=e.size,u=e.stacked,h=mi("ui",l,yi(r,"compact"),yi(o,"horizontal"),yi(a,"piled"),yi(c,"raised"),yi(u,"stacked"),"segments",n),d=Si(ZF,e),f=ki(ZF,e);return i.createElement(f,xe({},d,{className:h}),Ai(t)?s:t)}ZF.handledProps=["as","children","className","compact","content","horizontal","piled","raised","size","stacked"],ZF.propTypes={};const eU=ZF;function tU(e){var t=e.children,n=e.className,r=e.content,s=mi("inline",n),o=Si(tU,e),a=ki(tU,e);return i.createElement(a,xe({},o,{className:s}),Ai(t)?r:t)}tU.handledProps=["as","children","className","content"],tU.propTypes={};const nU=tU;function rU(e){var t=e.attached,n=e.basic,r=e.children,s=e.circular,o=e.className,a=e.clearing,c=e.color,l=e.compact,u=e.content,h=e.disabled,d=e.floated,f=e.inverted,p=e.loading,m=e.placeholder,g=e.padded,v=e.piled,y=e.raised,w=e.secondary,b=e.size,_=e.stacked,E=e.tertiary,I=e.textAlign,T=e.vertical,S=mi("ui",c,b,yi(n,"basic"),yi(s,"circular"),yi(a,"clearing"),yi(l,"compact"),yi(h,"disabled"),yi(f,"inverted"),yi(p,"loading"),yi(m,"placeholder"),yi(v,"piled"),yi(y,"raised"),yi(w,"secondary"),yi(_,"stacked"),yi(E,"tertiary"),yi(T,"vertical"),bi(t,"attached"),bi(g,"padded"),Ei(I),wi(d,"floated"),"segment",o),k=Si(rU,e),C=ki(rU,e);return i.createElement(C,xe({},k,{className:S}),Ai(r)?u:r)}rU.handledProps=["as","attached","basic","children","circular","className","clearing","color","compact","content","disabled","floated","inverted","loading","padded","piled","placeholder","raised","secondary","size","stacked","tertiary","textAlign","vertical"],rU.Group=eU,rU.Inline=nU,rU.propTypes={};const iU=rU;function sU(e){var t=e.active,n=e.className,r=e.children,s=e.content,o=mi(yi(t,"active"),n),a=Si(sU,e),c=ki(sU,e);return i.createElement(c,xe({},a,{className:o}),Ai(r)?s:r)}sU.handledProps=["active","as","children","className","content"],sU.defaultProps={as:"a"},sU.propTypes={};const oU=sU;function aU(e){var t=e.className,n=e.children,r=e.content,s=mi("actions",t),o=Si(aU,e),a=ki(aU,e);return i.createElement(a,xe({},o,{className:s}),Ai(n)?r:n)}aU.handledProps=["as","children","className","content"],aU.propTypes={};const cU=aU;function lU(e){var t=e.className,n=e.children,r=e.content,s=mi("author",t),o=Si(lU,e),a=ki(lU,e);return i.createElement(a,xe({},o,{className:s}),Ai(n)?r:n)}lU.handledProps=["as","children","className","content"],lU.propTypes={};const uU=lU;function hU(e){var t=e.className,n=e.src,r=mi("avatar",t),s=Si(hU,e),o=sc(s,{htmlProps:ic}),a=o[0],c=o[1],l=ki(hU,e);return i.createElement(l,xe({},c,{className:r}),rs(n,{autoGenerateKey:!1,defaultProps:a}))}hU.handledProps=["as","className","src"],hU.propTypes={};const dU=hU;function fU(e){var t=e.className,n=e.children,r=e.content,s=mi(t,"content"),o=Si(fU,e),a=ki(fU,e);return i.createElement(a,xe({},o,{className:s}),Ai(n)?r:n)}fU.handledProps=["as","children","className","content"],fU.propTypes={};const pU=fU;function mU(e){var t=e.className,n=e.children,r=e.collapsed,s=e.content,o=e.minimal,a=e.size,c=e.threaded,l=mi("ui",a,yi(r,"collapsed"),yi(o,"minimal"),yi(c,"threaded"),"comments",t),u=Si(mU,e),h=ki(mU,e);return i.createElement(h,xe({},u,{className:l}),Ai(n)?s:n)}mU.handledProps=["as","children","className","collapsed","content","minimal","size","threaded"],mU.propTypes={};const gU=mU;function vU(e){var t=e.className,n=e.children,r=e.content,s=mi("metadata",t),o=Si(vU,e),a=ki(vU,e);return i.createElement(a,xe({},o,{className:s}),Ai(n)?r:n)}vU.handledProps=["as","children","className","content"],vU.propTypes={};const yU=vU;function wU(e){var t=e.className,n=e.children,r=e.content,s=mi(t,"text"),o=Si(wU,e),a=ki(wU,e);return i.createElement(a,xe({},o,{className:s}),Ai(n)?r:n)}wU.handledProps=["as","children","className","content"],wU.propTypes={};const bU=wU;function _U(e){var t=e.className,n=e.children,r=e.collapsed,s=e.content,o=mi(yi(r,"collapsed"),"comment",t),a=Si(_U,e),c=ki(_U,e);return i.createElement(c,xe({},a,{className:o}),Ai(n)?s:n)}_U.handledProps=["as","children","className","collapsed","content"],_U.propTypes={},_U.Author=uU,_U.Action=oU,_U.Actions=cU,_U.Avatar=dU,_U.Content=pU,_U.Group=gU,_U.Metadata=yU,_U.Text=bU;const EU=_U;const IU=function(){var e,t,n,r;const{postId:s}=function(){let{matches:e}=i.useContext(J),t=e[e.length-1];return t?t.params:{}}(),[o,a]=i.useState({author:{}}),[c,l]=i.useState(""),[u,h]=i.useState(!1),[d,f]=i.useState([]);function p(e,t){const n=fD.auth().currentUser.uid;fD.firestore().collection("posts").doc(s).update({[t]:e?fD.firestore.FieldValue.arrayRemove(n):fD.firestore.FieldValue.arrayUnion(n)})}i.useEffect((()=>{fD.firestore().collection("posts").doc(s).onSnapshot((e=>{const t=e.data();a(t)}))}),[]),i.useEffect((()=>{fD.firestore().collection("posts").doc(s).collection("comments").orderBy("createdAt").onSnapshot((e=>{const t=e.docs.map((e=>e.data()));f(t)}))}),[]);const m=null===(e=o.collectedBy)||void 0===e?void 0:e.includes(fD.auth().currentUser.uid),g=null===(t=o.likedBy)||void 0===t?void 0:t.includes(fD.auth().currentUser.uid);return(0,pD.jsx)(vD,{children:(0,pD.jsx)(EL,{children:(0,pD.jsxs)(EL.Row,{children:[(0,pD.jsxs)(EL.Column,{width:3,children:[" ",(0,pD.jsx)(ZL,{})," "]}),(0,pD.jsxs)(EL.Column,{width:10,children:[o.author.photoURL?(0,pD.jsx)(Sc,{src:o.author.photoURL,avatar:!0}):(0,pD.jsx)(po,{name:"user circle"}),o.author.displayName||"\u4f7f\u7528\u8005",(0,pD.jsxs)(oM,{children:[o.title,(0,pD.jsxs)(oM.Subheader,{children:[o.topic,"\u3002",null===(n=o.createdAt)||void 0===n?void 0:n.toDate().toLocaleDateString()]})]}),(0,pD.jsx)(Sc,{src:o.imageUrl}),(0,pD.jsx)(iU,{basic:!0,vertical:!0,children:o.content}),(0,pD.jsxs)(iU,{basic:!0,vertical:!0,children:["\u7559\u8a00 ",o.commentsCount||0,"\u3002\u8b9a ",(null===(r=o.likedBy)||void 0===r?void 0:r.length)||0," \u3002",(0,pD.jsx)(po,{name:"thumbs up".concat(g?"":" outline"," "),color:g?"blue":"grey",link:!0,onClick:()=>p(g,"likedBy")}),"\u3002",(0,pD.jsx)(po,{name:"bookmark".concat(m?"":" outline"," "),color:m?"blue":"grey",link:!0,onClick:()=>p(m,"collectedBy")})]}),(0,pD.jsxs)(EU.Group,{children:[(0,pD.jsxs)(oL,{children:[(0,pD.jsx)(oL.TextArea,{value:c,onChange:e=>l(e.target.value)}),(0,pD.jsx)(oL.Button,{onClick:function(){h(!0);const e=fD.firestore(),t=e.batch(),n=e.collection("posts").doc(s);t.update(n,{commentsCount:fD.firestore.FieldValue.increment(1)});const r=n.collection("comments").doc();t.set(r,{content:c,createdAt:fD.firestore.Timestamp.now(),author:{uid:fD.auth().currentUser.uid,displayName:fD.auth().currentUser.displayName||"",photoURL:fD.auth().currentUser.photoURL||""}}),t.commit().then((()=>{l(""),h(!1)}))},loading:u,children:"\u7559\u8a00"})]}),(0,pD.jsxs)(oM,{children:["\u5171 ",o.commentsCount||0," \u5247\u7559\u8a00 "]}),d.map((e=>(0,pD.jsxs)(EU,{children:[(0,pD.jsx)(EU.Avatar,{src:e.author.photoURL}),(0,pD.jsxs)(EU.Content,{children:[(0,pD.jsx)(EU.Author,{as:"span",children:e.author.displayName||"\u4f7f\u7528\u8005"}),(0,pD.jsxs)(EU.Metadata,{children:[" ",e.createdAt.toDate().toLocaleString()," "]}),(0,pD.jsx)(EU.Text,{children:e.content})]})]},o.id)))]})]}),(0,pD.jsx)(EL.Column,{width:3,children:"789"})]})})})};const TU=function(){return(0,pD.jsx)(vD,{children:(0,pD.jsx)(EL,{children:(0,pD.jsxs)(EL.Row,{children:[(0,pD.jsxs)(EL.Column,{width:3,children:[" ",(0,pD.jsx)(ZL,{})," "]}),(0,pD.jsx)(EL.Column,{width:10}),(0,pD.jsx)(EL.Column,{width:3,children:"789"})]})})})};const SU=function(){return(0,pD.jsxs)(Ee,{children:[(0,pD.jsx)(mD,{}),(0,pD.jsxs)(ge,{children:[(0,pD.jsx)(pe,{path:"/",element:"\u9996\u9801"}),(0,pD.jsx)(pe,{path:"/posts",element:(0,pD.jsx)(eM,{})}),(0,pD.jsx)(pe,{path:"/signin",element:(0,pD.jsx)(gL,{})}),(0,pD.jsx)(pe,{path:"/new-post",element:(0,pD.jsx)(XF,{})}),(0,pD.jsx)(pe,{path:"/posts/:postId",element:(0,pD.jsx)(IU,{})}),(0,pD.jsx)(pe,{path:"/gamenews",element:(0,pD.jsx)(TU,{})})]})]})};r.createRoot(document.getElementById("root")).render((0,pD.jsx)(SU,{}))})()})();
//# sourceMappingURL=main.6e3fa6f4.js.map